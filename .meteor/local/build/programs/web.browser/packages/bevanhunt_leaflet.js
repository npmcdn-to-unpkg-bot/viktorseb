//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
// Source maps are supported by all recent versions of Chrome, Safari,  //
// and Firefox, and by Internet Explorer 11.                            //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {

/* Imports */
var Meteor = Package.meteor.Meteor;
var global = Package.meteor.global;
var meteorEnv = Package.meteor.meteorEnv;

(function(){

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                  //
// packages/bevanhunt_leaflet/.npm/package/node_modules/leaflet/dist/leaflet-src.js                                 //
//                                                                                                                  //
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                    //
/*                                                                                                                  // 1
 Leaflet, a JavaScript library for mobile-friendly interactive maps. http://leafletjs.com                           // 2
 (c) 2010-2013, Vladimir Agafonkin                                                                                  // 3
 (c) 2010-2011, CloudMade                                                                                           // 4
*/                                                                                                                  // 5
(function (window, document, undefined) {                                                                           // 6
var oldL = window.L,                                                                                                // 7
    L = {};                                                                                                         // 8
                                                                                                                    // 9
L.version = '0.7.7';                                                                                                // 10
                                                                                                                    // 11
// define Leaflet for Node module pattern loaders, including Browserify                                             // 12
if (typeof module === 'object' && typeof module.exports === 'object') {                                             // 13
	module.exports = L;                                                                                                // 14
                                                                                                                    // 15
// define Leaflet as an AMD module                                                                                  // 16
} else if (typeof define === 'function' && define.amd) {                                                            // 17
	define(L);                                                                                                         // 18
}                                                                                                                   // 19
                                                                                                                    // 20
// define Leaflet as a global L variable, saving the original L to restore later if needed                          // 21
                                                                                                                    // 22
L.noConflict = function () {                                                                                        // 23
	window.L = oldL;                                                                                                   // 24
	return this;                                                                                                       // 25
};                                                                                                                  // 26
                                                                                                                    // 27
window.L = L;                                                                                                       // 28
                                                                                                                    // 29
                                                                                                                    // 30
/*                                                                                                                  // 31
 * L.Util contains various utility functions used throughout Leaflet code.                                          // 32
 */                                                                                                                 // 33
                                                                                                                    // 34
L.Util = {                                                                                                          // 35
	extend: function (dest) { // (Object[, Object, ...]) ->                                                            // 36
		var sources = Array.prototype.slice.call(arguments, 1),                                                           // 37
		    i, j, len, src;                                                                                               // 38
                                                                                                                    // 39
		for (j = 0, len = sources.length; j < len; j++) {                                                                 // 40
			src = sources[j] || {};                                                                                          // 41
			for (i in src) {                                                                                                 // 42
				if (src.hasOwnProperty(i)) {                                                                                    // 43
					dest[i] = src[i];                                                                                              // 44
				}                                                                                                               // 45
			}                                                                                                                // 46
		}                                                                                                                 // 47
		return dest;                                                                                                      // 48
	},                                                                                                                 // 49
                                                                                                                    // 50
	bind: function (fn, obj) { // (Function, Object) -> Function                                                       // 51
		var args = arguments.length > 2 ? Array.prototype.slice.call(arguments, 2) : null;                                // 52
		return function () {                                                                                              // 53
			return fn.apply(obj, args || arguments);                                                                         // 54
		};                                                                                                                // 55
	},                                                                                                                 // 56
                                                                                                                    // 57
	stamp: (function () {                                                                                              // 58
		var lastId = 0,                                                                                                   // 59
		    key = '_leaflet_id';                                                                                          // 60
		return function (obj) {                                                                                           // 61
			obj[key] = obj[key] || ++lastId;                                                                                 // 62
			return obj[key];                                                                                                 // 63
		};                                                                                                                // 64
	}()),                                                                                                              // 65
                                                                                                                    // 66
	invokeEach: function (obj, method, context) {                                                                      // 67
		var i, args;                                                                                                      // 68
                                                                                                                    // 69
		if (typeof obj === 'object') {                                                                                    // 70
			args = Array.prototype.slice.call(arguments, 3);                                                                 // 71
                                                                                                                    // 72
			for (i in obj) {                                                                                                 // 73
				method.apply(context, [i, obj[i]].concat(args));                                                                // 74
			}                                                                                                                // 75
			return true;                                                                                                     // 76
		}                                                                                                                 // 77
                                                                                                                    // 78
		return false;                                                                                                     // 79
	},                                                                                                                 // 80
                                                                                                                    // 81
	limitExecByInterval: function (fn, time, context) {                                                                // 82
		var lock, execOnUnlock;                                                                                           // 83
                                                                                                                    // 84
		return function wrapperFn() {                                                                                     // 85
			var args = arguments;                                                                                            // 86
                                                                                                                    // 87
			if (lock) {                                                                                                      // 88
				execOnUnlock = true;                                                                                            // 89
				return;                                                                                                         // 90
			}                                                                                                                // 91
                                                                                                                    // 92
			lock = true;                                                                                                     // 93
                                                                                                                    // 94
			setTimeout(function () {                                                                                         // 95
				lock = false;                                                                                                   // 96
                                                                                                                    // 97
				if (execOnUnlock) {                                                                                             // 98
					wrapperFn.apply(context, args);                                                                                // 99
					execOnUnlock = false;                                                                                          // 100
				}                                                                                                               // 101
			}, time);                                                                                                        // 102
                                                                                                                    // 103
			fn.apply(context, args);                                                                                         // 104
		};                                                                                                                // 105
	},                                                                                                                 // 106
                                                                                                                    // 107
	falseFn: function () {                                                                                             // 108
		return false;                                                                                                     // 109
	},                                                                                                                 // 110
                                                                                                                    // 111
	formatNum: function (num, digits) {                                                                                // 112
		var pow = Math.pow(10, digits || 5);                                                                              // 113
		return Math.round(num * pow) / pow;                                                                               // 114
	},                                                                                                                 // 115
                                                                                                                    // 116
	trim: function (str) {                                                                                             // 117
		return str.trim ? str.trim() : str.replace(/^\s+|\s+$/g, '');                                                     // 118
	},                                                                                                                 // 119
                                                                                                                    // 120
	splitWords: function (str) {                                                                                       // 121
		return L.Util.trim(str).split(/\s+/);                                                                             // 122
	},                                                                                                                 // 123
                                                                                                                    // 124
	setOptions: function (obj, options) {                                                                              // 125
		obj.options = L.extend({}, obj.options, options);                                                                 // 126
		return obj.options;                                                                                               // 127
	},                                                                                                                 // 128
                                                                                                                    // 129
	getParamString: function (obj, existingUrl, uppercase) {                                                           // 130
		var params = [];                                                                                                  // 131
		for (var i in obj) {                                                                                              // 132
			params.push(encodeURIComponent(uppercase ? i.toUpperCase() : i) + '=' + encodeURIComponent(obj[i]));             // 133
		}                                                                                                                 // 134
		return ((!existingUrl || existingUrl.indexOf('?') === -1) ? '?' : '&') + params.join('&');                        // 135
	},                                                                                                                 // 136
	template: function (str, data) {                                                                                   // 137
		return str.replace(/\{ *([\w_]+) *\}/g, function (str, key) {                                                     // 138
			var value = data[key];                                                                                           // 139
			if (value === undefined) {                                                                                       // 140
				throw new Error('No value provided for variable ' + str);                                                       // 141
			} else if (typeof value === 'function') {                                                                        // 142
				value = value(data);                                                                                            // 143
			}                                                                                                                // 144
			return value;                                                                                                    // 145
		});                                                                                                               // 146
	},                                                                                                                 // 147
                                                                                                                    // 148
	isArray: Array.isArray || function (obj) {                                                                         // 149
		return (Object.prototype.toString.call(obj) === '[object Array]');                                                // 150
	},                                                                                                                 // 151
                                                                                                                    // 152
	emptyImageUrl: 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs='                                        // 153
};                                                                                                                  // 154
                                                                                                                    // 155
(function () {                                                                                                      // 156
                                                                                                                    // 157
	// inspired by http://paulirish.com/2011/requestanimationframe-for-smart-animating/                                // 158
                                                                                                                    // 159
	function getPrefixed(name) {                                                                                       // 160
		var i, fn,                                                                                                        // 161
		    prefixes = ['webkit', 'moz', 'o', 'ms'];                                                                      // 162
                                                                                                                    // 163
		for (i = 0; i < prefixes.length && !fn; i++) {                                                                    // 164
			fn = window[prefixes[i] + name];                                                                                 // 165
		}                                                                                                                 // 166
                                                                                                                    // 167
		return fn;                                                                                                        // 168
	}                                                                                                                  // 169
                                                                                                                    // 170
	var lastTime = 0;                                                                                                  // 171
                                                                                                                    // 172
	function timeoutDefer(fn) {                                                                                        // 173
		var time = +new Date(),                                                                                           // 174
		    timeToCall = Math.max(0, 16 - (time - lastTime));                                                             // 175
                                                                                                                    // 176
		lastTime = time + timeToCall;                                                                                     // 177
		return window.setTimeout(fn, timeToCall);                                                                         // 178
	}                                                                                                                  // 179
                                                                                                                    // 180
	var requestFn = window.requestAnimationFrame ||                                                                    // 181
	        getPrefixed('RequestAnimationFrame') || timeoutDefer;                                                      // 182
                                                                                                                    // 183
	var cancelFn = window.cancelAnimationFrame ||                                                                      // 184
	        getPrefixed('CancelAnimationFrame') ||                                                                     // 185
	        getPrefixed('CancelRequestAnimationFrame') ||                                                              // 186
	        function (id) { window.clearTimeout(id); };                                                                // 187
                                                                                                                    // 188
                                                                                                                    // 189
	L.Util.requestAnimFrame = function (fn, context, immediate, element) {                                             // 190
		fn = L.bind(fn, context);                                                                                         // 191
                                                                                                                    // 192
		if (immediate && requestFn === timeoutDefer) {                                                                    // 193
			fn();                                                                                                            // 194
		} else {                                                                                                          // 195
			return requestFn.call(window, fn, element);                                                                      // 196
		}                                                                                                                 // 197
	};                                                                                                                 // 198
                                                                                                                    // 199
	L.Util.cancelAnimFrame = function (id) {                                                                           // 200
		if (id) {                                                                                                         // 201
			cancelFn.call(window, id);                                                                                       // 202
		}                                                                                                                 // 203
	};                                                                                                                 // 204
                                                                                                                    // 205
}());                                                                                                               // 206
                                                                                                                    // 207
// shortcuts for most used utility functions                                                                        // 208
L.extend = L.Util.extend;                                                                                           // 209
L.bind = L.Util.bind;                                                                                               // 210
L.stamp = L.Util.stamp;                                                                                             // 211
L.setOptions = L.Util.setOptions;                                                                                   // 212
                                                                                                                    // 213
                                                                                                                    // 214
/*                                                                                                                  // 215
 * L.Class powers the OOP facilities of the library.                                                                // 216
 * Thanks to John Resig and Dean Edwards for inspiration!                                                           // 217
 */                                                                                                                 // 218
                                                                                                                    // 219
L.Class = function () {};                                                                                           // 220
                                                                                                                    // 221
L.Class.extend = function (props) {                                                                                 // 222
                                                                                                                    // 223
	// extended class with the new prototype                                                                           // 224
	var NewClass = function () {                                                                                       // 225
                                                                                                                    // 226
		// call the constructor                                                                                           // 227
		if (this.initialize) {                                                                                            // 228
			this.initialize.apply(this, arguments);                                                                          // 229
		}                                                                                                                 // 230
                                                                                                                    // 231
		// call all constructor hooks                                                                                     // 232
		if (this._initHooks) {                                                                                            // 233
			this.callInitHooks();                                                                                            // 234
		}                                                                                                                 // 235
	};                                                                                                                 // 236
                                                                                                                    // 237
	// instantiate class without calling constructor                                                                   // 238
	var F = function () {};                                                                                            // 239
	F.prototype = this.prototype;                                                                                      // 240
                                                                                                                    // 241
	var proto = new F();                                                                                               // 242
	proto.constructor = NewClass;                                                                                      // 243
                                                                                                                    // 244
	NewClass.prototype = proto;                                                                                        // 245
                                                                                                                    // 246
	//inherit parent's statics                                                                                         // 247
	for (var i in this) {                                                                                              // 248
		if (this.hasOwnProperty(i) && i !== 'prototype') {                                                                // 249
			NewClass[i] = this[i];                                                                                           // 250
		}                                                                                                                 // 251
	}                                                                                                                  // 252
                                                                                                                    // 253
	// mix static properties into the class                                                                            // 254
	if (props.statics) {                                                                                               // 255
		L.extend(NewClass, props.statics);                                                                                // 256
		delete props.statics;                                                                                             // 257
	}                                                                                                                  // 258
                                                                                                                    // 259
	// mix includes into the prototype                                                                                 // 260
	if (props.includes) {                                                                                              // 261
		L.Util.extend.apply(null, [proto].concat(props.includes));                                                        // 262
		delete props.includes;                                                                                            // 263
	}                                                                                                                  // 264
                                                                                                                    // 265
	// merge options                                                                                                   // 266
	if (props.options && proto.options) {                                                                              // 267
		props.options = L.extend({}, proto.options, props.options);                                                       // 268
	}                                                                                                                  // 269
                                                                                                                    // 270
	// mix given properties into the prototype                                                                         // 271
	L.extend(proto, props);                                                                                            // 272
                                                                                                                    // 273
	proto._initHooks = [];                                                                                             // 274
                                                                                                                    // 275
	var parent = this;                                                                                                 // 276
	// jshint camelcase: false                                                                                         // 277
	NewClass.__super__ = parent.prototype;                                                                             // 278
                                                                                                                    // 279
	// add method for calling all hooks                                                                                // 280
	proto.callInitHooks = function () {                                                                                // 281
                                                                                                                    // 282
		if (this._initHooksCalled) { return; }                                                                            // 283
                                                                                                                    // 284
		if (parent.prototype.callInitHooks) {                                                                             // 285
			parent.prototype.callInitHooks.call(this);                                                                       // 286
		}                                                                                                                 // 287
                                                                                                                    // 288
		this._initHooksCalled = true;                                                                                     // 289
                                                                                                                    // 290
		for (var i = 0, len = proto._initHooks.length; i < len; i++) {                                                    // 291
			proto._initHooks[i].call(this);                                                                                  // 292
		}                                                                                                                 // 293
	};                                                                                                                 // 294
                                                                                                                    // 295
	return NewClass;                                                                                                   // 296
};                                                                                                                  // 297
                                                                                                                    // 298
                                                                                                                    // 299
// method for adding properties to prototype                                                                        // 300
L.Class.include = function (props) {                                                                                // 301
	L.extend(this.prototype, props);                                                                                   // 302
};                                                                                                                  // 303
                                                                                                                    // 304
// merge new default options to the Class                                                                           // 305
L.Class.mergeOptions = function (options) {                                                                         // 306
	L.extend(this.prototype.options, options);                                                                         // 307
};                                                                                                                  // 308
                                                                                                                    // 309
// add a constructor hook                                                                                           // 310
L.Class.addInitHook = function (fn) { // (Function) || (String, args...)                                            // 311
	var args = Array.prototype.slice.call(arguments, 1);                                                               // 312
                                                                                                                    // 313
	var init = typeof fn === 'function' ? fn : function () {                                                           // 314
		this[fn].apply(this, args);                                                                                       // 315
	};                                                                                                                 // 316
                                                                                                                    // 317
	this.prototype._initHooks = this.prototype._initHooks || [];                                                       // 318
	this.prototype._initHooks.push(init);                                                                              // 319
};                                                                                                                  // 320
                                                                                                                    // 321
                                                                                                                    // 322
/*                                                                                                                  // 323
 * L.Mixin.Events is used to add custom events functionality to Leaflet classes.                                    // 324
 */                                                                                                                 // 325
                                                                                                                    // 326
var eventsKey = '_leaflet_events';                                                                                  // 327
                                                                                                                    // 328
L.Mixin = {};                                                                                                       // 329
                                                                                                                    // 330
L.Mixin.Events = {                                                                                                  // 331
                                                                                                                    // 332
	addEventListener: function (types, fn, context) { // (String, Function[, Object]) or (Object[, Object])            // 333
                                                                                                                    // 334
		// types can be a map of types/handlers                                                                           // 335
		if (L.Util.invokeEach(types, this.addEventListener, this, fn, context)) { return this; }                          // 336
                                                                                                                    // 337
		var events = this[eventsKey] = this[eventsKey] || {},                                                             // 338
		    contextId = context && context !== this && L.stamp(context),                                                  // 339
		    i, len, event, type, indexKey, indexLenKey, typeIndex;                                                        // 340
                                                                                                                    // 341
		// types can be a string of space-separated words                                                                 // 342
		types = L.Util.splitWords(types);                                                                                 // 343
                                                                                                                    // 344
		for (i = 0, len = types.length; i < len; i++) {                                                                   // 345
			event = {                                                                                                        // 346
				action: fn,                                                                                                     // 347
				context: context || this                                                                                        // 348
			};                                                                                                               // 349
			type = types[i];                                                                                                 // 350
                                                                                                                    // 351
			if (contextId) {                                                                                                 // 352
				// store listeners of a particular context in a separate hash (if it has an id)                                 // 353
				// gives a major performance boost when removing thousands of map layers                                        // 354
                                                                                                                    // 355
				indexKey = type + '_idx';                                                                                       // 356
				indexLenKey = indexKey + '_len';                                                                                // 357
                                                                                                                    // 358
				typeIndex = events[indexKey] = events[indexKey] || {};                                                          // 359
                                                                                                                    // 360
				if (!typeIndex[contextId]) {                                                                                    // 361
					typeIndex[contextId] = [];                                                                                     // 362
                                                                                                                    // 363
					// keep track of the number of keys in the index to quickly check if it's empty                                // 364
					events[indexLenKey] = (events[indexLenKey] || 0) + 1;                                                          // 365
				}                                                                                                               // 366
                                                                                                                    // 367
				typeIndex[contextId].push(event);                                                                               // 368
                                                                                                                    // 369
                                                                                                                    // 370
			} else {                                                                                                         // 371
				events[type] = events[type] || [];                                                                              // 372
				events[type].push(event);                                                                                       // 373
			}                                                                                                                // 374
		}                                                                                                                 // 375
                                                                                                                    // 376
		return this;                                                                                                      // 377
	},                                                                                                                 // 378
                                                                                                                    // 379
	hasEventListeners: function (type) { // (String) -> Boolean                                                        // 380
		var events = this[eventsKey];                                                                                     // 381
		return !!events && ((type in events && events[type].length > 0) ||                                                // 382
		                    (type + '_idx' in events && events[type + '_idx_len'] > 0));                                  // 383
	},                                                                                                                 // 384
                                                                                                                    // 385
	removeEventListener: function (types, fn, context) { // ([String, Function, Object]) or (Object[, Object])         // 386
                                                                                                                    // 387
		if (!this[eventsKey]) {                                                                                           // 388
			return this;                                                                                                     // 389
		}                                                                                                                 // 390
                                                                                                                    // 391
		if (!types) {                                                                                                     // 392
			return this.clearAllEventListeners();                                                                            // 393
		}                                                                                                                 // 394
                                                                                                                    // 395
		if (L.Util.invokeEach(types, this.removeEventListener, this, fn, context)) { return this; }                       // 396
                                                                                                                    // 397
		var events = this[eventsKey],                                                                                     // 398
		    contextId = context && context !== this && L.stamp(context),                                                  // 399
		    i, len, type, listeners, j, indexKey, indexLenKey, typeIndex, removed;                                        // 400
                                                                                                                    // 401
		types = L.Util.splitWords(types);                                                                                 // 402
                                                                                                                    // 403
		for (i = 0, len = types.length; i < len; i++) {                                                                   // 404
			type = types[i];                                                                                                 // 405
			indexKey = type + '_idx';                                                                                        // 406
			indexLenKey = indexKey + '_len';                                                                                 // 407
                                                                                                                    // 408
			typeIndex = events[indexKey];                                                                                    // 409
                                                                                                                    // 410
			if (!fn) {                                                                                                       // 411
				// clear all listeners for a type if function isn't specified                                                   // 412
				delete events[type];                                                                                            // 413
				delete events[indexKey];                                                                                        // 414
				delete events[indexLenKey];                                                                                     // 415
                                                                                                                    // 416
			} else {                                                                                                         // 417
				listeners = contextId && typeIndex ? typeIndex[contextId] : events[type];                                       // 418
                                                                                                                    // 419
				if (listeners) {                                                                                                // 420
					for (j = listeners.length - 1; j >= 0; j--) {                                                                  // 421
						if ((listeners[j].action === fn) && (!context || (listeners[j].context === context))) {                       // 422
							removed = listeners.splice(j, 1);                                                                            // 423
							// set the old action to a no-op, because it is possible                                                     // 424
							// that the listener is being iterated over as part of a dispatch                                            // 425
							removed[0].action = L.Util.falseFn;                                                                          // 426
						}                                                                                                             // 427
					}                                                                                                              // 428
                                                                                                                    // 429
					if (context && typeIndex && (listeners.length === 0)) {                                                        // 430
						delete typeIndex[contextId];                                                                                  // 431
						events[indexLenKey]--;                                                                                        // 432
					}                                                                                                              // 433
				}                                                                                                               // 434
			}                                                                                                                // 435
		}                                                                                                                 // 436
                                                                                                                    // 437
		return this;                                                                                                      // 438
	},                                                                                                                 // 439
                                                                                                                    // 440
	clearAllEventListeners: function () {                                                                              // 441
		delete this[eventsKey];                                                                                           // 442
		return this;                                                                                                      // 443
	},                                                                                                                 // 444
                                                                                                                    // 445
	fireEvent: function (type, data) { // (String[, Object])                                                           // 446
		if (!this.hasEventListeners(type)) {                                                                              // 447
			return this;                                                                                                     // 448
		}                                                                                                                 // 449
                                                                                                                    // 450
		var event = L.Util.extend({}, data, { type: type, target: this });                                                // 451
                                                                                                                    // 452
		var events = this[eventsKey],                                                                                     // 453
		    listeners, i, len, typeIndex, contextId;                                                                      // 454
                                                                                                                    // 455
		if (events[type]) {                                                                                               // 456
			// make sure adding/removing listeners inside other listeners won't cause infinite loop                          // 457
			listeners = events[type].slice();                                                                                // 458
                                                                                                                    // 459
			for (i = 0, len = listeners.length; i < len; i++) {                                                              // 460
				listeners[i].action.call(listeners[i].context, event);                                                          // 461
			}                                                                                                                // 462
		}                                                                                                                 // 463
                                                                                                                    // 464
		// fire event for the context-indexed listeners as well                                                           // 465
		typeIndex = events[type + '_idx'];                                                                                // 466
                                                                                                                    // 467
		for (contextId in typeIndex) {                                                                                    // 468
			listeners = typeIndex[contextId].slice();                                                                        // 469
                                                                                                                    // 470
			if (listeners) {                                                                                                 // 471
				for (i = 0, len = listeners.length; i < len; i++) {                                                             // 472
					listeners[i].action.call(listeners[i].context, event);                                                         // 473
				}                                                                                                               // 474
			}                                                                                                                // 475
		}                                                                                                                 // 476
                                                                                                                    // 477
		return this;                                                                                                      // 478
	},                                                                                                                 // 479
                                                                                                                    // 480
	addOneTimeEventListener: function (types, fn, context) {                                                           // 481
                                                                                                                    // 482
		if (L.Util.invokeEach(types, this.addOneTimeEventListener, this, fn, context)) { return this; }                   // 483
                                                                                                                    // 484
		var handler = L.bind(function () {                                                                                // 485
			this                                                                                                             // 486
			    .removeEventListener(types, fn, context)                                                                     // 487
			    .removeEventListener(types, handler, context);                                                               // 488
		}, this);                                                                                                         // 489
                                                                                                                    // 490
		return this                                                                                                       // 491
		    .addEventListener(types, fn, context)                                                                         // 492
		    .addEventListener(types, handler, context);                                                                   // 493
	}                                                                                                                  // 494
};                                                                                                                  // 495
                                                                                                                    // 496
L.Mixin.Events.on = L.Mixin.Events.addEventListener;                                                                // 497
L.Mixin.Events.off = L.Mixin.Events.removeEventListener;                                                            // 498
L.Mixin.Events.once = L.Mixin.Events.addOneTimeEventListener;                                                       // 499
L.Mixin.Events.fire = L.Mixin.Events.fireEvent;                                                                     // 500
                                                                                                                    // 501
                                                                                                                    // 502
/*                                                                                                                  // 503
 * L.Browser handles different browser and feature detections for internal Leaflet use.                             // 504
 */                                                                                                                 // 505
                                                                                                                    // 506
(function () {                                                                                                      // 507
                                                                                                                    // 508
	var ie = 'ActiveXObject' in window,                                                                                // 509
		ielt9 = ie && !document.addEventListener,                                                                         // 510
                                                                                                                    // 511
	    // terrible browser detection to work around Safari / iOS / Android browser bugs                               // 512
	    ua = navigator.userAgent.toLowerCase(),                                                                        // 513
	    webkit = ua.indexOf('webkit') !== -1,                                                                          // 514
	    chrome = ua.indexOf('chrome') !== -1,                                                                          // 515
	    phantomjs = ua.indexOf('phantom') !== -1,                                                                      // 516
	    android = ua.indexOf('android') !== -1,                                                                        // 517
	    android23 = ua.search('android [23]') !== -1,                                                                  // 518
		gecko = ua.indexOf('gecko') !== -1,                                                                               // 519
                                                                                                                    // 520
	    mobile = typeof orientation !== undefined + '',                                                                // 521
	    msPointer = !window.PointerEvent && window.MSPointerEvent,                                                     // 522
		pointer = (window.PointerEvent && window.navigator.pointerEnabled) ||                                             // 523
				  msPointer,                                                                                                    // 524
	    retina = ('devicePixelRatio' in window && window.devicePixelRatio > 1) ||                                      // 525
	             ('matchMedia' in window && window.matchMedia('(min-resolution:144dpi)') &&                            // 526
	              window.matchMedia('(min-resolution:144dpi)').matches),                                               // 527
                                                                                                                    // 528
	    doc = document.documentElement,                                                                                // 529
	    ie3d = ie && ('transition' in doc.style),                                                                      // 530
	    webkit3d = ('WebKitCSSMatrix' in window) && ('m11' in new window.WebKitCSSMatrix()) && !android23,             // 531
	    gecko3d = 'MozPerspective' in doc.style,                                                                       // 532
	    opera3d = 'OTransition' in doc.style,                                                                          // 533
	    any3d = !window.L_DISABLE_3D && (ie3d || webkit3d || gecko3d || opera3d) && !phantomjs;                        // 534
                                                                                                                    // 535
	var touch = !window.L_NO_TOUCH && !phantomjs && (pointer || 'ontouchstart' in window ||                            // 536
		(window.DocumentTouch && document instanceof window.DocumentTouch));                                              // 537
                                                                                                                    // 538
	L.Browser = {                                                                                                      // 539
		ie: ie,                                                                                                           // 540
		ielt9: ielt9,                                                                                                     // 541
		webkit: webkit,                                                                                                   // 542
		gecko: gecko && !webkit && !window.opera && !ie,                                                                  // 543
                                                                                                                    // 544
		android: android,                                                                                                 // 545
		android23: android23,                                                                                             // 546
                                                                                                                    // 547
		chrome: chrome,                                                                                                   // 548
                                                                                                                    // 549
		ie3d: ie3d,                                                                                                       // 550
		webkit3d: webkit3d,                                                                                               // 551
		gecko3d: gecko3d,                                                                                                 // 552
		opera3d: opera3d,                                                                                                 // 553
		any3d: any3d,                                                                                                     // 554
                                                                                                                    // 555
		mobile: mobile,                                                                                                   // 556
		mobileWebkit: mobile && webkit,                                                                                   // 557
		mobileWebkit3d: mobile && webkit3d,                                                                               // 558
		mobileOpera: mobile && window.opera,                                                                              // 559
                                                                                                                    // 560
		touch: touch,                                                                                                     // 561
		msPointer: msPointer,                                                                                             // 562
		pointer: pointer,                                                                                                 // 563
                                                                                                                    // 564
		retina: retina                                                                                                    // 565
	};                                                                                                                 // 566
                                                                                                                    // 567
}());                                                                                                               // 568
                                                                                                                    // 569
                                                                                                                    // 570
/*                                                                                                                  // 571
 * L.Point represents a point with x and y coordinates.                                                             // 572
 */                                                                                                                 // 573
                                                                                                                    // 574
L.Point = function (/*Number*/ x, /*Number*/ y, /*Boolean*/ round) {                                                // 575
	this.x = (round ? Math.round(x) : x);                                                                              // 576
	this.y = (round ? Math.round(y) : y);                                                                              // 577
};                                                                                                                  // 578
                                                                                                                    // 579
L.Point.prototype = {                                                                                               // 580
                                                                                                                    // 581
	clone: function () {                                                                                               // 582
		return new L.Point(this.x, this.y);                                                                               // 583
	},                                                                                                                 // 584
                                                                                                                    // 585
	// non-destructive, returns a new point                                                                            // 586
	add: function (point) {                                                                                            // 587
		return this.clone()._add(L.point(point));                                                                         // 588
	},                                                                                                                 // 589
                                                                                                                    // 590
	// destructive, used directly for performance in situations where it's safe to modify existing point               // 591
	_add: function (point) {                                                                                           // 592
		this.x += point.x;                                                                                                // 593
		this.y += point.y;                                                                                                // 594
		return this;                                                                                                      // 595
	},                                                                                                                 // 596
                                                                                                                    // 597
	subtract: function (point) {                                                                                       // 598
		return this.clone()._subtract(L.point(point));                                                                    // 599
	},                                                                                                                 // 600
                                                                                                                    // 601
	_subtract: function (point) {                                                                                      // 602
		this.x -= point.x;                                                                                                // 603
		this.y -= point.y;                                                                                                // 604
		return this;                                                                                                      // 605
	},                                                                                                                 // 606
                                                                                                                    // 607
	divideBy: function (num) {                                                                                         // 608
		return this.clone()._divideBy(num);                                                                               // 609
	},                                                                                                                 // 610
                                                                                                                    // 611
	_divideBy: function (num) {                                                                                        // 612
		this.x /= num;                                                                                                    // 613
		this.y /= num;                                                                                                    // 614
		return this;                                                                                                      // 615
	},                                                                                                                 // 616
                                                                                                                    // 617
	multiplyBy: function (num) {                                                                                       // 618
		return this.clone()._multiplyBy(num);                                                                             // 619
	},                                                                                                                 // 620
                                                                                                                    // 621
	_multiplyBy: function (num) {                                                                                      // 622
		this.x *= num;                                                                                                    // 623
		this.y *= num;                                                                                                    // 624
		return this;                                                                                                      // 625
	},                                                                                                                 // 626
                                                                                                                    // 627
	round: function () {                                                                                               // 628
		return this.clone()._round();                                                                                     // 629
	},                                                                                                                 // 630
                                                                                                                    // 631
	_round: function () {                                                                                              // 632
		this.x = Math.round(this.x);                                                                                      // 633
		this.y = Math.round(this.y);                                                                                      // 634
		return this;                                                                                                      // 635
	},                                                                                                                 // 636
                                                                                                                    // 637
	floor: function () {                                                                                               // 638
		return this.clone()._floor();                                                                                     // 639
	},                                                                                                                 // 640
                                                                                                                    // 641
	_floor: function () {                                                                                              // 642
		this.x = Math.floor(this.x);                                                                                      // 643
		this.y = Math.floor(this.y);                                                                                      // 644
		return this;                                                                                                      // 645
	},                                                                                                                 // 646
                                                                                                                    // 647
	distanceTo: function (point) {                                                                                     // 648
		point = L.point(point);                                                                                           // 649
                                                                                                                    // 650
		var x = point.x - this.x,                                                                                         // 651
		    y = point.y - this.y;                                                                                         // 652
                                                                                                                    // 653
		return Math.sqrt(x * x + y * y);                                                                                  // 654
	},                                                                                                                 // 655
                                                                                                                    // 656
	equals: function (point) {                                                                                         // 657
		point = L.point(point);                                                                                           // 658
                                                                                                                    // 659
		return point.x === this.x &&                                                                                      // 660
		       point.y === this.y;                                                                                        // 661
	},                                                                                                                 // 662
                                                                                                                    // 663
	contains: function (point) {                                                                                       // 664
		point = L.point(point);                                                                                           // 665
                                                                                                                    // 666
		return Math.abs(point.x) <= Math.abs(this.x) &&                                                                   // 667
		       Math.abs(point.y) <= Math.abs(this.y);                                                                     // 668
	},                                                                                                                 // 669
                                                                                                                    // 670
	toString: function () {                                                                                            // 671
		return 'Point(' +                                                                                                 // 672
		        L.Util.formatNum(this.x) + ', ' +                                                                         // 673
		        L.Util.formatNum(this.y) + ')';                                                                           // 674
	}                                                                                                                  // 675
};                                                                                                                  // 676
                                                                                                                    // 677
L.point = function (x, y, round) {                                                                                  // 678
	if (x instanceof L.Point) {                                                                                        // 679
		return x;                                                                                                         // 680
	}                                                                                                                  // 681
	if (L.Util.isArray(x)) {                                                                                           // 682
		return new L.Point(x[0], x[1]);                                                                                   // 683
	}                                                                                                                  // 684
	if (x === undefined || x === null) {                                                                               // 685
		return x;                                                                                                         // 686
	}                                                                                                                  // 687
	return new L.Point(x, y, round);                                                                                   // 688
};                                                                                                                  // 689
                                                                                                                    // 690
                                                                                                                    // 691
/*                                                                                                                  // 692
 * L.Bounds represents a rectangular area on the screen in pixel coordinates.                                       // 693
 */                                                                                                                 // 694
                                                                                                                    // 695
L.Bounds = function (a, b) { //(Point, Point) or Point[]                                                            // 696
	if (!a) { return; }                                                                                                // 697
                                                                                                                    // 698
	var points = b ? [a, b] : a;                                                                                       // 699
                                                                                                                    // 700
	for (var i = 0, len = points.length; i < len; i++) {                                                               // 701
		this.extend(points[i]);                                                                                           // 702
	}                                                                                                                  // 703
};                                                                                                                  // 704
                                                                                                                    // 705
L.Bounds.prototype = {                                                                                              // 706
	// extend the bounds to contain the given point                                                                    // 707
	extend: function (point) { // (Point)                                                                              // 708
		point = L.point(point);                                                                                           // 709
                                                                                                                    // 710
		if (!this.min && !this.max) {                                                                                     // 711
			this.min = point.clone();                                                                                        // 712
			this.max = point.clone();                                                                                        // 713
		} else {                                                                                                          // 714
			this.min.x = Math.min(point.x, this.min.x);                                                                      // 715
			this.max.x = Math.max(point.x, this.max.x);                                                                      // 716
			this.min.y = Math.min(point.y, this.min.y);                                                                      // 717
			this.max.y = Math.max(point.y, this.max.y);                                                                      // 718
		}                                                                                                                 // 719
		return this;                                                                                                      // 720
	},                                                                                                                 // 721
                                                                                                                    // 722
	getCenter: function (round) { // (Boolean) -> Point                                                                // 723
		return new L.Point(                                                                                               // 724
		        (this.min.x + this.max.x) / 2,                                                                            // 725
		        (this.min.y + this.max.y) / 2, round);                                                                    // 726
	},                                                                                                                 // 727
                                                                                                                    // 728
	getBottomLeft: function () { // -> Point                                                                           // 729
		return new L.Point(this.min.x, this.max.y);                                                                       // 730
	},                                                                                                                 // 731
                                                                                                                    // 732
	getTopRight: function () { // -> Point                                                                             // 733
		return new L.Point(this.max.x, this.min.y);                                                                       // 734
	},                                                                                                                 // 735
                                                                                                                    // 736
	getSize: function () {                                                                                             // 737
		return this.max.subtract(this.min);                                                                               // 738
	},                                                                                                                 // 739
                                                                                                                    // 740
	contains: function (obj) { // (Bounds) or (Point) -> Boolean                                                       // 741
		var min, max;                                                                                                     // 742
                                                                                                                    // 743
		if (typeof obj[0] === 'number' || obj instanceof L.Point) {                                                       // 744
			obj = L.point(obj);                                                                                              // 745
		} else {                                                                                                          // 746
			obj = L.bounds(obj);                                                                                             // 747
		}                                                                                                                 // 748
                                                                                                                    // 749
		if (obj instanceof L.Bounds) {                                                                                    // 750
			min = obj.min;                                                                                                   // 751
			max = obj.max;                                                                                                   // 752
		} else {                                                                                                          // 753
			min = max = obj;                                                                                                 // 754
		}                                                                                                                 // 755
                                                                                                                    // 756
		return (min.x >= this.min.x) &&                                                                                   // 757
		       (max.x <= this.max.x) &&                                                                                   // 758
		       (min.y >= this.min.y) &&                                                                                   // 759
		       (max.y <= this.max.y);                                                                                     // 760
	},                                                                                                                 // 761
                                                                                                                    // 762
	intersects: function (bounds) { // (Bounds) -> Boolean                                                             // 763
		bounds = L.bounds(bounds);                                                                                        // 764
                                                                                                                    // 765
		var min = this.min,                                                                                               // 766
		    max = this.max,                                                                                               // 767
		    min2 = bounds.min,                                                                                            // 768
		    max2 = bounds.max,                                                                                            // 769
		    xIntersects = (max2.x >= min.x) && (min2.x <= max.x),                                                         // 770
		    yIntersects = (max2.y >= min.y) && (min2.y <= max.y);                                                         // 771
                                                                                                                    // 772
		return xIntersects && yIntersects;                                                                                // 773
	},                                                                                                                 // 774
                                                                                                                    // 775
	isValid: function () {                                                                                             // 776
		return !!(this.min && this.max);                                                                                  // 777
	}                                                                                                                  // 778
};                                                                                                                  // 779
                                                                                                                    // 780
L.bounds = function (a, b) { // (Bounds) or (Point, Point) or (Point[])                                             // 781
	if (!a || a instanceof L.Bounds) {                                                                                 // 782
		return a;                                                                                                         // 783
	}                                                                                                                  // 784
	return new L.Bounds(a, b);                                                                                         // 785
};                                                                                                                  // 786
                                                                                                                    // 787
                                                                                                                    // 788
/*                                                                                                                  // 789
 * L.Transformation is an utility class to perform simple point transformations through a 2d-matrix.                // 790
 */                                                                                                                 // 791
                                                                                                                    // 792
L.Transformation = function (a, b, c, d) {                                                                          // 793
	this._a = a;                                                                                                       // 794
	this._b = b;                                                                                                       // 795
	this._c = c;                                                                                                       // 796
	this._d = d;                                                                                                       // 797
};                                                                                                                  // 798
                                                                                                                    // 799
L.Transformation.prototype = {                                                                                      // 800
	transform: function (point, scale) { // (Point, Number) -> Point                                                   // 801
		return this._transform(point.clone(), scale);                                                                     // 802
	},                                                                                                                 // 803
                                                                                                                    // 804
	// destructive transform (faster)                                                                                  // 805
	_transform: function (point, scale) {                                                                              // 806
		scale = scale || 1;                                                                                               // 807
		point.x = scale * (this._a * point.x + this._b);                                                                  // 808
		point.y = scale * (this._c * point.y + this._d);                                                                  // 809
		return point;                                                                                                     // 810
	},                                                                                                                 // 811
                                                                                                                    // 812
	untransform: function (point, scale) {                                                                             // 813
		scale = scale || 1;                                                                                               // 814
		return new L.Point(                                                                                               // 815
		        (point.x / scale - this._b) / this._a,                                                                    // 816
		        (point.y / scale - this._d) / this._c);                                                                   // 817
	}                                                                                                                  // 818
};                                                                                                                  // 819
                                                                                                                    // 820
                                                                                                                    // 821
/*                                                                                                                  // 822
 * L.DomUtil contains various utility functions for working with DOM.                                               // 823
 */                                                                                                                 // 824
                                                                                                                    // 825
L.DomUtil = {                                                                                                       // 826
	get: function (id) {                                                                                               // 827
		return (typeof id === 'string' ? document.getElementById(id) : id);                                               // 828
	},                                                                                                                 // 829
                                                                                                                    // 830
	getStyle: function (el, style) {                                                                                   // 831
                                                                                                                    // 832
		var value = el.style[style];                                                                                      // 833
                                                                                                                    // 834
		if (!value && el.currentStyle) {                                                                                  // 835
			value = el.currentStyle[style];                                                                                  // 836
		}                                                                                                                 // 837
                                                                                                                    // 838
		if ((!value || value === 'auto') && document.defaultView) {                                                       // 839
			var css = document.defaultView.getComputedStyle(el, null);                                                       // 840
			value = css ? css[style] : null;                                                                                 // 841
		}                                                                                                                 // 842
                                                                                                                    // 843
		return value === 'auto' ? null : value;                                                                           // 844
	},                                                                                                                 // 845
                                                                                                                    // 846
	getViewportOffset: function (element) {                                                                            // 847
                                                                                                                    // 848
		var top = 0,                                                                                                      // 849
		    left = 0,                                                                                                     // 850
		    el = element,                                                                                                 // 851
		    docBody = document.body,                                                                                      // 852
		    docEl = document.documentElement,                                                                             // 853
		    pos;                                                                                                          // 854
                                                                                                                    // 855
		do {                                                                                                              // 856
			top  += el.offsetTop  || 0;                                                                                      // 857
			left += el.offsetLeft || 0;                                                                                      // 858
                                                                                                                    // 859
			//add borders                                                                                                    // 860
			top += parseInt(L.DomUtil.getStyle(el, 'borderTopWidth'), 10) || 0;                                              // 861
			left += parseInt(L.DomUtil.getStyle(el, 'borderLeftWidth'), 10) || 0;                                            // 862
                                                                                                                    // 863
			pos = L.DomUtil.getStyle(el, 'position');                                                                        // 864
                                                                                                                    // 865
			if (el.offsetParent === docBody && pos === 'absolute') { break; }                                                // 866
                                                                                                                    // 867
			if (pos === 'fixed') {                                                                                           // 868
				top  += docBody.scrollTop  || docEl.scrollTop  || 0;                                                            // 869
				left += docBody.scrollLeft || docEl.scrollLeft || 0;                                                            // 870
				break;                                                                                                          // 871
			}                                                                                                                // 872
                                                                                                                    // 873
			if (pos === 'relative' && !el.offsetLeft) {                                                                      // 874
				var width = L.DomUtil.getStyle(el, 'width'),                                                                    // 875
				    maxWidth = L.DomUtil.getStyle(el, 'max-width'),                                                             // 876
				    r = el.getBoundingClientRect();                                                                             // 877
                                                                                                                    // 878
				if (width !== 'none' || maxWidth !== 'none') {                                                                  // 879
					left += r.left + el.clientLeft;                                                                                // 880
				}                                                                                                               // 881
                                                                                                                    // 882
				//calculate full y offset since we're breaking out of the loop                                                  // 883
				top += r.top + (docBody.scrollTop  || docEl.scrollTop  || 0);                                                   // 884
                                                                                                                    // 885
				break;                                                                                                          // 886
			}                                                                                                                // 887
                                                                                                                    // 888
			el = el.offsetParent;                                                                                            // 889
                                                                                                                    // 890
		} while (el);                                                                                                     // 891
                                                                                                                    // 892
		el = element;                                                                                                     // 893
                                                                                                                    // 894
		do {                                                                                                              // 895
			if (el === docBody) { break; }                                                                                   // 896
                                                                                                                    // 897
			top  -= el.scrollTop  || 0;                                                                                      // 898
			left -= el.scrollLeft || 0;                                                                                      // 899
                                                                                                                    // 900
			el = el.parentNode;                                                                                              // 901
		} while (el);                                                                                                     // 902
                                                                                                                    // 903
		return new L.Point(left, top);                                                                                    // 904
	},                                                                                                                 // 905
                                                                                                                    // 906
	documentIsLtr: function () {                                                                                       // 907
		if (!L.DomUtil._docIsLtrCached) {                                                                                 // 908
			L.DomUtil._docIsLtrCached = true;                                                                                // 909
			L.DomUtil._docIsLtr = L.DomUtil.getStyle(document.body, 'direction') === 'ltr';                                  // 910
		}                                                                                                                 // 911
		return L.DomUtil._docIsLtr;                                                                                       // 912
	},                                                                                                                 // 913
                                                                                                                    // 914
	create: function (tagName, className, container) {                                                                 // 915
                                                                                                                    // 916
		var el = document.createElement(tagName);                                                                         // 917
		el.className = className;                                                                                         // 918
                                                                                                                    // 919
		if (container) {                                                                                                  // 920
			container.appendChild(el);                                                                                       // 921
		}                                                                                                                 // 922
                                                                                                                    // 923
		return el;                                                                                                        // 924
	},                                                                                                                 // 925
                                                                                                                    // 926
	hasClass: function (el, name) {                                                                                    // 927
		if (el.classList !== undefined) {                                                                                 // 928
			return el.classList.contains(name);                                                                              // 929
		}                                                                                                                 // 930
		var className = L.DomUtil._getClass(el);                                                                          // 931
		return className.length > 0 && new RegExp('(^|\\s)' + name + '(\\s|$)').test(className);                          // 932
	},                                                                                                                 // 933
                                                                                                                    // 934
	addClass: function (el, name) {                                                                                    // 935
		if (el.classList !== undefined) {                                                                                 // 936
			var classes = L.Util.splitWords(name);                                                                           // 937
			for (var i = 0, len = classes.length; i < len; i++) {                                                            // 938
				el.classList.add(classes[i]);                                                                                   // 939
			}                                                                                                                // 940
		} else if (!L.DomUtil.hasClass(el, name)) {                                                                       // 941
			var className = L.DomUtil._getClass(el);                                                                         // 942
			L.DomUtil._setClass(el, (className ? className + ' ' : '') + name);                                              // 943
		}                                                                                                                 // 944
	},                                                                                                                 // 945
                                                                                                                    // 946
	removeClass: function (el, name) {                                                                                 // 947
		if (el.classList !== undefined) {                                                                                 // 948
			el.classList.remove(name);                                                                                       // 949
		} else {                                                                                                          // 950
			L.DomUtil._setClass(el, L.Util.trim((' ' + L.DomUtil._getClass(el) + ' ').replace(' ' + name + ' ', ' ')));      // 951
		}                                                                                                                 // 952
	},                                                                                                                 // 953
                                                                                                                    // 954
	_setClass: function (el, name) {                                                                                   // 955
		if (el.className.baseVal === undefined) {                                                                         // 956
			el.className = name;                                                                                             // 957
		} else {                                                                                                          // 958
			// in case of SVG element                                                                                        // 959
			el.className.baseVal = name;                                                                                     // 960
		}                                                                                                                 // 961
	},                                                                                                                 // 962
                                                                                                                    // 963
	_getClass: function (el) {                                                                                         // 964
		return el.className.baseVal === undefined ? el.className : el.className.baseVal;                                  // 965
	},                                                                                                                 // 966
                                                                                                                    // 967
	setOpacity: function (el, value) {                                                                                 // 968
                                                                                                                    // 969
		if ('opacity' in el.style) {                                                                                      // 970
			el.style.opacity = value;                                                                                        // 971
                                                                                                                    // 972
		} else if ('filter' in el.style) {                                                                                // 973
                                                                                                                    // 974
			var filter = false,                                                                                              // 975
			    filterName = 'DXImageTransform.Microsoft.Alpha';                                                             // 976
                                                                                                                    // 977
			// filters collection throws an error if we try to retrieve a filter that doesn't exist                          // 978
			try {                                                                                                            // 979
				filter = el.filters.item(filterName);                                                                           // 980
			} catch (e) {                                                                                                    // 981
				// don't set opacity to 1 if we haven't already set an opacity,                                                 // 982
				// it isn't needed and breaks transparent pngs.                                                                 // 983
				if (value === 1) { return; }                                                                                    // 984
			}                                                                                                                // 985
                                                                                                                    // 986
			value = Math.round(value * 100);                                                                                 // 987
                                                                                                                    // 988
			if (filter) {                                                                                                    // 989
				filter.Enabled = (value !== 100);                                                                               // 990
				filter.Opacity = value;                                                                                         // 991
			} else {                                                                                                         // 992
				el.style.filter += ' progid:' + filterName + '(opacity=' + value + ')';                                         // 993
			}                                                                                                                // 994
		}                                                                                                                 // 995
	},                                                                                                                 // 996
                                                                                                                    // 997
	testProp: function (props) {                                                                                       // 998
                                                                                                                    // 999
		var style = document.documentElement.style;                                                                       // 1000
                                                                                                                    // 1001
		for (var i = 0; i < props.length; i++) {                                                                          // 1002
			if (props[i] in style) {                                                                                         // 1003
				return props[i];                                                                                                // 1004
			}                                                                                                                // 1005
		}                                                                                                                 // 1006
		return false;                                                                                                     // 1007
	},                                                                                                                 // 1008
                                                                                                                    // 1009
	getTranslateString: function (point) {                                                                             // 1010
		// on WebKit browsers (Chrome/Safari/iOS Safari/Android) using translate3d instead of translate                   // 1011
		// makes animation smoother as it ensures HW accel is used. Firefox 13 doesn't care                               // 1012
		// (same speed either way), Opera 12 doesn't support translate3d                                                  // 1013
                                                                                                                    // 1014
		var is3d = L.Browser.webkit3d,                                                                                    // 1015
		    open = 'translate' + (is3d ? '3d' : '') + '(',                                                                // 1016
		    close = (is3d ? ',0' : '') + ')';                                                                             // 1017
                                                                                                                    // 1018
		return open + point.x + 'px,' + point.y + 'px' + close;                                                           // 1019
	},                                                                                                                 // 1020
                                                                                                                    // 1021
	getScaleString: function (scale, origin) {                                                                         // 1022
                                                                                                                    // 1023
		var preTranslateStr = L.DomUtil.getTranslateString(origin.add(origin.multiplyBy(-1 * scale))),                    // 1024
		    scaleStr = ' scale(' + scale + ') ';                                                                          // 1025
                                                                                                                    // 1026
		return preTranslateStr + scaleStr;                                                                                // 1027
	},                                                                                                                 // 1028
                                                                                                                    // 1029
	setPosition: function (el, point, disable3D) { // (HTMLElement, Point[, Boolean])                                  // 1030
                                                                                                                    // 1031
		// jshint camelcase: false                                                                                        // 1032
		el._leaflet_pos = point;                                                                                          // 1033
                                                                                                                    // 1034
		if (!disable3D && L.Browser.any3d) {                                                                              // 1035
			el.style[L.DomUtil.TRANSFORM] =  L.DomUtil.getTranslateString(point);                                            // 1036
		} else {                                                                                                          // 1037
			el.style.left = point.x + 'px';                                                                                  // 1038
			el.style.top = point.y + 'px';                                                                                   // 1039
		}                                                                                                                 // 1040
	},                                                                                                                 // 1041
                                                                                                                    // 1042
	getPosition: function (el) {                                                                                       // 1043
		// this method is only used for elements previously positioned using setPosition,                                 // 1044
		// so it's safe to cache the position for performance                                                             // 1045
                                                                                                                    // 1046
		// jshint camelcase: false                                                                                        // 1047
		return el._leaflet_pos;                                                                                           // 1048
	}                                                                                                                  // 1049
};                                                                                                                  // 1050
                                                                                                                    // 1051
                                                                                                                    // 1052
// prefix style property names                                                                                      // 1053
                                                                                                                    // 1054
L.DomUtil.TRANSFORM = L.DomUtil.testProp(                                                                           // 1055
        ['transform', 'WebkitTransform', 'OTransform', 'MozTransform', 'msTransform']);                             // 1056
                                                                                                                    // 1057
// webkitTransition comes first because some browser versions that drop vendor prefix don't do                      // 1058
// the same for the transitionend event, in particular the Android 4.1 stock browser                                // 1059
                                                                                                                    // 1060
L.DomUtil.TRANSITION = L.DomUtil.testProp(                                                                          // 1061
        ['webkitTransition', 'transition', 'OTransition', 'MozTransition', 'msTransition']);                        // 1062
                                                                                                                    // 1063
L.DomUtil.TRANSITION_END =                                                                                          // 1064
        L.DomUtil.TRANSITION === 'webkitTransition' || L.DomUtil.TRANSITION === 'OTransition' ?                     // 1065
        L.DomUtil.TRANSITION + 'End' : 'transitionend';                                                             // 1066
                                                                                                                    // 1067
(function () {                                                                                                      // 1068
    if ('onselectstart' in document) {                                                                              // 1069
        L.extend(L.DomUtil, {                                                                                       // 1070
            disableTextSelection: function () {                                                                     // 1071
                L.DomEvent.on(window, 'selectstart', L.DomEvent.preventDefault);                                    // 1072
            },                                                                                                      // 1073
                                                                                                                    // 1074
            enableTextSelection: function () {                                                                      // 1075
                L.DomEvent.off(window, 'selectstart', L.DomEvent.preventDefault);                                   // 1076
            }                                                                                                       // 1077
        });                                                                                                         // 1078
    } else {                                                                                                        // 1079
        var userSelectProperty = L.DomUtil.testProp(                                                                // 1080
            ['userSelect', 'WebkitUserSelect', 'OUserSelect', 'MozUserSelect', 'msUserSelect']);                    // 1081
                                                                                                                    // 1082
        L.extend(L.DomUtil, {                                                                                       // 1083
            disableTextSelection: function () {                                                                     // 1084
                if (userSelectProperty) {                                                                           // 1085
                    var style = document.documentElement.style;                                                     // 1086
                    this._userSelect = style[userSelectProperty];                                                   // 1087
                    style[userSelectProperty] = 'none';                                                             // 1088
                }                                                                                                   // 1089
            },                                                                                                      // 1090
                                                                                                                    // 1091
            enableTextSelection: function () {                                                                      // 1092
                if (userSelectProperty) {                                                                           // 1093
                    document.documentElement.style[userSelectProperty] = this._userSelect;                          // 1094
                    delete this._userSelect;                                                                        // 1095
                }                                                                                                   // 1096
            }                                                                                                       // 1097
        });                                                                                                         // 1098
    }                                                                                                               // 1099
                                                                                                                    // 1100
	L.extend(L.DomUtil, {                                                                                              // 1101
		disableImageDrag: function () {                                                                                   // 1102
			L.DomEvent.on(window, 'dragstart', L.DomEvent.preventDefault);                                                   // 1103
		},                                                                                                                // 1104
                                                                                                                    // 1105
		enableImageDrag: function () {                                                                                    // 1106
			L.DomEvent.off(window, 'dragstart', L.DomEvent.preventDefault);                                                  // 1107
		}                                                                                                                 // 1108
	});                                                                                                                // 1109
})();                                                                                                               // 1110
                                                                                                                    // 1111
                                                                                                                    // 1112
/*                                                                                                                  // 1113
 * L.LatLng represents a geographical point with latitude and longitude coordinates.                                // 1114
 */                                                                                                                 // 1115
                                                                                                                    // 1116
L.LatLng = function (lat, lng, alt) { // (Number, Number, Number)                                                   // 1117
	lat = parseFloat(lat);                                                                                             // 1118
	lng = parseFloat(lng);                                                                                             // 1119
                                                                                                                    // 1120
	if (isNaN(lat) || isNaN(lng)) {                                                                                    // 1121
		throw new Error('Invalid LatLng object: (' + lat + ', ' + lng + ')');                                             // 1122
	}                                                                                                                  // 1123
                                                                                                                    // 1124
	this.lat = lat;                                                                                                    // 1125
	this.lng = lng;                                                                                                    // 1126
                                                                                                                    // 1127
	if (alt !== undefined) {                                                                                           // 1128
		this.alt = parseFloat(alt);                                                                                       // 1129
	}                                                                                                                  // 1130
};                                                                                                                  // 1131
                                                                                                                    // 1132
L.extend(L.LatLng, {                                                                                                // 1133
	DEG_TO_RAD: Math.PI / 180,                                                                                         // 1134
	RAD_TO_DEG: 180 / Math.PI,                                                                                         // 1135
	MAX_MARGIN: 1.0E-9 // max margin of error for the "equals" check                                                   // 1136
});                                                                                                                 // 1137
                                                                                                                    // 1138
L.LatLng.prototype = {                                                                                              // 1139
	equals: function (obj) { // (LatLng) -> Boolean                                                                    // 1140
		if (!obj) { return false; }                                                                                       // 1141
                                                                                                                    // 1142
		obj = L.latLng(obj);                                                                                              // 1143
                                                                                                                    // 1144
		var margin = Math.max(                                                                                            // 1145
		        Math.abs(this.lat - obj.lat),                                                                             // 1146
		        Math.abs(this.lng - obj.lng));                                                                            // 1147
                                                                                                                    // 1148
		return margin <= L.LatLng.MAX_MARGIN;                                                                             // 1149
	},                                                                                                                 // 1150
                                                                                                                    // 1151
	toString: function (precision) { // (Number) -> String                                                             // 1152
		return 'LatLng(' +                                                                                                // 1153
		        L.Util.formatNum(this.lat, precision) + ', ' +                                                            // 1154
		        L.Util.formatNum(this.lng, precision) + ')';                                                              // 1155
	},                                                                                                                 // 1156
                                                                                                                    // 1157
	// Haversine distance formula, see http://en.wikipedia.org/wiki/Haversine_formula                                  // 1158
	// TODO move to projection code, LatLng shouldn't know about Earth                                                 // 1159
	distanceTo: function (other) { // (LatLng) -> Number                                                               // 1160
		other = L.latLng(other);                                                                                          // 1161
                                                                                                                    // 1162
		var R = 6378137, // earth radius in meters                                                                        // 1163
		    d2r = L.LatLng.DEG_TO_RAD,                                                                                    // 1164
		    dLat = (other.lat - this.lat) * d2r,                                                                          // 1165
		    dLon = (other.lng - this.lng) * d2r,                                                                          // 1166
		    lat1 = this.lat * d2r,                                                                                        // 1167
		    lat2 = other.lat * d2r,                                                                                       // 1168
		    sin1 = Math.sin(dLat / 2),                                                                                    // 1169
		    sin2 = Math.sin(dLon / 2);                                                                                    // 1170
                                                                                                                    // 1171
		var a = sin1 * sin1 + sin2 * sin2 * Math.cos(lat1) * Math.cos(lat2);                                              // 1172
                                                                                                                    // 1173
		return R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));                                                        // 1174
	},                                                                                                                 // 1175
                                                                                                                    // 1176
	wrap: function (a, b) { // (Number, Number) -> LatLng                                                              // 1177
		var lng = this.lng;                                                                                               // 1178
                                                                                                                    // 1179
		a = a || -180;                                                                                                    // 1180
		b = b ||  180;                                                                                                    // 1181
                                                                                                                    // 1182
		lng = (lng + b) % (b - a) + (lng < a || lng === b ? b : a);                                                       // 1183
                                                                                                                    // 1184
		return new L.LatLng(this.lat, lng);                                                                               // 1185
	}                                                                                                                  // 1186
};                                                                                                                  // 1187
                                                                                                                    // 1188
L.latLng = function (a, b) { // (LatLng) or ([Number, Number]) or (Number, Number)                                  // 1189
	if (a instanceof L.LatLng) {                                                                                       // 1190
		return a;                                                                                                         // 1191
	}                                                                                                                  // 1192
	if (L.Util.isArray(a)) {                                                                                           // 1193
		if (typeof a[0] === 'number' || typeof a[0] === 'string') {                                                       // 1194
			return new L.LatLng(a[0], a[1], a[2]);                                                                           // 1195
		} else {                                                                                                          // 1196
			return null;                                                                                                     // 1197
		}                                                                                                                 // 1198
	}                                                                                                                  // 1199
	if (a === undefined || a === null) {                                                                               // 1200
		return a;                                                                                                         // 1201
	}                                                                                                                  // 1202
	if (typeof a === 'object' && 'lat' in a) {                                                                         // 1203
		return new L.LatLng(a.lat, 'lng' in a ? a.lng : a.lon);                                                           // 1204
	}                                                                                                                  // 1205
	if (b === undefined) {                                                                                             // 1206
		return null;                                                                                                      // 1207
	}                                                                                                                  // 1208
	return new L.LatLng(a, b);                                                                                         // 1209
};                                                                                                                  // 1210
                                                                                                                    // 1211
                                                                                                                    // 1212
                                                                                                                    // 1213
/*                                                                                                                  // 1214
 * L.LatLngBounds represents a rectangular area on the map in geographical coordinates.                             // 1215
 */                                                                                                                 // 1216
                                                                                                                    // 1217
L.LatLngBounds = function (southWest, northEast) { // (LatLng, LatLng) or (LatLng[])                                // 1218
	if (!southWest) { return; }                                                                                        // 1219
                                                                                                                    // 1220
	var latlngs = northEast ? [southWest, northEast] : southWest;                                                      // 1221
                                                                                                                    // 1222
	for (var i = 0, len = latlngs.length; i < len; i++) {                                                              // 1223
		this.extend(latlngs[i]);                                                                                          // 1224
	}                                                                                                                  // 1225
};                                                                                                                  // 1226
                                                                                                                    // 1227
L.LatLngBounds.prototype = {                                                                                        // 1228
	// extend the bounds to contain the given point or bounds                                                          // 1229
	extend: function (obj) { // (LatLng) or (LatLngBounds)                                                             // 1230
		if (!obj) { return this; }                                                                                        // 1231
                                                                                                                    // 1232
		var latLng = L.latLng(obj);                                                                                       // 1233
		if (latLng !== null) {                                                                                            // 1234
			obj = latLng;                                                                                                    // 1235
		} else {                                                                                                          // 1236
			obj = L.latLngBounds(obj);                                                                                       // 1237
		}                                                                                                                 // 1238
                                                                                                                    // 1239
		if (obj instanceof L.LatLng) {                                                                                    // 1240
			if (!this._southWest && !this._northEast) {                                                                      // 1241
				this._southWest = new L.LatLng(obj.lat, obj.lng);                                                               // 1242
				this._northEast = new L.LatLng(obj.lat, obj.lng);                                                               // 1243
			} else {                                                                                                         // 1244
				this._southWest.lat = Math.min(obj.lat, this._southWest.lat);                                                   // 1245
				this._southWest.lng = Math.min(obj.lng, this._southWest.lng);                                                   // 1246
                                                                                                                    // 1247
				this._northEast.lat = Math.max(obj.lat, this._northEast.lat);                                                   // 1248
				this._northEast.lng = Math.max(obj.lng, this._northEast.lng);                                                   // 1249
			}                                                                                                                // 1250
		} else if (obj instanceof L.LatLngBounds) {                                                                       // 1251
			this.extend(obj._southWest);                                                                                     // 1252
			this.extend(obj._northEast);                                                                                     // 1253
		}                                                                                                                 // 1254
		return this;                                                                                                      // 1255
	},                                                                                                                 // 1256
                                                                                                                    // 1257
	// extend the bounds by a percentage                                                                               // 1258
	pad: function (bufferRatio) { // (Number) -> LatLngBounds                                                          // 1259
		var sw = this._southWest,                                                                                         // 1260
		    ne = this._northEast,                                                                                         // 1261
		    heightBuffer = Math.abs(sw.lat - ne.lat) * bufferRatio,                                                       // 1262
		    widthBuffer = Math.abs(sw.lng - ne.lng) * bufferRatio;                                                        // 1263
                                                                                                                    // 1264
		return new L.LatLngBounds(                                                                                        // 1265
		        new L.LatLng(sw.lat - heightBuffer, sw.lng - widthBuffer),                                                // 1266
		        new L.LatLng(ne.lat + heightBuffer, ne.lng + widthBuffer));                                               // 1267
	},                                                                                                                 // 1268
                                                                                                                    // 1269
	getCenter: function () { // -> LatLng                                                                              // 1270
		return new L.LatLng(                                                                                              // 1271
		        (this._southWest.lat + this._northEast.lat) / 2,                                                          // 1272
		        (this._southWest.lng + this._northEast.lng) / 2);                                                         // 1273
	},                                                                                                                 // 1274
                                                                                                                    // 1275
	getSouthWest: function () {                                                                                        // 1276
		return this._southWest;                                                                                           // 1277
	},                                                                                                                 // 1278
                                                                                                                    // 1279
	getNorthEast: function () {                                                                                        // 1280
		return this._northEast;                                                                                           // 1281
	},                                                                                                                 // 1282
                                                                                                                    // 1283
	getNorthWest: function () {                                                                                        // 1284
		return new L.LatLng(this.getNorth(), this.getWest());                                                             // 1285
	},                                                                                                                 // 1286
                                                                                                                    // 1287
	getSouthEast: function () {                                                                                        // 1288
		return new L.LatLng(this.getSouth(), this.getEast());                                                             // 1289
	},                                                                                                                 // 1290
                                                                                                                    // 1291
	getWest: function () {                                                                                             // 1292
		return this._southWest.lng;                                                                                       // 1293
	},                                                                                                                 // 1294
                                                                                                                    // 1295
	getSouth: function () {                                                                                            // 1296
		return this._southWest.lat;                                                                                       // 1297
	},                                                                                                                 // 1298
                                                                                                                    // 1299
	getEast: function () {                                                                                             // 1300
		return this._northEast.lng;                                                                                       // 1301
	},                                                                                                                 // 1302
                                                                                                                    // 1303
	getNorth: function () {                                                                                            // 1304
		return this._northEast.lat;                                                                                       // 1305
	},                                                                                                                 // 1306
                                                                                                                    // 1307
	contains: function (obj) { // (LatLngBounds) or (LatLng) -> Boolean                                                // 1308
		if (typeof obj[0] === 'number' || obj instanceof L.LatLng) {                                                      // 1309
			obj = L.latLng(obj);                                                                                             // 1310
		} else {                                                                                                          // 1311
			obj = L.latLngBounds(obj);                                                                                       // 1312
		}                                                                                                                 // 1313
                                                                                                                    // 1314
		var sw = this._southWest,                                                                                         // 1315
		    ne = this._northEast,                                                                                         // 1316
		    sw2, ne2;                                                                                                     // 1317
                                                                                                                    // 1318
		if (obj instanceof L.LatLngBounds) {                                                                              // 1319
			sw2 = obj.getSouthWest();                                                                                        // 1320
			ne2 = obj.getNorthEast();                                                                                        // 1321
		} else {                                                                                                          // 1322
			sw2 = ne2 = obj;                                                                                                 // 1323
		}                                                                                                                 // 1324
                                                                                                                    // 1325
		return (sw2.lat >= sw.lat) && (ne2.lat <= ne.lat) &&                                                              // 1326
		       (sw2.lng >= sw.lng) && (ne2.lng <= ne.lng);                                                                // 1327
	},                                                                                                                 // 1328
                                                                                                                    // 1329
	intersects: function (bounds) { // (LatLngBounds)                                                                  // 1330
		bounds = L.latLngBounds(bounds);                                                                                  // 1331
                                                                                                                    // 1332
		var sw = this._southWest,                                                                                         // 1333
		    ne = this._northEast,                                                                                         // 1334
		    sw2 = bounds.getSouthWest(),                                                                                  // 1335
		    ne2 = bounds.getNorthEast(),                                                                                  // 1336
                                                                                                                    // 1337
		    latIntersects = (ne2.lat >= sw.lat) && (sw2.lat <= ne.lat),                                                   // 1338
		    lngIntersects = (ne2.lng >= sw.lng) && (sw2.lng <= ne.lng);                                                   // 1339
                                                                                                                    // 1340
		return latIntersects && lngIntersects;                                                                            // 1341
	},                                                                                                                 // 1342
                                                                                                                    // 1343
	toBBoxString: function () {                                                                                        // 1344
		return [this.getWest(), this.getSouth(), this.getEast(), this.getNorth()].join(',');                              // 1345
	},                                                                                                                 // 1346
                                                                                                                    // 1347
	equals: function (bounds) { // (LatLngBounds)                                                                      // 1348
		if (!bounds) { return false; }                                                                                    // 1349
                                                                                                                    // 1350
		bounds = L.latLngBounds(bounds);                                                                                  // 1351
                                                                                                                    // 1352
		return this._southWest.equals(bounds.getSouthWest()) &&                                                           // 1353
		       this._northEast.equals(bounds.getNorthEast());                                                             // 1354
	},                                                                                                                 // 1355
                                                                                                                    // 1356
	isValid: function () {                                                                                             // 1357
		return !!(this._southWest && this._northEast);                                                                    // 1358
	}                                                                                                                  // 1359
};                                                                                                                  // 1360
                                                                                                                    // 1361
//TODO International date line?                                                                                     // 1362
                                                                                                                    // 1363
L.latLngBounds = function (a, b) { // (LatLngBounds) or (LatLng, LatLng)                                            // 1364
	if (!a || a instanceof L.LatLngBounds) {                                                                           // 1365
		return a;                                                                                                         // 1366
	}                                                                                                                  // 1367
	return new L.LatLngBounds(a, b);                                                                                   // 1368
};                                                                                                                  // 1369
                                                                                                                    // 1370
                                                                                                                    // 1371
/*                                                                                                                  // 1372
 * L.Projection contains various geographical projections used by CRS classes.                                      // 1373
 */                                                                                                                 // 1374
                                                                                                                    // 1375
L.Projection = {};                                                                                                  // 1376
                                                                                                                    // 1377
                                                                                                                    // 1378
/*                                                                                                                  // 1379
 * Spherical Mercator is the most popular map projection, used by EPSG:3857 CRS used by default.                    // 1380
 */                                                                                                                 // 1381
                                                                                                                    // 1382
L.Projection.SphericalMercator = {                                                                                  // 1383
	MAX_LATITUDE: 85.0511287798,                                                                                       // 1384
                                                                                                                    // 1385
	project: function (latlng) { // (LatLng) -> Point                                                                  // 1386
		var d = L.LatLng.DEG_TO_RAD,                                                                                      // 1387
		    max = this.MAX_LATITUDE,                                                                                      // 1388
		    lat = Math.max(Math.min(max, latlng.lat), -max),                                                              // 1389
		    x = latlng.lng * d,                                                                                           // 1390
		    y = lat * d;                                                                                                  // 1391
                                                                                                                    // 1392
		y = Math.log(Math.tan((Math.PI / 4) + (y / 2)));                                                                  // 1393
                                                                                                                    // 1394
		return new L.Point(x, y);                                                                                         // 1395
	},                                                                                                                 // 1396
                                                                                                                    // 1397
	unproject: function (point) { // (Point, Boolean) -> LatLng                                                        // 1398
		var d = L.LatLng.RAD_TO_DEG,                                                                                      // 1399
		    lng = point.x * d,                                                                                            // 1400
		    lat = (2 * Math.atan(Math.exp(point.y)) - (Math.PI / 2)) * d;                                                 // 1401
                                                                                                                    // 1402
		return new L.LatLng(lat, lng);                                                                                    // 1403
	}                                                                                                                  // 1404
};                                                                                                                  // 1405
                                                                                                                    // 1406
                                                                                                                    // 1407
/*                                                                                                                  // 1408
 * Simple equirectangular (Plate Carree) projection, used by CRS like EPSG:4326 and Simple.                         // 1409
 */                                                                                                                 // 1410
                                                                                                                    // 1411
L.Projection.LonLat = {                                                                                             // 1412
	project: function (latlng) {                                                                                       // 1413
		return new L.Point(latlng.lng, latlng.lat);                                                                       // 1414
	},                                                                                                                 // 1415
                                                                                                                    // 1416
	unproject: function (point) {                                                                                      // 1417
		return new L.LatLng(point.y, point.x);                                                                            // 1418
	}                                                                                                                  // 1419
};                                                                                                                  // 1420
                                                                                                                    // 1421
                                                                                                                    // 1422
/*                                                                                                                  // 1423
 * L.CRS is a base object for all defined CRS (Coordinate Reference Systems) in Leaflet.                            // 1424
 */                                                                                                                 // 1425
                                                                                                                    // 1426
L.CRS = {                                                                                                           // 1427
	latLngToPoint: function (latlng, zoom) { // (LatLng, Number) -> Point                                              // 1428
		var projectedPoint = this.projection.project(latlng),                                                             // 1429
		    scale = this.scale(zoom);                                                                                     // 1430
                                                                                                                    // 1431
		return this.transformation._transform(projectedPoint, scale);                                                     // 1432
	},                                                                                                                 // 1433
                                                                                                                    // 1434
	pointToLatLng: function (point, zoom) { // (Point, Number[, Boolean]) -> LatLng                                    // 1435
		var scale = this.scale(zoom),                                                                                     // 1436
		    untransformedPoint = this.transformation.untransform(point, scale);                                           // 1437
                                                                                                                    // 1438
		return this.projection.unproject(untransformedPoint);                                                             // 1439
	},                                                                                                                 // 1440
                                                                                                                    // 1441
	project: function (latlng) {                                                                                       // 1442
		return this.projection.project(latlng);                                                                           // 1443
	},                                                                                                                 // 1444
                                                                                                                    // 1445
	scale: function (zoom) {                                                                                           // 1446
		return 256 * Math.pow(2, zoom);                                                                                   // 1447
	},                                                                                                                 // 1448
                                                                                                                    // 1449
	getSize: function (zoom) {                                                                                         // 1450
		var s = this.scale(zoom);                                                                                         // 1451
		return L.point(s, s);                                                                                             // 1452
	}                                                                                                                  // 1453
};                                                                                                                  // 1454
                                                                                                                    // 1455
                                                                                                                    // 1456
/*                                                                                                                  // 1457
 * A simple CRS that can be used for flat non-Earth maps like panoramas or game maps.                               // 1458
 */                                                                                                                 // 1459
                                                                                                                    // 1460
L.CRS.Simple = L.extend({}, L.CRS, {                                                                                // 1461
	projection: L.Projection.LonLat,                                                                                   // 1462
	transformation: new L.Transformation(1, 0, -1, 0),                                                                 // 1463
                                                                                                                    // 1464
	scale: function (zoom) {                                                                                           // 1465
		return Math.pow(2, zoom);                                                                                         // 1466
	}                                                                                                                  // 1467
});                                                                                                                 // 1468
                                                                                                                    // 1469
                                                                                                                    // 1470
/*                                                                                                                  // 1471
 * L.CRS.EPSG3857 (Spherical Mercator) is the most common CRS for web mapping                                       // 1472
 * and is used by Leaflet by default.                                                                               // 1473
 */                                                                                                                 // 1474
                                                                                                                    // 1475
L.CRS.EPSG3857 = L.extend({}, L.CRS, {                                                                              // 1476
	code: 'EPSG:3857',                                                                                                 // 1477
                                                                                                                    // 1478
	projection: L.Projection.SphericalMercator,                                                                        // 1479
	transformation: new L.Transformation(0.5 / Math.PI, 0.5, -0.5 / Math.PI, 0.5),                                     // 1480
                                                                                                                    // 1481
	project: function (latlng) { // (LatLng) -> Point                                                                  // 1482
		var projectedPoint = this.projection.project(latlng),                                                             // 1483
		    earthRadius = 6378137;                                                                                        // 1484
		return projectedPoint.multiplyBy(earthRadius);                                                                    // 1485
	}                                                                                                                  // 1486
});                                                                                                                 // 1487
                                                                                                                    // 1488
L.CRS.EPSG900913 = L.extend({}, L.CRS.EPSG3857, {                                                                   // 1489
	code: 'EPSG:900913'                                                                                                // 1490
});                                                                                                                 // 1491
                                                                                                                    // 1492
                                                                                                                    // 1493
/*                                                                                                                  // 1494
 * L.CRS.EPSG4326 is a CRS popular among advanced GIS specialists.                                                  // 1495
 */                                                                                                                 // 1496
                                                                                                                    // 1497
L.CRS.EPSG4326 = L.extend({}, L.CRS, {                                                                              // 1498
	code: 'EPSG:4326',                                                                                                 // 1499
                                                                                                                    // 1500
	projection: L.Projection.LonLat,                                                                                   // 1501
	transformation: new L.Transformation(1 / 360, 0.5, -1 / 360, 0.5)                                                  // 1502
});                                                                                                                 // 1503
                                                                                                                    // 1504
                                                                                                                    // 1505
/*                                                                                                                  // 1506
 * L.Map is the central class of the API - it is used to create a map.                                              // 1507
 */                                                                                                                 // 1508
                                                                                                                    // 1509
L.Map = L.Class.extend({                                                                                            // 1510
                                                                                                                    // 1511
	includes: L.Mixin.Events,                                                                                          // 1512
                                                                                                                    // 1513
	options: {                                                                                                         // 1514
		crs: L.CRS.EPSG3857,                                                                                              // 1515
                                                                                                                    // 1516
		/*                                                                                                                // 1517
		center: LatLng,                                                                                                   // 1518
		zoom: Number,                                                                                                     // 1519
		layers: Array,                                                                                                    // 1520
		*/                                                                                                                // 1521
                                                                                                                    // 1522
		fadeAnimation: L.DomUtil.TRANSITION && !L.Browser.android23,                                                      // 1523
		trackResize: true,                                                                                                // 1524
		markerZoomAnimation: L.DomUtil.TRANSITION && L.Browser.any3d                                                      // 1525
	},                                                                                                                 // 1526
                                                                                                                    // 1527
	initialize: function (id, options) { // (HTMLElement or String, Object)                                            // 1528
		options = L.setOptions(this, options);                                                                            // 1529
                                                                                                                    // 1530
                                                                                                                    // 1531
		this._initContainer(id);                                                                                          // 1532
		this._initLayout();                                                                                               // 1533
                                                                                                                    // 1534
		// hack for https://github.com/Leaflet/Leaflet/issues/1980                                                        // 1535
		this._onResize = L.bind(this._onResize, this);                                                                    // 1536
                                                                                                                    // 1537
		this._initEvents();                                                                                               // 1538
                                                                                                                    // 1539
		if (options.maxBounds) {                                                                                          // 1540
			this.setMaxBounds(options.maxBounds);                                                                            // 1541
		}                                                                                                                 // 1542
                                                                                                                    // 1543
		if (options.center && options.zoom !== undefined) {                                                               // 1544
			this.setView(L.latLng(options.center), options.zoom, {reset: true});                                             // 1545
		}                                                                                                                 // 1546
                                                                                                                    // 1547
		this._handlers = [];                                                                                              // 1548
                                                                                                                    // 1549
		this._layers = {};                                                                                                // 1550
		this._zoomBoundLayers = {};                                                                                       // 1551
		this._tileLayersNum = 0;                                                                                          // 1552
                                                                                                                    // 1553
		this.callInitHooks();                                                                                             // 1554
                                                                                                                    // 1555
		this._addLayers(options.layers);                                                                                  // 1556
	},                                                                                                                 // 1557
                                                                                                                    // 1558
                                                                                                                    // 1559
	// public methods that modify map state                                                                            // 1560
                                                                                                                    // 1561
	// replaced by animation-powered implementation in Map.PanAnimation.js                                             // 1562
	setView: function (center, zoom) {                                                                                 // 1563
		zoom = zoom === undefined ? this.getZoom() : zoom;                                                                // 1564
		this._resetView(L.latLng(center), this._limitZoom(zoom));                                                         // 1565
		return this;                                                                                                      // 1566
	},                                                                                                                 // 1567
                                                                                                                    // 1568
	setZoom: function (zoom, options) {                                                                                // 1569
		if (!this._loaded) {                                                                                              // 1570
			this._zoom = this._limitZoom(zoom);                                                                              // 1571
			return this;                                                                                                     // 1572
		}                                                                                                                 // 1573
		return this.setView(this.getCenter(), zoom, {zoom: options});                                                     // 1574
	},                                                                                                                 // 1575
                                                                                                                    // 1576
	zoomIn: function (delta, options) {                                                                                // 1577
		return this.setZoom(this._zoom + (delta || 1), options);                                                          // 1578
	},                                                                                                                 // 1579
                                                                                                                    // 1580
	zoomOut: function (delta, options) {                                                                               // 1581
		return this.setZoom(this._zoom - (delta || 1), options);                                                          // 1582
	},                                                                                                                 // 1583
                                                                                                                    // 1584
	setZoomAround: function (latlng, zoom, options) {                                                                  // 1585
		var scale = this.getZoomScale(zoom),                                                                              // 1586
		    viewHalf = this.getSize().divideBy(2),                                                                        // 1587
		    containerPoint = latlng instanceof L.Point ? latlng : this.latLngToContainerPoint(latlng),                    // 1588
                                                                                                                    // 1589
		    centerOffset = containerPoint.subtract(viewHalf).multiplyBy(1 - 1 / scale),                                   // 1590
		    newCenter = this.containerPointToLatLng(viewHalf.add(centerOffset));                                          // 1591
                                                                                                                    // 1592
		return this.setView(newCenter, zoom, {zoom: options});                                                            // 1593
	},                                                                                                                 // 1594
                                                                                                                    // 1595
	fitBounds: function (bounds, options) {                                                                            // 1596
                                                                                                                    // 1597
		options = options || {};                                                                                          // 1598
		bounds = bounds.getBounds ? bounds.getBounds() : L.latLngBounds(bounds);                                          // 1599
                                                                                                                    // 1600
		var paddingTL = L.point(options.paddingTopLeft || options.padding || [0, 0]),                                     // 1601
		    paddingBR = L.point(options.paddingBottomRight || options.padding || [0, 0]),                                 // 1602
                                                                                                                    // 1603
		    zoom = this.getBoundsZoom(bounds, false, paddingTL.add(paddingBR));                                           // 1604
                                                                                                                    // 1605
		zoom = (options.maxZoom) ? Math.min(options.maxZoom, zoom) : zoom;                                                // 1606
                                                                                                                    // 1607
		var paddingOffset = paddingBR.subtract(paddingTL).divideBy(2),                                                    // 1608
                                                                                                                    // 1609
		    swPoint = this.project(bounds.getSouthWest(), zoom),                                                          // 1610
		    nePoint = this.project(bounds.getNorthEast(), zoom),                                                          // 1611
		    center = this.unproject(swPoint.add(nePoint).divideBy(2).add(paddingOffset), zoom);                           // 1612
                                                                                                                    // 1613
		return this.setView(center, zoom, options);                                                                       // 1614
	},                                                                                                                 // 1615
                                                                                                                    // 1616
	fitWorld: function (options) {                                                                                     // 1617
		return this.fitBounds([[-90, -180], [90, 180]], options);                                                         // 1618
	},                                                                                                                 // 1619
                                                                                                                    // 1620
	panTo: function (center, options) { // (LatLng)                                                                    // 1621
		return this.setView(center, this._zoom, {pan: options});                                                          // 1622
	},                                                                                                                 // 1623
                                                                                                                    // 1624
	panBy: function (offset) { // (Point)                                                                              // 1625
		// replaced with animated panBy in Map.PanAnimation.js                                                            // 1626
		this.fire('movestart');                                                                                           // 1627
                                                                                                                    // 1628
		this._rawPanBy(L.point(offset));                                                                                  // 1629
                                                                                                                    // 1630
		this.fire('move');                                                                                                // 1631
		return this.fire('moveend');                                                                                      // 1632
	},                                                                                                                 // 1633
                                                                                                                    // 1634
	setMaxBounds: function (bounds) {                                                                                  // 1635
		bounds = L.latLngBounds(bounds);                                                                                  // 1636
                                                                                                                    // 1637
		this.options.maxBounds = bounds;                                                                                  // 1638
                                                                                                                    // 1639
		if (!bounds) {                                                                                                    // 1640
			return this.off('moveend', this._panInsideMaxBounds, this);                                                      // 1641
		}                                                                                                                 // 1642
                                                                                                                    // 1643
		if (this._loaded) {                                                                                               // 1644
			this._panInsideMaxBounds();                                                                                      // 1645
		}                                                                                                                 // 1646
                                                                                                                    // 1647
		return this.on('moveend', this._panInsideMaxBounds, this);                                                        // 1648
	},                                                                                                                 // 1649
                                                                                                                    // 1650
	panInsideBounds: function (bounds, options) {                                                                      // 1651
		var center = this.getCenter(),                                                                                    // 1652
			newCenter = this._limitCenter(center, this._zoom, bounds);                                                       // 1653
                                                                                                                    // 1654
		if (center.equals(newCenter)) { return this; }                                                                    // 1655
                                                                                                                    // 1656
		return this.panTo(newCenter, options);                                                                            // 1657
	},                                                                                                                 // 1658
                                                                                                                    // 1659
	addLayer: function (layer) {                                                                                       // 1660
		// TODO method is too big, refactor                                                                               // 1661
                                                                                                                    // 1662
		var id = L.stamp(layer);                                                                                          // 1663
                                                                                                                    // 1664
		if (this._layers[id]) { return this; }                                                                            // 1665
                                                                                                                    // 1666
		this._layers[id] = layer;                                                                                         // 1667
                                                                                                                    // 1668
		// TODO getMaxZoom, getMinZoom in ILayer (instead of options)                                                     // 1669
		if (layer.options && (!isNaN(layer.options.maxZoom) || !isNaN(layer.options.minZoom))) {                          // 1670
			this._zoomBoundLayers[id] = layer;                                                                               // 1671
			this._updateZoomLevels();                                                                                        // 1672
		}                                                                                                                 // 1673
                                                                                                                    // 1674
		// TODO looks ugly, refactor!!!                                                                                   // 1675
		if (this.options.zoomAnimation && L.TileLayer && (layer instanceof L.TileLayer)) {                                // 1676
			this._tileLayersNum++;                                                                                           // 1677
			this._tileLayersToLoad++;                                                                                        // 1678
			layer.on('load', this._onTileLayerLoad, this);                                                                   // 1679
		}                                                                                                                 // 1680
                                                                                                                    // 1681
		if (this._loaded) {                                                                                               // 1682
			this._layerAdd(layer);                                                                                           // 1683
		}                                                                                                                 // 1684
                                                                                                                    // 1685
		return this;                                                                                                      // 1686
	},                                                                                                                 // 1687
                                                                                                                    // 1688
	removeLayer: function (layer) {                                                                                    // 1689
		var id = L.stamp(layer);                                                                                          // 1690
                                                                                                                    // 1691
		if (!this._layers[id]) { return this; }                                                                           // 1692
                                                                                                                    // 1693
		if (this._loaded) {                                                                                               // 1694
			layer.onRemove(this);                                                                                            // 1695
		}                                                                                                                 // 1696
                                                                                                                    // 1697
		delete this._layers[id];                                                                                          // 1698
                                                                                                                    // 1699
		if (this._loaded) {                                                                                               // 1700
			this.fire('layerremove', {layer: layer});                                                                        // 1701
		}                                                                                                                 // 1702
                                                                                                                    // 1703
		if (this._zoomBoundLayers[id]) {                                                                                  // 1704
			delete this._zoomBoundLayers[id];                                                                                // 1705
			this._updateZoomLevels();                                                                                        // 1706
		}                                                                                                                 // 1707
                                                                                                                    // 1708
		// TODO looks ugly, refactor                                                                                      // 1709
		if (this.options.zoomAnimation && L.TileLayer && (layer instanceof L.TileLayer)) {                                // 1710
			this._tileLayersNum--;                                                                                           // 1711
			this._tileLayersToLoad--;                                                                                        // 1712
			layer.off('load', this._onTileLayerLoad, this);                                                                  // 1713
		}                                                                                                                 // 1714
                                                                                                                    // 1715
		return this;                                                                                                      // 1716
	},                                                                                                                 // 1717
                                                                                                                    // 1718
	hasLayer: function (layer) {                                                                                       // 1719
		if (!layer) { return false; }                                                                                     // 1720
                                                                                                                    // 1721
		return (L.stamp(layer) in this._layers);                                                                          // 1722
	},                                                                                                                 // 1723
                                                                                                                    // 1724
	eachLayer: function (method, context) {                                                                            // 1725
		for (var i in this._layers) {                                                                                     // 1726
			method.call(context, this._layers[i]);                                                                           // 1727
		}                                                                                                                 // 1728
		return this;                                                                                                      // 1729
	},                                                                                                                 // 1730
                                                                                                                    // 1731
	invalidateSize: function (options) {                                                                               // 1732
		if (!this._loaded) { return this; }                                                                               // 1733
                                                                                                                    // 1734
		options = L.extend({                                                                                              // 1735
			animate: false,                                                                                                  // 1736
			pan: true                                                                                                        // 1737
		}, options === true ? {animate: true} : options);                                                                 // 1738
                                                                                                                    // 1739
		var oldSize = this.getSize();                                                                                     // 1740
		this._sizeChanged = true;                                                                                         // 1741
		this._initialCenter = null;                                                                                       // 1742
                                                                                                                    // 1743
		var newSize = this.getSize(),                                                                                     // 1744
		    oldCenter = oldSize.divideBy(2).round(),                                                                      // 1745
		    newCenter = newSize.divideBy(2).round(),                                                                      // 1746
		    offset = oldCenter.subtract(newCenter);                                                                       // 1747
                                                                                                                    // 1748
		if (!offset.x && !offset.y) { return this; }                                                                      // 1749
                                                                                                                    // 1750
		if (options.animate && options.pan) {                                                                             // 1751
			this.panBy(offset);                                                                                              // 1752
                                                                                                                    // 1753
		} else {                                                                                                          // 1754
			if (options.pan) {                                                                                               // 1755
				this._rawPanBy(offset);                                                                                         // 1756
			}                                                                                                                // 1757
                                                                                                                    // 1758
			this.fire('move');                                                                                               // 1759
                                                                                                                    // 1760
			if (options.debounceMoveend) {                                                                                   // 1761
				clearTimeout(this._sizeTimer);                                                                                  // 1762
				this._sizeTimer = setTimeout(L.bind(this.fire, this, 'moveend'), 200);                                          // 1763
			} else {                                                                                                         // 1764
				this.fire('moveend');                                                                                           // 1765
			}                                                                                                                // 1766
		}                                                                                                                 // 1767
                                                                                                                    // 1768
		return this.fire('resize', {                                                                                      // 1769
			oldSize: oldSize,                                                                                                // 1770
			newSize: newSize                                                                                                 // 1771
		});                                                                                                               // 1772
	},                                                                                                                 // 1773
                                                                                                                    // 1774
	// TODO handler.addTo                                                                                              // 1775
	addHandler: function (name, HandlerClass) {                                                                        // 1776
		if (!HandlerClass) { return this; }                                                                               // 1777
                                                                                                                    // 1778
		var handler = this[name] = new HandlerClass(this);                                                                // 1779
                                                                                                                    // 1780
		this._handlers.push(handler);                                                                                     // 1781
                                                                                                                    // 1782
		if (this.options[name]) {                                                                                         // 1783
			handler.enable();                                                                                                // 1784
		}                                                                                                                 // 1785
                                                                                                                    // 1786
		return this;                                                                                                      // 1787
	},                                                                                                                 // 1788
                                                                                                                    // 1789
	remove: function () {                                                                                              // 1790
		if (this._loaded) {                                                                                               // 1791
			this.fire('unload');                                                                                             // 1792
		}                                                                                                                 // 1793
                                                                                                                    // 1794
		this._initEvents('off');                                                                                          // 1795
                                                                                                                    // 1796
		try {                                                                                                             // 1797
			// throws error in IE6-8                                                                                         // 1798
			delete this._container._leaflet;                                                                                 // 1799
		} catch (e) {                                                                                                     // 1800
			this._container._leaflet = undefined;                                                                            // 1801
		}                                                                                                                 // 1802
                                                                                                                    // 1803
		this._clearPanes();                                                                                               // 1804
		if (this._clearControlPos) {                                                                                      // 1805
			this._clearControlPos();                                                                                         // 1806
		}                                                                                                                 // 1807
                                                                                                                    // 1808
		this._clearHandlers();                                                                                            // 1809
                                                                                                                    // 1810
		return this;                                                                                                      // 1811
	},                                                                                                                 // 1812
                                                                                                                    // 1813
                                                                                                                    // 1814
	// public methods for getting map state                                                                            // 1815
                                                                                                                    // 1816
	getCenter: function () { // (Boolean) -> LatLng                                                                    // 1817
		this._checkIfLoaded();                                                                                            // 1818
                                                                                                                    // 1819
		if (this._initialCenter && !this._moved()) {                                                                      // 1820
			return this._initialCenter;                                                                                      // 1821
		}                                                                                                                 // 1822
		return this.layerPointToLatLng(this._getCenterLayerPoint());                                                      // 1823
	},                                                                                                                 // 1824
                                                                                                                    // 1825
	getZoom: function () {                                                                                             // 1826
		return this._zoom;                                                                                                // 1827
	},                                                                                                                 // 1828
                                                                                                                    // 1829
	getBounds: function () {                                                                                           // 1830
		var bounds = this.getPixelBounds(),                                                                               // 1831
		    sw = this.unproject(bounds.getBottomLeft()),                                                                  // 1832
		    ne = this.unproject(bounds.getTopRight());                                                                    // 1833
                                                                                                                    // 1834
		return new L.LatLngBounds(sw, ne);                                                                                // 1835
	},                                                                                                                 // 1836
                                                                                                                    // 1837
	getMinZoom: function () {                                                                                          // 1838
		return this.options.minZoom === undefined ?                                                                       // 1839
			(this._layersMinZoom === undefined ? 0 : this._layersMinZoom) :                                                  // 1840
			this.options.minZoom;                                                                                            // 1841
	},                                                                                                                 // 1842
                                                                                                                    // 1843
	getMaxZoom: function () {                                                                                          // 1844
		return this.options.maxZoom === undefined ?                                                                       // 1845
			(this._layersMaxZoom === undefined ? Infinity : this._layersMaxZoom) :                                           // 1846
			this.options.maxZoom;                                                                                            // 1847
	},                                                                                                                 // 1848
                                                                                                                    // 1849
	getBoundsZoom: function (bounds, inside, padding) { // (LatLngBounds[, Boolean, Point]) -> Number                  // 1850
		bounds = L.latLngBounds(bounds);                                                                                  // 1851
                                                                                                                    // 1852
		var zoom = this.getMinZoom() - (inside ? 1 : 0),                                                                  // 1853
		    maxZoom = this.getMaxZoom(),                                                                                  // 1854
		    size = this.getSize(),                                                                                        // 1855
                                                                                                                    // 1856
		    nw = bounds.getNorthWest(),                                                                                   // 1857
		    se = bounds.getSouthEast(),                                                                                   // 1858
                                                                                                                    // 1859
		    zoomNotFound = true,                                                                                          // 1860
		    boundsSize;                                                                                                   // 1861
                                                                                                                    // 1862
		padding = L.point(padding || [0, 0]);                                                                             // 1863
                                                                                                                    // 1864
		do {                                                                                                              // 1865
			zoom++;                                                                                                          // 1866
			boundsSize = this.project(se, zoom).subtract(this.project(nw, zoom)).add(padding);                               // 1867
			zoomNotFound = !inside ? size.contains(boundsSize) : boundsSize.x < size.x || boundsSize.y < size.y;             // 1868
                                                                                                                    // 1869
		} while (zoomNotFound && zoom <= maxZoom);                                                                        // 1870
                                                                                                                    // 1871
		if (zoomNotFound && inside) {                                                                                     // 1872
			return null;                                                                                                     // 1873
		}                                                                                                                 // 1874
                                                                                                                    // 1875
		return inside ? zoom : zoom - 1;                                                                                  // 1876
	},                                                                                                                 // 1877
                                                                                                                    // 1878
	getSize: function () {                                                                                             // 1879
		if (!this._size || this._sizeChanged) {                                                                           // 1880
			this._size = new L.Point(                                                                                        // 1881
				this._container.clientWidth,                                                                                    // 1882
				this._container.clientHeight);                                                                                  // 1883
                                                                                                                    // 1884
			this._sizeChanged = false;                                                                                       // 1885
		}                                                                                                                 // 1886
		return this._size.clone();                                                                                        // 1887
	},                                                                                                                 // 1888
                                                                                                                    // 1889
	getPixelBounds: function () {                                                                                      // 1890
		var topLeftPoint = this._getTopLeftPoint();                                                                       // 1891
		return new L.Bounds(topLeftPoint, topLeftPoint.add(this.getSize()));                                              // 1892
	},                                                                                                                 // 1893
                                                                                                                    // 1894
	getPixelOrigin: function () {                                                                                      // 1895
		this._checkIfLoaded();                                                                                            // 1896
		return this._initialTopLeftPoint;                                                                                 // 1897
	},                                                                                                                 // 1898
                                                                                                                    // 1899
	getPanes: function () {                                                                                            // 1900
		return this._panes;                                                                                               // 1901
	},                                                                                                                 // 1902
                                                                                                                    // 1903
	getContainer: function () {                                                                                        // 1904
		return this._container;                                                                                           // 1905
	},                                                                                                                 // 1906
                                                                                                                    // 1907
                                                                                                                    // 1908
	// TODO replace with universal implementation after refactoring projections                                        // 1909
                                                                                                                    // 1910
	getZoomScale: function (toZoom) {                                                                                  // 1911
		var crs = this.options.crs;                                                                                       // 1912
		return crs.scale(toZoom) / crs.scale(this._zoom);                                                                 // 1913
	},                                                                                                                 // 1914
                                                                                                                    // 1915
	getScaleZoom: function (scale) {                                                                                   // 1916
		return this._zoom + (Math.log(scale) / Math.LN2);                                                                 // 1917
	},                                                                                                                 // 1918
                                                                                                                    // 1919
                                                                                                                    // 1920
	// conversion methods                                                                                              // 1921
                                                                                                                    // 1922
	project: function (latlng, zoom) { // (LatLng[, Number]) -> Point                                                  // 1923
		zoom = zoom === undefined ? this._zoom : zoom;                                                                    // 1924
		return this.options.crs.latLngToPoint(L.latLng(latlng), zoom);                                                    // 1925
	},                                                                                                                 // 1926
                                                                                                                    // 1927
	unproject: function (point, zoom) { // (Point[, Number]) -> LatLng                                                 // 1928
		zoom = zoom === undefined ? this._zoom : zoom;                                                                    // 1929
		return this.options.crs.pointToLatLng(L.point(point), zoom);                                                      // 1930
	},                                                                                                                 // 1931
                                                                                                                    // 1932
	layerPointToLatLng: function (point) { // (Point)                                                                  // 1933
		var projectedPoint = L.point(point).add(this.getPixelOrigin());                                                   // 1934
		return this.unproject(projectedPoint);                                                                            // 1935
	},                                                                                                                 // 1936
                                                                                                                    // 1937
	latLngToLayerPoint: function (latlng) { // (LatLng)                                                                // 1938
		var projectedPoint = this.project(L.latLng(latlng))._round();                                                     // 1939
		return projectedPoint._subtract(this.getPixelOrigin());                                                           // 1940
	},                                                                                                                 // 1941
                                                                                                                    // 1942
	containerPointToLayerPoint: function (point) { // (Point)                                                          // 1943
		return L.point(point).subtract(this._getMapPanePos());                                                            // 1944
	},                                                                                                                 // 1945
                                                                                                                    // 1946
	layerPointToContainerPoint: function (point) { // (Point)                                                          // 1947
		return L.point(point).add(this._getMapPanePos());                                                                 // 1948
	},                                                                                                                 // 1949
                                                                                                                    // 1950
	containerPointToLatLng: function (point) {                                                                         // 1951
		var layerPoint = this.containerPointToLayerPoint(L.point(point));                                                 // 1952
		return this.layerPointToLatLng(layerPoint);                                                                       // 1953
	},                                                                                                                 // 1954
                                                                                                                    // 1955
	latLngToContainerPoint: function (latlng) {                                                                        // 1956
		return this.layerPointToContainerPoint(this.latLngToLayerPoint(L.latLng(latlng)));                                // 1957
	},                                                                                                                 // 1958
                                                                                                                    // 1959
	mouseEventToContainerPoint: function (e) { // (MouseEvent)                                                         // 1960
		return L.DomEvent.getMousePosition(e, this._container);                                                           // 1961
	},                                                                                                                 // 1962
                                                                                                                    // 1963
	mouseEventToLayerPoint: function (e) { // (MouseEvent)                                                             // 1964
		return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e));                                       // 1965
	},                                                                                                                 // 1966
                                                                                                                    // 1967
	mouseEventToLatLng: function (e) { // (MouseEvent)                                                                 // 1968
		return this.layerPointToLatLng(this.mouseEventToLayerPoint(e));                                                   // 1969
	},                                                                                                                 // 1970
                                                                                                                    // 1971
                                                                                                                    // 1972
	// map initialization methods                                                                                      // 1973
                                                                                                                    // 1974
	_initContainer: function (id) {                                                                                    // 1975
		var container = this._container = L.DomUtil.get(id);                                                              // 1976
                                                                                                                    // 1977
		if (!container) {                                                                                                 // 1978
			throw new Error('Map container not found.');                                                                     // 1979
		} else if (container._leaflet) {                                                                                  // 1980
			throw new Error('Map container is already initialized.');                                                        // 1981
		}                                                                                                                 // 1982
                                                                                                                    // 1983
		container._leaflet = true;                                                                                        // 1984
	},                                                                                                                 // 1985
                                                                                                                    // 1986
	_initLayout: function () {                                                                                         // 1987
		var container = this._container;                                                                                  // 1988
                                                                                                                    // 1989
		L.DomUtil.addClass(container, 'leaflet-container' +                                                               // 1990
			(L.Browser.touch ? ' leaflet-touch' : '') +                                                                      // 1991
			(L.Browser.retina ? ' leaflet-retina' : '') +                                                                    // 1992
			(L.Browser.ielt9 ? ' leaflet-oldie' : '') +                                                                      // 1993
			(this.options.fadeAnimation ? ' leaflet-fade-anim' : ''));                                                       // 1994
                                                                                                                    // 1995
		var position = L.DomUtil.getStyle(container, 'position');                                                         // 1996
                                                                                                                    // 1997
		if (position !== 'absolute' && position !== 'relative' && position !== 'fixed') {                                 // 1998
			container.style.position = 'relative';                                                                           // 1999
		}                                                                                                                 // 2000
                                                                                                                    // 2001
		this._initPanes();                                                                                                // 2002
                                                                                                                    // 2003
		if (this._initControlPos) {                                                                                       // 2004
			this._initControlPos();                                                                                          // 2005
		}                                                                                                                 // 2006
	},                                                                                                                 // 2007
                                                                                                                    // 2008
	_initPanes: function () {                                                                                          // 2009
		var panes = this._panes = {};                                                                                     // 2010
                                                                                                                    // 2011
		this._mapPane = panes.mapPane = this._createPane('leaflet-map-pane', this._container);                            // 2012
                                                                                                                    // 2013
		this._tilePane = panes.tilePane = this._createPane('leaflet-tile-pane', this._mapPane);                           // 2014
		panes.objectsPane = this._createPane('leaflet-objects-pane', this._mapPane);                                      // 2015
		panes.shadowPane = this._createPane('leaflet-shadow-pane');                                                       // 2016
		panes.overlayPane = this._createPane('leaflet-overlay-pane');                                                     // 2017
		panes.markerPane = this._createPane('leaflet-marker-pane');                                                       // 2018
		panes.popupPane = this._createPane('leaflet-popup-pane');                                                         // 2019
                                                                                                                    // 2020
		var zoomHide = ' leaflet-zoom-hide';                                                                              // 2021
                                                                                                                    // 2022
		if (!this.options.markerZoomAnimation) {                                                                          // 2023
			L.DomUtil.addClass(panes.markerPane, zoomHide);                                                                  // 2024
			L.DomUtil.addClass(panes.shadowPane, zoomHide);                                                                  // 2025
			L.DomUtil.addClass(panes.popupPane, zoomHide);                                                                   // 2026
		}                                                                                                                 // 2027
	},                                                                                                                 // 2028
                                                                                                                    // 2029
	_createPane: function (className, container) {                                                                     // 2030
		return L.DomUtil.create('div', className, container || this._panes.objectsPane);                                  // 2031
	},                                                                                                                 // 2032
                                                                                                                    // 2033
	_clearPanes: function () {                                                                                         // 2034
		this._container.removeChild(this._mapPane);                                                                       // 2035
	},                                                                                                                 // 2036
                                                                                                                    // 2037
	_addLayers: function (layers) {                                                                                    // 2038
		layers = layers ? (L.Util.isArray(layers) ? layers : [layers]) : [];                                              // 2039
                                                                                                                    // 2040
		for (var i = 0, len = layers.length; i < len; i++) {                                                              // 2041
			this.addLayer(layers[i]);                                                                                        // 2042
		}                                                                                                                 // 2043
	},                                                                                                                 // 2044
                                                                                                                    // 2045
                                                                                                                    // 2046
	// private methods that modify map state                                                                           // 2047
                                                                                                                    // 2048
	_resetView: function (center, zoom, preserveMapOffset, afterZoomAnim) {                                            // 2049
                                                                                                                    // 2050
		var zoomChanged = (this._zoom !== zoom);                                                                          // 2051
                                                                                                                    // 2052
		if (!afterZoomAnim) {                                                                                             // 2053
			this.fire('movestart');                                                                                          // 2054
                                                                                                                    // 2055
			if (zoomChanged) {                                                                                               // 2056
				this.fire('zoomstart');                                                                                         // 2057
			}                                                                                                                // 2058
		}                                                                                                                 // 2059
                                                                                                                    // 2060
		this._zoom = zoom;                                                                                                // 2061
		this._initialCenter = center;                                                                                     // 2062
                                                                                                                    // 2063
		this._initialTopLeftPoint = this._getNewTopLeftPoint(center);                                                     // 2064
                                                                                                                    // 2065
		if (!preserveMapOffset) {                                                                                         // 2066
			L.DomUtil.setPosition(this._mapPane, new L.Point(0, 0));                                                         // 2067
		} else {                                                                                                          // 2068
			this._initialTopLeftPoint._add(this._getMapPanePos());                                                           // 2069
		}                                                                                                                 // 2070
                                                                                                                    // 2071
		this._tileLayersToLoad = this._tileLayersNum;                                                                     // 2072
                                                                                                                    // 2073
		var loading = !this._loaded;                                                                                      // 2074
		this._loaded = true;                                                                                              // 2075
                                                                                                                    // 2076
		this.fire('viewreset', {hard: !preserveMapOffset});                                                               // 2077
                                                                                                                    // 2078
		if (loading) {                                                                                                    // 2079
			this.fire('load');                                                                                               // 2080
			this.eachLayer(this._layerAdd, this);                                                                            // 2081
		}                                                                                                                 // 2082
                                                                                                                    // 2083
		this.fire('move');                                                                                                // 2084
                                                                                                                    // 2085
		if (zoomChanged || afterZoomAnim) {                                                                               // 2086
			this.fire('zoomend');                                                                                            // 2087
		}                                                                                                                 // 2088
                                                                                                                    // 2089
		this.fire('moveend', {hard: !preserveMapOffset});                                                                 // 2090
	},                                                                                                                 // 2091
                                                                                                                    // 2092
	_rawPanBy: function (offset) {                                                                                     // 2093
		L.DomUtil.setPosition(this._mapPane, this._getMapPanePos().subtract(offset));                                     // 2094
	},                                                                                                                 // 2095
                                                                                                                    // 2096
	_getZoomSpan: function () {                                                                                        // 2097
		return this.getMaxZoom() - this.getMinZoom();                                                                     // 2098
	},                                                                                                                 // 2099
                                                                                                                    // 2100
	_updateZoomLevels: function () {                                                                                   // 2101
		var i,                                                                                                            // 2102
			minZoom = Infinity,                                                                                              // 2103
			maxZoom = -Infinity,                                                                                             // 2104
			oldZoomSpan = this._getZoomSpan();                                                                               // 2105
                                                                                                                    // 2106
		for (i in this._zoomBoundLayers) {                                                                                // 2107
			var layer = this._zoomBoundLayers[i];                                                                            // 2108
			if (!isNaN(layer.options.minZoom)) {                                                                             // 2109
				minZoom = Math.min(minZoom, layer.options.minZoom);                                                             // 2110
			}                                                                                                                // 2111
			if (!isNaN(layer.options.maxZoom)) {                                                                             // 2112
				maxZoom = Math.max(maxZoom, layer.options.maxZoom);                                                             // 2113
			}                                                                                                                // 2114
		}                                                                                                                 // 2115
                                                                                                                    // 2116
		if (i === undefined) { // we have no tilelayers                                                                   // 2117
			this._layersMaxZoom = this._layersMinZoom = undefined;                                                           // 2118
		} else {                                                                                                          // 2119
			this._layersMaxZoom = maxZoom;                                                                                   // 2120
			this._layersMinZoom = minZoom;                                                                                   // 2121
		}                                                                                                                 // 2122
                                                                                                                    // 2123
		if (oldZoomSpan !== this._getZoomSpan()) {                                                                        // 2124
			this.fire('zoomlevelschange');                                                                                   // 2125
		}                                                                                                                 // 2126
	},                                                                                                                 // 2127
                                                                                                                    // 2128
	_panInsideMaxBounds: function () {                                                                                 // 2129
		this.panInsideBounds(this.options.maxBounds);                                                                     // 2130
	},                                                                                                                 // 2131
                                                                                                                    // 2132
	_checkIfLoaded: function () {                                                                                      // 2133
		if (!this._loaded) {                                                                                              // 2134
			throw new Error('Set map center and zoom first.');                                                               // 2135
		}                                                                                                                 // 2136
	},                                                                                                                 // 2137
                                                                                                                    // 2138
	// map events                                                                                                      // 2139
                                                                                                                    // 2140
	_initEvents: function (onOff) {                                                                                    // 2141
		if (!L.DomEvent) { return; }                                                                                      // 2142
                                                                                                                    // 2143
		onOff = onOff || 'on';                                                                                            // 2144
                                                                                                                    // 2145
		L.DomEvent[onOff](this._container, 'click', this._onMouseClick, this);                                            // 2146
                                                                                                                    // 2147
		var events = ['dblclick', 'mousedown', 'mouseup', 'mouseenter',                                                   // 2148
		              'mouseleave', 'mousemove', 'contextmenu'],                                                          // 2149
		    i, len;                                                                                                       // 2150
                                                                                                                    // 2151
		for (i = 0, len = events.length; i < len; i++) {                                                                  // 2152
			L.DomEvent[onOff](this._container, events[i], this._fireMouseEvent, this);                                       // 2153
		}                                                                                                                 // 2154
                                                                                                                    // 2155
		if (this.options.trackResize) {                                                                                   // 2156
			L.DomEvent[onOff](window, 'resize', this._onResize, this);                                                       // 2157
		}                                                                                                                 // 2158
	},                                                                                                                 // 2159
                                                                                                                    // 2160
	_onResize: function () {                                                                                           // 2161
		L.Util.cancelAnimFrame(this._resizeRequest);                                                                      // 2162
		this._resizeRequest = L.Util.requestAnimFrame(                                                                    // 2163
		        function () { this.invalidateSize({debounceMoveend: true}); }, this, false, this._container);             // 2164
	},                                                                                                                 // 2165
                                                                                                                    // 2166
	_onMouseClick: function (e) {                                                                                      // 2167
		if (!this._loaded || (!e._simulated &&                                                                            // 2168
		        ((this.dragging && this.dragging.moved()) ||                                                              // 2169
		         (this.boxZoom  && this.boxZoom.moved()))) ||                                                             // 2170
		            L.DomEvent._skipped(e)) { return; }                                                                   // 2171
                                                                                                                    // 2172
		this.fire('preclick');                                                                                            // 2173
		this._fireMouseEvent(e);                                                                                          // 2174
	},                                                                                                                 // 2175
                                                                                                                    // 2176
	_fireMouseEvent: function (e) {                                                                                    // 2177
		if (!this._loaded || L.DomEvent._skipped(e)) { return; }                                                          // 2178
                                                                                                                    // 2179
		var type = e.type;                                                                                                // 2180
                                                                                                                    // 2181
		type = (type === 'mouseenter' ? 'mouseover' : (type === 'mouseleave' ? 'mouseout' : type));                       // 2182
                                                                                                                    // 2183
		if (!this.hasEventListeners(type)) { return; }                                                                    // 2184
                                                                                                                    // 2185
		if (type === 'contextmenu') {                                                                                     // 2186
			L.DomEvent.preventDefault(e);                                                                                    // 2187
		}                                                                                                                 // 2188
                                                                                                                    // 2189
		var containerPoint = this.mouseEventToContainerPoint(e),                                                          // 2190
		    layerPoint = this.containerPointToLayerPoint(containerPoint),                                                 // 2191
		    latlng = this.layerPointToLatLng(layerPoint);                                                                 // 2192
                                                                                                                    // 2193
		this.fire(type, {                                                                                                 // 2194
			latlng: latlng,                                                                                                  // 2195
			layerPoint: layerPoint,                                                                                          // 2196
			containerPoint: containerPoint,                                                                                  // 2197
			originalEvent: e                                                                                                 // 2198
		});                                                                                                               // 2199
	},                                                                                                                 // 2200
                                                                                                                    // 2201
	_onTileLayerLoad: function () {                                                                                    // 2202
		this._tileLayersToLoad--;                                                                                         // 2203
		if (this._tileLayersNum && !this._tileLayersToLoad) {                                                             // 2204
			this.fire('tilelayersload');                                                                                     // 2205
		}                                                                                                                 // 2206
	},                                                                                                                 // 2207
                                                                                                                    // 2208
	_clearHandlers: function () {                                                                                      // 2209
		for (var i = 0, len = this._handlers.length; i < len; i++) {                                                      // 2210
			this._handlers[i].disable();                                                                                     // 2211
		}                                                                                                                 // 2212
	},                                                                                                                 // 2213
                                                                                                                    // 2214
	whenReady: function (callback, context) {                                                                          // 2215
		if (this._loaded) {                                                                                               // 2216
			callback.call(context || this, this);                                                                            // 2217
		} else {                                                                                                          // 2218
			this.on('load', callback, context);                                                                              // 2219
		}                                                                                                                 // 2220
		return this;                                                                                                      // 2221
	},                                                                                                                 // 2222
                                                                                                                    // 2223
	_layerAdd: function (layer) {                                                                                      // 2224
		layer.onAdd(this);                                                                                                // 2225
		this.fire('layeradd', {layer: layer});                                                                            // 2226
	},                                                                                                                 // 2227
                                                                                                                    // 2228
                                                                                                                    // 2229
	// private methods for getting map state                                                                           // 2230
                                                                                                                    // 2231
	_getMapPanePos: function () {                                                                                      // 2232
		return L.DomUtil.getPosition(this._mapPane);                                                                      // 2233
	},                                                                                                                 // 2234
                                                                                                                    // 2235
	_moved: function () {                                                                                              // 2236
		var pos = this._getMapPanePos();                                                                                  // 2237
		return pos && !pos.equals([0, 0]);                                                                                // 2238
	},                                                                                                                 // 2239
                                                                                                                    // 2240
	_getTopLeftPoint: function () {                                                                                    // 2241
		return this.getPixelOrigin().subtract(this._getMapPanePos());                                                     // 2242
	},                                                                                                                 // 2243
                                                                                                                    // 2244
	_getNewTopLeftPoint: function (center, zoom) {                                                                     // 2245
		var viewHalf = this.getSize()._divideBy(2);                                                                       // 2246
		// TODO round on display, not calculation to increase precision?                                                  // 2247
		return this.project(center, zoom)._subtract(viewHalf)._round();                                                   // 2248
	},                                                                                                                 // 2249
                                                                                                                    // 2250
	_latLngToNewLayerPoint: function (latlng, newZoom, newCenter) {                                                    // 2251
		var topLeft = this._getNewTopLeftPoint(newCenter, newZoom).add(this._getMapPanePos());                            // 2252
		return this.project(latlng, newZoom)._subtract(topLeft);                                                          // 2253
	},                                                                                                                 // 2254
                                                                                                                    // 2255
	// layer point of the current center                                                                               // 2256
	_getCenterLayerPoint: function () {                                                                                // 2257
		return this.containerPointToLayerPoint(this.getSize()._divideBy(2));                                              // 2258
	},                                                                                                                 // 2259
                                                                                                                    // 2260
	// offset of the specified place to the current center in pixels                                                   // 2261
	_getCenterOffset: function (latlng) {                                                                              // 2262
		return this.latLngToLayerPoint(latlng).subtract(this._getCenterLayerPoint());                                     // 2263
	},                                                                                                                 // 2264
                                                                                                                    // 2265
	// adjust center for view to get inside bounds                                                                     // 2266
	_limitCenter: function (center, zoom, bounds) {                                                                    // 2267
                                                                                                                    // 2268
		if (!bounds) { return center; }                                                                                   // 2269
                                                                                                                    // 2270
		var centerPoint = this.project(center, zoom),                                                                     // 2271
		    viewHalf = this.getSize().divideBy(2),                                                                        // 2272
		    viewBounds = new L.Bounds(centerPoint.subtract(viewHalf), centerPoint.add(viewHalf)),                         // 2273
		    offset = this._getBoundsOffset(viewBounds, bounds, zoom);                                                     // 2274
                                                                                                                    // 2275
		return this.unproject(centerPoint.add(offset), zoom);                                                             // 2276
	},                                                                                                                 // 2277
                                                                                                                    // 2278
	// adjust offset for view to get inside bounds                                                                     // 2279
	_limitOffset: function (offset, bounds) {                                                                          // 2280
		if (!bounds) { return offset; }                                                                                   // 2281
                                                                                                                    // 2282
		var viewBounds = this.getPixelBounds(),                                                                           // 2283
		    newBounds = new L.Bounds(viewBounds.min.add(offset), viewBounds.max.add(offset));                             // 2284
                                                                                                                    // 2285
		return offset.add(this._getBoundsOffset(newBounds, bounds));                                                      // 2286
	},                                                                                                                 // 2287
                                                                                                                    // 2288
	// returns offset needed for pxBounds to get inside maxBounds at a specified zoom                                  // 2289
	_getBoundsOffset: function (pxBounds, maxBounds, zoom) {                                                           // 2290
		var nwOffset = this.project(maxBounds.getNorthWest(), zoom).subtract(pxBounds.min),                               // 2291
		    seOffset = this.project(maxBounds.getSouthEast(), zoom).subtract(pxBounds.max),                               // 2292
                                                                                                                    // 2293
		    dx = this._rebound(nwOffset.x, -seOffset.x),                                                                  // 2294
		    dy = this._rebound(nwOffset.y, -seOffset.y);                                                                  // 2295
                                                                                                                    // 2296
		return new L.Point(dx, dy);                                                                                       // 2297
	},                                                                                                                 // 2298
                                                                                                                    // 2299
	_rebound: function (left, right) {                                                                                 // 2300
		return left + right > 0 ?                                                                                         // 2301
			Math.round(left - right) / 2 :                                                                                   // 2302
			Math.max(0, Math.ceil(left)) - Math.max(0, Math.floor(right));                                                   // 2303
	},                                                                                                                 // 2304
                                                                                                                    // 2305
	_limitZoom: function (zoom) {                                                                                      // 2306
		var min = this.getMinZoom(),                                                                                      // 2307
		    max = this.getMaxZoom();                                                                                      // 2308
                                                                                                                    // 2309
		return Math.max(min, Math.min(max, zoom));                                                                        // 2310
	}                                                                                                                  // 2311
});                                                                                                                 // 2312
                                                                                                                    // 2313
L.map = function (id, options) {                                                                                    // 2314
	return new L.Map(id, options);                                                                                     // 2315
};                                                                                                                  // 2316
                                                                                                                    // 2317
                                                                                                                    // 2318
/*                                                                                                                  // 2319
 * Mercator projection that takes into account that the Earth is not a perfect sphere.                              // 2320
 * Less popular than spherical mercator; used by projections like EPSG:3395.                                        // 2321
 */                                                                                                                 // 2322
                                                                                                                    // 2323
L.Projection.Mercator = {                                                                                           // 2324
	MAX_LATITUDE: 85.0840591556,                                                                                       // 2325
                                                                                                                    // 2326
	R_MINOR: 6356752.314245179,                                                                                        // 2327
	R_MAJOR: 6378137,                                                                                                  // 2328
                                                                                                                    // 2329
	project: function (latlng) { // (LatLng) -> Point                                                                  // 2330
		var d = L.LatLng.DEG_TO_RAD,                                                                                      // 2331
		    max = this.MAX_LATITUDE,                                                                                      // 2332
		    lat = Math.max(Math.min(max, latlng.lat), -max),                                                              // 2333
		    r = this.R_MAJOR,                                                                                             // 2334
		    r2 = this.R_MINOR,                                                                                            // 2335
		    x = latlng.lng * d * r,                                                                                       // 2336
		    y = lat * d,                                                                                                  // 2337
		    tmp = r2 / r,                                                                                                 // 2338
		    eccent = Math.sqrt(1.0 - tmp * tmp),                                                                          // 2339
		    con = eccent * Math.sin(y);                                                                                   // 2340
                                                                                                                    // 2341
		con = Math.pow((1 - con) / (1 + con), eccent * 0.5);                                                              // 2342
                                                                                                                    // 2343
		var ts = Math.tan(0.5 * ((Math.PI * 0.5) - y)) / con;                                                             // 2344
		y = -r * Math.log(ts);                                                                                            // 2345
                                                                                                                    // 2346
		return new L.Point(x, y);                                                                                         // 2347
	},                                                                                                                 // 2348
                                                                                                                    // 2349
	unproject: function (point) { // (Point, Boolean) -> LatLng                                                        // 2350
		var d = L.LatLng.RAD_TO_DEG,                                                                                      // 2351
		    r = this.R_MAJOR,                                                                                             // 2352
		    r2 = this.R_MINOR,                                                                                            // 2353
		    lng = point.x * d / r,                                                                                        // 2354
		    tmp = r2 / r,                                                                                                 // 2355
		    eccent = Math.sqrt(1 - (tmp * tmp)),                                                                          // 2356
		    ts = Math.exp(- point.y / r),                                                                                 // 2357
		    phi = (Math.PI / 2) - 2 * Math.atan(ts),                                                                      // 2358
		    numIter = 15,                                                                                                 // 2359
		    tol = 1e-7,                                                                                                   // 2360
		    i = numIter,                                                                                                  // 2361
		    dphi = 0.1,                                                                                                   // 2362
		    con;                                                                                                          // 2363
                                                                                                                    // 2364
		while ((Math.abs(dphi) > tol) && (--i > 0)) {                                                                     // 2365
			con = eccent * Math.sin(phi);                                                                                    // 2366
			dphi = (Math.PI / 2) - 2 * Math.atan(ts *                                                                        // 2367
			            Math.pow((1.0 - con) / (1.0 + con), 0.5 * eccent)) - phi;                                            // 2368
			phi += dphi;                                                                                                     // 2369
		}                                                                                                                 // 2370
                                                                                                                    // 2371
		return new L.LatLng(phi * d, lng);                                                                                // 2372
	}                                                                                                                  // 2373
};                                                                                                                  // 2374
                                                                                                                    // 2375
                                                                                                                    // 2376
                                                                                                                    // 2377
L.CRS.EPSG3395 = L.extend({}, L.CRS, {                                                                              // 2378
	code: 'EPSG:3395',                                                                                                 // 2379
                                                                                                                    // 2380
	projection: L.Projection.Mercator,                                                                                 // 2381
                                                                                                                    // 2382
	transformation: (function () {                                                                                     // 2383
		var m = L.Projection.Mercator,                                                                                    // 2384
		    r = m.R_MAJOR,                                                                                                // 2385
		    scale = 0.5 / (Math.PI * r);                                                                                  // 2386
                                                                                                                    // 2387
		return new L.Transformation(scale, 0.5, -scale, 0.5);                                                             // 2388
	}())                                                                                                               // 2389
});                                                                                                                 // 2390
                                                                                                                    // 2391
                                                                                                                    // 2392
/*                                                                                                                  // 2393
 * L.TileLayer is used for standard xyz-numbered tile layers.                                                       // 2394
 */                                                                                                                 // 2395
                                                                                                                    // 2396
L.TileLayer = L.Class.extend({                                                                                      // 2397
	includes: L.Mixin.Events,                                                                                          // 2398
                                                                                                                    // 2399
	options: {                                                                                                         // 2400
		minZoom: 0,                                                                                                       // 2401
		maxZoom: 18,                                                                                                      // 2402
		tileSize: 256,                                                                                                    // 2403
		subdomains: 'abc',                                                                                                // 2404
		errorTileUrl: '',                                                                                                 // 2405
		attribution: '',                                                                                                  // 2406
		zoomOffset: 0,                                                                                                    // 2407
		opacity: 1,                                                                                                       // 2408
		/*                                                                                                                // 2409
		maxNativeZoom: null,                                                                                              // 2410
		zIndex: null,                                                                                                     // 2411
		tms: false,                                                                                                       // 2412
		continuousWorld: false,                                                                                           // 2413
		noWrap: false,                                                                                                    // 2414
		zoomReverse: false,                                                                                               // 2415
		detectRetina: false,                                                                                              // 2416
		reuseTiles: false,                                                                                                // 2417
		bounds: false,                                                                                                    // 2418
		*/                                                                                                                // 2419
		unloadInvisibleTiles: L.Browser.mobile,                                                                           // 2420
		updateWhenIdle: L.Browser.mobile                                                                                  // 2421
	},                                                                                                                 // 2422
                                                                                                                    // 2423
	initialize: function (url, options) {                                                                              // 2424
		options = L.setOptions(this, options);                                                                            // 2425
                                                                                                                    // 2426
		// detecting retina displays, adjusting tileSize and zoom levels                                                  // 2427
		if (options.detectRetina && L.Browser.retina && options.maxZoom > 0) {                                            // 2428
                                                                                                                    // 2429
			options.tileSize = Math.floor(options.tileSize / 2);                                                             // 2430
			options.zoomOffset++;                                                                                            // 2431
                                                                                                                    // 2432
			if (options.minZoom > 0) {                                                                                       // 2433
				options.minZoom--;                                                                                              // 2434
			}                                                                                                                // 2435
			this.options.maxZoom--;                                                                                          // 2436
		}                                                                                                                 // 2437
                                                                                                                    // 2438
		if (options.bounds) {                                                                                             // 2439
			options.bounds = L.latLngBounds(options.bounds);                                                                 // 2440
		}                                                                                                                 // 2441
                                                                                                                    // 2442
		this._url = url;                                                                                                  // 2443
                                                                                                                    // 2444
		var subdomains = this.options.subdomains;                                                                         // 2445
                                                                                                                    // 2446
		if (typeof subdomains === 'string') {                                                                             // 2447
			this.options.subdomains = subdomains.split('');                                                                  // 2448
		}                                                                                                                 // 2449
	},                                                                                                                 // 2450
                                                                                                                    // 2451
	onAdd: function (map) {                                                                                            // 2452
		this._map = map;                                                                                                  // 2453
		this._animated = map._zoomAnimated;                                                                               // 2454
                                                                                                                    // 2455
		// create a container div for tiles                                                                               // 2456
		this._initContainer();                                                                                            // 2457
                                                                                                                    // 2458
		// set up events                                                                                                  // 2459
		map.on({                                                                                                          // 2460
			'viewreset': this._reset,                                                                                        // 2461
			'moveend': this._update                                                                                          // 2462
		}, this);                                                                                                         // 2463
                                                                                                                    // 2464
		if (this._animated) {                                                                                             // 2465
			map.on({                                                                                                         // 2466
				'zoomanim': this._animateZoom,                                                                                  // 2467
				'zoomend': this._endZoomAnim                                                                                    // 2468
			}, this);                                                                                                        // 2469
		}                                                                                                                 // 2470
                                                                                                                    // 2471
		if (!this.options.updateWhenIdle) {                                                                               // 2472
			this._limitedUpdate = L.Util.limitExecByInterval(this._update, 150, this);                                       // 2473
			map.on('move', this._limitedUpdate, this);                                                                       // 2474
		}                                                                                                                 // 2475
                                                                                                                    // 2476
		this._reset();                                                                                                    // 2477
		this._update();                                                                                                   // 2478
	},                                                                                                                 // 2479
                                                                                                                    // 2480
	addTo: function (map) {                                                                                            // 2481
		map.addLayer(this);                                                                                               // 2482
		return this;                                                                                                      // 2483
	},                                                                                                                 // 2484
                                                                                                                    // 2485
	onRemove: function (map) {                                                                                         // 2486
		this._container.parentNode.removeChild(this._container);                                                          // 2487
                                                                                                                    // 2488
		map.off({                                                                                                         // 2489
			'viewreset': this._reset,                                                                                        // 2490
			'moveend': this._update                                                                                          // 2491
		}, this);                                                                                                         // 2492
                                                                                                                    // 2493
		if (this._animated) {                                                                                             // 2494
			map.off({                                                                                                        // 2495
				'zoomanim': this._animateZoom,                                                                                  // 2496
				'zoomend': this._endZoomAnim                                                                                    // 2497
			}, this);                                                                                                        // 2498
		}                                                                                                                 // 2499
                                                                                                                    // 2500
		if (!this.options.updateWhenIdle) {                                                                               // 2501
			map.off('move', this._limitedUpdate, this);                                                                      // 2502
		}                                                                                                                 // 2503
                                                                                                                    // 2504
		this._container = null;                                                                                           // 2505
		this._map = null;                                                                                                 // 2506
	},                                                                                                                 // 2507
                                                                                                                    // 2508
	bringToFront: function () {                                                                                        // 2509
		var pane = this._map._panes.tilePane;                                                                             // 2510
                                                                                                                    // 2511
		if (this._container) {                                                                                            // 2512
			pane.appendChild(this._container);                                                                               // 2513
			this._setAutoZIndex(pane, Math.max);                                                                             // 2514
		}                                                                                                                 // 2515
                                                                                                                    // 2516
		return this;                                                                                                      // 2517
	},                                                                                                                 // 2518
                                                                                                                    // 2519
	bringToBack: function () {                                                                                         // 2520
		var pane = this._map._panes.tilePane;                                                                             // 2521
                                                                                                                    // 2522
		if (this._container) {                                                                                            // 2523
			pane.insertBefore(this._container, pane.firstChild);                                                             // 2524
			this._setAutoZIndex(pane, Math.min);                                                                             // 2525
		}                                                                                                                 // 2526
                                                                                                                    // 2527
		return this;                                                                                                      // 2528
	},                                                                                                                 // 2529
                                                                                                                    // 2530
	getAttribution: function () {                                                                                      // 2531
		return this.options.attribution;                                                                                  // 2532
	},                                                                                                                 // 2533
                                                                                                                    // 2534
	getContainer: function () {                                                                                        // 2535
		return this._container;                                                                                           // 2536
	},                                                                                                                 // 2537
                                                                                                                    // 2538
	setOpacity: function (opacity) {                                                                                   // 2539
		this.options.opacity = opacity;                                                                                   // 2540
                                                                                                                    // 2541
		if (this._map) {                                                                                                  // 2542
			this._updateOpacity();                                                                                           // 2543
		}                                                                                                                 // 2544
                                                                                                                    // 2545
		return this;                                                                                                      // 2546
	},                                                                                                                 // 2547
                                                                                                                    // 2548
	setZIndex: function (zIndex) {                                                                                     // 2549
		this.options.zIndex = zIndex;                                                                                     // 2550
		this._updateZIndex();                                                                                             // 2551
                                                                                                                    // 2552
		return this;                                                                                                      // 2553
	},                                                                                                                 // 2554
                                                                                                                    // 2555
	setUrl: function (url, noRedraw) {                                                                                 // 2556
		this._url = url;                                                                                                  // 2557
                                                                                                                    // 2558
		if (!noRedraw) {                                                                                                  // 2559
			this.redraw();                                                                                                   // 2560
		}                                                                                                                 // 2561
                                                                                                                    // 2562
		return this;                                                                                                      // 2563
	},                                                                                                                 // 2564
                                                                                                                    // 2565
	redraw: function () {                                                                                              // 2566
		if (this._map) {                                                                                                  // 2567
			this._reset({hard: true});                                                                                       // 2568
			this._update();                                                                                                  // 2569
		}                                                                                                                 // 2570
		return this;                                                                                                      // 2571
	},                                                                                                                 // 2572
                                                                                                                    // 2573
	_updateZIndex: function () {                                                                                       // 2574
		if (this._container && this.options.zIndex !== undefined) {                                                       // 2575
			this._container.style.zIndex = this.options.zIndex;                                                              // 2576
		}                                                                                                                 // 2577
	},                                                                                                                 // 2578
                                                                                                                    // 2579
	_setAutoZIndex: function (pane, compare) {                                                                         // 2580
                                                                                                                    // 2581
		var layers = pane.children,                                                                                       // 2582
		    edgeZIndex = -compare(Infinity, -Infinity), // -Infinity for max, Infinity for min                            // 2583
		    zIndex, i, len;                                                                                               // 2584
                                                                                                                    // 2585
		for (i = 0, len = layers.length; i < len; i++) {                                                                  // 2586
                                                                                                                    // 2587
			if (layers[i] !== this._container) {                                                                             // 2588
				zIndex = parseInt(layers[i].style.zIndex, 10);                                                                  // 2589
                                                                                                                    // 2590
				if (!isNaN(zIndex)) {                                                                                           // 2591
					edgeZIndex = compare(edgeZIndex, zIndex);                                                                      // 2592
				}                                                                                                               // 2593
			}                                                                                                                // 2594
		}                                                                                                                 // 2595
                                                                                                                    // 2596
		this.options.zIndex = this._container.style.zIndex =                                                              // 2597
		        (isFinite(edgeZIndex) ? edgeZIndex : 0) + compare(1, -1);                                                 // 2598
	},                                                                                                                 // 2599
                                                                                                                    // 2600
	_updateOpacity: function () {                                                                                      // 2601
		var i,                                                                                                            // 2602
		    tiles = this._tiles;                                                                                          // 2603
                                                                                                                    // 2604
		if (L.Browser.ielt9) {                                                                                            // 2605
			for (i in tiles) {                                                                                               // 2606
				L.DomUtil.setOpacity(tiles[i], this.options.opacity);                                                           // 2607
			}                                                                                                                // 2608
		} else {                                                                                                          // 2609
			L.DomUtil.setOpacity(this._container, this.options.opacity);                                                     // 2610
		}                                                                                                                 // 2611
	},                                                                                                                 // 2612
                                                                                                                    // 2613
	_initContainer: function () {                                                                                      // 2614
		var tilePane = this._map._panes.tilePane;                                                                         // 2615
                                                                                                                    // 2616
		if (!this._container) {                                                                                           // 2617
			this._container = L.DomUtil.create('div', 'leaflet-layer');                                                      // 2618
                                                                                                                    // 2619
			this._updateZIndex();                                                                                            // 2620
                                                                                                                    // 2621
			if (this._animated) {                                                                                            // 2622
				var className = 'leaflet-tile-container';                                                                       // 2623
                                                                                                                    // 2624
				this._bgBuffer = L.DomUtil.create('div', className, this._container);                                           // 2625
				this._tileContainer = L.DomUtil.create('div', className, this._container);                                      // 2626
                                                                                                                    // 2627
			} else {                                                                                                         // 2628
				this._tileContainer = this._container;                                                                          // 2629
			}                                                                                                                // 2630
                                                                                                                    // 2631
			tilePane.appendChild(this._container);                                                                           // 2632
                                                                                                                    // 2633
			if (this.options.opacity < 1) {                                                                                  // 2634
				this._updateOpacity();                                                                                          // 2635
			}                                                                                                                // 2636
		}                                                                                                                 // 2637
	},                                                                                                                 // 2638
                                                                                                                    // 2639
	_reset: function (e) {                                                                                             // 2640
		for (var key in this._tiles) {                                                                                    // 2641
			this.fire('tileunload', {tile: this._tiles[key]});                                                               // 2642
		}                                                                                                                 // 2643
                                                                                                                    // 2644
		this._tiles = {};                                                                                                 // 2645
		this._tilesToLoad = 0;                                                                                            // 2646
                                                                                                                    // 2647
		if (this.options.reuseTiles) {                                                                                    // 2648
			this._unusedTiles = [];                                                                                          // 2649
		}                                                                                                                 // 2650
                                                                                                                    // 2651
		this._tileContainer.innerHTML = '';                                                                               // 2652
                                                                                                                    // 2653
		if (this._animated && e && e.hard) {                                                                              // 2654
			this._clearBgBuffer();                                                                                           // 2655
		}                                                                                                                 // 2656
                                                                                                                    // 2657
		this._initContainer();                                                                                            // 2658
	},                                                                                                                 // 2659
                                                                                                                    // 2660
	_getTileSize: function () {                                                                                        // 2661
		var map = this._map,                                                                                              // 2662
		    zoom = map.getZoom() + this.options.zoomOffset,                                                               // 2663
		    zoomN = this.options.maxNativeZoom,                                                                           // 2664
		    tileSize = this.options.tileSize;                                                                             // 2665
                                                                                                                    // 2666
		if (zoomN && zoom > zoomN) {                                                                                      // 2667
			tileSize = Math.round(map.getZoomScale(zoom) / map.getZoomScale(zoomN) * tileSize);                              // 2668
		}                                                                                                                 // 2669
                                                                                                                    // 2670
		return tileSize;                                                                                                  // 2671
	},                                                                                                                 // 2672
                                                                                                                    // 2673
	_update: function () {                                                                                             // 2674
                                                                                                                    // 2675
		if (!this._map) { return; }                                                                                       // 2676
                                                                                                                    // 2677
		var map = this._map,                                                                                              // 2678
		    bounds = map.getPixelBounds(),                                                                                // 2679
		    zoom = map.getZoom(),                                                                                         // 2680
		    tileSize = this._getTileSize();                                                                               // 2681
                                                                                                                    // 2682
		if (zoom > this.options.maxZoom || zoom < this.options.minZoom) {                                                 // 2683
			return;                                                                                                          // 2684
		}                                                                                                                 // 2685
                                                                                                                    // 2686
		var tileBounds = L.bounds(                                                                                        // 2687
		        bounds.min.divideBy(tileSize)._floor(),                                                                   // 2688
		        bounds.max.divideBy(tileSize)._floor());                                                                  // 2689
                                                                                                                    // 2690
		this._addTilesFromCenterOut(tileBounds);                                                                          // 2691
                                                                                                                    // 2692
		if (this.options.unloadInvisibleTiles || this.options.reuseTiles) {                                               // 2693
			this._removeOtherTiles(tileBounds);                                                                              // 2694
		}                                                                                                                 // 2695
	},                                                                                                                 // 2696
                                                                                                                    // 2697
	_addTilesFromCenterOut: function (bounds) {                                                                        // 2698
		var queue = [],                                                                                                   // 2699
		    center = bounds.getCenter();                                                                                  // 2700
                                                                                                                    // 2701
		var j, i, point;                                                                                                  // 2702
                                                                                                                    // 2703
		for (j = bounds.min.y; j <= bounds.max.y; j++) {                                                                  // 2704
			for (i = bounds.min.x; i <= bounds.max.x; i++) {                                                                 // 2705
				point = new L.Point(i, j);                                                                                      // 2706
                                                                                                                    // 2707
				if (this._tileShouldBeLoaded(point)) {                                                                          // 2708
					queue.push(point);                                                                                             // 2709
				}                                                                                                               // 2710
			}                                                                                                                // 2711
		}                                                                                                                 // 2712
                                                                                                                    // 2713
		var tilesToLoad = queue.length;                                                                                   // 2714
                                                                                                                    // 2715
		if (tilesToLoad === 0) { return; }                                                                                // 2716
                                                                                                                    // 2717
		// load tiles in order of their distance to center                                                                // 2718
		queue.sort(function (a, b) {                                                                                      // 2719
			return a.distanceTo(center) - b.distanceTo(center);                                                              // 2720
		});                                                                                                               // 2721
                                                                                                                    // 2722
		var fragment = document.createDocumentFragment();                                                                 // 2723
                                                                                                                    // 2724
		// if its the first batch of tiles to load                                                                        // 2725
		if (!this._tilesToLoad) {                                                                                         // 2726
			this.fire('loading');                                                                                            // 2727
		}                                                                                                                 // 2728
                                                                                                                    // 2729
		this._tilesToLoad += tilesToLoad;                                                                                 // 2730
                                                                                                                    // 2731
		for (i = 0; i < tilesToLoad; i++) {                                                                               // 2732
			this._addTile(queue[i], fragment);                                                                               // 2733
		}                                                                                                                 // 2734
                                                                                                                    // 2735
		this._tileContainer.appendChild(fragment);                                                                        // 2736
	},                                                                                                                 // 2737
                                                                                                                    // 2738
	_tileShouldBeLoaded: function (tilePoint) {                                                                        // 2739
		if ((tilePoint.x + ':' + tilePoint.y) in this._tiles) {                                                           // 2740
			return false; // already loaded                                                                                  // 2741
		}                                                                                                                 // 2742
                                                                                                                    // 2743
		var options = this.options;                                                                                       // 2744
                                                                                                                    // 2745
		if (!options.continuousWorld) {                                                                                   // 2746
			var limit = this._getWrapTileNum();                                                                              // 2747
                                                                                                                    // 2748
			// don't load if exceeds world bounds                                                                            // 2749
			if ((options.noWrap && (tilePoint.x < 0 || tilePoint.x >= limit.x)) ||                                           // 2750
				tilePoint.y < 0 || tilePoint.y >= limit.y) { return false; }                                                    // 2751
		}                                                                                                                 // 2752
                                                                                                                    // 2753
		if (options.bounds) {                                                                                             // 2754
			var tileSize = this._getTileSize(),                                                                              // 2755
			    nwPoint = tilePoint.multiplyBy(tileSize),                                                                    // 2756
			    sePoint = nwPoint.add([tileSize, tileSize]),                                                                 // 2757
			    nw = this._map.unproject(nwPoint),                                                                           // 2758
			    se = this._map.unproject(sePoint);                                                                           // 2759
                                                                                                                    // 2760
			// TODO temporary hack, will be removed after refactoring projections                                            // 2761
			// https://github.com/Leaflet/Leaflet/issues/1618                                                                // 2762
			if (!options.continuousWorld && !options.noWrap) {                                                               // 2763
				nw = nw.wrap();                                                                                                 // 2764
				se = se.wrap();                                                                                                 // 2765
			}                                                                                                                // 2766
                                                                                                                    // 2767
			if (!options.bounds.intersects([nw, se])) { return false; }                                                      // 2768
		}                                                                                                                 // 2769
                                                                                                                    // 2770
		return true;                                                                                                      // 2771
	},                                                                                                                 // 2772
                                                                                                                    // 2773
	_removeOtherTiles: function (bounds) {                                                                             // 2774
		var kArr, x, y, key;                                                                                              // 2775
                                                                                                                    // 2776
		for (key in this._tiles) {                                                                                        // 2777
			kArr = key.split(':');                                                                                           // 2778
			x = parseInt(kArr[0], 10);                                                                                       // 2779
			y = parseInt(kArr[1], 10);                                                                                       // 2780
                                                                                                                    // 2781
			// remove tile if it's out of bounds                                                                             // 2782
			if (x < bounds.min.x || x > bounds.max.x || y < bounds.min.y || y > bounds.max.y) {                              // 2783
				this._removeTile(key);                                                                                          // 2784
			}                                                                                                                // 2785
		}                                                                                                                 // 2786
	},                                                                                                                 // 2787
                                                                                                                    // 2788
	_removeTile: function (key) {                                                                                      // 2789
		var tile = this._tiles[key];                                                                                      // 2790
                                                                                                                    // 2791
		this.fire('tileunload', {tile: tile, url: tile.src});                                                             // 2792
                                                                                                                    // 2793
		if (this.options.reuseTiles) {                                                                                    // 2794
			L.DomUtil.removeClass(tile, 'leaflet-tile-loaded');                                                              // 2795
			this._unusedTiles.push(tile);                                                                                    // 2796
                                                                                                                    // 2797
		} else if (tile.parentNode === this._tileContainer) {                                                             // 2798
			this._tileContainer.removeChild(tile);                                                                           // 2799
		}                                                                                                                 // 2800
                                                                                                                    // 2801
		// for https://github.com/CloudMade/Leaflet/issues/137                                                            // 2802
		if (!L.Browser.android) {                                                                                         // 2803
			tile.onload = null;                                                                                              // 2804
			tile.src = L.Util.emptyImageUrl;                                                                                 // 2805
		}                                                                                                                 // 2806
                                                                                                                    // 2807
		delete this._tiles[key];                                                                                          // 2808
	},                                                                                                                 // 2809
                                                                                                                    // 2810
	_addTile: function (tilePoint, container) {                                                                        // 2811
		var tilePos = this._getTilePos(tilePoint);                                                                        // 2812
                                                                                                                    // 2813
		// get unused tile - or create a new tile                                                                         // 2814
		var tile = this._getTile();                                                                                       // 2815
                                                                                                                    // 2816
		/*                                                                                                                // 2817
		Chrome 20 layouts much faster with top/left (verify with timeline, frames)                                        // 2818
		Android 4 browser has display issues with top/left and requires transform instead                                 // 2819
		(other browsers don't currently care) - see debug/hacks/jitter.html for an example                                // 2820
		*/                                                                                                                // 2821
		L.DomUtil.setPosition(tile, tilePos, L.Browser.chrome);                                                           // 2822
                                                                                                                    // 2823
		this._tiles[tilePoint.x + ':' + tilePoint.y] = tile;                                                              // 2824
                                                                                                                    // 2825
		this._loadTile(tile, tilePoint);                                                                                  // 2826
                                                                                                                    // 2827
		if (tile.parentNode !== this._tileContainer) {                                                                    // 2828
			container.appendChild(tile);                                                                                     // 2829
		}                                                                                                                 // 2830
	},                                                                                                                 // 2831
                                                                                                                    // 2832
	_getZoomForUrl: function () {                                                                                      // 2833
                                                                                                                    // 2834
		var options = this.options,                                                                                       // 2835
		    zoom = this._map.getZoom();                                                                                   // 2836
                                                                                                                    // 2837
		if (options.zoomReverse) {                                                                                        // 2838
			zoom = options.maxZoom - zoom;                                                                                   // 2839
		}                                                                                                                 // 2840
                                                                                                                    // 2841
		zoom += options.zoomOffset;                                                                                       // 2842
                                                                                                                    // 2843
		return options.maxNativeZoom ? Math.min(zoom, options.maxNativeZoom) : zoom;                                      // 2844
	},                                                                                                                 // 2845
                                                                                                                    // 2846
	_getTilePos: function (tilePoint) {                                                                                // 2847
		var origin = this._map.getPixelOrigin(),                                                                          // 2848
		    tileSize = this._getTileSize();                                                                               // 2849
                                                                                                                    // 2850
		return tilePoint.multiplyBy(tileSize).subtract(origin);                                                           // 2851
	},                                                                                                                 // 2852
                                                                                                                    // 2853
	// image-specific code (override to implement e.g. Canvas or SVG tile layer)                                       // 2854
                                                                                                                    // 2855
	getTileUrl: function (tilePoint) {                                                                                 // 2856
		return L.Util.template(this._url, L.extend({                                                                      // 2857
			s: this._getSubdomain(tilePoint),                                                                                // 2858
			z: tilePoint.z,                                                                                                  // 2859
			x: tilePoint.x,                                                                                                  // 2860
			y: tilePoint.y                                                                                                   // 2861
		}, this.options));                                                                                                // 2862
	},                                                                                                                 // 2863
                                                                                                                    // 2864
	_getWrapTileNum: function () {                                                                                     // 2865
		var crs = this._map.options.crs,                                                                                  // 2866
		    size = crs.getSize(this._map.getZoom());                                                                      // 2867
		return size.divideBy(this._getTileSize())._floor();                                                               // 2868
	},                                                                                                                 // 2869
                                                                                                                    // 2870
	_adjustTilePoint: function (tilePoint) {                                                                           // 2871
                                                                                                                    // 2872
		var limit = this._getWrapTileNum();                                                                               // 2873
                                                                                                                    // 2874
		// wrap tile coordinates                                                                                          // 2875
		if (!this.options.continuousWorld && !this.options.noWrap) {                                                      // 2876
			tilePoint.x = ((tilePoint.x % limit.x) + limit.x) % limit.x;                                                     // 2877
		}                                                                                                                 // 2878
                                                                                                                    // 2879
		if (this.options.tms) {                                                                                           // 2880
			tilePoint.y = limit.y - tilePoint.y - 1;                                                                         // 2881
		}                                                                                                                 // 2882
                                                                                                                    // 2883
		tilePoint.z = this._getZoomForUrl();                                                                              // 2884
	},                                                                                                                 // 2885
                                                                                                                    // 2886
	_getSubdomain: function (tilePoint) {                                                                              // 2887
		var index = Math.abs(tilePoint.x + tilePoint.y) % this.options.subdomains.length;                                 // 2888
		return this.options.subdomains[index];                                                                            // 2889
	},                                                                                                                 // 2890
                                                                                                                    // 2891
	_getTile: function () {                                                                                            // 2892
		if (this.options.reuseTiles && this._unusedTiles.length > 0) {                                                    // 2893
			var tile = this._unusedTiles.pop();                                                                              // 2894
			this._resetTile(tile);                                                                                           // 2895
			return tile;                                                                                                     // 2896
		}                                                                                                                 // 2897
		return this._createTile();                                                                                        // 2898
	},                                                                                                                 // 2899
                                                                                                                    // 2900
	// Override if data stored on a tile needs to be cleaned up before reuse                                           // 2901
	_resetTile: function (/*tile*/) {},                                                                                // 2902
                                                                                                                    // 2903
	_createTile: function () {                                                                                         // 2904
		var tile = L.DomUtil.create('img', 'leaflet-tile');                                                               // 2905
		tile.style.width = tile.style.height = this._getTileSize() + 'px';                                                // 2906
		tile.galleryimg = 'no';                                                                                           // 2907
                                                                                                                    // 2908
		tile.onselectstart = tile.onmousemove = L.Util.falseFn;                                                           // 2909
                                                                                                                    // 2910
		if (L.Browser.ielt9 && this.options.opacity !== undefined) {                                                      // 2911
			L.DomUtil.setOpacity(tile, this.options.opacity);                                                                // 2912
		}                                                                                                                 // 2913
		// without this hack, tiles disappear after zoom on Chrome for Android                                            // 2914
		// https://github.com/Leaflet/Leaflet/issues/2078                                                                 // 2915
		if (L.Browser.mobileWebkit3d) {                                                                                   // 2916
			tile.style.WebkitBackfaceVisibility = 'hidden';                                                                  // 2917
		}                                                                                                                 // 2918
		return tile;                                                                                                      // 2919
	},                                                                                                                 // 2920
                                                                                                                    // 2921
	_loadTile: function (tile, tilePoint) {                                                                            // 2922
		tile._layer  = this;                                                                                              // 2923
		tile.onload  = this._tileOnLoad;                                                                                  // 2924
		tile.onerror = this._tileOnError;                                                                                 // 2925
                                                                                                                    // 2926
		this._adjustTilePoint(tilePoint);                                                                                 // 2927
		tile.src     = this.getTileUrl(tilePoint);                                                                        // 2928
                                                                                                                    // 2929
		this.fire('tileloadstart', {                                                                                      // 2930
			tile: tile,                                                                                                      // 2931
			url: tile.src                                                                                                    // 2932
		});                                                                                                               // 2933
	},                                                                                                                 // 2934
                                                                                                                    // 2935
	_tileLoaded: function () {                                                                                         // 2936
		this._tilesToLoad--;                                                                                              // 2937
                                                                                                                    // 2938
		if (this._animated) {                                                                                             // 2939
			L.DomUtil.addClass(this._tileContainer, 'leaflet-zoom-animated');                                                // 2940
		}                                                                                                                 // 2941
                                                                                                                    // 2942
		if (!this._tilesToLoad) {                                                                                         // 2943
			this.fire('load');                                                                                               // 2944
                                                                                                                    // 2945
			if (this._animated) {                                                                                            // 2946
				// clear scaled tiles after all new tiles are loaded (for performance)                                          // 2947
				clearTimeout(this._clearBgBufferTimer);                                                                         // 2948
				this._clearBgBufferTimer = setTimeout(L.bind(this._clearBgBuffer, this), 500);                                  // 2949
			}                                                                                                                // 2950
		}                                                                                                                 // 2951
	},                                                                                                                 // 2952
                                                                                                                    // 2953
	_tileOnLoad: function () {                                                                                         // 2954
		var layer = this._layer;                                                                                          // 2955
                                                                                                                    // 2956
		//Only if we are loading an actual image                                                                          // 2957
		if (this.src !== L.Util.emptyImageUrl) {                                                                          // 2958
			L.DomUtil.addClass(this, 'leaflet-tile-loaded');                                                                 // 2959
                                                                                                                    // 2960
			layer.fire('tileload', {                                                                                         // 2961
				tile: this,                                                                                                     // 2962
				url: this.src                                                                                                   // 2963
			});                                                                                                              // 2964
		}                                                                                                                 // 2965
                                                                                                                    // 2966
		layer._tileLoaded();                                                                                              // 2967
	},                                                                                                                 // 2968
                                                                                                                    // 2969
	_tileOnError: function () {                                                                                        // 2970
		var layer = this._layer;                                                                                          // 2971
                                                                                                                    // 2972
		layer.fire('tileerror', {                                                                                         // 2973
			tile: this,                                                                                                      // 2974
			url: this.src                                                                                                    // 2975
		});                                                                                                               // 2976
                                                                                                                    // 2977
		var newUrl = layer.options.errorTileUrl;                                                                          // 2978
		if (newUrl) {                                                                                                     // 2979
			this.src = newUrl;                                                                                               // 2980
		}                                                                                                                 // 2981
                                                                                                                    // 2982
		layer._tileLoaded();                                                                                              // 2983
	}                                                                                                                  // 2984
});                                                                                                                 // 2985
                                                                                                                    // 2986
L.tileLayer = function (url, options) {                                                                             // 2987
	return new L.TileLayer(url, options);                                                                              // 2988
};                                                                                                                  // 2989
                                                                                                                    // 2990
                                                                                                                    // 2991
/*                                                                                                                  // 2992
 * L.TileLayer.WMS is used for putting WMS tile layers on the map.                                                  // 2993
 */                                                                                                                 // 2994
                                                                                                                    // 2995
L.TileLayer.WMS = L.TileLayer.extend({                                                                              // 2996
                                                                                                                    // 2997
	defaultWmsParams: {                                                                                                // 2998
		service: 'WMS',                                                                                                   // 2999
		request: 'GetMap',                                                                                                // 3000
		version: '1.1.1',                                                                                                 // 3001
		layers: '',                                                                                                       // 3002
		styles: '',                                                                                                       // 3003
		format: 'image/jpeg',                                                                                             // 3004
		transparent: false                                                                                                // 3005
	},                                                                                                                 // 3006
                                                                                                                    // 3007
	initialize: function (url, options) { // (String, Object)                                                          // 3008
                                                                                                                    // 3009
		this._url = url;                                                                                                  // 3010
                                                                                                                    // 3011
		var wmsParams = L.extend({}, this.defaultWmsParams),                                                              // 3012
		    tileSize = options.tileSize || this.options.tileSize;                                                         // 3013
                                                                                                                    // 3014
		if (options.detectRetina && L.Browser.retina) {                                                                   // 3015
			wmsParams.width = wmsParams.height = tileSize * 2;                                                               // 3016
		} else {                                                                                                          // 3017
			wmsParams.width = wmsParams.height = tileSize;                                                                   // 3018
		}                                                                                                                 // 3019
                                                                                                                    // 3020
		for (var i in options) {                                                                                          // 3021
			// all keys that are not TileLayer options go to WMS params                                                      // 3022
			if (!this.options.hasOwnProperty(i) && i !== 'crs') {                                                            // 3023
				wmsParams[i] = options[i];                                                                                      // 3024
			}                                                                                                                // 3025
		}                                                                                                                 // 3026
                                                                                                                    // 3027
		this.wmsParams = wmsParams;                                                                                       // 3028
                                                                                                                    // 3029
		L.setOptions(this, options);                                                                                      // 3030
	},                                                                                                                 // 3031
                                                                                                                    // 3032
	onAdd: function (map) {                                                                                            // 3033
                                                                                                                    // 3034
		this._crs = this.options.crs || map.options.crs;                                                                  // 3035
                                                                                                                    // 3036
		this._wmsVersion = parseFloat(this.wmsParams.version);                                                            // 3037
                                                                                                                    // 3038
		var projectionKey = this._wmsVersion >= 1.3 ? 'crs' : 'srs';                                                      // 3039
		this.wmsParams[projectionKey] = this._crs.code;                                                                   // 3040
                                                                                                                    // 3041
		L.TileLayer.prototype.onAdd.call(this, map);                                                                      // 3042
	},                                                                                                                 // 3043
                                                                                                                    // 3044
	getTileUrl: function (tilePoint) { // (Point, Number) -> String                                                    // 3045
                                                                                                                    // 3046
		var map = this._map,                                                                                              // 3047
		    tileSize = this.options.tileSize,                                                                             // 3048
                                                                                                                    // 3049
		    nwPoint = tilePoint.multiplyBy(tileSize),                                                                     // 3050
		    sePoint = nwPoint.add([tileSize, tileSize]),                                                                  // 3051
                                                                                                                    // 3052
		    nw = this._crs.project(map.unproject(nwPoint, tilePoint.z)),                                                  // 3053
		    se = this._crs.project(map.unproject(sePoint, tilePoint.z)),                                                  // 3054
		    bbox = this._wmsVersion >= 1.3 && this._crs === L.CRS.EPSG4326 ?                                              // 3055
		        [se.y, nw.x, nw.y, se.x].join(',') :                                                                      // 3056
		        [nw.x, se.y, se.x, nw.y].join(','),                                                                       // 3057
                                                                                                                    // 3058
		    url = L.Util.template(this._url, {s: this._getSubdomain(tilePoint)});                                         // 3059
                                                                                                                    // 3060
		return url + L.Util.getParamString(this.wmsParams, url, true) + '&BBOX=' + bbox;                                  // 3061
	},                                                                                                                 // 3062
                                                                                                                    // 3063
	setParams: function (params, noRedraw) {                                                                           // 3064
                                                                                                                    // 3065
		L.extend(this.wmsParams, params);                                                                                 // 3066
                                                                                                                    // 3067
		if (!noRedraw) {                                                                                                  // 3068
			this.redraw();                                                                                                   // 3069
		}                                                                                                                 // 3070
                                                                                                                    // 3071
		return this;                                                                                                      // 3072
	}                                                                                                                  // 3073
});                                                                                                                 // 3074
                                                                                                                    // 3075
L.tileLayer.wms = function (url, options) {                                                                         // 3076
	return new L.TileLayer.WMS(url, options);                                                                          // 3077
};                                                                                                                  // 3078
                                                                                                                    // 3079
                                                                                                                    // 3080
/*                                                                                                                  // 3081
 * L.TileLayer.Canvas is a class that you can use as a base for creating                                            // 3082
 * dynamically drawn Canvas-based tile layers.                                                                      // 3083
 */                                                                                                                 // 3084
                                                                                                                    // 3085
L.TileLayer.Canvas = L.TileLayer.extend({                                                                           // 3086
	options: {                                                                                                         // 3087
		async: false                                                                                                      // 3088
	},                                                                                                                 // 3089
                                                                                                                    // 3090
	initialize: function (options) {                                                                                   // 3091
		L.setOptions(this, options);                                                                                      // 3092
	},                                                                                                                 // 3093
                                                                                                                    // 3094
	redraw: function () {                                                                                              // 3095
		if (this._map) {                                                                                                  // 3096
			this._reset({hard: true});                                                                                       // 3097
			this._update();                                                                                                  // 3098
		}                                                                                                                 // 3099
                                                                                                                    // 3100
		for (var i in this._tiles) {                                                                                      // 3101
			this._redrawTile(this._tiles[i]);                                                                                // 3102
		}                                                                                                                 // 3103
		return this;                                                                                                      // 3104
	},                                                                                                                 // 3105
                                                                                                                    // 3106
	_redrawTile: function (tile) {                                                                                     // 3107
		this.drawTile(tile, tile._tilePoint, this._map._zoom);                                                            // 3108
	},                                                                                                                 // 3109
                                                                                                                    // 3110
	_createTile: function () {                                                                                         // 3111
		var tile = L.DomUtil.create('canvas', 'leaflet-tile');                                                            // 3112
		tile.width = tile.height = this.options.tileSize;                                                                 // 3113
		tile.onselectstart = tile.onmousemove = L.Util.falseFn;                                                           // 3114
		return tile;                                                                                                      // 3115
	},                                                                                                                 // 3116
                                                                                                                    // 3117
	_loadTile: function (tile, tilePoint) {                                                                            // 3118
		tile._layer = this;                                                                                               // 3119
		tile._tilePoint = tilePoint;                                                                                      // 3120
                                                                                                                    // 3121
		this._redrawTile(tile);                                                                                           // 3122
                                                                                                                    // 3123
		if (!this.options.async) {                                                                                        // 3124
			this.tileDrawn(tile);                                                                                            // 3125
		}                                                                                                                 // 3126
	},                                                                                                                 // 3127
                                                                                                                    // 3128
	drawTile: function (/*tile, tilePoint*/) {                                                                         // 3129
		// override with rendering code                                                                                   // 3130
	},                                                                                                                 // 3131
                                                                                                                    // 3132
	tileDrawn: function (tile) {                                                                                       // 3133
		this._tileOnLoad.call(tile);                                                                                      // 3134
	}                                                                                                                  // 3135
});                                                                                                                 // 3136
                                                                                                                    // 3137
                                                                                                                    // 3138
L.tileLayer.canvas = function (options) {                                                                           // 3139
	return new L.TileLayer.Canvas(options);                                                                            // 3140
};                                                                                                                  // 3141
                                                                                                                    // 3142
                                                                                                                    // 3143
/*                                                                                                                  // 3144
 * L.ImageOverlay is used to overlay images over the map (to specific geographical bounds).                         // 3145
 */                                                                                                                 // 3146
                                                                                                                    // 3147
L.ImageOverlay = L.Class.extend({                                                                                   // 3148
	includes: L.Mixin.Events,                                                                                          // 3149
                                                                                                                    // 3150
	options: {                                                                                                         // 3151
		opacity: 1                                                                                                        // 3152
	},                                                                                                                 // 3153
                                                                                                                    // 3154
	initialize: function (url, bounds, options) { // (String, LatLngBounds, Object)                                    // 3155
		this._url = url;                                                                                                  // 3156
		this._bounds = L.latLngBounds(bounds);                                                                            // 3157
                                                                                                                    // 3158
		L.setOptions(this, options);                                                                                      // 3159
	},                                                                                                                 // 3160
                                                                                                                    // 3161
	onAdd: function (map) {                                                                                            // 3162
		this._map = map;                                                                                                  // 3163
                                                                                                                    // 3164
		if (!this._image) {                                                                                               // 3165
			this._initImage();                                                                                               // 3166
		}                                                                                                                 // 3167
                                                                                                                    // 3168
		map._panes.overlayPane.appendChild(this._image);                                                                  // 3169
                                                                                                                    // 3170
		map.on('viewreset', this._reset, this);                                                                           // 3171
                                                                                                                    // 3172
		if (map.options.zoomAnimation && L.Browser.any3d) {                                                               // 3173
			map.on('zoomanim', this._animateZoom, this);                                                                     // 3174
		}                                                                                                                 // 3175
                                                                                                                    // 3176
		this._reset();                                                                                                    // 3177
	},                                                                                                                 // 3178
                                                                                                                    // 3179
	onRemove: function (map) {                                                                                         // 3180
		map.getPanes().overlayPane.removeChild(this._image);                                                              // 3181
                                                                                                                    // 3182
		map.off('viewreset', this._reset, this);                                                                          // 3183
                                                                                                                    // 3184
		if (map.options.zoomAnimation) {                                                                                  // 3185
			map.off('zoomanim', this._animateZoom, this);                                                                    // 3186
		}                                                                                                                 // 3187
	},                                                                                                                 // 3188
                                                                                                                    // 3189
	addTo: function (map) {                                                                                            // 3190
		map.addLayer(this);                                                                                               // 3191
		return this;                                                                                                      // 3192
	},                                                                                                                 // 3193
                                                                                                                    // 3194
	setOpacity: function (opacity) {                                                                                   // 3195
		this.options.opacity = opacity;                                                                                   // 3196
		this._updateOpacity();                                                                                            // 3197
		return this;                                                                                                      // 3198
	},                                                                                                                 // 3199
                                                                                                                    // 3200
	// TODO remove bringToFront/bringToBack duplication from TileLayer/Path                                            // 3201
	bringToFront: function () {                                                                                        // 3202
		if (this._image) {                                                                                                // 3203
			this._map._panes.overlayPane.appendChild(this._image);                                                           // 3204
		}                                                                                                                 // 3205
		return this;                                                                                                      // 3206
	},                                                                                                                 // 3207
                                                                                                                    // 3208
	bringToBack: function () {                                                                                         // 3209
		var pane = this._map._panes.overlayPane;                                                                          // 3210
		if (this._image) {                                                                                                // 3211
			pane.insertBefore(this._image, pane.firstChild);                                                                 // 3212
		}                                                                                                                 // 3213
		return this;                                                                                                      // 3214
	},                                                                                                                 // 3215
                                                                                                                    // 3216
	setUrl: function (url) {                                                                                           // 3217
		this._url = url;                                                                                                  // 3218
		this._image.src = this._url;                                                                                      // 3219
	},                                                                                                                 // 3220
                                                                                                                    // 3221
	getAttribution: function () {                                                                                      // 3222
		return this.options.attribution;                                                                                  // 3223
	},                                                                                                                 // 3224
                                                                                                                    // 3225
	_initImage: function () {                                                                                          // 3226
		this._image = L.DomUtil.create('img', 'leaflet-image-layer');                                                     // 3227
                                                                                                                    // 3228
		if (this._map.options.zoomAnimation && L.Browser.any3d) {                                                         // 3229
			L.DomUtil.addClass(this._image, 'leaflet-zoom-animated');                                                        // 3230
		} else {                                                                                                          // 3231
			L.DomUtil.addClass(this._image, 'leaflet-zoom-hide');                                                            // 3232
		}                                                                                                                 // 3233
                                                                                                                    // 3234
		this._updateOpacity();                                                                                            // 3235
                                                                                                                    // 3236
		//TODO createImage util method to remove duplication                                                              // 3237
		L.extend(this._image, {                                                                                           // 3238
			galleryimg: 'no',                                                                                                // 3239
			onselectstart: L.Util.falseFn,                                                                                   // 3240
			onmousemove: L.Util.falseFn,                                                                                     // 3241
			onload: L.bind(this._onImageLoad, this),                                                                         // 3242
			src: this._url                                                                                                   // 3243
		});                                                                                                               // 3244
	},                                                                                                                 // 3245
                                                                                                                    // 3246
	_animateZoom: function (e) {                                                                                       // 3247
		var map = this._map,                                                                                              // 3248
		    image = this._image,                                                                                          // 3249
		    scale = map.getZoomScale(e.zoom),                                                                             // 3250
		    nw = this._bounds.getNorthWest(),                                                                             // 3251
		    se = this._bounds.getSouthEast(),                                                                             // 3252
                                                                                                                    // 3253
		    topLeft = map._latLngToNewLayerPoint(nw, e.zoom, e.center),                                                   // 3254
		    size = map._latLngToNewLayerPoint(se, e.zoom, e.center)._subtract(topLeft),                                   // 3255
		    origin = topLeft._add(size._multiplyBy((1 / 2) * (1 - 1 / scale)));                                           // 3256
                                                                                                                    // 3257
		image.style[L.DomUtil.TRANSFORM] =                                                                                // 3258
		        L.DomUtil.getTranslateString(origin) + ' scale(' + scale + ') ';                                          // 3259
	},                                                                                                                 // 3260
                                                                                                                    // 3261
	_reset: function () {                                                                                              // 3262
		var image   = this._image,                                                                                        // 3263
		    topLeft = this._map.latLngToLayerPoint(this._bounds.getNorthWest()),                                          // 3264
		    size = this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(topLeft);                          // 3265
                                                                                                                    // 3266
		L.DomUtil.setPosition(image, topLeft);                                                                            // 3267
                                                                                                                    // 3268
		image.style.width  = size.x + 'px';                                                                               // 3269
		image.style.height = size.y + 'px';                                                                               // 3270
	},                                                                                                                 // 3271
                                                                                                                    // 3272
	_onImageLoad: function () {                                                                                        // 3273
		this.fire('load');                                                                                                // 3274
	},                                                                                                                 // 3275
                                                                                                                    // 3276
	_updateOpacity: function () {                                                                                      // 3277
		L.DomUtil.setOpacity(this._image, this.options.opacity);                                                          // 3278
	}                                                                                                                  // 3279
});                                                                                                                 // 3280
                                                                                                                    // 3281
L.imageOverlay = function (url, bounds, options) {                                                                  // 3282
	return new L.ImageOverlay(url, bounds, options);                                                                   // 3283
};                                                                                                                  // 3284
                                                                                                                    // 3285
                                                                                                                    // 3286
/*                                                                                                                  // 3287
 * L.Icon is an image-based icon class that you can use with L.Marker for custom markers.                           // 3288
 */                                                                                                                 // 3289
                                                                                                                    // 3290
L.Icon = L.Class.extend({                                                                                           // 3291
	options: {                                                                                                         // 3292
		/*                                                                                                                // 3293
		iconUrl: (String) (required)                                                                                      // 3294
		iconRetinaUrl: (String) (optional, used for retina devices if detected)                                           // 3295
		iconSize: (Point) (can be set through CSS)                                                                        // 3296
		iconAnchor: (Point) (centered by default, can be set in CSS with negative margins)                                // 3297
		popupAnchor: (Point) (if not specified, popup opens in the anchor point)                                          // 3298
		shadowUrl: (String) (no shadow by default)                                                                        // 3299
		shadowRetinaUrl: (String) (optional, used for retina devices if detected)                                         // 3300
		shadowSize: (Point)                                                                                               // 3301
		shadowAnchor: (Point)                                                                                             // 3302
		*/                                                                                                                // 3303
		className: ''                                                                                                     // 3304
	},                                                                                                                 // 3305
                                                                                                                    // 3306
	initialize: function (options) {                                                                                   // 3307
		L.setOptions(this, options);                                                                                      // 3308
	},                                                                                                                 // 3309
                                                                                                                    // 3310
	createIcon: function (oldIcon) {                                                                                   // 3311
		return this._createIcon('icon', oldIcon);                                                                         // 3312
	},                                                                                                                 // 3313
                                                                                                                    // 3314
	createShadow: function (oldIcon) {                                                                                 // 3315
		return this._createIcon('shadow', oldIcon);                                                                       // 3316
	},                                                                                                                 // 3317
                                                                                                                    // 3318
	_createIcon: function (name, oldIcon) {                                                                            // 3319
		var src = this._getIconUrl(name);                                                                                 // 3320
                                                                                                                    // 3321
		if (!src) {                                                                                                       // 3322
			if (name === 'icon') {                                                                                           // 3323
				throw new Error('iconUrl not set in Icon options (see the docs).');                                             // 3324
			}                                                                                                                // 3325
			return null;                                                                                                     // 3326
		}                                                                                                                 // 3327
                                                                                                                    // 3328
		var img;                                                                                                          // 3329
		if (!oldIcon || oldIcon.tagName !== 'IMG') {                                                                      // 3330
			img = this._createImg(src);                                                                                      // 3331
		} else {                                                                                                          // 3332
			img = this._createImg(src, oldIcon);                                                                             // 3333
		}                                                                                                                 // 3334
		this._setIconStyles(img, name);                                                                                   // 3335
                                                                                                                    // 3336
		return img;                                                                                                       // 3337
	},                                                                                                                 // 3338
                                                                                                                    // 3339
	_setIconStyles: function (img, name) {                                                                             // 3340
		var options = this.options,                                                                                       // 3341
		    size = L.point(options[name + 'Size']),                                                                       // 3342
		    anchor;                                                                                                       // 3343
                                                                                                                    // 3344
		if (name === 'shadow') {                                                                                          // 3345
			anchor = L.point(options.shadowAnchor || options.iconAnchor);                                                    // 3346
		} else {                                                                                                          // 3347
			anchor = L.point(options.iconAnchor);                                                                            // 3348
		}                                                                                                                 // 3349
                                                                                                                    // 3350
		if (!anchor && size) {                                                                                            // 3351
			anchor = size.divideBy(2, true);                                                                                 // 3352
		}                                                                                                                 // 3353
                                                                                                                    // 3354
		img.className = 'leaflet-marker-' + name + ' ' + options.className;                                               // 3355
                                                                                                                    // 3356
		if (anchor) {                                                                                                     // 3357
			img.style.marginLeft = (-anchor.x) + 'px';                                                                       // 3358
			img.style.marginTop  = (-anchor.y) + 'px';                                                                       // 3359
		}                                                                                                                 // 3360
                                                                                                                    // 3361
		if (size) {                                                                                                       // 3362
			img.style.width  = size.x + 'px';                                                                                // 3363
			img.style.height = size.y + 'px';                                                                                // 3364
		}                                                                                                                 // 3365
	},                                                                                                                 // 3366
                                                                                                                    // 3367
	_createImg: function (src, el) {                                                                                   // 3368
		el = el || document.createElement('img');                                                                         // 3369
		el.src = src;                                                                                                     // 3370
		return el;                                                                                                        // 3371
	},                                                                                                                 // 3372
                                                                                                                    // 3373
	_getIconUrl: function (name) {                                                                                     // 3374
		if (L.Browser.retina && this.options[name + 'RetinaUrl']) {                                                       // 3375
			return this.options[name + 'RetinaUrl'];                                                                         // 3376
		}                                                                                                                 // 3377
		return this.options[name + 'Url'];                                                                                // 3378
	}                                                                                                                  // 3379
});                                                                                                                 // 3380
                                                                                                                    // 3381
L.icon = function (options) {                                                                                       // 3382
	return new L.Icon(options);                                                                                        // 3383
};                                                                                                                  // 3384
                                                                                                                    // 3385
                                                                                                                    // 3386
/*                                                                                                                  // 3387
 * L.Icon.Default is the blue marker icon used by default in Leaflet.                                               // 3388
 */                                                                                                                 // 3389
                                                                                                                    // 3390
L.Icon.Default = L.Icon.extend({                                                                                    // 3391
                                                                                                                    // 3392
	options: {                                                                                                         // 3393
		iconSize: [25, 41],                                                                                               // 3394
		iconAnchor: [12, 41],                                                                                             // 3395
		popupAnchor: [1, -34],                                                                                            // 3396
                                                                                                                    // 3397
		shadowSize: [41, 41]                                                                                              // 3398
	},                                                                                                                 // 3399
                                                                                                                    // 3400
	_getIconUrl: function (name) {                                                                                     // 3401
		var key = name + 'Url';                                                                                           // 3402
                                                                                                                    // 3403
		if (this.options[key]) {                                                                                          // 3404
			return this.options[key];                                                                                        // 3405
		}                                                                                                                 // 3406
                                                                                                                    // 3407
		if (L.Browser.retina && name === 'icon') {                                                                        // 3408
			name += '-2x';                                                                                                   // 3409
		}                                                                                                                 // 3410
                                                                                                                    // 3411
		var path = L.Icon.Default.imagePath;                                                                              // 3412
                                                                                                                    // 3413
		if (!path) {                                                                                                      // 3414
			throw new Error('Couldn\'t autodetect L.Icon.Default.imagePath, set it manually.');                              // 3415
		}                                                                                                                 // 3416
                                                                                                                    // 3417
		return path + '/marker-' + name + '.png';                                                                         // 3418
	}                                                                                                                  // 3419
});                                                                                                                 // 3420
                                                                                                                    // 3421
L.Icon.Default.imagePath = (function () {                                                                           // 3422
	var scripts = document.getElementsByTagName('script'),                                                             // 3423
	    leafletRe = /[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;                                                         // 3424
                                                                                                                    // 3425
	var i, len, src, matches, path;                                                                                    // 3426
                                                                                                                    // 3427
	for (i = 0, len = scripts.length; i < len; i++) {                                                                  // 3428
		src = scripts[i].src;                                                                                             // 3429
		matches = src.match(leafletRe);                                                                                   // 3430
                                                                                                                    // 3431
		if (matches) {                                                                                                    // 3432
			path = src.split(leafletRe)[0];                                                                                  // 3433
			return (path ? path + '/' : '') + 'images';                                                                      // 3434
		}                                                                                                                 // 3435
	}                                                                                                                  // 3436
}());                                                                                                               // 3437
                                                                                                                    // 3438
                                                                                                                    // 3439
/*                                                                                                                  // 3440
 * L.Marker is used to display clickable/draggable icons on the map.                                                // 3441
 */                                                                                                                 // 3442
                                                                                                                    // 3443
L.Marker = L.Class.extend({                                                                                         // 3444
                                                                                                                    // 3445
	includes: L.Mixin.Events,                                                                                          // 3446
                                                                                                                    // 3447
	options: {                                                                                                         // 3448
		icon: new L.Icon.Default(),                                                                                       // 3449
		title: '',                                                                                                        // 3450
		alt: '',                                                                                                          // 3451
		clickable: true,                                                                                                  // 3452
		draggable: false,                                                                                                 // 3453
		keyboard: true,                                                                                                   // 3454
		zIndexOffset: 0,                                                                                                  // 3455
		opacity: 1,                                                                                                       // 3456
		riseOnHover: false,                                                                                               // 3457
		riseOffset: 250                                                                                                   // 3458
	},                                                                                                                 // 3459
                                                                                                                    // 3460
	initialize: function (latlng, options) {                                                                           // 3461
		L.setOptions(this, options);                                                                                      // 3462
		this._latlng = L.latLng(latlng);                                                                                  // 3463
	},                                                                                                                 // 3464
                                                                                                                    // 3465
	onAdd: function (map) {                                                                                            // 3466
		this._map = map;                                                                                                  // 3467
                                                                                                                    // 3468
		map.on('viewreset', this.update, this);                                                                           // 3469
                                                                                                                    // 3470
		this._initIcon();                                                                                                 // 3471
		this.update();                                                                                                    // 3472
		this.fire('add');                                                                                                 // 3473
                                                                                                                    // 3474
		if (map.options.zoomAnimation && map.options.markerZoomAnimation) {                                               // 3475
			map.on('zoomanim', this._animateZoom, this);                                                                     // 3476
		}                                                                                                                 // 3477
	},                                                                                                                 // 3478
                                                                                                                    // 3479
	addTo: function (map) {                                                                                            // 3480
		map.addLayer(this);                                                                                               // 3481
		return this;                                                                                                      // 3482
	},                                                                                                                 // 3483
                                                                                                                    // 3484
	onRemove: function (map) {                                                                                         // 3485
		if (this.dragging) {                                                                                              // 3486
			this.dragging.disable();                                                                                         // 3487
		}                                                                                                                 // 3488
                                                                                                                    // 3489
		this._removeIcon();                                                                                               // 3490
		this._removeShadow();                                                                                             // 3491
                                                                                                                    // 3492
		this.fire('remove');                                                                                              // 3493
                                                                                                                    // 3494
		map.off({                                                                                                         // 3495
			'viewreset': this.update,                                                                                        // 3496
			'zoomanim': this._animateZoom                                                                                    // 3497
		}, this);                                                                                                         // 3498
                                                                                                                    // 3499
		this._map = null;                                                                                                 // 3500
	},                                                                                                                 // 3501
                                                                                                                    // 3502
	getLatLng: function () {                                                                                           // 3503
		return this._latlng;                                                                                              // 3504
	},                                                                                                                 // 3505
                                                                                                                    // 3506
	setLatLng: function (latlng) {                                                                                     // 3507
		this._latlng = L.latLng(latlng);                                                                                  // 3508
                                                                                                                    // 3509
		this.update();                                                                                                    // 3510
                                                                                                                    // 3511
		return this.fire('move', { latlng: this._latlng });                                                               // 3512
	},                                                                                                                 // 3513
                                                                                                                    // 3514
	setZIndexOffset: function (offset) {                                                                               // 3515
		this.options.zIndexOffset = offset;                                                                               // 3516
		this.update();                                                                                                    // 3517
                                                                                                                    // 3518
		return this;                                                                                                      // 3519
	},                                                                                                                 // 3520
                                                                                                                    // 3521
	setIcon: function (icon) {                                                                                         // 3522
                                                                                                                    // 3523
		this.options.icon = icon;                                                                                         // 3524
                                                                                                                    // 3525
		if (this._map) {                                                                                                  // 3526
			this._initIcon();                                                                                                // 3527
			this.update();                                                                                                   // 3528
		}                                                                                                                 // 3529
                                                                                                                    // 3530
		if (this._popup) {                                                                                                // 3531
			this.bindPopup(this._popup);                                                                                     // 3532
		}                                                                                                                 // 3533
                                                                                                                    // 3534
		return this;                                                                                                      // 3535
	},                                                                                                                 // 3536
                                                                                                                    // 3537
	update: function () {                                                                                              // 3538
		if (this._icon) {                                                                                                 // 3539
			this._setPos(this._map.latLngToLayerPoint(this._latlng).round());                                                // 3540
		}                                                                                                                 // 3541
		return this;                                                                                                      // 3542
	},                                                                                                                 // 3543
                                                                                                                    // 3544
	_initIcon: function () {                                                                                           // 3545
		var options = this.options,                                                                                       // 3546
		    map = this._map,                                                                                              // 3547
		    animation = (map.options.zoomAnimation && map.options.markerZoomAnimation),                                   // 3548
		    classToAdd = animation ? 'leaflet-zoom-animated' : 'leaflet-zoom-hide';                                       // 3549
                                                                                                                    // 3550
		var icon = options.icon.createIcon(this._icon),                                                                   // 3551
			addIcon = false;                                                                                                 // 3552
                                                                                                                    // 3553
		// if we're not reusing the icon, remove the old one and init new one                                             // 3554
		if (icon !== this._icon) {                                                                                        // 3555
			if (this._icon) {                                                                                                // 3556
				this._removeIcon();                                                                                             // 3557
			}                                                                                                                // 3558
			addIcon = true;                                                                                                  // 3559
                                                                                                                    // 3560
			if (options.title) {                                                                                             // 3561
				icon.title = options.title;                                                                                     // 3562
			}                                                                                                                // 3563
                                                                                                                    // 3564
			if (options.alt) {                                                                                               // 3565
				icon.alt = options.alt;                                                                                         // 3566
			}                                                                                                                // 3567
		}                                                                                                                 // 3568
                                                                                                                    // 3569
		L.DomUtil.addClass(icon, classToAdd);                                                                             // 3570
                                                                                                                    // 3571
		if (options.keyboard) {                                                                                           // 3572
			icon.tabIndex = '0';                                                                                             // 3573
		}                                                                                                                 // 3574
                                                                                                                    // 3575
		this._icon = icon;                                                                                                // 3576
                                                                                                                    // 3577
		this._initInteraction();                                                                                          // 3578
                                                                                                                    // 3579
		if (options.riseOnHover) {                                                                                        // 3580
			L.DomEvent                                                                                                       // 3581
				.on(icon, 'mouseover', this._bringToFront, this)                                                                // 3582
				.on(icon, 'mouseout', this._resetZIndex, this);                                                                 // 3583
		}                                                                                                                 // 3584
                                                                                                                    // 3585
		var newShadow = options.icon.createShadow(this._shadow),                                                          // 3586
			addShadow = false;                                                                                               // 3587
                                                                                                                    // 3588
		if (newShadow !== this._shadow) {                                                                                 // 3589
			this._removeShadow();                                                                                            // 3590
			addShadow = true;                                                                                                // 3591
		}                                                                                                                 // 3592
                                                                                                                    // 3593
		if (newShadow) {                                                                                                  // 3594
			L.DomUtil.addClass(newShadow, classToAdd);                                                                       // 3595
		}                                                                                                                 // 3596
		this._shadow = newShadow;                                                                                         // 3597
                                                                                                                    // 3598
                                                                                                                    // 3599
		if (options.opacity < 1) {                                                                                        // 3600
			this._updateOpacity();                                                                                           // 3601
		}                                                                                                                 // 3602
                                                                                                                    // 3603
                                                                                                                    // 3604
		var panes = this._map._panes;                                                                                     // 3605
                                                                                                                    // 3606
		if (addIcon) {                                                                                                    // 3607
			panes.markerPane.appendChild(this._icon);                                                                        // 3608
		}                                                                                                                 // 3609
                                                                                                                    // 3610
		if (newShadow && addShadow) {                                                                                     // 3611
			panes.shadowPane.appendChild(this._shadow);                                                                      // 3612
		}                                                                                                                 // 3613
	},                                                                                                                 // 3614
                                                                                                                    // 3615
	_removeIcon: function () {                                                                                         // 3616
		if (this.options.riseOnHover) {                                                                                   // 3617
			L.DomEvent                                                                                                       // 3618
			    .off(this._icon, 'mouseover', this._bringToFront)                                                            // 3619
			    .off(this._icon, 'mouseout', this._resetZIndex);                                                             // 3620
		}                                                                                                                 // 3621
                                                                                                                    // 3622
		this._map._panes.markerPane.removeChild(this._icon);                                                              // 3623
                                                                                                                    // 3624
		this._icon = null;                                                                                                // 3625
	},                                                                                                                 // 3626
                                                                                                                    // 3627
	_removeShadow: function () {                                                                                       // 3628
		if (this._shadow) {                                                                                               // 3629
			this._map._panes.shadowPane.removeChild(this._shadow);                                                           // 3630
		}                                                                                                                 // 3631
		this._shadow = null;                                                                                              // 3632
	},                                                                                                                 // 3633
                                                                                                                    // 3634
	_setPos: function (pos) {                                                                                          // 3635
		L.DomUtil.setPosition(this._icon, pos);                                                                           // 3636
                                                                                                                    // 3637
		if (this._shadow) {                                                                                               // 3638
			L.DomUtil.setPosition(this._shadow, pos);                                                                        // 3639
		}                                                                                                                 // 3640
                                                                                                                    // 3641
		this._zIndex = pos.y + this.options.zIndexOffset;                                                                 // 3642
                                                                                                                    // 3643
		this._resetZIndex();                                                                                              // 3644
	},                                                                                                                 // 3645
                                                                                                                    // 3646
	_updateZIndex: function (offset) {                                                                                 // 3647
		this._icon.style.zIndex = this._zIndex + offset;                                                                  // 3648
	},                                                                                                                 // 3649
                                                                                                                    // 3650
	_animateZoom: function (opt) {                                                                                     // 3651
		var pos = this._map._latLngToNewLayerPoint(this._latlng, opt.zoom, opt.center).round();                           // 3652
                                                                                                                    // 3653
		this._setPos(pos);                                                                                                // 3654
	},                                                                                                                 // 3655
                                                                                                                    // 3656
	_initInteraction: function () {                                                                                    // 3657
                                                                                                                    // 3658
		if (!this.options.clickable) { return; }                                                                          // 3659
                                                                                                                    // 3660
		// TODO refactor into something shared with Map/Path/etc. to DRY it up                                            // 3661
                                                                                                                    // 3662
		var icon = this._icon,                                                                                            // 3663
		    events = ['dblclick', 'mousedown', 'mouseover', 'mouseout', 'contextmenu'];                                   // 3664
                                                                                                                    // 3665
		L.DomUtil.addClass(icon, 'leaflet-clickable');                                                                    // 3666
		L.DomEvent.on(icon, 'click', this._onMouseClick, this);                                                           // 3667
		L.DomEvent.on(icon, 'keypress', this._onKeyPress, this);                                                          // 3668
                                                                                                                    // 3669
		for (var i = 0; i < events.length; i++) {                                                                         // 3670
			L.DomEvent.on(icon, events[i], this._fireMouseEvent, this);                                                      // 3671
		}                                                                                                                 // 3672
                                                                                                                    // 3673
		if (L.Handler.MarkerDrag) {                                                                                       // 3674
			this.dragging = new L.Handler.MarkerDrag(this);                                                                  // 3675
                                                                                                                    // 3676
			if (this.options.draggable) {                                                                                    // 3677
				this.dragging.enable();                                                                                         // 3678
			}                                                                                                                // 3679
		}                                                                                                                 // 3680
	},                                                                                                                 // 3681
                                                                                                                    // 3682
	_onMouseClick: function (e) {                                                                                      // 3683
		var wasDragged = this.dragging && this.dragging.moved();                                                          // 3684
                                                                                                                    // 3685
		if (this.hasEventListeners(e.type) || wasDragged) {                                                               // 3686
			L.DomEvent.stopPropagation(e);                                                                                   // 3687
		}                                                                                                                 // 3688
                                                                                                                    // 3689
		if (wasDragged) { return; }                                                                                       // 3690
                                                                                                                    // 3691
		if ((!this.dragging || !this.dragging._enabled) && this._map.dragging && this._map.dragging.moved()) { return; }  // 3692
                                                                                                                    // 3693
		this.fire(e.type, {                                                                                               // 3694
			originalEvent: e,                                                                                                // 3695
			latlng: this._latlng                                                                                             // 3696
		});                                                                                                               // 3697
	},                                                                                                                 // 3698
                                                                                                                    // 3699
	_onKeyPress: function (e) {                                                                                        // 3700
		if (e.keyCode === 13) {                                                                                           // 3701
			this.fire('click', {                                                                                             // 3702
				originalEvent: e,                                                                                               // 3703
				latlng: this._latlng                                                                                            // 3704
			});                                                                                                              // 3705
		}                                                                                                                 // 3706
	},                                                                                                                 // 3707
                                                                                                                    // 3708
	_fireMouseEvent: function (e) {                                                                                    // 3709
                                                                                                                    // 3710
		this.fire(e.type, {                                                                                               // 3711
			originalEvent: e,                                                                                                // 3712
			latlng: this._latlng                                                                                             // 3713
		});                                                                                                               // 3714
                                                                                                                    // 3715
		// TODO proper custom event propagation                                                                           // 3716
		// this line will always be called if marker is in a FeatureGroup                                                 // 3717
		if (e.type === 'contextmenu' && this.hasEventListeners(e.type)) {                                                 // 3718
			L.DomEvent.preventDefault(e);                                                                                    // 3719
		}                                                                                                                 // 3720
		if (e.type !== 'mousedown') {                                                                                     // 3721
			L.DomEvent.stopPropagation(e);                                                                                   // 3722
		} else {                                                                                                          // 3723
			L.DomEvent.preventDefault(e);                                                                                    // 3724
		}                                                                                                                 // 3725
	},                                                                                                                 // 3726
                                                                                                                    // 3727
	setOpacity: function (opacity) {                                                                                   // 3728
		this.options.opacity = opacity;                                                                                   // 3729
		if (this._map) {                                                                                                  // 3730
			this._updateOpacity();                                                                                           // 3731
		}                                                                                                                 // 3732
                                                                                                                    // 3733
		return this;                                                                                                      // 3734
	},                                                                                                                 // 3735
                                                                                                                    // 3736
	_updateOpacity: function () {                                                                                      // 3737
		L.DomUtil.setOpacity(this._icon, this.options.opacity);                                                           // 3738
		if (this._shadow) {                                                                                               // 3739
			L.DomUtil.setOpacity(this._shadow, this.options.opacity);                                                        // 3740
		}                                                                                                                 // 3741
	},                                                                                                                 // 3742
                                                                                                                    // 3743
	_bringToFront: function () {                                                                                       // 3744
		this._updateZIndex(this.options.riseOffset);                                                                      // 3745
	},                                                                                                                 // 3746
                                                                                                                    // 3747
	_resetZIndex: function () {                                                                                        // 3748
		this._updateZIndex(0);                                                                                            // 3749
	}                                                                                                                  // 3750
});                                                                                                                 // 3751
                                                                                                                    // 3752
L.marker = function (latlng, options) {                                                                             // 3753
	return new L.Marker(latlng, options);                                                                              // 3754
};                                                                                                                  // 3755
                                                                                                                    // 3756
                                                                                                                    // 3757
/*                                                                                                                  // 3758
 * L.DivIcon is a lightweight HTML-based icon class (as opposed to the image-based L.Icon)                          // 3759
 * to use with L.Marker.                                                                                            // 3760
 */                                                                                                                 // 3761
                                                                                                                    // 3762
L.DivIcon = L.Icon.extend({                                                                                         // 3763
	options: {                                                                                                         // 3764
		iconSize: [12, 12], // also can be set through CSS                                                                // 3765
		/*                                                                                                                // 3766
		iconAnchor: (Point)                                                                                               // 3767
		popupAnchor: (Point)                                                                                              // 3768
		html: (String)                                                                                                    // 3769
		bgPos: (Point)                                                                                                    // 3770
		*/                                                                                                                // 3771
		className: 'leaflet-div-icon',                                                                                    // 3772
		html: false                                                                                                       // 3773
	},                                                                                                                 // 3774
                                                                                                                    // 3775
	createIcon: function (oldIcon) {                                                                                   // 3776
		var div = (oldIcon && oldIcon.tagName === 'DIV') ? oldIcon : document.createElement('div'),                       // 3777
		    options = this.options;                                                                                       // 3778
                                                                                                                    // 3779
		if (options.html !== false) {                                                                                     // 3780
			div.innerHTML = options.html;                                                                                    // 3781
		} else {                                                                                                          // 3782
			div.innerHTML = '';                                                                                              // 3783
		}                                                                                                                 // 3784
                                                                                                                    // 3785
		if (options.bgPos) {                                                                                              // 3786
			div.style.backgroundPosition =                                                                                   // 3787
			        (-options.bgPos.x) + 'px ' + (-options.bgPos.y) + 'px';                                                  // 3788
		}                                                                                                                 // 3789
                                                                                                                    // 3790
		this._setIconStyles(div, 'icon');                                                                                 // 3791
		return div;                                                                                                       // 3792
	},                                                                                                                 // 3793
                                                                                                                    // 3794
	createShadow: function () {                                                                                        // 3795
		return null;                                                                                                      // 3796
	}                                                                                                                  // 3797
});                                                                                                                 // 3798
                                                                                                                    // 3799
L.divIcon = function (options) {                                                                                    // 3800
	return new L.DivIcon(options);                                                                                     // 3801
};                                                                                                                  // 3802
                                                                                                                    // 3803
                                                                                                                    // 3804
/*                                                                                                                  // 3805
 * L.Popup is used for displaying popups on the map.                                                                // 3806
 */                                                                                                                 // 3807
                                                                                                                    // 3808
L.Map.mergeOptions({                                                                                                // 3809
	closePopupOnClick: true                                                                                            // 3810
});                                                                                                                 // 3811
                                                                                                                    // 3812
L.Popup = L.Class.extend({                                                                                          // 3813
	includes: L.Mixin.Events,                                                                                          // 3814
                                                                                                                    // 3815
	options: {                                                                                                         // 3816
		minWidth: 50,                                                                                                     // 3817
		maxWidth: 300,                                                                                                    // 3818
		// maxHeight: null,                                                                                               // 3819
		autoPan: true,                                                                                                    // 3820
		closeButton: true,                                                                                                // 3821
		offset: [0, 7],                                                                                                   // 3822
		autoPanPadding: [5, 5],                                                                                           // 3823
		// autoPanPaddingTopLeft: null,                                                                                   // 3824
		// autoPanPaddingBottomRight: null,                                                                               // 3825
		keepInView: false,                                                                                                // 3826
		className: '',                                                                                                    // 3827
		zoomAnimation: true                                                                                               // 3828
	},                                                                                                                 // 3829
                                                                                                                    // 3830
	initialize: function (options, source) {                                                                           // 3831
		L.setOptions(this, options);                                                                                      // 3832
                                                                                                                    // 3833
		this._source = source;                                                                                            // 3834
		this._animated = L.Browser.any3d && this.options.zoomAnimation;                                                   // 3835
		this._isOpen = false;                                                                                             // 3836
	},                                                                                                                 // 3837
                                                                                                                    // 3838
	onAdd: function (map) {                                                                                            // 3839
		this._map = map;                                                                                                  // 3840
                                                                                                                    // 3841
		if (!this._container) {                                                                                           // 3842
			this._initLayout();                                                                                              // 3843
		}                                                                                                                 // 3844
                                                                                                                    // 3845
		var animFade = map.options.fadeAnimation;                                                                         // 3846
                                                                                                                    // 3847
		if (animFade) {                                                                                                   // 3848
			L.DomUtil.setOpacity(this._container, 0);                                                                        // 3849
		}                                                                                                                 // 3850
		map._panes.popupPane.appendChild(this._container);                                                                // 3851
                                                                                                                    // 3852
		map.on(this._getEvents(), this);                                                                                  // 3853
                                                                                                                    // 3854
		this.update();                                                                                                    // 3855
                                                                                                                    // 3856
		if (animFade) {                                                                                                   // 3857
			L.DomUtil.setOpacity(this._container, 1);                                                                        // 3858
		}                                                                                                                 // 3859
                                                                                                                    // 3860
		this.fire('open');                                                                                                // 3861
                                                                                                                    // 3862
		map.fire('popupopen', {popup: this});                                                                             // 3863
                                                                                                                    // 3864
		if (this._source) {                                                                                               // 3865
			this._source.fire('popupopen', {popup: this});                                                                   // 3866
		}                                                                                                                 // 3867
	},                                                                                                                 // 3868
                                                                                                                    // 3869
	addTo: function (map) {                                                                                            // 3870
		map.addLayer(this);                                                                                               // 3871
		return this;                                                                                                      // 3872
	},                                                                                                                 // 3873
                                                                                                                    // 3874
	openOn: function (map) {                                                                                           // 3875
		map.openPopup(this);                                                                                              // 3876
		return this;                                                                                                      // 3877
	},                                                                                                                 // 3878
                                                                                                                    // 3879
	onRemove: function (map) {                                                                                         // 3880
		map._panes.popupPane.removeChild(this._container);                                                                // 3881
                                                                                                                    // 3882
		L.Util.falseFn(this._container.offsetWidth); // force reflow                                                      // 3883
                                                                                                                    // 3884
		map.off(this._getEvents(), this);                                                                                 // 3885
                                                                                                                    // 3886
		if (map.options.fadeAnimation) {                                                                                  // 3887
			L.DomUtil.setOpacity(this._container, 0);                                                                        // 3888
		}                                                                                                                 // 3889
                                                                                                                    // 3890
		this._map = null;                                                                                                 // 3891
                                                                                                                    // 3892
		this.fire('close');                                                                                               // 3893
                                                                                                                    // 3894
		map.fire('popupclose', {popup: this});                                                                            // 3895
                                                                                                                    // 3896
		if (this._source) {                                                                                               // 3897
			this._source.fire('popupclose', {popup: this});                                                                  // 3898
		}                                                                                                                 // 3899
	},                                                                                                                 // 3900
                                                                                                                    // 3901
	getLatLng: function () {                                                                                           // 3902
		return this._latlng;                                                                                              // 3903
	},                                                                                                                 // 3904
                                                                                                                    // 3905
	setLatLng: function (latlng) {                                                                                     // 3906
		this._latlng = L.latLng(latlng);                                                                                  // 3907
		if (this._map) {                                                                                                  // 3908
			this._updatePosition();                                                                                          // 3909
			this._adjustPan();                                                                                               // 3910
		}                                                                                                                 // 3911
		return this;                                                                                                      // 3912
	},                                                                                                                 // 3913
                                                                                                                    // 3914
	getContent: function () {                                                                                          // 3915
		return this._content;                                                                                             // 3916
	},                                                                                                                 // 3917
                                                                                                                    // 3918
	setContent: function (content) {                                                                                   // 3919
		this._content = content;                                                                                          // 3920
		this.update();                                                                                                    // 3921
		return this;                                                                                                      // 3922
	},                                                                                                                 // 3923
                                                                                                                    // 3924
	update: function () {                                                                                              // 3925
		if (!this._map) { return; }                                                                                       // 3926
                                                                                                                    // 3927
		this._container.style.visibility = 'hidden';                                                                      // 3928
                                                                                                                    // 3929
		this._updateContent();                                                                                            // 3930
		this._updateLayout();                                                                                             // 3931
		this._updatePosition();                                                                                           // 3932
                                                                                                                    // 3933
		this._container.style.visibility = '';                                                                            // 3934
                                                                                                                    // 3935
		this._adjustPan();                                                                                                // 3936
	},                                                                                                                 // 3937
                                                                                                                    // 3938
	_getEvents: function () {                                                                                          // 3939
		var events = {                                                                                                    // 3940
			viewreset: this._updatePosition                                                                                  // 3941
		};                                                                                                                // 3942
                                                                                                                    // 3943
		if (this._animated) {                                                                                             // 3944
			events.zoomanim = this._zoomAnimation;                                                                           // 3945
		}                                                                                                                 // 3946
		if ('closeOnClick' in this.options ? this.options.closeOnClick : this._map.options.closePopupOnClick) {           // 3947
			events.preclick = this._close;                                                                                   // 3948
		}                                                                                                                 // 3949
		if (this.options.keepInView) {                                                                                    // 3950
			events.moveend = this._adjustPan;                                                                                // 3951
		}                                                                                                                 // 3952
                                                                                                                    // 3953
		return events;                                                                                                    // 3954
	},                                                                                                                 // 3955
                                                                                                                    // 3956
	_close: function () {                                                                                              // 3957
		if (this._map) {                                                                                                  // 3958
			this._map.closePopup(this);                                                                                      // 3959
		}                                                                                                                 // 3960
	},                                                                                                                 // 3961
                                                                                                                    // 3962
	_initLayout: function () {                                                                                         // 3963
		var prefix = 'leaflet-popup',                                                                                     // 3964
			containerClass = prefix + ' ' + this.options.className + ' leaflet-zoom-' +                                      // 3965
			        (this._animated ? 'animated' : 'hide'),                                                                  // 3966
			container = this._container = L.DomUtil.create('div', containerClass),                                           // 3967
			closeButton;                                                                                                     // 3968
                                                                                                                    // 3969
		if (this.options.closeButton) {                                                                                   // 3970
			closeButton = this._closeButton =                                                                                // 3971
			        L.DomUtil.create('a', prefix + '-close-button', container);                                              // 3972
			closeButton.href = '#close';                                                                                     // 3973
			closeButton.innerHTML = '&#215;';                                                                                // 3974
			L.DomEvent.disableClickPropagation(closeButton);                                                                 // 3975
                                                                                                                    // 3976
			L.DomEvent.on(closeButton, 'click', this._onCloseButtonClick, this);                                             // 3977
		}                                                                                                                 // 3978
                                                                                                                    // 3979
		var wrapper = this._wrapper =                                                                                     // 3980
		        L.DomUtil.create('div', prefix + '-content-wrapper', container);                                          // 3981
		L.DomEvent.disableClickPropagation(wrapper);                                                                      // 3982
                                                                                                                    // 3983
		this._contentNode = L.DomUtil.create('div', prefix + '-content', wrapper);                                        // 3984
                                                                                                                    // 3985
		L.DomEvent.disableScrollPropagation(this._contentNode);                                                           // 3986
		L.DomEvent.on(wrapper, 'contextmenu', L.DomEvent.stopPropagation);                                                // 3987
                                                                                                                    // 3988
		this._tipContainer = L.DomUtil.create('div', prefix + '-tip-container', container);                               // 3989
		this._tip = L.DomUtil.create('div', prefix + '-tip', this._tipContainer);                                         // 3990
	},                                                                                                                 // 3991
                                                                                                                    // 3992
	_updateContent: function () {                                                                                      // 3993
		if (!this._content) { return; }                                                                                   // 3994
                                                                                                                    // 3995
		if (typeof this._content === 'string') {                                                                          // 3996
			this._contentNode.innerHTML = this._content;                                                                     // 3997
		} else {                                                                                                          // 3998
			while (this._contentNode.hasChildNodes()) {                                                                      // 3999
				this._contentNode.removeChild(this._contentNode.firstChild);                                                    // 4000
			}                                                                                                                // 4001
			this._contentNode.appendChild(this._content);                                                                    // 4002
		}                                                                                                                 // 4003
		this.fire('contentupdate');                                                                                       // 4004
	},                                                                                                                 // 4005
                                                                                                                    // 4006
	_updateLayout: function () {                                                                                       // 4007
		var container = this._contentNode,                                                                                // 4008
		    style = container.style;                                                                                      // 4009
                                                                                                                    // 4010
		style.width = '';                                                                                                 // 4011
		style.whiteSpace = 'nowrap';                                                                                      // 4012
                                                                                                                    // 4013
		var width = container.offsetWidth;                                                                                // 4014
		width = Math.min(width, this.options.maxWidth);                                                                   // 4015
		width = Math.max(width, this.options.minWidth);                                                                   // 4016
                                                                                                                    // 4017
		style.width = (width + 1) + 'px';                                                                                 // 4018
		style.whiteSpace = '';                                                                                            // 4019
                                                                                                                    // 4020
		style.height = '';                                                                                                // 4021
                                                                                                                    // 4022
		var height = container.offsetHeight,                                                                              // 4023
		    maxHeight = this.options.maxHeight,                                                                           // 4024
		    scrolledClass = 'leaflet-popup-scrolled';                                                                     // 4025
                                                                                                                    // 4026
		if (maxHeight && height > maxHeight) {                                                                            // 4027
			style.height = maxHeight + 'px';                                                                                 // 4028
			L.DomUtil.addClass(container, scrolledClass);                                                                    // 4029
		} else {                                                                                                          // 4030
			L.DomUtil.removeClass(container, scrolledClass);                                                                 // 4031
		}                                                                                                                 // 4032
                                                                                                                    // 4033
		this._containerWidth = this._container.offsetWidth;                                                               // 4034
	},                                                                                                                 // 4035
                                                                                                                    // 4036
	_updatePosition: function () {                                                                                     // 4037
		if (!this._map) { return; }                                                                                       // 4038
                                                                                                                    // 4039
		var pos = this._map.latLngToLayerPoint(this._latlng),                                                             // 4040
		    animated = this._animated,                                                                                    // 4041
		    offset = L.point(this.options.offset);                                                                        // 4042
                                                                                                                    // 4043
		if (animated) {                                                                                                   // 4044
			L.DomUtil.setPosition(this._container, pos);                                                                     // 4045
		}                                                                                                                 // 4046
                                                                                                                    // 4047
		this._containerBottom = -offset.y - (animated ? 0 : pos.y);                                                       // 4048
		this._containerLeft = -Math.round(this._containerWidth / 2) + offset.x + (animated ? 0 : pos.x);                  // 4049
                                                                                                                    // 4050
		// bottom position the popup in case the height of the popup changes (images loading etc)                         // 4051
		this._container.style.bottom = this._containerBottom + 'px';                                                      // 4052
		this._container.style.left = this._containerLeft + 'px';                                                          // 4053
	},                                                                                                                 // 4054
                                                                                                                    // 4055
	_zoomAnimation: function (opt) {                                                                                   // 4056
		var pos = this._map._latLngToNewLayerPoint(this._latlng, opt.zoom, opt.center);                                   // 4057
                                                                                                                    // 4058
		L.DomUtil.setPosition(this._container, pos);                                                                      // 4059
	},                                                                                                                 // 4060
                                                                                                                    // 4061
	_adjustPan: function () {                                                                                          // 4062
		if (!this.options.autoPan) { return; }                                                                            // 4063
                                                                                                                    // 4064
		var map = this._map,                                                                                              // 4065
		    containerHeight = this._container.offsetHeight,                                                               // 4066
		    containerWidth = this._containerWidth,                                                                        // 4067
                                                                                                                    // 4068
		    layerPos = new L.Point(this._containerLeft, -containerHeight - this._containerBottom);                        // 4069
                                                                                                                    // 4070
		if (this._animated) {                                                                                             // 4071
			layerPos._add(L.DomUtil.getPosition(this._container));                                                           // 4072
		}                                                                                                                 // 4073
                                                                                                                    // 4074
		var containerPos = map.layerPointToContainerPoint(layerPos),                                                      // 4075
		    padding = L.point(this.options.autoPanPadding),                                                               // 4076
		    paddingTL = L.point(this.options.autoPanPaddingTopLeft || padding),                                           // 4077
		    paddingBR = L.point(this.options.autoPanPaddingBottomRight || padding),                                       // 4078
		    size = map.getSize(),                                                                                         // 4079
		    dx = 0,                                                                                                       // 4080
		    dy = 0;                                                                                                       // 4081
                                                                                                                    // 4082
		if (containerPos.x + containerWidth + paddingBR.x > size.x) { // right                                            // 4083
			dx = containerPos.x + containerWidth - size.x + paddingBR.x;                                                     // 4084
		}                                                                                                                 // 4085
		if (containerPos.x - dx - paddingTL.x < 0) { // left                                                              // 4086
			dx = containerPos.x - paddingTL.x;                                                                               // 4087
		}                                                                                                                 // 4088
		if (containerPos.y + containerHeight + paddingBR.y > size.y) { // bottom                                          // 4089
			dy = containerPos.y + containerHeight - size.y + paddingBR.y;                                                    // 4090
		}                                                                                                                 // 4091
		if (containerPos.y - dy - paddingTL.y < 0) { // top                                                               // 4092
			dy = containerPos.y - paddingTL.y;                                                                               // 4093
		}                                                                                                                 // 4094
                                                                                                                    // 4095
		if (dx || dy) {                                                                                                   // 4096
			map                                                                                                              // 4097
			    .fire('autopanstart')                                                                                        // 4098
			    .panBy([dx, dy]);                                                                                            // 4099
		}                                                                                                                 // 4100
	},                                                                                                                 // 4101
                                                                                                                    // 4102
	_onCloseButtonClick: function (e) {                                                                                // 4103
		this._close();                                                                                                    // 4104
		L.DomEvent.stop(e);                                                                                               // 4105
	}                                                                                                                  // 4106
});                                                                                                                 // 4107
                                                                                                                    // 4108
L.popup = function (options, source) {                                                                              // 4109
	return new L.Popup(options, source);                                                                               // 4110
};                                                                                                                  // 4111
                                                                                                                    // 4112
                                                                                                                    // 4113
L.Map.include({                                                                                                     // 4114
	openPopup: function (popup, latlng, options) { // (Popup) or (String || HTMLElement, LatLng[, Object])             // 4115
		this.closePopup();                                                                                                // 4116
                                                                                                                    // 4117
		if (!(popup instanceof L.Popup)) {                                                                                // 4118
			var content = popup;                                                                                             // 4119
                                                                                                                    // 4120
			popup = new L.Popup(options)                                                                                     // 4121
			    .setLatLng(latlng)                                                                                           // 4122
			    .setContent(content);                                                                                        // 4123
		}                                                                                                                 // 4124
		popup._isOpen = true;                                                                                             // 4125
                                                                                                                    // 4126
		this._popup = popup;                                                                                              // 4127
		return this.addLayer(popup);                                                                                      // 4128
	},                                                                                                                 // 4129
                                                                                                                    // 4130
	closePopup: function (popup) {                                                                                     // 4131
		if (!popup || popup === this._popup) {                                                                            // 4132
			popup = this._popup;                                                                                             // 4133
			this._popup = null;                                                                                              // 4134
		}                                                                                                                 // 4135
		if (popup) {                                                                                                      // 4136
			this.removeLayer(popup);                                                                                         // 4137
			popup._isOpen = false;                                                                                           // 4138
		}                                                                                                                 // 4139
		return this;                                                                                                      // 4140
	}                                                                                                                  // 4141
});                                                                                                                 // 4142
                                                                                                                    // 4143
                                                                                                                    // 4144
/*                                                                                                                  // 4145
 * Popup extension to L.Marker, adding popup-related methods.                                                       // 4146
 */                                                                                                                 // 4147
                                                                                                                    // 4148
L.Marker.include({                                                                                                  // 4149
	openPopup: function () {                                                                                           // 4150
		if (this._popup && this._map && !this._map.hasLayer(this._popup)) {                                               // 4151
			this._popup.setLatLng(this._latlng);                                                                             // 4152
			this._map.openPopup(this._popup);                                                                                // 4153
		}                                                                                                                 // 4154
                                                                                                                    // 4155
		return this;                                                                                                      // 4156
	},                                                                                                                 // 4157
                                                                                                                    // 4158
	closePopup: function () {                                                                                          // 4159
		if (this._popup) {                                                                                                // 4160
			this._popup._close();                                                                                            // 4161
		}                                                                                                                 // 4162
		return this;                                                                                                      // 4163
	},                                                                                                                 // 4164
                                                                                                                    // 4165
	togglePopup: function () {                                                                                         // 4166
		if (this._popup) {                                                                                                // 4167
			if (this._popup._isOpen) {                                                                                       // 4168
				this.closePopup();                                                                                              // 4169
			} else {                                                                                                         // 4170
				this.openPopup();                                                                                               // 4171
			}                                                                                                                // 4172
		}                                                                                                                 // 4173
		return this;                                                                                                      // 4174
	},                                                                                                                 // 4175
                                                                                                                    // 4176
	bindPopup: function (content, options) {                                                                           // 4177
		var anchor = L.point(this.options.icon.options.popupAnchor || [0, 0]);                                            // 4178
                                                                                                                    // 4179
		anchor = anchor.add(L.Popup.prototype.options.offset);                                                            // 4180
                                                                                                                    // 4181
		if (options && options.offset) {                                                                                  // 4182
			anchor = anchor.add(options.offset);                                                                             // 4183
		}                                                                                                                 // 4184
                                                                                                                    // 4185
		options = L.extend({offset: anchor}, options);                                                                    // 4186
                                                                                                                    // 4187
		if (!this._popupHandlersAdded) {                                                                                  // 4188
			this                                                                                                             // 4189
			    .on('click', this.togglePopup, this)                                                                         // 4190
			    .on('remove', this.closePopup, this)                                                                         // 4191
			    .on('move', this._movePopup, this);                                                                          // 4192
			this._popupHandlersAdded = true;                                                                                 // 4193
		}                                                                                                                 // 4194
                                                                                                                    // 4195
		if (content instanceof L.Popup) {                                                                                 // 4196
			L.setOptions(content, options);                                                                                  // 4197
			this._popup = content;                                                                                           // 4198
			content._source = this;                                                                                          // 4199
		} else {                                                                                                          // 4200
			this._popup = new L.Popup(options, this)                                                                         // 4201
				.setContent(content);                                                                                           // 4202
		}                                                                                                                 // 4203
                                                                                                                    // 4204
		return this;                                                                                                      // 4205
	},                                                                                                                 // 4206
                                                                                                                    // 4207
	setPopupContent: function (content) {                                                                              // 4208
		if (this._popup) {                                                                                                // 4209
			this._popup.setContent(content);                                                                                 // 4210
		}                                                                                                                 // 4211
		return this;                                                                                                      // 4212
	},                                                                                                                 // 4213
                                                                                                                    // 4214
	unbindPopup: function () {                                                                                         // 4215
		if (this._popup) {                                                                                                // 4216
			this._popup = null;                                                                                              // 4217
			this                                                                                                             // 4218
			    .off('click', this.togglePopup, this)                                                                        // 4219
			    .off('remove', this.closePopup, this)                                                                        // 4220
			    .off('move', this._movePopup, this);                                                                         // 4221
			this._popupHandlersAdded = false;                                                                                // 4222
		}                                                                                                                 // 4223
		return this;                                                                                                      // 4224
	},                                                                                                                 // 4225
                                                                                                                    // 4226
	getPopup: function () {                                                                                            // 4227
		return this._popup;                                                                                               // 4228
	},                                                                                                                 // 4229
                                                                                                                    // 4230
	_movePopup: function (e) {                                                                                         // 4231
		this._popup.setLatLng(e.latlng);                                                                                  // 4232
	}                                                                                                                  // 4233
});                                                                                                                 // 4234
                                                                                                                    // 4235
                                                                                                                    // 4236
/*                                                                                                                  // 4237
 * L.LayerGroup is a class to combine several layers into one so that                                               // 4238
 * you can manipulate the group (e.g. add/remove it) as one layer.                                                  // 4239
 */                                                                                                                 // 4240
                                                                                                                    // 4241
L.LayerGroup = L.Class.extend({                                                                                     // 4242
	initialize: function (layers) {                                                                                    // 4243
		this._layers = {};                                                                                                // 4244
                                                                                                                    // 4245
		var i, len;                                                                                                       // 4246
                                                                                                                    // 4247
		if (layers) {                                                                                                     // 4248
			for (i = 0, len = layers.length; i < len; i++) {                                                                 // 4249
				this.addLayer(layers[i]);                                                                                       // 4250
			}                                                                                                                // 4251
		}                                                                                                                 // 4252
	},                                                                                                                 // 4253
                                                                                                                    // 4254
	addLayer: function (layer) {                                                                                       // 4255
		var id = this.getLayerId(layer);                                                                                  // 4256
                                                                                                                    // 4257
		this._layers[id] = layer;                                                                                         // 4258
                                                                                                                    // 4259
		if (this._map) {                                                                                                  // 4260
			this._map.addLayer(layer);                                                                                       // 4261
		}                                                                                                                 // 4262
                                                                                                                    // 4263
		return this;                                                                                                      // 4264
	},                                                                                                                 // 4265
                                                                                                                    // 4266
	removeLayer: function (layer) {                                                                                    // 4267
		var id = layer in this._layers ? layer : this.getLayerId(layer);                                                  // 4268
                                                                                                                    // 4269
		if (this._map && this._layers[id]) {                                                                              // 4270
			this._map.removeLayer(this._layers[id]);                                                                         // 4271
		}                                                                                                                 // 4272
                                                                                                                    // 4273
		delete this._layers[id];                                                                                          // 4274
                                                                                                                    // 4275
		return this;                                                                                                      // 4276
	},                                                                                                                 // 4277
                                                                                                                    // 4278
	hasLayer: function (layer) {                                                                                       // 4279
		if (!layer) { return false; }                                                                                     // 4280
                                                                                                                    // 4281
		return (layer in this._layers || this.getLayerId(layer) in this._layers);                                         // 4282
	},                                                                                                                 // 4283
                                                                                                                    // 4284
	clearLayers: function () {                                                                                         // 4285
		this.eachLayer(this.removeLayer, this);                                                                           // 4286
		return this;                                                                                                      // 4287
	},                                                                                                                 // 4288
                                                                                                                    // 4289
	invoke: function (methodName) {                                                                                    // 4290
		var args = Array.prototype.slice.call(arguments, 1),                                                              // 4291
		    i, layer;                                                                                                     // 4292
                                                                                                                    // 4293
		for (i in this._layers) {                                                                                         // 4294
			layer = this._layers[i];                                                                                         // 4295
                                                                                                                    // 4296
			if (layer[methodName]) {                                                                                         // 4297
				layer[methodName].apply(layer, args);                                                                           // 4298
			}                                                                                                                // 4299
		}                                                                                                                 // 4300
                                                                                                                    // 4301
		return this;                                                                                                      // 4302
	},                                                                                                                 // 4303
                                                                                                                    // 4304
	onAdd: function (map) {                                                                                            // 4305
		this._map = map;                                                                                                  // 4306
		this.eachLayer(map.addLayer, map);                                                                                // 4307
	},                                                                                                                 // 4308
                                                                                                                    // 4309
	onRemove: function (map) {                                                                                         // 4310
		this.eachLayer(map.removeLayer, map);                                                                             // 4311
		this._map = null;                                                                                                 // 4312
	},                                                                                                                 // 4313
                                                                                                                    // 4314
	addTo: function (map) {                                                                                            // 4315
		map.addLayer(this);                                                                                               // 4316
		return this;                                                                                                      // 4317
	},                                                                                                                 // 4318
                                                                                                                    // 4319
	eachLayer: function (method, context) {                                                                            // 4320
		for (var i in this._layers) {                                                                                     // 4321
			method.call(context, this._layers[i]);                                                                           // 4322
		}                                                                                                                 // 4323
		return this;                                                                                                      // 4324
	},                                                                                                                 // 4325
                                                                                                                    // 4326
	getLayer: function (id) {                                                                                          // 4327
		return this._layers[id];                                                                                          // 4328
	},                                                                                                                 // 4329
                                                                                                                    // 4330
	getLayers: function () {                                                                                           // 4331
		var layers = [];                                                                                                  // 4332
                                                                                                                    // 4333
		for (var i in this._layers) {                                                                                     // 4334
			layers.push(this._layers[i]);                                                                                    // 4335
		}                                                                                                                 // 4336
		return layers;                                                                                                    // 4337
	},                                                                                                                 // 4338
                                                                                                                    // 4339
	setZIndex: function (zIndex) {                                                                                     // 4340
		return this.invoke('setZIndex', zIndex);                                                                          // 4341
	},                                                                                                                 // 4342
                                                                                                                    // 4343
	getLayerId: function (layer) {                                                                                     // 4344
		return L.stamp(layer);                                                                                            // 4345
	}                                                                                                                  // 4346
});                                                                                                                 // 4347
                                                                                                                    // 4348
L.layerGroup = function (layers) {                                                                                  // 4349
	return new L.LayerGroup(layers);                                                                                   // 4350
};                                                                                                                  // 4351
                                                                                                                    // 4352
                                                                                                                    // 4353
/*                                                                                                                  // 4354
 * L.FeatureGroup extends L.LayerGroup by introducing mouse events and additional methods                           // 4355
 * shared between a group of interactive layers (like vectors or markers).                                          // 4356
 */                                                                                                                 // 4357
                                                                                                                    // 4358
L.FeatureGroup = L.LayerGroup.extend({                                                                              // 4359
	includes: L.Mixin.Events,                                                                                          // 4360
                                                                                                                    // 4361
	statics: {                                                                                                         // 4362
		EVENTS: 'click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose'                            // 4363
	},                                                                                                                 // 4364
                                                                                                                    // 4365
	addLayer: function (layer) {                                                                                       // 4366
		if (this.hasLayer(layer)) {                                                                                       // 4367
			return this;                                                                                                     // 4368
		}                                                                                                                 // 4369
                                                                                                                    // 4370
		if ('on' in layer) {                                                                                              // 4371
			layer.on(L.FeatureGroup.EVENTS, this._propagateEvent, this);                                                     // 4372
		}                                                                                                                 // 4373
                                                                                                                    // 4374
		L.LayerGroup.prototype.addLayer.call(this, layer);                                                                // 4375
                                                                                                                    // 4376
		if (this._popupContent && layer.bindPopup) {                                                                      // 4377
			layer.bindPopup(this._popupContent, this._popupOptions);                                                         // 4378
		}                                                                                                                 // 4379
                                                                                                                    // 4380
		return this.fire('layeradd', {layer: layer});                                                                     // 4381
	},                                                                                                                 // 4382
                                                                                                                    // 4383
	removeLayer: function (layer) {                                                                                    // 4384
		if (!this.hasLayer(layer)) {                                                                                      // 4385
			return this;                                                                                                     // 4386
		}                                                                                                                 // 4387
		if (layer in this._layers) {                                                                                      // 4388
			layer = this._layers[layer];                                                                                     // 4389
		}                                                                                                                 // 4390
                                                                                                                    // 4391
		if ('off' in layer) {                                                                                             // 4392
			layer.off(L.FeatureGroup.EVENTS, this._propagateEvent, this);                                                    // 4393
		}                                                                                                                 // 4394
                                                                                                                    // 4395
		L.LayerGroup.prototype.removeLayer.call(this, layer);                                                             // 4396
                                                                                                                    // 4397
		if (this._popupContent) {                                                                                         // 4398
			this.invoke('unbindPopup');                                                                                      // 4399
		}                                                                                                                 // 4400
                                                                                                                    // 4401
		return this.fire('layerremove', {layer: layer});                                                                  // 4402
	},                                                                                                                 // 4403
                                                                                                                    // 4404
	bindPopup: function (content, options) {                                                                           // 4405
		this._popupContent = content;                                                                                     // 4406
		this._popupOptions = options;                                                                                     // 4407
		return this.invoke('bindPopup', content, options);                                                                // 4408
	},                                                                                                                 // 4409
                                                                                                                    // 4410
	openPopup: function (latlng) {                                                                                     // 4411
		// open popup on the first layer                                                                                  // 4412
		for (var id in this._layers) {                                                                                    // 4413
			this._layers[id].openPopup(latlng);                                                                              // 4414
			break;                                                                                                           // 4415
		}                                                                                                                 // 4416
		return this;                                                                                                      // 4417
	},                                                                                                                 // 4418
                                                                                                                    // 4419
	setStyle: function (style) {                                                                                       // 4420
		return this.invoke('setStyle', style);                                                                            // 4421
	},                                                                                                                 // 4422
                                                                                                                    // 4423
	bringToFront: function () {                                                                                        // 4424
		return this.invoke('bringToFront');                                                                               // 4425
	},                                                                                                                 // 4426
                                                                                                                    // 4427
	bringToBack: function () {                                                                                         // 4428
		return this.invoke('bringToBack');                                                                                // 4429
	},                                                                                                                 // 4430
                                                                                                                    // 4431
	getBounds: function () {                                                                                           // 4432
		var bounds = new L.LatLngBounds();                                                                                // 4433
                                                                                                                    // 4434
		this.eachLayer(function (layer) {                                                                                 // 4435
			bounds.extend(layer instanceof L.Marker ? layer.getLatLng() : layer.getBounds());                                // 4436
		});                                                                                                               // 4437
                                                                                                                    // 4438
		return bounds;                                                                                                    // 4439
	},                                                                                                                 // 4440
                                                                                                                    // 4441
	_propagateEvent: function (e) {                                                                                    // 4442
		e = L.extend({                                                                                                    // 4443
			layer: e.target,                                                                                                 // 4444
			target: this                                                                                                     // 4445
		}, e);                                                                                                            // 4446
		this.fire(e.type, e);                                                                                             // 4447
	}                                                                                                                  // 4448
});                                                                                                                 // 4449
                                                                                                                    // 4450
L.featureGroup = function (layers) {                                                                                // 4451
	return new L.FeatureGroup(layers);                                                                                 // 4452
};                                                                                                                  // 4453
                                                                                                                    // 4454
                                                                                                                    // 4455
/*                                                                                                                  // 4456
 * L.Path is a base class for rendering vector paths on a map. Inherited by Polyline, Circle, etc.                  // 4457
 */                                                                                                                 // 4458
                                                                                                                    // 4459
L.Path = L.Class.extend({                                                                                           // 4460
	includes: [L.Mixin.Events],                                                                                        // 4461
                                                                                                                    // 4462
	statics: {                                                                                                         // 4463
		// how much to extend the clip area around the map view                                                           // 4464
		// (relative to its size, e.g. 0.5 is half the screen in each direction)                                          // 4465
		// set it so that SVG element doesn't exceed 1280px (vectors flicker on dragend if it is)                         // 4466
		CLIP_PADDING: (function () {                                                                                      // 4467
			var max = L.Browser.mobile ? 1280 : 2000,                                                                        // 4468
			    target = (max / Math.max(window.outerWidth, window.outerHeight) - 1) / 2;                                    // 4469
			return Math.max(0, Math.min(0.5, target));                                                                       // 4470
		})()                                                                                                              // 4471
	},                                                                                                                 // 4472
                                                                                                                    // 4473
	options: {                                                                                                         // 4474
		stroke: true,                                                                                                     // 4475
		color: '#0033ff',                                                                                                 // 4476
		dashArray: null,                                                                                                  // 4477
		lineCap: null,                                                                                                    // 4478
		lineJoin: null,                                                                                                   // 4479
		weight: 5,                                                                                                        // 4480
		opacity: 0.5,                                                                                                     // 4481
                                                                                                                    // 4482
		fill: false,                                                                                                      // 4483
		fillColor: null, //same as color by default                                                                       // 4484
		fillOpacity: 0.2,                                                                                                 // 4485
                                                                                                                    // 4486
		clickable: true                                                                                                   // 4487
	},                                                                                                                 // 4488
                                                                                                                    // 4489
	initialize: function (options) {                                                                                   // 4490
		L.setOptions(this, options);                                                                                      // 4491
	},                                                                                                                 // 4492
                                                                                                                    // 4493
	onAdd: function (map) {                                                                                            // 4494
		this._map = map;                                                                                                  // 4495
                                                                                                                    // 4496
		if (!this._container) {                                                                                           // 4497
			this._initElements();                                                                                            // 4498
			this._initEvents();                                                                                              // 4499
		}                                                                                                                 // 4500
                                                                                                                    // 4501
		this.projectLatlngs();                                                                                            // 4502
		this._updatePath();                                                                                               // 4503
                                                                                                                    // 4504
		if (this._container) {                                                                                            // 4505
			this._map._pathRoot.appendChild(this._container);                                                                // 4506
		}                                                                                                                 // 4507
                                                                                                                    // 4508
		this.fire('add');                                                                                                 // 4509
                                                                                                                    // 4510
		map.on({                                                                                                          // 4511
			'viewreset': this.projectLatlngs,                                                                                // 4512
			'moveend': this._updatePath                                                                                      // 4513
		}, this);                                                                                                         // 4514
	},                                                                                                                 // 4515
                                                                                                                    // 4516
	addTo: function (map) {                                                                                            // 4517
		map.addLayer(this);                                                                                               // 4518
		return this;                                                                                                      // 4519
	},                                                                                                                 // 4520
                                                                                                                    // 4521
	onRemove: function (map) {                                                                                         // 4522
		map._pathRoot.removeChild(this._container);                                                                       // 4523
                                                                                                                    // 4524
		// Need to fire remove event before we set _map to null as the event hooks might need the object                  // 4525
		this.fire('remove');                                                                                              // 4526
		this._map = null;                                                                                                 // 4527
                                                                                                                    // 4528
		if (L.Browser.vml) {                                                                                              // 4529
			this._container = null;                                                                                          // 4530
			this._stroke = null;                                                                                             // 4531
			this._fill = null;                                                                                               // 4532
		}                                                                                                                 // 4533
                                                                                                                    // 4534
		map.off({                                                                                                         // 4535
			'viewreset': this.projectLatlngs,                                                                                // 4536
			'moveend': this._updatePath                                                                                      // 4537
		}, this);                                                                                                         // 4538
	},                                                                                                                 // 4539
                                                                                                                    // 4540
	projectLatlngs: function () {                                                                                      // 4541
		// do all projection stuff here                                                                                   // 4542
	},                                                                                                                 // 4543
                                                                                                                    // 4544
	setStyle: function (style) {                                                                                       // 4545
		L.setOptions(this, style);                                                                                        // 4546
                                                                                                                    // 4547
		if (this._container) {                                                                                            // 4548
			this._updateStyle();                                                                                             // 4549
		}                                                                                                                 // 4550
                                                                                                                    // 4551
		return this;                                                                                                      // 4552
	},                                                                                                                 // 4553
                                                                                                                    // 4554
	redraw: function () {                                                                                              // 4555
		if (this._map) {                                                                                                  // 4556
			this.projectLatlngs();                                                                                           // 4557
			this._updatePath();                                                                                              // 4558
		}                                                                                                                 // 4559
		return this;                                                                                                      // 4560
	}                                                                                                                  // 4561
});                                                                                                                 // 4562
                                                                                                                    // 4563
L.Map.include({                                                                                                     // 4564
	_updatePathViewport: function () {                                                                                 // 4565
		var p = L.Path.CLIP_PADDING,                                                                                      // 4566
		    size = this.getSize(),                                                                                        // 4567
		    panePos = L.DomUtil.getPosition(this._mapPane),                                                               // 4568
		    min = panePos.multiplyBy(-1)._subtract(size.multiplyBy(p)._round()),                                          // 4569
		    max = min.add(size.multiplyBy(1 + p * 2)._round());                                                           // 4570
                                                                                                                    // 4571
		this._pathViewport = new L.Bounds(min, max);                                                                      // 4572
	}                                                                                                                  // 4573
});                                                                                                                 // 4574
                                                                                                                    // 4575
                                                                                                                    // 4576
/*                                                                                                                  // 4577
 * Extends L.Path with SVG-specific rendering code.                                                                 // 4578
 */                                                                                                                 // 4579
                                                                                                                    // 4580
L.Path.SVG_NS = 'http://www.w3.org/2000/svg';                                                                       // 4581
                                                                                                                    // 4582
L.Browser.svg = !!(document.createElementNS && document.createElementNS(L.Path.SVG_NS, 'svg').createSVGRect);       // 4583
                                                                                                                    // 4584
L.Path = L.Path.extend({                                                                                            // 4585
	statics: {                                                                                                         // 4586
		SVG: L.Browser.svg                                                                                                // 4587
	},                                                                                                                 // 4588
                                                                                                                    // 4589
	bringToFront: function () {                                                                                        // 4590
		var root = this._map._pathRoot,                                                                                   // 4591
		    path = this._container;                                                                                       // 4592
                                                                                                                    // 4593
		if (path && root.lastChild !== path) {                                                                            // 4594
			root.appendChild(path);                                                                                          // 4595
		}                                                                                                                 // 4596
		return this;                                                                                                      // 4597
	},                                                                                                                 // 4598
                                                                                                                    // 4599
	bringToBack: function () {                                                                                         // 4600
		var root = this._map._pathRoot,                                                                                   // 4601
		    path = this._container,                                                                                       // 4602
		    first = root.firstChild;                                                                                      // 4603
                                                                                                                    // 4604
		if (path && first !== path) {                                                                                     // 4605
			root.insertBefore(path, first);                                                                                  // 4606
		}                                                                                                                 // 4607
		return this;                                                                                                      // 4608
	},                                                                                                                 // 4609
                                                                                                                    // 4610
	getPathString: function () {                                                                                       // 4611
		// form path string here                                                                                          // 4612
	},                                                                                                                 // 4613
                                                                                                                    // 4614
	_createElement: function (name) {                                                                                  // 4615
		return document.createElementNS(L.Path.SVG_NS, name);                                                             // 4616
	},                                                                                                                 // 4617
                                                                                                                    // 4618
	_initElements: function () {                                                                                       // 4619
		this._map._initPathRoot();                                                                                        // 4620
		this._initPath();                                                                                                 // 4621
		this._initStyle();                                                                                                // 4622
	},                                                                                                                 // 4623
                                                                                                                    // 4624
	_initPath: function () {                                                                                           // 4625
		this._container = this._createElement('g');                                                                       // 4626
                                                                                                                    // 4627
		this._path = this._createElement('path');                                                                         // 4628
                                                                                                                    // 4629
		if (this.options.className) {                                                                                     // 4630
			L.DomUtil.addClass(this._path, this.options.className);                                                          // 4631
		}                                                                                                                 // 4632
                                                                                                                    // 4633
		this._container.appendChild(this._path);                                                                          // 4634
	},                                                                                                                 // 4635
                                                                                                                    // 4636
	_initStyle: function () {                                                                                          // 4637
		if (this.options.stroke) {                                                                                        // 4638
			this._path.setAttribute('stroke-linejoin', 'round');                                                             // 4639
			this._path.setAttribute('stroke-linecap', 'round');                                                              // 4640
		}                                                                                                                 // 4641
		if (this.options.fill) {                                                                                          // 4642
			this._path.setAttribute('fill-rule', 'evenodd');                                                                 // 4643
		}                                                                                                                 // 4644
		if (this.options.pointerEvents) {                                                                                 // 4645
			this._path.setAttribute('pointer-events', this.options.pointerEvents);                                           // 4646
		}                                                                                                                 // 4647
		if (!this.options.clickable && !this.options.pointerEvents) {                                                     // 4648
			this._path.setAttribute('pointer-events', 'none');                                                               // 4649
		}                                                                                                                 // 4650
		this._updateStyle();                                                                                              // 4651
	},                                                                                                                 // 4652
                                                                                                                    // 4653
	_updateStyle: function () {                                                                                        // 4654
		if (this.options.stroke) {                                                                                        // 4655
			this._path.setAttribute('stroke', this.options.color);                                                           // 4656
			this._path.setAttribute('stroke-opacity', this.options.opacity);                                                 // 4657
			this._path.setAttribute('stroke-width', this.options.weight);                                                    // 4658
			if (this.options.dashArray) {                                                                                    // 4659
				this._path.setAttribute('stroke-dasharray', this.options.dashArray);                                            // 4660
			} else {                                                                                                         // 4661
				this._path.removeAttribute('stroke-dasharray');                                                                 // 4662
			}                                                                                                                // 4663
			if (this.options.lineCap) {                                                                                      // 4664
				this._path.setAttribute('stroke-linecap', this.options.lineCap);                                                // 4665
			}                                                                                                                // 4666
			if (this.options.lineJoin) {                                                                                     // 4667
				this._path.setAttribute('stroke-linejoin', this.options.lineJoin);                                              // 4668
			}                                                                                                                // 4669
		} else {                                                                                                          // 4670
			this._path.setAttribute('stroke', 'none');                                                                       // 4671
		}                                                                                                                 // 4672
		if (this.options.fill) {                                                                                          // 4673
			this._path.setAttribute('fill', this.options.fillColor || this.options.color);                                   // 4674
			this._path.setAttribute('fill-opacity', this.options.fillOpacity);                                               // 4675
		} else {                                                                                                          // 4676
			this._path.setAttribute('fill', 'none');                                                                         // 4677
		}                                                                                                                 // 4678
	},                                                                                                                 // 4679
                                                                                                                    // 4680
	_updatePath: function () {                                                                                         // 4681
		var str = this.getPathString();                                                                                   // 4682
		if (!str) {                                                                                                       // 4683
			// fix webkit empty string parsing bug                                                                           // 4684
			str = 'M0 0';                                                                                                    // 4685
		}                                                                                                                 // 4686
		this._path.setAttribute('d', str);                                                                                // 4687
	},                                                                                                                 // 4688
                                                                                                                    // 4689
	// TODO remove duplication with L.Map                                                                              // 4690
	_initEvents: function () {                                                                                         // 4691
		if (this.options.clickable) {                                                                                     // 4692
			if (L.Browser.svg || !L.Browser.vml) {                                                                           // 4693
				L.DomUtil.addClass(this._path, 'leaflet-clickable');                                                            // 4694
			}                                                                                                                // 4695
                                                                                                                    // 4696
			L.DomEvent.on(this._container, 'click', this._onMouseClick, this);                                               // 4697
                                                                                                                    // 4698
			var events = ['dblclick', 'mousedown', 'mouseover',                                                              // 4699
			              'mouseout', 'mousemove', 'contextmenu'];                                                           // 4700
			for (var i = 0; i < events.length; i++) {                                                                        // 4701
				L.DomEvent.on(this._container, events[i], this._fireMouseEvent, this);                                          // 4702
			}                                                                                                                // 4703
		}                                                                                                                 // 4704
	},                                                                                                                 // 4705
                                                                                                                    // 4706
	_onMouseClick: function (e) {                                                                                      // 4707
		if (this._map.dragging && this._map.dragging.moved()) { return; }                                                 // 4708
                                                                                                                    // 4709
		this._fireMouseEvent(e);                                                                                          // 4710
	},                                                                                                                 // 4711
                                                                                                                    // 4712
	_fireMouseEvent: function (e) {                                                                                    // 4713
		if (!this._map || !this.hasEventListeners(e.type)) { return; }                                                    // 4714
                                                                                                                    // 4715
		var map = this._map,                                                                                              // 4716
		    containerPoint = map.mouseEventToContainerPoint(e),                                                           // 4717
		    layerPoint = map.containerPointToLayerPoint(containerPoint),                                                  // 4718
		    latlng = map.layerPointToLatLng(layerPoint);                                                                  // 4719
                                                                                                                    // 4720
		this.fire(e.type, {                                                                                               // 4721
			latlng: latlng,                                                                                                  // 4722
			layerPoint: layerPoint,                                                                                          // 4723
			containerPoint: containerPoint,                                                                                  // 4724
			originalEvent: e                                                                                                 // 4725
		});                                                                                                               // 4726
                                                                                                                    // 4727
		if (e.type === 'contextmenu') {                                                                                   // 4728
			L.DomEvent.preventDefault(e);                                                                                    // 4729
		}                                                                                                                 // 4730
		if (e.type !== 'mousemove') {                                                                                     // 4731
			L.DomEvent.stopPropagation(e);                                                                                   // 4732
		}                                                                                                                 // 4733
	}                                                                                                                  // 4734
});                                                                                                                 // 4735
                                                                                                                    // 4736
L.Map.include({                                                                                                     // 4737
	_initPathRoot: function () {                                                                                       // 4738
		if (!this._pathRoot) {                                                                                            // 4739
			this._pathRoot = L.Path.prototype._createElement('svg');                                                         // 4740
			this._panes.overlayPane.appendChild(this._pathRoot);                                                             // 4741
                                                                                                                    // 4742
			if (this.options.zoomAnimation && L.Browser.any3d) {                                                             // 4743
				L.DomUtil.addClass(this._pathRoot, 'leaflet-zoom-animated');                                                    // 4744
                                                                                                                    // 4745
				this.on({                                                                                                       // 4746
					'zoomanim': this._animatePathZoom,                                                                             // 4747
					'zoomend': this._endPathZoom                                                                                   // 4748
				});                                                                                                             // 4749
			} else {                                                                                                         // 4750
				L.DomUtil.addClass(this._pathRoot, 'leaflet-zoom-hide');                                                        // 4751
			}                                                                                                                // 4752
                                                                                                                    // 4753
			this.on('moveend', this._updateSvgViewport);                                                                     // 4754
			this._updateSvgViewport();                                                                                       // 4755
		}                                                                                                                 // 4756
	},                                                                                                                 // 4757
                                                                                                                    // 4758
	_animatePathZoom: function (e) {                                                                                   // 4759
		var scale = this.getZoomScale(e.zoom),                                                                            // 4760
		    offset = this._getCenterOffset(e.center)._multiplyBy(-scale)._add(this._pathViewport.min);                    // 4761
                                                                                                                    // 4762
		this._pathRoot.style[L.DomUtil.TRANSFORM] =                                                                       // 4763
		        L.DomUtil.getTranslateString(offset) + ' scale(' + scale + ') ';                                          // 4764
                                                                                                                    // 4765
		this._pathZooming = true;                                                                                         // 4766
	},                                                                                                                 // 4767
                                                                                                                    // 4768
	_endPathZoom: function () {                                                                                        // 4769
		this._pathZooming = false;                                                                                        // 4770
	},                                                                                                                 // 4771
                                                                                                                    // 4772
	_updateSvgViewport: function () {                                                                                  // 4773
                                                                                                                    // 4774
		if (this._pathZooming) {                                                                                          // 4775
			// Do not update SVGs while a zoom animation is going on otherwise the animation will break.                     // 4776
			// When the zoom animation ends we will be updated again anyway                                                  // 4777
			// This fixes the case where you do a momentum move and zoom while the move is still ongoing.                    // 4778
			return;                                                                                                          // 4779
		}                                                                                                                 // 4780
                                                                                                                    // 4781
		this._updatePathViewport();                                                                                       // 4782
                                                                                                                    // 4783
		var vp = this._pathViewport,                                                                                      // 4784
		    min = vp.min,                                                                                                 // 4785
		    max = vp.max,                                                                                                 // 4786
		    width = max.x - min.x,                                                                                        // 4787
		    height = max.y - min.y,                                                                                       // 4788
		    root = this._pathRoot,                                                                                        // 4789
		    pane = this._panes.overlayPane;                                                                               // 4790
                                                                                                                    // 4791
		// Hack to make flicker on drag end on mobile webkit less irritating                                              // 4792
		if (L.Browser.mobileWebkit) {                                                                                     // 4793
			pane.removeChild(root);                                                                                          // 4794
		}                                                                                                                 // 4795
                                                                                                                    // 4796
		L.DomUtil.setPosition(root, min);                                                                                 // 4797
		root.setAttribute('width', width);                                                                                // 4798
		root.setAttribute('height', height);                                                                              // 4799
		root.setAttribute('viewBox', [min.x, min.y, width, height].join(' '));                                            // 4800
                                                                                                                    // 4801
		if (L.Browser.mobileWebkit) {                                                                                     // 4802
			pane.appendChild(root);                                                                                          // 4803
		}                                                                                                                 // 4804
	}                                                                                                                  // 4805
});                                                                                                                 // 4806
                                                                                                                    // 4807
                                                                                                                    // 4808
/*                                                                                                                  // 4809
 * Popup extension to L.Path (polylines, polygons, circles), adding popup-related methods.                          // 4810
 */                                                                                                                 // 4811
                                                                                                                    // 4812
L.Path.include({                                                                                                    // 4813
                                                                                                                    // 4814
	bindPopup: function (content, options) {                                                                           // 4815
                                                                                                                    // 4816
		if (content instanceof L.Popup) {                                                                                 // 4817
			this._popup = content;                                                                                           // 4818
		} else {                                                                                                          // 4819
			if (!this._popup || options) {                                                                                   // 4820
				this._popup = new L.Popup(options, this);                                                                       // 4821
			}                                                                                                                // 4822
			this._popup.setContent(content);                                                                                 // 4823
		}                                                                                                                 // 4824
                                                                                                                    // 4825
		if (!this._popupHandlersAdded) {                                                                                  // 4826
			this                                                                                                             // 4827
			    .on('click', this._openPopup, this)                                                                          // 4828
			    .on('remove', this.closePopup, this);                                                                        // 4829
                                                                                                                    // 4830
			this._popupHandlersAdded = true;                                                                                 // 4831
		}                                                                                                                 // 4832
                                                                                                                    // 4833
		return this;                                                                                                      // 4834
	},                                                                                                                 // 4835
                                                                                                                    // 4836
	unbindPopup: function () {                                                                                         // 4837
		if (this._popup) {                                                                                                // 4838
			this._popup = null;                                                                                              // 4839
			this                                                                                                             // 4840
			    .off('click', this._openPopup)                                                                               // 4841
			    .off('remove', this.closePopup);                                                                             // 4842
                                                                                                                    // 4843
			this._popupHandlersAdded = false;                                                                                // 4844
		}                                                                                                                 // 4845
		return this;                                                                                                      // 4846
	},                                                                                                                 // 4847
                                                                                                                    // 4848
	openPopup: function (latlng) {                                                                                     // 4849
                                                                                                                    // 4850
		if (this._popup) {                                                                                                // 4851
			// open the popup from one of the path's points if not specified                                                 // 4852
			latlng = latlng || this._latlng ||                                                                               // 4853
			         this._latlngs[Math.floor(this._latlngs.length / 2)];                                                    // 4854
                                                                                                                    // 4855
			this._openPopup({latlng: latlng});                                                                               // 4856
		}                                                                                                                 // 4857
                                                                                                                    // 4858
		return this;                                                                                                      // 4859
	},                                                                                                                 // 4860
                                                                                                                    // 4861
	closePopup: function () {                                                                                          // 4862
		if (this._popup) {                                                                                                // 4863
			this._popup._close();                                                                                            // 4864
		}                                                                                                                 // 4865
		return this;                                                                                                      // 4866
	},                                                                                                                 // 4867
                                                                                                                    // 4868
	_openPopup: function (e) {                                                                                         // 4869
		this._popup.setLatLng(e.latlng);                                                                                  // 4870
		this._map.openPopup(this._popup);                                                                                 // 4871
	}                                                                                                                  // 4872
});                                                                                                                 // 4873
                                                                                                                    // 4874
                                                                                                                    // 4875
/*                                                                                                                  // 4876
 * Vector rendering for IE6-8 through VML.                                                                          // 4877
 * Thanks to Dmitry Baranovsky and his Raphael library for inspiration!                                             // 4878
 */                                                                                                                 // 4879
                                                                                                                    // 4880
L.Browser.vml = !L.Browser.svg && (function () {                                                                    // 4881
	try {                                                                                                              // 4882
		var div = document.createElement('div');                                                                          // 4883
		div.innerHTML = '<v:shape adj="1"/>';                                                                             // 4884
                                                                                                                    // 4885
		var shape = div.firstChild;                                                                                       // 4886
		shape.style.behavior = 'url(#default#VML)';                                                                       // 4887
                                                                                                                    // 4888
		return shape && (typeof shape.adj === 'object');                                                                  // 4889
                                                                                                                    // 4890
	} catch (e) {                                                                                                      // 4891
		return false;                                                                                                     // 4892
	}                                                                                                                  // 4893
}());                                                                                                               // 4894
                                                                                                                    // 4895
L.Path = L.Browser.svg || !L.Browser.vml ? L.Path : L.Path.extend({                                                 // 4896
	statics: {                                                                                                         // 4897
		VML: true,                                                                                                        // 4898
		CLIP_PADDING: 0.02                                                                                                // 4899
	},                                                                                                                 // 4900
                                                                                                                    // 4901
	_createElement: (function () {                                                                                     // 4902
		try {                                                                                                             // 4903
			document.namespaces.add('lvml', 'urn:schemas-microsoft-com:vml');                                                // 4904
			return function (name) {                                                                                         // 4905
				return document.createElement('<lvml:' + name + ' class="lvml">');                                              // 4906
			};                                                                                                               // 4907
		} catch (e) {                                                                                                     // 4908
			return function (name) {                                                                                         // 4909
				return document.createElement(                                                                                  // 4910
				        '<' + name + ' xmlns="urn:schemas-microsoft.com:vml" class="lvml">');                                   // 4911
			};                                                                                                               // 4912
		}                                                                                                                 // 4913
	}()),                                                                                                              // 4914
                                                                                                                    // 4915
	_initPath: function () {                                                                                           // 4916
		var container = this._container = this._createElement('shape');                                                   // 4917
                                                                                                                    // 4918
		L.DomUtil.addClass(container, 'leaflet-vml-shape' +                                                               // 4919
			(this.options.className ? ' ' + this.options.className : ''));                                                   // 4920
                                                                                                                    // 4921
		if (this.options.clickable) {                                                                                     // 4922
			L.DomUtil.addClass(container, 'leaflet-clickable');                                                              // 4923
		}                                                                                                                 // 4924
                                                                                                                    // 4925
		container.coordsize = '1 1';                                                                                      // 4926
                                                                                                                    // 4927
		this._path = this._createElement('path');                                                                         // 4928
		container.appendChild(this._path);                                                                                // 4929
                                                                                                                    // 4930
		this._map._pathRoot.appendChild(container);                                                                       // 4931
	},                                                                                                                 // 4932
                                                                                                                    // 4933
	_initStyle: function () {                                                                                          // 4934
		this._updateStyle();                                                                                              // 4935
	},                                                                                                                 // 4936
                                                                                                                    // 4937
	_updateStyle: function () {                                                                                        // 4938
		var stroke = this._stroke,                                                                                        // 4939
		    fill = this._fill,                                                                                            // 4940
		    options = this.options,                                                                                       // 4941
		    container = this._container;                                                                                  // 4942
                                                                                                                    // 4943
		container.stroked = options.stroke;                                                                               // 4944
		container.filled = options.fill;                                                                                  // 4945
                                                                                                                    // 4946
		if (options.stroke) {                                                                                             // 4947
			if (!stroke) {                                                                                                   // 4948
				stroke = this._stroke = this._createElement('stroke');                                                          // 4949
				stroke.endcap = 'round';                                                                                        // 4950
				container.appendChild(stroke);                                                                                  // 4951
			}                                                                                                                // 4952
			stroke.weight = options.weight + 'px';                                                                           // 4953
			stroke.color = options.color;                                                                                    // 4954
			stroke.opacity = options.opacity;                                                                                // 4955
                                                                                                                    // 4956
			if (options.dashArray) {                                                                                         // 4957
				stroke.dashStyle = L.Util.isArray(options.dashArray) ?                                                          // 4958
				    options.dashArray.join(' ') :                                                                               // 4959
				    options.dashArray.replace(/( *, *)/g, ' ');                                                                 // 4960
			} else {                                                                                                         // 4961
				stroke.dashStyle = '';                                                                                          // 4962
			}                                                                                                                // 4963
			if (options.lineCap) {                                                                                           // 4964
				stroke.endcap = options.lineCap.replace('butt', 'flat');                                                        // 4965
			}                                                                                                                // 4966
			if (options.lineJoin) {                                                                                          // 4967
				stroke.joinstyle = options.lineJoin;                                                                            // 4968
			}                                                                                                                // 4969
                                                                                                                    // 4970
		} else if (stroke) {                                                                                              // 4971
			container.removeChild(stroke);                                                                                   // 4972
			this._stroke = null;                                                                                             // 4973
		}                                                                                                                 // 4974
                                                                                                                    // 4975
		if (options.fill) {                                                                                               // 4976
			if (!fill) {                                                                                                     // 4977
				fill = this._fill = this._createElement('fill');                                                                // 4978
				container.appendChild(fill);                                                                                    // 4979
			}                                                                                                                // 4980
			fill.color = options.fillColor || options.color;                                                                 // 4981
			fill.opacity = options.fillOpacity;                                                                              // 4982
                                                                                                                    // 4983
		} else if (fill) {                                                                                                // 4984
			container.removeChild(fill);                                                                                     // 4985
			this._fill = null;                                                                                               // 4986
		}                                                                                                                 // 4987
	},                                                                                                                 // 4988
                                                                                                                    // 4989
	_updatePath: function () {                                                                                         // 4990
		var style = this._container.style;                                                                                // 4991
                                                                                                                    // 4992
		style.display = 'none';                                                                                           // 4993
		this._path.v = this.getPathString() + ' '; // the space fixes IE empty path string bug                            // 4994
		style.display = '';                                                                                               // 4995
	}                                                                                                                  // 4996
});                                                                                                                 // 4997
                                                                                                                    // 4998
L.Map.include(L.Browser.svg || !L.Browser.vml ? {} : {                                                              // 4999
	_initPathRoot: function () {                                                                                       // 5000
		if (this._pathRoot) { return; }                                                                                   // 5001
                                                                                                                    // 5002
		var root = this._pathRoot = document.createElement('div');                                                        // 5003
		root.className = 'leaflet-vml-container';                                                                         // 5004
		this._panes.overlayPane.appendChild(root);                                                                        // 5005
                                                                                                                    // 5006
		this.on('moveend', this._updatePathViewport);                                                                     // 5007
		this._updatePathViewport();                                                                                       // 5008
	}                                                                                                                  // 5009
});                                                                                                                 // 5010
                                                                                                                    // 5011
                                                                                                                    // 5012
/*                                                                                                                  // 5013
 * Vector rendering for all browsers that support canvas.                                                           // 5014
 */                                                                                                                 // 5015
                                                                                                                    // 5016
L.Browser.canvas = (function () {                                                                                   // 5017
	return !!document.createElement('canvas').getContext;                                                              // 5018
}());                                                                                                               // 5019
                                                                                                                    // 5020
L.Path = (L.Path.SVG && !window.L_PREFER_CANVAS) || !L.Browser.canvas ? L.Path : L.Path.extend({                    // 5021
	statics: {                                                                                                         // 5022
		//CLIP_PADDING: 0.02, // not sure if there's a need to set it to a small value                                    // 5023
		CANVAS: true,                                                                                                     // 5024
		SVG: false                                                                                                        // 5025
	},                                                                                                                 // 5026
                                                                                                                    // 5027
	redraw: function () {                                                                                              // 5028
		if (this._map) {                                                                                                  // 5029
			this.projectLatlngs();                                                                                           // 5030
			this._requestUpdate();                                                                                           // 5031
		}                                                                                                                 // 5032
		return this;                                                                                                      // 5033
	},                                                                                                                 // 5034
                                                                                                                    // 5035
	setStyle: function (style) {                                                                                       // 5036
		L.setOptions(this, style);                                                                                        // 5037
                                                                                                                    // 5038
		if (this._map) {                                                                                                  // 5039
			this._updateStyle();                                                                                             // 5040
			this._requestUpdate();                                                                                           // 5041
		}                                                                                                                 // 5042
		return this;                                                                                                      // 5043
	},                                                                                                                 // 5044
                                                                                                                    // 5045
	onRemove: function (map) {                                                                                         // 5046
		map                                                                                                               // 5047
		    .off('viewreset', this.projectLatlngs, this)                                                                  // 5048
		    .off('moveend', this._updatePath, this);                                                                      // 5049
                                                                                                                    // 5050
		if (this.options.clickable) {                                                                                     // 5051
			this._map.off('click', this._onClick, this);                                                                     // 5052
			this._map.off('mousemove', this._onMouseMove, this);                                                             // 5053
		}                                                                                                                 // 5054
                                                                                                                    // 5055
		this._requestUpdate();                                                                                            // 5056
		                                                                                                                  // 5057
		this.fire('remove');                                                                                              // 5058
		this._map = null;                                                                                                 // 5059
	},                                                                                                                 // 5060
                                                                                                                    // 5061
	_requestUpdate: function () {                                                                                      // 5062
		if (this._map && !L.Path._updateRequest) {                                                                        // 5063
			L.Path._updateRequest = L.Util.requestAnimFrame(this._fireMapMoveEnd, this._map);                                // 5064
		}                                                                                                                 // 5065
	},                                                                                                                 // 5066
                                                                                                                    // 5067
	_fireMapMoveEnd: function () {                                                                                     // 5068
		L.Path._updateRequest = null;                                                                                     // 5069
		this.fire('moveend');                                                                                             // 5070
	},                                                                                                                 // 5071
                                                                                                                    // 5072
	_initElements: function () {                                                                                       // 5073
		this._map._initPathRoot();                                                                                        // 5074
		this._ctx = this._map._canvasCtx;                                                                                 // 5075
	},                                                                                                                 // 5076
                                                                                                                    // 5077
	_updateStyle: function () {                                                                                        // 5078
		var options = this.options;                                                                                       // 5079
                                                                                                                    // 5080
		if (options.stroke) {                                                                                             // 5081
			this._ctx.lineWidth = options.weight;                                                                            // 5082
			this._ctx.strokeStyle = options.color;                                                                           // 5083
		}                                                                                                                 // 5084
		if (options.fill) {                                                                                               // 5085
			this._ctx.fillStyle = options.fillColor || options.color;                                                        // 5086
		}                                                                                                                 // 5087
                                                                                                                    // 5088
		if (options.lineCap) {                                                                                            // 5089
			this._ctx.lineCap = options.lineCap;                                                                             // 5090
		}                                                                                                                 // 5091
		if (options.lineJoin) {                                                                                           // 5092
			this._ctx.lineJoin = options.lineJoin;                                                                           // 5093
		}                                                                                                                 // 5094
	},                                                                                                                 // 5095
                                                                                                                    // 5096
	_drawPath: function () {                                                                                           // 5097
		var i, j, len, len2, point, drawMethod;                                                                           // 5098
                                                                                                                    // 5099
		this._ctx.beginPath();                                                                                            // 5100
                                                                                                                    // 5101
		for (i = 0, len = this._parts.length; i < len; i++) {                                                             // 5102
			for (j = 0, len2 = this._parts[i].length; j < len2; j++) {                                                       // 5103
				point = this._parts[i][j];                                                                                      // 5104
				drawMethod = (j === 0 ? 'move' : 'line') + 'To';                                                                // 5105
                                                                                                                    // 5106
				this._ctx[drawMethod](point.x, point.y);                                                                        // 5107
			}                                                                                                                // 5108
			// TODO refactor ugly hack                                                                                       // 5109
			if (this instanceof L.Polygon) {                                                                                 // 5110
				this._ctx.closePath();                                                                                          // 5111
			}                                                                                                                // 5112
		}                                                                                                                 // 5113
	},                                                                                                                 // 5114
                                                                                                                    // 5115
	_checkIfEmpty: function () {                                                                                       // 5116
		return !this._parts.length;                                                                                       // 5117
	},                                                                                                                 // 5118
                                                                                                                    // 5119
	_updatePath: function () {                                                                                         // 5120
		if (this._checkIfEmpty()) { return; }                                                                             // 5121
                                                                                                                    // 5122
		var ctx = this._ctx,                                                                                              // 5123
		    options = this.options;                                                                                       // 5124
                                                                                                                    // 5125
		this._drawPath();                                                                                                 // 5126
		ctx.save();                                                                                                       // 5127
		this._updateStyle();                                                                                              // 5128
                                                                                                                    // 5129
		if (options.fill) {                                                                                               // 5130
			ctx.globalAlpha = options.fillOpacity;                                                                           // 5131
			ctx.fill(options.fillRule || 'evenodd');                                                                         // 5132
		}                                                                                                                 // 5133
                                                                                                                    // 5134
		if (options.stroke) {                                                                                             // 5135
			ctx.globalAlpha = options.opacity;                                                                               // 5136
			ctx.stroke();                                                                                                    // 5137
		}                                                                                                                 // 5138
                                                                                                                    // 5139
		ctx.restore();                                                                                                    // 5140
                                                                                                                    // 5141
		// TODO optimization: 1 fill/stroke for all features with equal style instead of 1 for each feature               // 5142
	},                                                                                                                 // 5143
                                                                                                                    // 5144
	_initEvents: function () {                                                                                         // 5145
		if (this.options.clickable) {                                                                                     // 5146
			this._map.on('mousemove', this._onMouseMove, this);                                                              // 5147
			this._map.on('click dblclick contextmenu', this._fireMouseEvent, this);                                          // 5148
		}                                                                                                                 // 5149
	},                                                                                                                 // 5150
                                                                                                                    // 5151
	_fireMouseEvent: function (e) {                                                                                    // 5152
		if (this._containsPoint(e.layerPoint)) {                                                                          // 5153
			this.fire(e.type, e);                                                                                            // 5154
		}                                                                                                                 // 5155
	},                                                                                                                 // 5156
                                                                                                                    // 5157
	_onMouseMove: function (e) {                                                                                       // 5158
		if (!this._map || this._map._animatingZoom) { return; }                                                           // 5159
                                                                                                                    // 5160
		// TODO don't do on each move                                                                                     // 5161
		if (this._containsPoint(e.layerPoint)) {                                                                          // 5162
			this._ctx.canvas.style.cursor = 'pointer';                                                                       // 5163
			this._mouseInside = true;                                                                                        // 5164
			this.fire('mouseover', e);                                                                                       // 5165
                                                                                                                    // 5166
		} else if (this._mouseInside) {                                                                                   // 5167
			this._ctx.canvas.style.cursor = '';                                                                              // 5168
			this._mouseInside = false;                                                                                       // 5169
			this.fire('mouseout', e);                                                                                        // 5170
		}                                                                                                                 // 5171
	}                                                                                                                  // 5172
});                                                                                                                 // 5173
                                                                                                                    // 5174
L.Map.include((L.Path.SVG && !window.L_PREFER_CANVAS) || !L.Browser.canvas ? {} : {                                 // 5175
	_initPathRoot: function () {                                                                                       // 5176
		var root = this._pathRoot,                                                                                        // 5177
		    ctx;                                                                                                          // 5178
                                                                                                                    // 5179
		if (!root) {                                                                                                      // 5180
			root = this._pathRoot = document.createElement('canvas');                                                        // 5181
			root.style.position = 'absolute';                                                                                // 5182
			ctx = this._canvasCtx = root.getContext('2d');                                                                   // 5183
                                                                                                                    // 5184
			ctx.lineCap = 'round';                                                                                           // 5185
			ctx.lineJoin = 'round';                                                                                          // 5186
                                                                                                                    // 5187
			this._panes.overlayPane.appendChild(root);                                                                       // 5188
                                                                                                                    // 5189
			if (this.options.zoomAnimation) {                                                                                // 5190
				this._pathRoot.className = 'leaflet-zoom-animated';                                                             // 5191
				this.on('zoomanim', this._animatePathZoom);                                                                     // 5192
				this.on('zoomend', this._endPathZoom);                                                                          // 5193
			}                                                                                                                // 5194
			this.on('moveend', this._updateCanvasViewport);                                                                  // 5195
			this._updateCanvasViewport();                                                                                    // 5196
		}                                                                                                                 // 5197
	},                                                                                                                 // 5198
                                                                                                                    // 5199
	_updateCanvasViewport: function () {                                                                               // 5200
		// don't redraw while zooming. See _updateSvgViewport for more details                                            // 5201
		if (this._pathZooming) { return; }                                                                                // 5202
		this._updatePathViewport();                                                                                       // 5203
                                                                                                                    // 5204
		var vp = this._pathViewport,                                                                                      // 5205
		    min = vp.min,                                                                                                 // 5206
		    size = vp.max.subtract(min),                                                                                  // 5207
		    root = this._pathRoot;                                                                                        // 5208
                                                                                                                    // 5209
		//TODO check if this works properly on mobile webkit                                                              // 5210
		L.DomUtil.setPosition(root, min);                                                                                 // 5211
		root.width = size.x;                                                                                              // 5212
		root.height = size.y;                                                                                             // 5213
		root.getContext('2d').translate(-min.x, -min.y);                                                                  // 5214
	}                                                                                                                  // 5215
});                                                                                                                 // 5216
                                                                                                                    // 5217
                                                                                                                    // 5218
/*                                                                                                                  // 5219
 * L.LineUtil contains different utility functions for line segments                                                // 5220
 * and polylines (clipping, simplification, distances, etc.)                                                        // 5221
 */                                                                                                                 // 5222
                                                                                                                    // 5223
/*jshint bitwise:false */ // allow bitwise operations for this file                                                 // 5224
                                                                                                                    // 5225
L.LineUtil = {                                                                                                      // 5226
                                                                                                                    // 5227
	// Simplify polyline with vertex reduction and Douglas-Peucker simplification.                                     // 5228
	// Improves rendering performance dramatically by lessening the number of points to draw.                          // 5229
                                                                                                                    // 5230
	simplify: function (/*Point[]*/ points, /*Number*/ tolerance) {                                                    // 5231
		if (!tolerance || !points.length) {                                                                               // 5232
			return points.slice();                                                                                           // 5233
		}                                                                                                                 // 5234
                                                                                                                    // 5235
		var sqTolerance = tolerance * tolerance;                                                                          // 5236
                                                                                                                    // 5237
		// stage 1: vertex reduction                                                                                      // 5238
		points = this._reducePoints(points, sqTolerance);                                                                 // 5239
                                                                                                                    // 5240
		// stage 2: Douglas-Peucker simplification                                                                        // 5241
		points = this._simplifyDP(points, sqTolerance);                                                                   // 5242
                                                                                                                    // 5243
		return points;                                                                                                    // 5244
	},                                                                                                                 // 5245
                                                                                                                    // 5246
	// distance from a point to a segment between two points                                                           // 5247
	pointToSegmentDistance:  function (/*Point*/ p, /*Point*/ p1, /*Point*/ p2) {                                      // 5248
		return Math.sqrt(this._sqClosestPointOnSegment(p, p1, p2, true));                                                 // 5249
	},                                                                                                                 // 5250
                                                                                                                    // 5251
	closestPointOnSegment: function (/*Point*/ p, /*Point*/ p1, /*Point*/ p2) {                                        // 5252
		return this._sqClosestPointOnSegment(p, p1, p2);                                                                  // 5253
	},                                                                                                                 // 5254
                                                                                                                    // 5255
	// Douglas-Peucker simplification, see http://en.wikipedia.org/wiki/Douglas-Peucker_algorithm                      // 5256
	_simplifyDP: function (points, sqTolerance) {                                                                      // 5257
                                                                                                                    // 5258
		var len = points.length,                                                                                          // 5259
		    ArrayConstructor = typeof Uint8Array !== undefined + '' ? Uint8Array : Array,                                 // 5260
		    markers = new ArrayConstructor(len);                                                                          // 5261
                                                                                                                    // 5262
		markers[0] = markers[len - 1] = 1;                                                                                // 5263
                                                                                                                    // 5264
		this._simplifyDPStep(points, markers, sqTolerance, 0, len - 1);                                                   // 5265
                                                                                                                    // 5266
		var i,                                                                                                            // 5267
		    newPoints = [];                                                                                               // 5268
                                                                                                                    // 5269
		for (i = 0; i < len; i++) {                                                                                       // 5270
			if (markers[i]) {                                                                                                // 5271
				newPoints.push(points[i]);                                                                                      // 5272
			}                                                                                                                // 5273
		}                                                                                                                 // 5274
                                                                                                                    // 5275
		return newPoints;                                                                                                 // 5276
	},                                                                                                                 // 5277
                                                                                                                    // 5278
	_simplifyDPStep: function (points, markers, sqTolerance, first, last) {                                            // 5279
                                                                                                                    // 5280
		var maxSqDist = 0,                                                                                                // 5281
		    index, i, sqDist;                                                                                             // 5282
                                                                                                                    // 5283
		for (i = first + 1; i <= last - 1; i++) {                                                                         // 5284
			sqDist = this._sqClosestPointOnSegment(points[i], points[first], points[last], true);                            // 5285
                                                                                                                    // 5286
			if (sqDist > maxSqDist) {                                                                                        // 5287
				index = i;                                                                                                      // 5288
				maxSqDist = sqDist;                                                                                             // 5289
			}                                                                                                                // 5290
		}                                                                                                                 // 5291
                                                                                                                    // 5292
		if (maxSqDist > sqTolerance) {                                                                                    // 5293
			markers[index] = 1;                                                                                              // 5294
                                                                                                                    // 5295
			this._simplifyDPStep(points, markers, sqTolerance, first, index);                                                // 5296
			this._simplifyDPStep(points, markers, sqTolerance, index, last);                                                 // 5297
		}                                                                                                                 // 5298
	},                                                                                                                 // 5299
                                                                                                                    // 5300
	// reduce points that are too close to each other to a single point                                                // 5301
	_reducePoints: function (points, sqTolerance) {                                                                    // 5302
		var reducedPoints = [points[0]];                                                                                  // 5303
                                                                                                                    // 5304
		for (var i = 1, prev = 0, len = points.length; i < len; i++) {                                                    // 5305
			if (this._sqDist(points[i], points[prev]) > sqTolerance) {                                                       // 5306
				reducedPoints.push(points[i]);                                                                                  // 5307
				prev = i;                                                                                                       // 5308
			}                                                                                                                // 5309
		}                                                                                                                 // 5310
		if (prev < len - 1) {                                                                                             // 5311
			reducedPoints.push(points[len - 1]);                                                                             // 5312
		}                                                                                                                 // 5313
		return reducedPoints;                                                                                             // 5314
	},                                                                                                                 // 5315
                                                                                                                    // 5316
	// Cohen-Sutherland line clipping algorithm.                                                                       // 5317
	// Used to avoid rendering parts of a polyline that are not currently visible.                                     // 5318
                                                                                                                    // 5319
	clipSegment: function (a, b, bounds, useLastCode) {                                                                // 5320
		var codeA = useLastCode ? this._lastCode : this._getBitCode(a, bounds),                                           // 5321
		    codeB = this._getBitCode(b, bounds),                                                                          // 5322
                                                                                                                    // 5323
		    codeOut, p, newCode;                                                                                          // 5324
                                                                                                                    // 5325
		// save 2nd code to avoid calculating it on the next segment                                                      // 5326
		this._lastCode = codeB;                                                                                           // 5327
                                                                                                                    // 5328
		while (true) {                                                                                                    // 5329
			// if a,b is inside the clip window (trivial accept)                                                             // 5330
			if (!(codeA | codeB)) {                                                                                          // 5331
				return [a, b];                                                                                                  // 5332
			// if a,b is outside the clip window (trivial reject)                                                            // 5333
			} else if (codeA & codeB) {                                                                                      // 5334
				return false;                                                                                                   // 5335
			// other cases                                                                                                   // 5336
			} else {                                                                                                         // 5337
				codeOut = codeA || codeB;                                                                                       // 5338
				p = this._getEdgeIntersection(a, b, codeOut, bounds);                                                           // 5339
				newCode = this._getBitCode(p, bounds);                                                                          // 5340
                                                                                                                    // 5341
				if (codeOut === codeA) {                                                                                        // 5342
					a = p;                                                                                                         // 5343
					codeA = newCode;                                                                                               // 5344
				} else {                                                                                                        // 5345
					b = p;                                                                                                         // 5346
					codeB = newCode;                                                                                               // 5347
				}                                                                                                               // 5348
			}                                                                                                                // 5349
		}                                                                                                                 // 5350
	},                                                                                                                 // 5351
                                                                                                                    // 5352
	_getEdgeIntersection: function (a, b, code, bounds) {                                                              // 5353
		var dx = b.x - a.x,                                                                                               // 5354
		    dy = b.y - a.y,                                                                                               // 5355
		    min = bounds.min,                                                                                             // 5356
		    max = bounds.max;                                                                                             // 5357
                                                                                                                    // 5358
		if (code & 8) { // top                                                                                            // 5359
			return new L.Point(a.x + dx * (max.y - a.y) / dy, max.y);                                                        // 5360
		} else if (code & 4) { // bottom                                                                                  // 5361
			return new L.Point(a.x + dx * (min.y - a.y) / dy, min.y);                                                        // 5362
		} else if (code & 2) { // right                                                                                   // 5363
			return new L.Point(max.x, a.y + dy * (max.x - a.x) / dx);                                                        // 5364
		} else if (code & 1) { // left                                                                                    // 5365
			return new L.Point(min.x, a.y + dy * (min.x - a.x) / dx);                                                        // 5366
		}                                                                                                                 // 5367
	},                                                                                                                 // 5368
                                                                                                                    // 5369
	_getBitCode: function (/*Point*/ p, bounds) {                                                                      // 5370
		var code = 0;                                                                                                     // 5371
                                                                                                                    // 5372
		if (p.x < bounds.min.x) { // left                                                                                 // 5373
			code |= 1;                                                                                                       // 5374
		} else if (p.x > bounds.max.x) { // right                                                                         // 5375
			code |= 2;                                                                                                       // 5376
		}                                                                                                                 // 5377
		if (p.y < bounds.min.y) { // bottom                                                                               // 5378
			code |= 4;                                                                                                       // 5379
		} else if (p.y > bounds.max.y) { // top                                                                           // 5380
			code |= 8;                                                                                                       // 5381
		}                                                                                                                 // 5382
                                                                                                                    // 5383
		return code;                                                                                                      // 5384
	},                                                                                                                 // 5385
                                                                                                                    // 5386
	// square distance (to avoid unnecessary Math.sqrt calls)                                                          // 5387
	_sqDist: function (p1, p2) {                                                                                       // 5388
		var dx = p2.x - p1.x,                                                                                             // 5389
		    dy = p2.y - p1.y;                                                                                             // 5390
		return dx * dx + dy * dy;                                                                                         // 5391
	},                                                                                                                 // 5392
                                                                                                                    // 5393
	// return closest point on segment or distance to that point                                                       // 5394
	_sqClosestPointOnSegment: function (p, p1, p2, sqDist) {                                                           // 5395
		var x = p1.x,                                                                                                     // 5396
		    y = p1.y,                                                                                                     // 5397
		    dx = p2.x - x,                                                                                                // 5398
		    dy = p2.y - y,                                                                                                // 5399
		    dot = dx * dx + dy * dy,                                                                                      // 5400
		    t;                                                                                                            // 5401
                                                                                                                    // 5402
		if (dot > 0) {                                                                                                    // 5403
			t = ((p.x - x) * dx + (p.y - y) * dy) / dot;                                                                     // 5404
                                                                                                                    // 5405
			if (t > 1) {                                                                                                     // 5406
				x = p2.x;                                                                                                       // 5407
				y = p2.y;                                                                                                       // 5408
			} else if (t > 0) {                                                                                              // 5409
				x += dx * t;                                                                                                    // 5410
				y += dy * t;                                                                                                    // 5411
			}                                                                                                                // 5412
		}                                                                                                                 // 5413
                                                                                                                    // 5414
		dx = p.x - x;                                                                                                     // 5415
		dy = p.y - y;                                                                                                     // 5416
                                                                                                                    // 5417
		return sqDist ? dx * dx + dy * dy : new L.Point(x, y);                                                            // 5418
	}                                                                                                                  // 5419
};                                                                                                                  // 5420
                                                                                                                    // 5421
                                                                                                                    // 5422
/*                                                                                                                  // 5423
 * L.Polyline is used to display polylines on a map.                                                                // 5424
 */                                                                                                                 // 5425
                                                                                                                    // 5426
L.Polyline = L.Path.extend({                                                                                        // 5427
	initialize: function (latlngs, options) {                                                                          // 5428
		L.Path.prototype.initialize.call(this, options);                                                                  // 5429
                                                                                                                    // 5430
		this._latlngs = this._convertLatLngs(latlngs);                                                                    // 5431
	},                                                                                                                 // 5432
                                                                                                                    // 5433
	options: {                                                                                                         // 5434
		// how much to simplify the polyline on each zoom level                                                           // 5435
		// more = better performance and smoother look, less = more accurate                                              // 5436
		smoothFactor: 1.0,                                                                                                // 5437
		noClip: false                                                                                                     // 5438
	},                                                                                                                 // 5439
                                                                                                                    // 5440
	projectLatlngs: function () {                                                                                      // 5441
		this._originalPoints = [];                                                                                        // 5442
                                                                                                                    // 5443
		for (var i = 0, len = this._latlngs.length; i < len; i++) {                                                       // 5444
			this._originalPoints[i] = this._map.latLngToLayerPoint(this._latlngs[i]);                                        // 5445
		}                                                                                                                 // 5446
	},                                                                                                                 // 5447
                                                                                                                    // 5448
	getPathString: function () {                                                                                       // 5449
		for (var i = 0, len = this._parts.length, str = ''; i < len; i++) {                                               // 5450
			str += this._getPathPartStr(this._parts[i]);                                                                     // 5451
		}                                                                                                                 // 5452
		return str;                                                                                                       // 5453
	},                                                                                                                 // 5454
                                                                                                                    // 5455
	getLatLngs: function () {                                                                                          // 5456
		return this._latlngs;                                                                                             // 5457
	},                                                                                                                 // 5458
                                                                                                                    // 5459
	setLatLngs: function (latlngs) {                                                                                   // 5460
		this._latlngs = this._convertLatLngs(latlngs);                                                                    // 5461
		return this.redraw();                                                                                             // 5462
	},                                                                                                                 // 5463
                                                                                                                    // 5464
	addLatLng: function (latlng) {                                                                                     // 5465
		this._latlngs.push(L.latLng(latlng));                                                                             // 5466
		return this.redraw();                                                                                             // 5467
	},                                                                                                                 // 5468
                                                                                                                    // 5469
	spliceLatLngs: function () { // (Number index, Number howMany)                                                     // 5470
		var removed = [].splice.apply(this._latlngs, arguments);                                                          // 5471
		this._convertLatLngs(this._latlngs, true);                                                                        // 5472
		this.redraw();                                                                                                    // 5473
		return removed;                                                                                                   // 5474
	},                                                                                                                 // 5475
                                                                                                                    // 5476
	closestLayerPoint: function (p) {                                                                                  // 5477
		var minDistance = Infinity, parts = this._parts, p1, p2, minPoint = null;                                         // 5478
                                                                                                                    // 5479
		for (var j = 0, jLen = parts.length; j < jLen; j++) {                                                             // 5480
			var points = parts[j];                                                                                           // 5481
			for (var i = 1, len = points.length; i < len; i++) {                                                             // 5482
				p1 = points[i - 1];                                                                                             // 5483
				p2 = points[i];                                                                                                 // 5484
				var sqDist = L.LineUtil._sqClosestPointOnSegment(p, p1, p2, true);                                              // 5485
				if (sqDist < minDistance) {                                                                                     // 5486
					minDistance = sqDist;                                                                                          // 5487
					minPoint = L.LineUtil._sqClosestPointOnSegment(p, p1, p2);                                                     // 5488
				}                                                                                                               // 5489
			}                                                                                                                // 5490
		}                                                                                                                 // 5491
		if (minPoint) {                                                                                                   // 5492
			minPoint.distance = Math.sqrt(minDistance);                                                                      // 5493
		}                                                                                                                 // 5494
		return minPoint;                                                                                                  // 5495
	},                                                                                                                 // 5496
                                                                                                                    // 5497
	getBounds: function () {                                                                                           // 5498
		return new L.LatLngBounds(this.getLatLngs());                                                                     // 5499
	},                                                                                                                 // 5500
                                                                                                                    // 5501
	_convertLatLngs: function (latlngs, overwrite) {                                                                   // 5502
		var i, len, target = overwrite ? latlngs : [];                                                                    // 5503
                                                                                                                    // 5504
		for (i = 0, len = latlngs.length; i < len; i++) {                                                                 // 5505
			if (L.Util.isArray(latlngs[i]) && typeof latlngs[i][0] !== 'number') {                                           // 5506
				return;                                                                                                         // 5507
			}                                                                                                                // 5508
			target[i] = L.latLng(latlngs[i]);                                                                                // 5509
		}                                                                                                                 // 5510
		return target;                                                                                                    // 5511
	},                                                                                                                 // 5512
                                                                                                                    // 5513
	_initEvents: function () {                                                                                         // 5514
		L.Path.prototype._initEvents.call(this);                                                                          // 5515
	},                                                                                                                 // 5516
                                                                                                                    // 5517
	_getPathPartStr: function (points) {                                                                               // 5518
		var round = L.Path.VML;                                                                                           // 5519
                                                                                                                    // 5520
		for (var j = 0, len2 = points.length, str = '', p; j < len2; j++) {                                               // 5521
			p = points[j];                                                                                                   // 5522
			if (round) {                                                                                                     // 5523
				p._round();                                                                                                     // 5524
			}                                                                                                                // 5525
			str += (j ? 'L' : 'M') + p.x + ' ' + p.y;                                                                        // 5526
		}                                                                                                                 // 5527
		return str;                                                                                                       // 5528
	},                                                                                                                 // 5529
                                                                                                                    // 5530
	_clipPoints: function () {                                                                                         // 5531
		var points = this._originalPoints,                                                                                // 5532
		    len = points.length,                                                                                          // 5533
		    i, k, segment;                                                                                                // 5534
                                                                                                                    // 5535
		if (this.options.noClip) {                                                                                        // 5536
			this._parts = [points];                                                                                          // 5537
			return;                                                                                                          // 5538
		}                                                                                                                 // 5539
                                                                                                                    // 5540
		this._parts = [];                                                                                                 // 5541
                                                                                                                    // 5542
		var parts = this._parts,                                                                                          // 5543
		    vp = this._map._pathViewport,                                                                                 // 5544
		    lu = L.LineUtil;                                                                                              // 5545
                                                                                                                    // 5546
		for (i = 0, k = 0; i < len - 1; i++) {                                                                            // 5547
			segment = lu.clipSegment(points[i], points[i + 1], vp, i);                                                       // 5548
			if (!segment) {                                                                                                  // 5549
				continue;                                                                                                       // 5550
			}                                                                                                                // 5551
                                                                                                                    // 5552
			parts[k] = parts[k] || [];                                                                                       // 5553
			parts[k].push(segment[0]);                                                                                       // 5554
                                                                                                                    // 5555
			// if segment goes out of screen, or it's the last one, it's the end of the line part                            // 5556
			if ((segment[1] !== points[i + 1]) || (i === len - 2)) {                                                         // 5557
				parts[k].push(segment[1]);                                                                                      // 5558
				k++;                                                                                                            // 5559
			}                                                                                                                // 5560
		}                                                                                                                 // 5561
	},                                                                                                                 // 5562
                                                                                                                    // 5563
	// simplify each clipped part of the polyline                                                                      // 5564
	_simplifyPoints: function () {                                                                                     // 5565
		var parts = this._parts,                                                                                          // 5566
		    lu = L.LineUtil;                                                                                              // 5567
                                                                                                                    // 5568
		for (var i = 0, len = parts.length; i < len; i++) {                                                               // 5569
			parts[i] = lu.simplify(parts[i], this.options.smoothFactor);                                                     // 5570
		}                                                                                                                 // 5571
	},                                                                                                                 // 5572
                                                                                                                    // 5573
	_updatePath: function () {                                                                                         // 5574
		if (!this._map) { return; }                                                                                       // 5575
                                                                                                                    // 5576
		this._clipPoints();                                                                                               // 5577
		this._simplifyPoints();                                                                                           // 5578
                                                                                                                    // 5579
		L.Path.prototype._updatePath.call(this);                                                                          // 5580
	}                                                                                                                  // 5581
});                                                                                                                 // 5582
                                                                                                                    // 5583
L.polyline = function (latlngs, options) {                                                                          // 5584
	return new L.Polyline(latlngs, options);                                                                           // 5585
};                                                                                                                  // 5586
                                                                                                                    // 5587
                                                                                                                    // 5588
/*                                                                                                                  // 5589
 * L.PolyUtil contains utility functions for polygons (clipping, etc.).                                             // 5590
 */                                                                                                                 // 5591
                                                                                                                    // 5592
/*jshint bitwise:false */ // allow bitwise operations here                                                          // 5593
                                                                                                                    // 5594
L.PolyUtil = {};                                                                                                    // 5595
                                                                                                                    // 5596
/*                                                                                                                  // 5597
 * Sutherland-Hodgeman polygon clipping algorithm.                                                                  // 5598
 * Used to avoid rendering parts of a polygon that are not currently visible.                                       // 5599
 */                                                                                                                 // 5600
L.PolyUtil.clipPolygon = function (points, bounds) {                                                                // 5601
	var clippedPoints,                                                                                                 // 5602
	    edges = [1, 4, 2, 8],                                                                                          // 5603
	    i, j, k,                                                                                                       // 5604
	    a, b,                                                                                                          // 5605
	    len, edge, p,                                                                                                  // 5606
	    lu = L.LineUtil;                                                                                               // 5607
                                                                                                                    // 5608
	for (i = 0, len = points.length; i < len; i++) {                                                                   // 5609
		points[i]._code = lu._getBitCode(points[i], bounds);                                                              // 5610
	}                                                                                                                  // 5611
                                                                                                                    // 5612
	// for each edge (left, bottom, right, top)                                                                        // 5613
	for (k = 0; k < 4; k++) {                                                                                          // 5614
		edge = edges[k];                                                                                                  // 5615
		clippedPoints = [];                                                                                               // 5616
                                                                                                                    // 5617
		for (i = 0, len = points.length, j = len - 1; i < len; j = i++) {                                                 // 5618
			a = points[i];                                                                                                   // 5619
			b = points[j];                                                                                                   // 5620
                                                                                                                    // 5621
			// if a is inside the clip window                                                                                // 5622
			if (!(a._code & edge)) {                                                                                         // 5623
				// if b is outside the clip window (a->b goes out of screen)                                                    // 5624
				if (b._code & edge) {                                                                                           // 5625
					p = lu._getEdgeIntersection(b, a, edge, bounds);                                                               // 5626
					p._code = lu._getBitCode(p, bounds);                                                                           // 5627
					clippedPoints.push(p);                                                                                         // 5628
				}                                                                                                               // 5629
				clippedPoints.push(a);                                                                                          // 5630
                                                                                                                    // 5631
			// else if b is inside the clip window (a->b enters the screen)                                                  // 5632
			} else if (!(b._code & edge)) {                                                                                  // 5633
				p = lu._getEdgeIntersection(b, a, edge, bounds);                                                                // 5634
				p._code = lu._getBitCode(p, bounds);                                                                            // 5635
				clippedPoints.push(p);                                                                                          // 5636
			}                                                                                                                // 5637
		}                                                                                                                 // 5638
		points = clippedPoints;                                                                                           // 5639
	}                                                                                                                  // 5640
                                                                                                                    // 5641
	return points;                                                                                                     // 5642
};                                                                                                                  // 5643
                                                                                                                    // 5644
                                                                                                                    // 5645
/*                                                                                                                  // 5646
 * L.Polygon is used to display polygons on a map.                                                                  // 5647
 */                                                                                                                 // 5648
                                                                                                                    // 5649
L.Polygon = L.Polyline.extend({                                                                                     // 5650
	options: {                                                                                                         // 5651
		fill: true                                                                                                        // 5652
	},                                                                                                                 // 5653
                                                                                                                    // 5654
	initialize: function (latlngs, options) {                                                                          // 5655
		L.Polyline.prototype.initialize.call(this, latlngs, options);                                                     // 5656
		this._initWithHoles(latlngs);                                                                                     // 5657
	},                                                                                                                 // 5658
                                                                                                                    // 5659
	_initWithHoles: function (latlngs) {                                                                               // 5660
		var i, len, hole;                                                                                                 // 5661
		if (latlngs && L.Util.isArray(latlngs[0]) && (typeof latlngs[0][0] !== 'number')) {                               // 5662
			this._latlngs = this._convertLatLngs(latlngs[0]);                                                                // 5663
			this._holes = latlngs.slice(1);                                                                                  // 5664
                                                                                                                    // 5665
			for (i = 0, len = this._holes.length; i < len; i++) {                                                            // 5666
				hole = this._holes[i] = this._convertLatLngs(this._holes[i]);                                                   // 5667
				if (hole[0].equals(hole[hole.length - 1])) {                                                                    // 5668
					hole.pop();                                                                                                    // 5669
				}                                                                                                               // 5670
			}                                                                                                                // 5671
		}                                                                                                                 // 5672
                                                                                                                    // 5673
		// filter out last point if its equal to the first one                                                            // 5674
		latlngs = this._latlngs;                                                                                          // 5675
                                                                                                                    // 5676
		if (latlngs.length >= 2 && latlngs[0].equals(latlngs[latlngs.length - 1])) {                                      // 5677
			latlngs.pop();                                                                                                   // 5678
		}                                                                                                                 // 5679
	},                                                                                                                 // 5680
                                                                                                                    // 5681
	projectLatlngs: function () {                                                                                      // 5682
		L.Polyline.prototype.projectLatlngs.call(this);                                                                   // 5683
                                                                                                                    // 5684
		// project polygon holes points                                                                                   // 5685
		// TODO move this logic to Polyline to get rid of duplication                                                     // 5686
		this._holePoints = [];                                                                                            // 5687
                                                                                                                    // 5688
		if (!this._holes) { return; }                                                                                     // 5689
                                                                                                                    // 5690
		var i, j, len, len2;                                                                                              // 5691
                                                                                                                    // 5692
		for (i = 0, len = this._holes.length; i < len; i++) {                                                             // 5693
			this._holePoints[i] = [];                                                                                        // 5694
                                                                                                                    // 5695
			for (j = 0, len2 = this._holes[i].length; j < len2; j++) {                                                       // 5696
				this._holePoints[i][j] = this._map.latLngToLayerPoint(this._holes[i][j]);                                       // 5697
			}                                                                                                                // 5698
		}                                                                                                                 // 5699
	},                                                                                                                 // 5700
                                                                                                                    // 5701
	setLatLngs: function (latlngs) {                                                                                   // 5702
		if (latlngs && L.Util.isArray(latlngs[0]) && (typeof latlngs[0][0] !== 'number')) {                               // 5703
			this._initWithHoles(latlngs);                                                                                    // 5704
			return this.redraw();                                                                                            // 5705
		} else {                                                                                                          // 5706
			return L.Polyline.prototype.setLatLngs.call(this, latlngs);                                                      // 5707
		}                                                                                                                 // 5708
	},                                                                                                                 // 5709
                                                                                                                    // 5710
	_clipPoints: function () {                                                                                         // 5711
		var points = this._originalPoints,                                                                                // 5712
		    newParts = [];                                                                                                // 5713
                                                                                                                    // 5714
		this._parts = [points].concat(this._holePoints);                                                                  // 5715
                                                                                                                    // 5716
		if (this.options.noClip) { return; }                                                                              // 5717
                                                                                                                    // 5718
		for (var i = 0, len = this._parts.length; i < len; i++) {                                                         // 5719
			var clipped = L.PolyUtil.clipPolygon(this._parts[i], this._map._pathViewport);                                   // 5720
			if (clipped.length) {                                                                                            // 5721
				newParts.push(clipped);                                                                                         // 5722
			}                                                                                                                // 5723
		}                                                                                                                 // 5724
                                                                                                                    // 5725
		this._parts = newParts;                                                                                           // 5726
	},                                                                                                                 // 5727
                                                                                                                    // 5728
	_getPathPartStr: function (points) {                                                                               // 5729
		var str = L.Polyline.prototype._getPathPartStr.call(this, points);                                                // 5730
		return str + (L.Browser.svg ? 'z' : 'x');                                                                         // 5731
	}                                                                                                                  // 5732
});                                                                                                                 // 5733
                                                                                                                    // 5734
L.polygon = function (latlngs, options) {                                                                           // 5735
	return new L.Polygon(latlngs, options);                                                                            // 5736
};                                                                                                                  // 5737
                                                                                                                    // 5738
                                                                                                                    // 5739
/*                                                                                                                  // 5740
 * Contains L.MultiPolyline and L.MultiPolygon layers.                                                              // 5741
 */                                                                                                                 // 5742
                                                                                                                    // 5743
(function () {                                                                                                      // 5744
	function createMulti(Klass) {                                                                                      // 5745
                                                                                                                    // 5746
		return L.FeatureGroup.extend({                                                                                    // 5747
                                                                                                                    // 5748
			initialize: function (latlngs, options) {                                                                        // 5749
				this._layers = {};                                                                                              // 5750
				this._options = options;                                                                                        // 5751
				this.setLatLngs(latlngs);                                                                                       // 5752
			},                                                                                                               // 5753
                                                                                                                    // 5754
			setLatLngs: function (latlngs) {                                                                                 // 5755
				var i = 0,                                                                                                      // 5756
				    len = latlngs.length;                                                                                       // 5757
                                                                                                                    // 5758
				this.eachLayer(function (layer) {                                                                               // 5759
					if (i < len) {                                                                                                 // 5760
						layer.setLatLngs(latlngs[i++]);                                                                               // 5761
					} else {                                                                                                       // 5762
						this.removeLayer(layer);                                                                                      // 5763
					}                                                                                                              // 5764
				}, this);                                                                                                       // 5765
                                                                                                                    // 5766
				while (i < len) {                                                                                               // 5767
					this.addLayer(new Klass(latlngs[i++], this._options));                                                         // 5768
				}                                                                                                               // 5769
                                                                                                                    // 5770
				return this;                                                                                                    // 5771
			},                                                                                                               // 5772
                                                                                                                    // 5773
			getLatLngs: function () {                                                                                        // 5774
				var latlngs = [];                                                                                               // 5775
                                                                                                                    // 5776
				this.eachLayer(function (layer) {                                                                               // 5777
					latlngs.push(layer.getLatLngs());                                                                              // 5778
				});                                                                                                             // 5779
                                                                                                                    // 5780
				return latlngs;                                                                                                 // 5781
			}                                                                                                                // 5782
		});                                                                                                               // 5783
	}                                                                                                                  // 5784
                                                                                                                    // 5785
	L.MultiPolyline = createMulti(L.Polyline);                                                                         // 5786
	L.MultiPolygon = createMulti(L.Polygon);                                                                           // 5787
                                                                                                                    // 5788
	L.multiPolyline = function (latlngs, options) {                                                                    // 5789
		return new L.MultiPolyline(latlngs, options);                                                                     // 5790
	};                                                                                                                 // 5791
                                                                                                                    // 5792
	L.multiPolygon = function (latlngs, options) {                                                                     // 5793
		return new L.MultiPolygon(latlngs, options);                                                                      // 5794
	};                                                                                                                 // 5795
}());                                                                                                               // 5796
                                                                                                                    // 5797
                                                                                                                    // 5798
/*                                                                                                                  // 5799
 * L.Rectangle extends Polygon and creates a rectangle when passed a LatLngBounds object.                           // 5800
 */                                                                                                                 // 5801
                                                                                                                    // 5802
L.Rectangle = L.Polygon.extend({                                                                                    // 5803
	initialize: function (latLngBounds, options) {                                                                     // 5804
		L.Polygon.prototype.initialize.call(this, this._boundsToLatLngs(latLngBounds), options);                          // 5805
	},                                                                                                                 // 5806
                                                                                                                    // 5807
	setBounds: function (latLngBounds) {                                                                               // 5808
		this.setLatLngs(this._boundsToLatLngs(latLngBounds));                                                             // 5809
	},                                                                                                                 // 5810
                                                                                                                    // 5811
	_boundsToLatLngs: function (latLngBounds) {                                                                        // 5812
		latLngBounds = L.latLngBounds(latLngBounds);                                                                      // 5813
		return [                                                                                                          // 5814
			latLngBounds.getSouthWest(),                                                                                     // 5815
			latLngBounds.getNorthWest(),                                                                                     // 5816
			latLngBounds.getNorthEast(),                                                                                     // 5817
			latLngBounds.getSouthEast()                                                                                      // 5818
		];                                                                                                                // 5819
	}                                                                                                                  // 5820
});                                                                                                                 // 5821
                                                                                                                    // 5822
L.rectangle = function (latLngBounds, options) {                                                                    // 5823
	return new L.Rectangle(latLngBounds, options);                                                                     // 5824
};                                                                                                                  // 5825
                                                                                                                    // 5826
                                                                                                                    // 5827
/*                                                                                                                  // 5828
 * L.Circle is a circle overlay (with a certain radius in meters).                                                  // 5829
 */                                                                                                                 // 5830
                                                                                                                    // 5831
L.Circle = L.Path.extend({                                                                                          // 5832
	initialize: function (latlng, radius, options) {                                                                   // 5833
		L.Path.prototype.initialize.call(this, options);                                                                  // 5834
                                                                                                                    // 5835
		this._latlng = L.latLng(latlng);                                                                                  // 5836
		this._mRadius = radius;                                                                                           // 5837
	},                                                                                                                 // 5838
                                                                                                                    // 5839
	options: {                                                                                                         // 5840
		fill: true                                                                                                        // 5841
	},                                                                                                                 // 5842
                                                                                                                    // 5843
	setLatLng: function (latlng) {                                                                                     // 5844
		this._latlng = L.latLng(latlng);                                                                                  // 5845
		return this.redraw();                                                                                             // 5846
	},                                                                                                                 // 5847
                                                                                                                    // 5848
	setRadius: function (radius) {                                                                                     // 5849
		this._mRadius = radius;                                                                                           // 5850
		return this.redraw();                                                                                             // 5851
	},                                                                                                                 // 5852
                                                                                                                    // 5853
	projectLatlngs: function () {                                                                                      // 5854
		var lngRadius = this._getLngRadius(),                                                                             // 5855
		    latlng = this._latlng,                                                                                        // 5856
		    pointLeft = this._map.latLngToLayerPoint([latlng.lat, latlng.lng - lngRadius]);                               // 5857
                                                                                                                    // 5858
		this._point = this._map.latLngToLayerPoint(latlng);                                                               // 5859
		this._radius = Math.max(this._point.x - pointLeft.x, 1);                                                          // 5860
	},                                                                                                                 // 5861
                                                                                                                    // 5862
	getBounds: function () {                                                                                           // 5863
		var lngRadius = this._getLngRadius(),                                                                             // 5864
		    latRadius = (this._mRadius / 40075017) * 360,                                                                 // 5865
		    latlng = this._latlng;                                                                                        // 5866
                                                                                                                    // 5867
		return new L.LatLngBounds(                                                                                        // 5868
		        [latlng.lat - latRadius, latlng.lng - lngRadius],                                                         // 5869
		        [latlng.lat + latRadius, latlng.lng + lngRadius]);                                                        // 5870
	},                                                                                                                 // 5871
                                                                                                                    // 5872
	getLatLng: function () {                                                                                           // 5873
		return this._latlng;                                                                                              // 5874
	},                                                                                                                 // 5875
                                                                                                                    // 5876
	getPathString: function () {                                                                                       // 5877
		var p = this._point,                                                                                              // 5878
		    r = this._radius;                                                                                             // 5879
                                                                                                                    // 5880
		if (this._checkIfEmpty()) {                                                                                       // 5881
			return '';                                                                                                       // 5882
		}                                                                                                                 // 5883
                                                                                                                    // 5884
		if (L.Browser.svg) {                                                                                              // 5885
			return 'M' + p.x + ',' + (p.y - r) +                                                                             // 5886
			       'A' + r + ',' + r + ',0,1,1,' +                                                                           // 5887
			       (p.x - 0.1) + ',' + (p.y - r) + ' z';                                                                     // 5888
		} else {                                                                                                          // 5889
			p._round();                                                                                                      // 5890
			r = Math.round(r);                                                                                               // 5891
			return 'AL ' + p.x + ',' + p.y + ' ' + r + ',' + r + ' 0,' + (65535 * 360);                                      // 5892
		}                                                                                                                 // 5893
	},                                                                                                                 // 5894
                                                                                                                    // 5895
	getRadius: function () {                                                                                           // 5896
		return this._mRadius;                                                                                             // 5897
	},                                                                                                                 // 5898
                                                                                                                    // 5899
	// TODO Earth hardcoded, move into projection code!                                                                // 5900
                                                                                                                    // 5901
	_getLatRadius: function () {                                                                                       // 5902
		return (this._mRadius / 40075017) * 360;                                                                          // 5903
	},                                                                                                                 // 5904
                                                                                                                    // 5905
	_getLngRadius: function () {                                                                                       // 5906
		return this._getLatRadius() / Math.cos(L.LatLng.DEG_TO_RAD * this._latlng.lat);                                   // 5907
	},                                                                                                                 // 5908
                                                                                                                    // 5909
	_checkIfEmpty: function () {                                                                                       // 5910
		if (!this._map) {                                                                                                 // 5911
			return false;                                                                                                    // 5912
		}                                                                                                                 // 5913
		var vp = this._map._pathViewport,                                                                                 // 5914
		    r = this._radius,                                                                                             // 5915
		    p = this._point;                                                                                              // 5916
                                                                                                                    // 5917
		return p.x - r > vp.max.x || p.y - r > vp.max.y ||                                                                // 5918
		       p.x + r < vp.min.x || p.y + r < vp.min.y;                                                                  // 5919
	}                                                                                                                  // 5920
});                                                                                                                 // 5921
                                                                                                                    // 5922
L.circle = function (latlng, radius, options) {                                                                     // 5923
	return new L.Circle(latlng, radius, options);                                                                      // 5924
};                                                                                                                  // 5925
                                                                                                                    // 5926
                                                                                                                    // 5927
/*                                                                                                                  // 5928
 * L.CircleMarker is a circle overlay with a permanent pixel radius.                                                // 5929
 */                                                                                                                 // 5930
                                                                                                                    // 5931
L.CircleMarker = L.Circle.extend({                                                                                  // 5932
	options: {                                                                                                         // 5933
		radius: 10,                                                                                                       // 5934
		weight: 2                                                                                                         // 5935
	},                                                                                                                 // 5936
                                                                                                                    // 5937
	initialize: function (latlng, options) {                                                                           // 5938
		L.Circle.prototype.initialize.call(this, latlng, null, options);                                                  // 5939
		this._radius = this.options.radius;                                                                               // 5940
	},                                                                                                                 // 5941
                                                                                                                    // 5942
	projectLatlngs: function () {                                                                                      // 5943
		this._point = this._map.latLngToLayerPoint(this._latlng);                                                         // 5944
	},                                                                                                                 // 5945
                                                                                                                    // 5946
	_updateStyle : function () {                                                                                       // 5947
		L.Circle.prototype._updateStyle.call(this);                                                                       // 5948
		this.setRadius(this.options.radius);                                                                              // 5949
	},                                                                                                                 // 5950
                                                                                                                    // 5951
	setLatLng: function (latlng) {                                                                                     // 5952
		L.Circle.prototype.setLatLng.call(this, latlng);                                                                  // 5953
		if (this._popup && this._popup._isOpen) {                                                                         // 5954
			this._popup.setLatLng(latlng);                                                                                   // 5955
		}                                                                                                                 // 5956
		return this;                                                                                                      // 5957
	},                                                                                                                 // 5958
                                                                                                                    // 5959
	setRadius: function (radius) {                                                                                     // 5960
		this.options.radius = this._radius = radius;                                                                      // 5961
		return this.redraw();                                                                                             // 5962
	},                                                                                                                 // 5963
                                                                                                                    // 5964
	getRadius: function () {                                                                                           // 5965
		return this._radius;                                                                                              // 5966
	}                                                                                                                  // 5967
});                                                                                                                 // 5968
                                                                                                                    // 5969
L.circleMarker = function (latlng, options) {                                                                       // 5970
	return new L.CircleMarker(latlng, options);                                                                        // 5971
};                                                                                                                  // 5972
                                                                                                                    // 5973
                                                                                                                    // 5974
/*                                                                                                                  // 5975
 * Extends L.Polyline to be able to manually detect clicks on Canvas-rendered polylines.                            // 5976
 */                                                                                                                 // 5977
                                                                                                                    // 5978
L.Polyline.include(!L.Path.CANVAS ? {} : {                                                                          // 5979
	_containsPoint: function (p, closed) {                                                                             // 5980
		var i, j, k, len, len2, dist, part,                                                                               // 5981
		    w = this.options.weight / 2;                                                                                  // 5982
                                                                                                                    // 5983
		if (L.Browser.touch) {                                                                                            // 5984
			w += 10; // polyline click tolerance on touch devices                                                            // 5985
		}                                                                                                                 // 5986
                                                                                                                    // 5987
		for (i = 0, len = this._parts.length; i < len; i++) {                                                             // 5988
			part = this._parts[i];                                                                                           // 5989
			for (j = 0, len2 = part.length, k = len2 - 1; j < len2; k = j++) {                                               // 5990
				if (!closed && (j === 0)) {                                                                                     // 5991
					continue;                                                                                                      // 5992
				}                                                                                                               // 5993
                                                                                                                    // 5994
				dist = L.LineUtil.pointToSegmentDistance(p, part[k], part[j]);                                                  // 5995
                                                                                                                    // 5996
				if (dist <= w) {                                                                                                // 5997
					return true;                                                                                                   // 5998
				}                                                                                                               // 5999
			}                                                                                                                // 6000
		}                                                                                                                 // 6001
		return false;                                                                                                     // 6002
	}                                                                                                                  // 6003
});                                                                                                                 // 6004
                                                                                                                    // 6005
                                                                                                                    // 6006
/*                                                                                                                  // 6007
 * Extends L.Polygon to be able to manually detect clicks on Canvas-rendered polygons.                              // 6008
 */                                                                                                                 // 6009
                                                                                                                    // 6010
L.Polygon.include(!L.Path.CANVAS ? {} : {                                                                           // 6011
	_containsPoint: function (p) {                                                                                     // 6012
		var inside = false,                                                                                               // 6013
		    part, p1, p2,                                                                                                 // 6014
		    i, j, k,                                                                                                      // 6015
		    len, len2;                                                                                                    // 6016
                                                                                                                    // 6017
		// TODO optimization: check if within bounds first                                                                // 6018
                                                                                                                    // 6019
		if (L.Polyline.prototype._containsPoint.call(this, p, true)) {                                                    // 6020
			// click on polygon border                                                                                       // 6021
			return true;                                                                                                     // 6022
		}                                                                                                                 // 6023
                                                                                                                    // 6024
		// ray casting algorithm for detecting if point is in polygon                                                     // 6025
                                                                                                                    // 6026
		for (i = 0, len = this._parts.length; i < len; i++) {                                                             // 6027
			part = this._parts[i];                                                                                           // 6028
                                                                                                                    // 6029
			for (j = 0, len2 = part.length, k = len2 - 1; j < len2; k = j++) {                                               // 6030
				p1 = part[j];                                                                                                   // 6031
				p2 = part[k];                                                                                                   // 6032
                                                                                                                    // 6033
				if (((p1.y > p.y) !== (p2.y > p.y)) &&                                                                          // 6034
						(p.x < (p2.x - p1.x) * (p.y - p1.y) / (p2.y - p1.y) + p1.x)) {                                                // 6035
					inside = !inside;                                                                                              // 6036
				}                                                                                                               // 6037
			}                                                                                                                // 6038
		}                                                                                                                 // 6039
                                                                                                                    // 6040
		return inside;                                                                                                    // 6041
	}                                                                                                                  // 6042
});                                                                                                                 // 6043
                                                                                                                    // 6044
                                                                                                                    // 6045
/*                                                                                                                  // 6046
 * Extends L.Circle with Canvas-specific code.                                                                      // 6047
 */                                                                                                                 // 6048
                                                                                                                    // 6049
L.Circle.include(!L.Path.CANVAS ? {} : {                                                                            // 6050
	_drawPath: function () {                                                                                           // 6051
		var p = this._point;                                                                                              // 6052
		this._ctx.beginPath();                                                                                            // 6053
		this._ctx.arc(p.x, p.y, this._radius, 0, Math.PI * 2, false);                                                     // 6054
	},                                                                                                                 // 6055
                                                                                                                    // 6056
	_containsPoint: function (p) {                                                                                     // 6057
		var center = this._point,                                                                                         // 6058
		    w2 = this.options.stroke ? this.options.weight / 2 : 0;                                                       // 6059
                                                                                                                    // 6060
		return (p.distanceTo(center) <= this._radius + w2);                                                               // 6061
	}                                                                                                                  // 6062
});                                                                                                                 // 6063
                                                                                                                    // 6064
                                                                                                                    // 6065
/*                                                                                                                  // 6066
 * CircleMarker canvas specific drawing parts.                                                                      // 6067
 */                                                                                                                 // 6068
                                                                                                                    // 6069
L.CircleMarker.include(!L.Path.CANVAS ? {} : {                                                                      // 6070
	_updateStyle: function () {                                                                                        // 6071
		L.Path.prototype._updateStyle.call(this);                                                                         // 6072
	}                                                                                                                  // 6073
});                                                                                                                 // 6074
                                                                                                                    // 6075
                                                                                                                    // 6076
/*                                                                                                                  // 6077
 * L.GeoJSON turns any GeoJSON data into a Leaflet layer.                                                           // 6078
 */                                                                                                                 // 6079
                                                                                                                    // 6080
L.GeoJSON = L.FeatureGroup.extend({                                                                                 // 6081
                                                                                                                    // 6082
	initialize: function (geojson, options) {                                                                          // 6083
		L.setOptions(this, options);                                                                                      // 6084
                                                                                                                    // 6085
		this._layers = {};                                                                                                // 6086
                                                                                                                    // 6087
		if (geojson) {                                                                                                    // 6088
			this.addData(geojson);                                                                                           // 6089
		}                                                                                                                 // 6090
	},                                                                                                                 // 6091
                                                                                                                    // 6092
	addData: function (geojson) {                                                                                      // 6093
		var features = L.Util.isArray(geojson) ? geojson : geojson.features,                                              // 6094
		    i, len, feature;                                                                                              // 6095
                                                                                                                    // 6096
		if (features) {                                                                                                   // 6097
			for (i = 0, len = features.length; i < len; i++) {                                                               // 6098
				// Only add this if geometry or geometries are set and not null                                                 // 6099
				feature = features[i];                                                                                          // 6100
				if (feature.geometries || feature.geometry || feature.features || feature.coordinates) {                        // 6101
					this.addData(features[i]);                                                                                     // 6102
				}                                                                                                               // 6103
			}                                                                                                                // 6104
			return this;                                                                                                     // 6105
		}                                                                                                                 // 6106
                                                                                                                    // 6107
		var options = this.options;                                                                                       // 6108
                                                                                                                    // 6109
		if (options.filter && !options.filter(geojson)) { return; }                                                       // 6110
                                                                                                                    // 6111
		var layer = L.GeoJSON.geometryToLayer(geojson, options.pointToLayer, options.coordsToLatLng, options);            // 6112
		layer.feature = L.GeoJSON.asFeature(geojson);                                                                     // 6113
                                                                                                                    // 6114
		layer.defaultOptions = layer.options;                                                                             // 6115
		this.resetStyle(layer);                                                                                           // 6116
                                                                                                                    // 6117
		if (options.onEachFeature) {                                                                                      // 6118
			options.onEachFeature(geojson, layer);                                                                           // 6119
		}                                                                                                                 // 6120
                                                                                                                    // 6121
		return this.addLayer(layer);                                                                                      // 6122
	},                                                                                                                 // 6123
                                                                                                                    // 6124
	resetStyle: function (layer) {                                                                                     // 6125
		var style = this.options.style;                                                                                   // 6126
		if (style) {                                                                                                      // 6127
			// reset any custom styles                                                                                       // 6128
			L.Util.extend(layer.options, layer.defaultOptions);                                                              // 6129
                                                                                                                    // 6130
			this._setLayerStyle(layer, style);                                                                               // 6131
		}                                                                                                                 // 6132
	},                                                                                                                 // 6133
                                                                                                                    // 6134
	setStyle: function (style) {                                                                                       // 6135
		this.eachLayer(function (layer) {                                                                                 // 6136
			this._setLayerStyle(layer, style);                                                                               // 6137
		}, this);                                                                                                         // 6138
	},                                                                                                                 // 6139
                                                                                                                    // 6140
	_setLayerStyle: function (layer, style) {                                                                          // 6141
		if (typeof style === 'function') {                                                                                // 6142
			style = style(layer.feature);                                                                                    // 6143
		}                                                                                                                 // 6144
		if (layer.setStyle) {                                                                                             // 6145
			layer.setStyle(style);                                                                                           // 6146
		}                                                                                                                 // 6147
	}                                                                                                                  // 6148
});                                                                                                                 // 6149
                                                                                                                    // 6150
L.extend(L.GeoJSON, {                                                                                               // 6151
	geometryToLayer: function (geojson, pointToLayer, coordsToLatLng, vectorOptions) {                                 // 6152
		var geometry = geojson.type === 'Feature' ? geojson.geometry : geojson,                                           // 6153
		    coords = geometry.coordinates,                                                                                // 6154
		    layers = [],                                                                                                  // 6155
		    latlng, latlngs, i, len;                                                                                      // 6156
                                                                                                                    // 6157
		coordsToLatLng = coordsToLatLng || this.coordsToLatLng;                                                           // 6158
                                                                                                                    // 6159
		switch (geometry.type) {                                                                                          // 6160
		case 'Point':                                                                                                     // 6161
			latlng = coordsToLatLng(coords);                                                                                 // 6162
			return pointToLayer ? pointToLayer(geojson, latlng) : new L.Marker(latlng);                                      // 6163
                                                                                                                    // 6164
		case 'MultiPoint':                                                                                                // 6165
			for (i = 0, len = coords.length; i < len; i++) {                                                                 // 6166
				latlng = coordsToLatLng(coords[i]);                                                                             // 6167
				layers.push(pointToLayer ? pointToLayer(geojson, latlng) : new L.Marker(latlng));                               // 6168
			}                                                                                                                // 6169
			return new L.FeatureGroup(layers);                                                                               // 6170
                                                                                                                    // 6171
		case 'LineString':                                                                                                // 6172
			latlngs = this.coordsToLatLngs(coords, 0, coordsToLatLng);                                                       // 6173
			return new L.Polyline(latlngs, vectorOptions);                                                                   // 6174
                                                                                                                    // 6175
		case 'Polygon':                                                                                                   // 6176
			if (coords.length === 2 && !coords[1].length) {                                                                  // 6177
				throw new Error('Invalid GeoJSON object.');                                                                     // 6178
			}                                                                                                                // 6179
			latlngs = this.coordsToLatLngs(coords, 1, coordsToLatLng);                                                       // 6180
			return new L.Polygon(latlngs, vectorOptions);                                                                    // 6181
                                                                                                                    // 6182
		case 'MultiLineString':                                                                                           // 6183
			latlngs = this.coordsToLatLngs(coords, 1, coordsToLatLng);                                                       // 6184
			return new L.MultiPolyline(latlngs, vectorOptions);                                                              // 6185
                                                                                                                    // 6186
		case 'MultiPolygon':                                                                                              // 6187
			latlngs = this.coordsToLatLngs(coords, 2, coordsToLatLng);                                                       // 6188
			return new L.MultiPolygon(latlngs, vectorOptions);                                                               // 6189
                                                                                                                    // 6190
		case 'GeometryCollection':                                                                                        // 6191
			for (i = 0, len = geometry.geometries.length; i < len; i++) {                                                    // 6192
                                                                                                                    // 6193
				layers.push(this.geometryToLayer({                                                                              // 6194
					geometry: geometry.geometries[i],                                                                              // 6195
					type: 'Feature',                                                                                               // 6196
					properties: geojson.properties                                                                                 // 6197
				}, pointToLayer, coordsToLatLng, vectorOptions));                                                               // 6198
			}                                                                                                                // 6199
			return new L.FeatureGroup(layers);                                                                               // 6200
                                                                                                                    // 6201
		default:                                                                                                          // 6202
			throw new Error('Invalid GeoJSON object.');                                                                      // 6203
		}                                                                                                                 // 6204
	},                                                                                                                 // 6205
                                                                                                                    // 6206
	coordsToLatLng: function (coords) { // (Array[, Boolean]) -> LatLng                                                // 6207
		return new L.LatLng(coords[1], coords[0], coords[2]);                                                             // 6208
	},                                                                                                                 // 6209
                                                                                                                    // 6210
	coordsToLatLngs: function (coords, levelsDeep, coordsToLatLng) { // (Array[, Number, Function]) -> Array           // 6211
		var latlng, i, len,                                                                                               // 6212
		    latlngs = [];                                                                                                 // 6213
                                                                                                                    // 6214
		for (i = 0, len = coords.length; i < len; i++) {                                                                  // 6215
			latlng = levelsDeep ?                                                                                            // 6216
			        this.coordsToLatLngs(coords[i], levelsDeep - 1, coordsToLatLng) :                                        // 6217
			        (coordsToLatLng || this.coordsToLatLng)(coords[i]);                                                      // 6218
                                                                                                                    // 6219
			latlngs.push(latlng);                                                                                            // 6220
		}                                                                                                                 // 6221
                                                                                                                    // 6222
		return latlngs;                                                                                                   // 6223
	},                                                                                                                 // 6224
                                                                                                                    // 6225
	latLngToCoords: function (latlng) {                                                                                // 6226
		var coords = [latlng.lng, latlng.lat];                                                                            // 6227
                                                                                                                    // 6228
		if (latlng.alt !== undefined) {                                                                                   // 6229
			coords.push(latlng.alt);                                                                                         // 6230
		}                                                                                                                 // 6231
		return coords;                                                                                                    // 6232
	},                                                                                                                 // 6233
                                                                                                                    // 6234
	latLngsToCoords: function (latLngs) {                                                                              // 6235
		var coords = [];                                                                                                  // 6236
                                                                                                                    // 6237
		for (var i = 0, len = latLngs.length; i < len; i++) {                                                             // 6238
			coords.push(L.GeoJSON.latLngToCoords(latLngs[i]));                                                               // 6239
		}                                                                                                                 // 6240
                                                                                                                    // 6241
		return coords;                                                                                                    // 6242
	},                                                                                                                 // 6243
                                                                                                                    // 6244
	getFeature: function (layer, newGeometry) {                                                                        // 6245
		return layer.feature ? L.extend({}, layer.feature, {geometry: newGeometry}) : L.GeoJSON.asFeature(newGeometry);   // 6246
	},                                                                                                                 // 6247
                                                                                                                    // 6248
	asFeature: function (geoJSON) {                                                                                    // 6249
		if (geoJSON.type === 'Feature') {                                                                                 // 6250
			return geoJSON;                                                                                                  // 6251
		}                                                                                                                 // 6252
                                                                                                                    // 6253
		return {                                                                                                          // 6254
			type: 'Feature',                                                                                                 // 6255
			properties: {},                                                                                                  // 6256
			geometry: geoJSON                                                                                                // 6257
		};                                                                                                                // 6258
	}                                                                                                                  // 6259
});                                                                                                                 // 6260
                                                                                                                    // 6261
var PointToGeoJSON = {                                                                                              // 6262
	toGeoJSON: function () {                                                                                           // 6263
		return L.GeoJSON.getFeature(this, {                                                                               // 6264
			type: 'Point',                                                                                                   // 6265
			coordinates: L.GeoJSON.latLngToCoords(this.getLatLng())                                                          // 6266
		});                                                                                                               // 6267
	}                                                                                                                  // 6268
};                                                                                                                  // 6269
                                                                                                                    // 6270
L.Marker.include(PointToGeoJSON);                                                                                   // 6271
L.Circle.include(PointToGeoJSON);                                                                                   // 6272
L.CircleMarker.include(PointToGeoJSON);                                                                             // 6273
                                                                                                                    // 6274
L.Polyline.include({                                                                                                // 6275
	toGeoJSON: function () {                                                                                           // 6276
		return L.GeoJSON.getFeature(this, {                                                                               // 6277
			type: 'LineString',                                                                                              // 6278
			coordinates: L.GeoJSON.latLngsToCoords(this.getLatLngs())                                                        // 6279
		});                                                                                                               // 6280
	}                                                                                                                  // 6281
});                                                                                                                 // 6282
                                                                                                                    // 6283
L.Polygon.include({                                                                                                 // 6284
	toGeoJSON: function () {                                                                                           // 6285
		var coords = [L.GeoJSON.latLngsToCoords(this.getLatLngs())],                                                      // 6286
		    i, len, hole;                                                                                                 // 6287
                                                                                                                    // 6288
		coords[0].push(coords[0][0]);                                                                                     // 6289
                                                                                                                    // 6290
		if (this._holes) {                                                                                                // 6291
			for (i = 0, len = this._holes.length; i < len; i++) {                                                            // 6292
				hole = L.GeoJSON.latLngsToCoords(this._holes[i]);                                                               // 6293
				hole.push(hole[0]);                                                                                             // 6294
				coords.push(hole);                                                                                              // 6295
			}                                                                                                                // 6296
		}                                                                                                                 // 6297
                                                                                                                    // 6298
		return L.GeoJSON.getFeature(this, {                                                                               // 6299
			type: 'Polygon',                                                                                                 // 6300
			coordinates: coords                                                                                              // 6301
		});                                                                                                               // 6302
	}                                                                                                                  // 6303
});                                                                                                                 // 6304
                                                                                                                    // 6305
(function () {                                                                                                      // 6306
	function multiToGeoJSON(type) {                                                                                    // 6307
		return function () {                                                                                              // 6308
			var coords = [];                                                                                                 // 6309
                                                                                                                    // 6310
			this.eachLayer(function (layer) {                                                                                // 6311
				coords.push(layer.toGeoJSON().geometry.coordinates);                                                            // 6312
			});                                                                                                              // 6313
                                                                                                                    // 6314
			return L.GeoJSON.getFeature(this, {                                                                              // 6315
				type: type,                                                                                                     // 6316
				coordinates: coords                                                                                             // 6317
			});                                                                                                              // 6318
		};                                                                                                                // 6319
	}                                                                                                                  // 6320
                                                                                                                    // 6321
	L.MultiPolyline.include({toGeoJSON: multiToGeoJSON('MultiLineString')});                                           // 6322
	L.MultiPolygon.include({toGeoJSON: multiToGeoJSON('MultiPolygon')});                                               // 6323
                                                                                                                    // 6324
	L.LayerGroup.include({                                                                                             // 6325
		toGeoJSON: function () {                                                                                          // 6326
                                                                                                                    // 6327
			var geometry = this.feature && this.feature.geometry,                                                            // 6328
				jsons = [],                                                                                                     // 6329
				json;                                                                                                           // 6330
                                                                                                                    // 6331
			if (geometry && geometry.type === 'MultiPoint') {                                                                // 6332
				return multiToGeoJSON('MultiPoint').call(this);                                                                 // 6333
			}                                                                                                                // 6334
                                                                                                                    // 6335
			var isGeometryCollection = geometry && geometry.type === 'GeometryCollection';                                   // 6336
                                                                                                                    // 6337
			this.eachLayer(function (layer) {                                                                                // 6338
				if (layer.toGeoJSON) {                                                                                          // 6339
					json = layer.toGeoJSON();                                                                                      // 6340
					jsons.push(isGeometryCollection ? json.geometry : L.GeoJSON.asFeature(json));                                  // 6341
				}                                                                                                               // 6342
			});                                                                                                              // 6343
                                                                                                                    // 6344
			if (isGeometryCollection) {                                                                                      // 6345
				return L.GeoJSON.getFeature(this, {                                                                             // 6346
					geometries: jsons,                                                                                             // 6347
					type: 'GeometryCollection'                                                                                     // 6348
				});                                                                                                             // 6349
			}                                                                                                                // 6350
                                                                                                                    // 6351
			return {                                                                                                         // 6352
				type: 'FeatureCollection',                                                                                      // 6353
				features: jsons                                                                                                 // 6354
			};                                                                                                               // 6355
		}                                                                                                                 // 6356
	});                                                                                                                // 6357
}());                                                                                                               // 6358
                                                                                                                    // 6359
L.geoJson = function (geojson, options) {                                                                           // 6360
	return new L.GeoJSON(geojson, options);                                                                            // 6361
};                                                                                                                  // 6362
                                                                                                                    // 6363
                                                                                                                    // 6364
/*                                                                                                                  // 6365
 * L.DomEvent contains functions for working with DOM events.                                                       // 6366
 */                                                                                                                 // 6367
                                                                                                                    // 6368
L.DomEvent = {                                                                                                      // 6369
	/* inspired by John Resig, Dean Edwards and YUI addEvent implementations */                                        // 6370
	addListener: function (obj, type, fn, context) { // (HTMLElement, String, Function[, Object])                      // 6371
                                                                                                                    // 6372
		var id = L.stamp(fn),                                                                                             // 6373
		    key = '_leaflet_' + type + id,                                                                                // 6374
		    handler, originalHandler, newType;                                                                            // 6375
                                                                                                                    // 6376
		if (obj[key]) { return this; }                                                                                    // 6377
                                                                                                                    // 6378
		handler = function (e) {                                                                                          // 6379
			return fn.call(context || obj, e || L.DomEvent._getEvent());                                                     // 6380
		};                                                                                                                // 6381
                                                                                                                    // 6382
		if (L.Browser.pointer && type.indexOf('touch') === 0) {                                                           // 6383
			return this.addPointerListener(obj, type, handler, id);                                                          // 6384
		}                                                                                                                 // 6385
		if (L.Browser.touch && (type === 'dblclick') && this.addDoubleTapListener) {                                      // 6386
			this.addDoubleTapListener(obj, handler, id);                                                                     // 6387
		}                                                                                                                 // 6388
                                                                                                                    // 6389
		if ('addEventListener' in obj) {                                                                                  // 6390
                                                                                                                    // 6391
			if (type === 'mousewheel') {                                                                                     // 6392
				obj.addEventListener('DOMMouseScroll', handler, false);                                                         // 6393
				obj.addEventListener(type, handler, false);                                                                     // 6394
                                                                                                                    // 6395
			} else if ((type === 'mouseenter') || (type === 'mouseleave')) {                                                 // 6396
                                                                                                                    // 6397
				originalHandler = handler;                                                                                      // 6398
				newType = (type === 'mouseenter' ? 'mouseover' : 'mouseout');                                                   // 6399
                                                                                                                    // 6400
				handler = function (e) {                                                                                        // 6401
					if (!L.DomEvent._checkMouse(obj, e)) { return; }                                                               // 6402
					return originalHandler(e);                                                                                     // 6403
				};                                                                                                              // 6404
                                                                                                                    // 6405
				obj.addEventListener(newType, handler, false);                                                                  // 6406
                                                                                                                    // 6407
			} else if (type === 'click' && L.Browser.android) {                                                              // 6408
				originalHandler = handler;                                                                                      // 6409
				handler = function (e) {                                                                                        // 6410
					return L.DomEvent._filterClick(e, originalHandler);                                                            // 6411
				};                                                                                                              // 6412
                                                                                                                    // 6413
				obj.addEventListener(type, handler, false);                                                                     // 6414
			} else {                                                                                                         // 6415
				obj.addEventListener(type, handler, false);                                                                     // 6416
			}                                                                                                                // 6417
                                                                                                                    // 6418
		} else if ('attachEvent' in obj) {                                                                                // 6419
			obj.attachEvent('on' + type, handler);                                                                           // 6420
		}                                                                                                                 // 6421
                                                                                                                    // 6422
		obj[key] = handler;                                                                                               // 6423
                                                                                                                    // 6424
		return this;                                                                                                      // 6425
	},                                                                                                                 // 6426
                                                                                                                    // 6427
	removeListener: function (obj, type, fn) {  // (HTMLElement, String, Function)                                     // 6428
                                                                                                                    // 6429
		var id = L.stamp(fn),                                                                                             // 6430
		    key = '_leaflet_' + type + id,                                                                                // 6431
		    handler = obj[key];                                                                                           // 6432
                                                                                                                    // 6433
		if (!handler) { return this; }                                                                                    // 6434
                                                                                                                    // 6435
		if (L.Browser.pointer && type.indexOf('touch') === 0) {                                                           // 6436
			this.removePointerListener(obj, type, id);                                                                       // 6437
		} else if (L.Browser.touch && (type === 'dblclick') && this.removeDoubleTapListener) {                            // 6438
			this.removeDoubleTapListener(obj, id);                                                                           // 6439
                                                                                                                    // 6440
		} else if ('removeEventListener' in obj) {                                                                        // 6441
                                                                                                                    // 6442
			if (type === 'mousewheel') {                                                                                     // 6443
				obj.removeEventListener('DOMMouseScroll', handler, false);                                                      // 6444
				obj.removeEventListener(type, handler, false);                                                                  // 6445
                                                                                                                    // 6446
			} else if ((type === 'mouseenter') || (type === 'mouseleave')) {                                                 // 6447
				obj.removeEventListener((type === 'mouseenter' ? 'mouseover' : 'mouseout'), handler, false);                    // 6448
			} else {                                                                                                         // 6449
				obj.removeEventListener(type, handler, false);                                                                  // 6450
			}                                                                                                                // 6451
		} else if ('detachEvent' in obj) {                                                                                // 6452
			obj.detachEvent('on' + type, handler);                                                                           // 6453
		}                                                                                                                 // 6454
                                                                                                                    // 6455
		obj[key] = null;                                                                                                  // 6456
                                                                                                                    // 6457
		return this;                                                                                                      // 6458
	},                                                                                                                 // 6459
                                                                                                                    // 6460
	stopPropagation: function (e) {                                                                                    // 6461
                                                                                                                    // 6462
		if (e.stopPropagation) {                                                                                          // 6463
			e.stopPropagation();                                                                                             // 6464
		} else {                                                                                                          // 6465
			e.cancelBubble = true;                                                                                           // 6466
		}                                                                                                                 // 6467
		L.DomEvent._skipped(e);                                                                                           // 6468
                                                                                                                    // 6469
		return this;                                                                                                      // 6470
	},                                                                                                                 // 6471
                                                                                                                    // 6472
	disableScrollPropagation: function (el) {                                                                          // 6473
		var stop = L.DomEvent.stopPropagation;                                                                            // 6474
                                                                                                                    // 6475
		return L.DomEvent                                                                                                 // 6476
			.on(el, 'mousewheel', stop)                                                                                      // 6477
			.on(el, 'MozMousePixelScroll', stop);                                                                            // 6478
	},                                                                                                                 // 6479
                                                                                                                    // 6480
	disableClickPropagation: function (el) {                                                                           // 6481
		var stop = L.DomEvent.stopPropagation;                                                                            // 6482
                                                                                                                    // 6483
		for (var i = L.Draggable.START.length - 1; i >= 0; i--) {                                                         // 6484
			L.DomEvent.on(el, L.Draggable.START[i], stop);                                                                   // 6485
		}                                                                                                                 // 6486
                                                                                                                    // 6487
		return L.DomEvent                                                                                                 // 6488
			.on(el, 'click', L.DomEvent._fakeStop)                                                                           // 6489
			.on(el, 'dblclick', stop);                                                                                       // 6490
	},                                                                                                                 // 6491
                                                                                                                    // 6492
	preventDefault: function (e) {                                                                                     // 6493
                                                                                                                    // 6494
		if (e.preventDefault) {                                                                                           // 6495
			e.preventDefault();                                                                                              // 6496
		} else {                                                                                                          // 6497
			e.returnValue = false;                                                                                           // 6498
		}                                                                                                                 // 6499
		return this;                                                                                                      // 6500
	},                                                                                                                 // 6501
                                                                                                                    // 6502
	stop: function (e) {                                                                                               // 6503
		return L.DomEvent                                                                                                 // 6504
			.preventDefault(e)                                                                                               // 6505
			.stopPropagation(e);                                                                                             // 6506
	},                                                                                                                 // 6507
                                                                                                                    // 6508
	getMousePosition: function (e, container) {                                                                        // 6509
		if (!container) {                                                                                                 // 6510
			return new L.Point(e.clientX, e.clientY);                                                                        // 6511
		}                                                                                                                 // 6512
                                                                                                                    // 6513
		var rect = container.getBoundingClientRect();                                                                     // 6514
                                                                                                                    // 6515
		return new L.Point(                                                                                               // 6516
			e.clientX - rect.left - container.clientLeft,                                                                    // 6517
			e.clientY - rect.top - container.clientTop);                                                                     // 6518
	},                                                                                                                 // 6519
                                                                                                                    // 6520
	getWheelDelta: function (e) {                                                                                      // 6521
                                                                                                                    // 6522
		var delta = 0;                                                                                                    // 6523
                                                                                                                    // 6524
		if (e.wheelDelta) {                                                                                               // 6525
			delta = e.wheelDelta / 120;                                                                                      // 6526
		}                                                                                                                 // 6527
		if (e.detail) {                                                                                                   // 6528
			delta = -e.detail / 3;                                                                                           // 6529
		}                                                                                                                 // 6530
		return delta;                                                                                                     // 6531
	},                                                                                                                 // 6532
                                                                                                                    // 6533
	_skipEvents: {},                                                                                                   // 6534
                                                                                                                    // 6535
	_fakeStop: function (e) {                                                                                          // 6536
		// fakes stopPropagation by setting a special event flag, checked/reset with L.DomEvent._skipped(e)               // 6537
		L.DomEvent._skipEvents[e.type] = true;                                                                            // 6538
	},                                                                                                                 // 6539
                                                                                                                    // 6540
	_skipped: function (e) {                                                                                           // 6541
		var skipped = this._skipEvents[e.type];                                                                           // 6542
		// reset when checking, as it's only used in map container and propagates outside of the map                      // 6543
		this._skipEvents[e.type] = false;                                                                                 // 6544
		return skipped;                                                                                                   // 6545
	},                                                                                                                 // 6546
                                                                                                                    // 6547
	// check if element really left/entered the event target (for mouseenter/mouseleave)                               // 6548
	_checkMouse: function (el, e) {                                                                                    // 6549
                                                                                                                    // 6550
		var related = e.relatedTarget;                                                                                    // 6551
                                                                                                                    // 6552
		if (!related) { return true; }                                                                                    // 6553
                                                                                                                    // 6554
		try {                                                                                                             // 6555
			while (related && (related !== el)) {                                                                            // 6556
				related = related.parentNode;                                                                                   // 6557
			}                                                                                                                // 6558
		} catch (err) {                                                                                                   // 6559
			return false;                                                                                                    // 6560
		}                                                                                                                 // 6561
		return (related !== el);                                                                                          // 6562
	},                                                                                                                 // 6563
                                                                                                                    // 6564
	_getEvent: function () { // evil magic for IE                                                                      // 6565
		/*jshint noarg:false */                                                                                           // 6566
		var e = window.event;                                                                                             // 6567
		if (!e) {                                                                                                         // 6568
			var caller = arguments.callee.caller;                                                                            // 6569
			while (caller) {                                                                                                 // 6570
				e = caller['arguments'][0];                                                                                     // 6571
				if (e && window.Event === e.constructor) {                                                                      // 6572
					break;                                                                                                         // 6573
				}                                                                                                               // 6574
				caller = caller.caller;                                                                                         // 6575
			}                                                                                                                // 6576
		}                                                                                                                 // 6577
		return e;                                                                                                         // 6578
	},                                                                                                                 // 6579
                                                                                                                    // 6580
	// this is a horrible workaround for a bug in Android where a single touch triggers two click events               // 6581
	_filterClick: function (e, handler) {                                                                              // 6582
		var timeStamp = (e.timeStamp || e.originalEvent.timeStamp),                                                       // 6583
			elapsed = L.DomEvent._lastClick && (timeStamp - L.DomEvent._lastClick);                                          // 6584
                                                                                                                    // 6585
		// are they closer together than 500ms yet more than 100ms?                                                       // 6586
		// Android typically triggers them ~300ms apart while multiple listeners                                          // 6587
		// on the same event should be triggered far faster;                                                              // 6588
		// or check if click is simulated on the element, and if it is, reject any non-simulated events                   // 6589
                                                                                                                    // 6590
		if ((elapsed && elapsed > 100 && elapsed < 500) || (e.target._simulatedClick && !e._simulated)) {                 // 6591
			L.DomEvent.stop(e);                                                                                              // 6592
			return;                                                                                                          // 6593
		}                                                                                                                 // 6594
		L.DomEvent._lastClick = timeStamp;                                                                                // 6595
                                                                                                                    // 6596
		return handler(e);                                                                                                // 6597
	}                                                                                                                  // 6598
};                                                                                                                  // 6599
                                                                                                                    // 6600
L.DomEvent.on = L.DomEvent.addListener;                                                                             // 6601
L.DomEvent.off = L.DomEvent.removeListener;                                                                         // 6602
                                                                                                                    // 6603
                                                                                                                    // 6604
/*                                                                                                                  // 6605
 * L.Draggable allows you to add dragging capabilities to any element. Supports mobile devices too.                 // 6606
 */                                                                                                                 // 6607
                                                                                                                    // 6608
L.Draggable = L.Class.extend({                                                                                      // 6609
	includes: L.Mixin.Events,                                                                                          // 6610
                                                                                                                    // 6611
	statics: {                                                                                                         // 6612
		START: L.Browser.touch ? ['touchstart', 'mousedown'] : ['mousedown'],                                             // 6613
		END: {                                                                                                            // 6614
			mousedown: 'mouseup',                                                                                            // 6615
			touchstart: 'touchend',                                                                                          // 6616
			pointerdown: 'touchend',                                                                                         // 6617
			MSPointerDown: 'touchend'                                                                                        // 6618
		},                                                                                                                // 6619
		MOVE: {                                                                                                           // 6620
			mousedown: 'mousemove',                                                                                          // 6621
			touchstart: 'touchmove',                                                                                         // 6622
			pointerdown: 'touchmove',                                                                                        // 6623
			MSPointerDown: 'touchmove'                                                                                       // 6624
		}                                                                                                                 // 6625
	},                                                                                                                 // 6626
                                                                                                                    // 6627
	initialize: function (element, dragStartTarget) {                                                                  // 6628
		this._element = element;                                                                                          // 6629
		this._dragStartTarget = dragStartTarget || element;                                                               // 6630
	},                                                                                                                 // 6631
                                                                                                                    // 6632
	enable: function () {                                                                                              // 6633
		if (this._enabled) { return; }                                                                                    // 6634
                                                                                                                    // 6635
		for (var i = L.Draggable.START.length - 1; i >= 0; i--) {                                                         // 6636
			L.DomEvent.on(this._dragStartTarget, L.Draggable.START[i], this._onDown, this);                                  // 6637
		}                                                                                                                 // 6638
                                                                                                                    // 6639
		this._enabled = true;                                                                                             // 6640
	},                                                                                                                 // 6641
                                                                                                                    // 6642
	disable: function () {                                                                                             // 6643
		if (!this._enabled) { return; }                                                                                   // 6644
                                                                                                                    // 6645
		for (var i = L.Draggable.START.length - 1; i >= 0; i--) {                                                         // 6646
			L.DomEvent.off(this._dragStartTarget, L.Draggable.START[i], this._onDown, this);                                 // 6647
		}                                                                                                                 // 6648
                                                                                                                    // 6649
		this._enabled = false;                                                                                            // 6650
		this._moved = false;                                                                                              // 6651
	},                                                                                                                 // 6652
                                                                                                                    // 6653
	_onDown: function (e) {                                                                                            // 6654
		this._moved = false;                                                                                              // 6655
                                                                                                                    // 6656
		if (e.shiftKey || ((e.which !== 1) && (e.button !== 1) && !e.touches)) { return; }                                // 6657
                                                                                                                    // 6658
		L.DomEvent.stopPropagation(e);                                                                                    // 6659
                                                                                                                    // 6660
		if (L.Draggable._disabled) { return; }                                                                            // 6661
                                                                                                                    // 6662
		L.DomUtil.disableImageDrag();                                                                                     // 6663
		L.DomUtil.disableTextSelection();                                                                                 // 6664
                                                                                                                    // 6665
		if (this._moving) { return; }                                                                                     // 6666
                                                                                                                    // 6667
		var first = e.touches ? e.touches[0] : e;                                                                         // 6668
                                                                                                                    // 6669
		this._startPoint = new L.Point(first.clientX, first.clientY);                                                     // 6670
		this._startPos = this._newPos = L.DomUtil.getPosition(this._element);                                             // 6671
                                                                                                                    // 6672
		L.DomEvent                                                                                                        // 6673
		    .on(document, L.Draggable.MOVE[e.type], this._onMove, this)                                                   // 6674
		    .on(document, L.Draggable.END[e.type], this._onUp, this);                                                     // 6675
	},                                                                                                                 // 6676
                                                                                                                    // 6677
	_onMove: function (e) {                                                                                            // 6678
		if (e.touches && e.touches.length > 1) {                                                                          // 6679
			this._moved = true;                                                                                              // 6680
			return;                                                                                                          // 6681
		}                                                                                                                 // 6682
                                                                                                                    // 6683
		var first = (e.touches && e.touches.length === 1 ? e.touches[0] : e),                                             // 6684
		    newPoint = new L.Point(first.clientX, first.clientY),                                                         // 6685
		    offset = newPoint.subtract(this._startPoint);                                                                 // 6686
                                                                                                                    // 6687
		if (!offset.x && !offset.y) { return; }                                                                           // 6688
		if (L.Browser.touch && Math.abs(offset.x) + Math.abs(offset.y) < 3) { return; }                                   // 6689
                                                                                                                    // 6690
		L.DomEvent.preventDefault(e);                                                                                     // 6691
                                                                                                                    // 6692
		if (!this._moved) {                                                                                               // 6693
			this.fire('dragstart');                                                                                          // 6694
                                                                                                                    // 6695
			this._moved = true;                                                                                              // 6696
			this._startPos = L.DomUtil.getPosition(this._element).subtract(offset);                                          // 6697
                                                                                                                    // 6698
			L.DomUtil.addClass(document.body, 'leaflet-dragging');                                                           // 6699
			this._lastTarget = e.target || e.srcElement;                                                                     // 6700
			L.DomUtil.addClass(this._lastTarget, 'leaflet-drag-target');                                                     // 6701
		}                                                                                                                 // 6702
                                                                                                                    // 6703
		this._newPos = this._startPos.add(offset);                                                                        // 6704
		this._moving = true;                                                                                              // 6705
                                                                                                                    // 6706
		L.Util.cancelAnimFrame(this._animRequest);                                                                        // 6707
		this._animRequest = L.Util.requestAnimFrame(this._updatePosition, this, true, this._dragStartTarget);             // 6708
	},                                                                                                                 // 6709
                                                                                                                    // 6710
	_updatePosition: function () {                                                                                     // 6711
		this.fire('predrag');                                                                                             // 6712
		L.DomUtil.setPosition(this._element, this._newPos);                                                               // 6713
		this.fire('drag');                                                                                                // 6714
	},                                                                                                                 // 6715
                                                                                                                    // 6716
	_onUp: function () {                                                                                               // 6717
		L.DomUtil.removeClass(document.body, 'leaflet-dragging');                                                         // 6718
                                                                                                                    // 6719
		if (this._lastTarget) {                                                                                           // 6720
			L.DomUtil.removeClass(this._lastTarget, 'leaflet-drag-target');                                                  // 6721
			this._lastTarget = null;                                                                                         // 6722
		}                                                                                                                 // 6723
                                                                                                                    // 6724
		for (var i in L.Draggable.MOVE) {                                                                                 // 6725
			L.DomEvent                                                                                                       // 6726
			    .off(document, L.Draggable.MOVE[i], this._onMove)                                                            // 6727
			    .off(document, L.Draggable.END[i], this._onUp);                                                              // 6728
		}                                                                                                                 // 6729
                                                                                                                    // 6730
		L.DomUtil.enableImageDrag();                                                                                      // 6731
		L.DomUtil.enableTextSelection();                                                                                  // 6732
                                                                                                                    // 6733
		if (this._moved && this._moving) {                                                                                // 6734
			// ensure drag is not fired after dragend                                                                        // 6735
			L.Util.cancelAnimFrame(this._animRequest);                                                                       // 6736
                                                                                                                    // 6737
			this.fire('dragend', {                                                                                           // 6738
				distance: this._newPos.distanceTo(this._startPos)                                                               // 6739
			});                                                                                                              // 6740
		}                                                                                                                 // 6741
                                                                                                                    // 6742
		this._moving = false;                                                                                             // 6743
	}                                                                                                                  // 6744
});                                                                                                                 // 6745
                                                                                                                    // 6746
                                                                                                                    // 6747
/*                                                                                                                  // 6748
	L.Handler is a base class for handler classes that are used internally to inject                                   // 6749
	interaction features like dragging to classes like Map and Marker.                                                 // 6750
*/                                                                                                                  // 6751
                                                                                                                    // 6752
L.Handler = L.Class.extend({                                                                                        // 6753
	initialize: function (map) {                                                                                       // 6754
		this._map = map;                                                                                                  // 6755
	},                                                                                                                 // 6756
                                                                                                                    // 6757
	enable: function () {                                                                                              // 6758
		if (this._enabled) { return; }                                                                                    // 6759
                                                                                                                    // 6760
		this._enabled = true;                                                                                             // 6761
		this.addHooks();                                                                                                  // 6762
	},                                                                                                                 // 6763
                                                                                                                    // 6764
	disable: function () {                                                                                             // 6765
		if (!this._enabled) { return; }                                                                                   // 6766
                                                                                                                    // 6767
		this._enabled = false;                                                                                            // 6768
		this.removeHooks();                                                                                               // 6769
	},                                                                                                                 // 6770
                                                                                                                    // 6771
	enabled: function () {                                                                                             // 6772
		return !!this._enabled;                                                                                           // 6773
	}                                                                                                                  // 6774
});                                                                                                                 // 6775
                                                                                                                    // 6776
                                                                                                                    // 6777
/*                                                                                                                  // 6778
 * L.Handler.MapDrag is used to make the map draggable (with panning inertia), enabled by default.                  // 6779
 */                                                                                                                 // 6780
                                                                                                                    // 6781
L.Map.mergeOptions({                                                                                                // 6782
	dragging: true,                                                                                                    // 6783
                                                                                                                    // 6784
	inertia: !L.Browser.android23,                                                                                     // 6785
	inertiaDeceleration: 3400, // px/s^2                                                                               // 6786
	inertiaMaxSpeed: Infinity, // px/s                                                                                 // 6787
	inertiaThreshold: L.Browser.touch ? 32 : 18, // ms                                                                 // 6788
	easeLinearity: 0.25,                                                                                               // 6789
                                                                                                                    // 6790
	// TODO refactor, move to CRS                                                                                      // 6791
	worldCopyJump: false                                                                                               // 6792
});                                                                                                                 // 6793
                                                                                                                    // 6794
L.Map.Drag = L.Handler.extend({                                                                                     // 6795
	addHooks: function () {                                                                                            // 6796
		if (!this._draggable) {                                                                                           // 6797
			var map = this._map;                                                                                             // 6798
                                                                                                                    // 6799
			this._draggable = new L.Draggable(map._mapPane, map._container);                                                 // 6800
                                                                                                                    // 6801
			this._draggable.on({                                                                                             // 6802
				'dragstart': this._onDragStart,                                                                                 // 6803
				'drag': this._onDrag,                                                                                           // 6804
				'dragend': this._onDragEnd                                                                                      // 6805
			}, this);                                                                                                        // 6806
                                                                                                                    // 6807
			if (map.options.worldCopyJump) {                                                                                 // 6808
				this._draggable.on('predrag', this._onPreDrag, this);                                                           // 6809
				map.on('viewreset', this._onViewReset, this);                                                                   // 6810
                                                                                                                    // 6811
				map.whenReady(this._onViewReset, this);                                                                         // 6812
			}                                                                                                                // 6813
		}                                                                                                                 // 6814
		this._draggable.enable();                                                                                         // 6815
	},                                                                                                                 // 6816
                                                                                                                    // 6817
	removeHooks: function () {                                                                                         // 6818
		this._draggable.disable();                                                                                        // 6819
	},                                                                                                                 // 6820
                                                                                                                    // 6821
	moved: function () {                                                                                               // 6822
		return this._draggable && this._draggable._moved;                                                                 // 6823
	},                                                                                                                 // 6824
                                                                                                                    // 6825
	_onDragStart: function () {                                                                                        // 6826
		var map = this._map;                                                                                              // 6827
                                                                                                                    // 6828
		if (map._panAnim) {                                                                                               // 6829
			map._panAnim.stop();                                                                                             // 6830
		}                                                                                                                 // 6831
                                                                                                                    // 6832
		map                                                                                                               // 6833
		    .fire('movestart')                                                                                            // 6834
		    .fire('dragstart');                                                                                           // 6835
                                                                                                                    // 6836
		if (map.options.inertia) {                                                                                        // 6837
			this._positions = [];                                                                                            // 6838
			this._times = [];                                                                                                // 6839
		}                                                                                                                 // 6840
	},                                                                                                                 // 6841
                                                                                                                    // 6842
	_onDrag: function () {                                                                                             // 6843
		if (this._map.options.inertia) {                                                                                  // 6844
			var time = this._lastTime = +new Date(),                                                                         // 6845
			    pos = this._lastPos = this._draggable._newPos;                                                               // 6846
                                                                                                                    // 6847
			this._positions.push(pos);                                                                                       // 6848
			this._times.push(time);                                                                                          // 6849
                                                                                                                    // 6850
			if (time - this._times[0] > 200) {                                                                               // 6851
				this._positions.shift();                                                                                        // 6852
				this._times.shift();                                                                                            // 6853
			}                                                                                                                // 6854
		}                                                                                                                 // 6855
                                                                                                                    // 6856
		this._map                                                                                                         // 6857
		    .fire('move')                                                                                                 // 6858
		    .fire('drag');                                                                                                // 6859
	},                                                                                                                 // 6860
                                                                                                                    // 6861
	_onViewReset: function () {                                                                                        // 6862
		// TODO fix hardcoded Earth values                                                                                // 6863
		var pxCenter = this._map.getSize()._divideBy(2),                                                                  // 6864
		    pxWorldCenter = this._map.latLngToLayerPoint([0, 0]);                                                         // 6865
                                                                                                                    // 6866
		this._initialWorldOffset = pxWorldCenter.subtract(pxCenter).x;                                                    // 6867
		this._worldWidth = this._map.project([0, 180]).x;                                                                 // 6868
	},                                                                                                                 // 6869
                                                                                                                    // 6870
	_onPreDrag: function () {                                                                                          // 6871
		// TODO refactor to be able to adjust map pane position after zoom                                                // 6872
		var worldWidth = this._worldWidth,                                                                                // 6873
		    halfWidth = Math.round(worldWidth / 2),                                                                       // 6874
		    dx = this._initialWorldOffset,                                                                                // 6875
		    x = this._draggable._newPos.x,                                                                                // 6876
		    newX1 = (x - halfWidth + dx) % worldWidth + halfWidth - dx,                                                   // 6877
		    newX2 = (x + halfWidth + dx) % worldWidth - halfWidth - dx,                                                   // 6878
		    newX = Math.abs(newX1 + dx) < Math.abs(newX2 + dx) ? newX1 : newX2;                                           // 6879
                                                                                                                    // 6880
		this._draggable._newPos.x = newX;                                                                                 // 6881
	},                                                                                                                 // 6882
                                                                                                                    // 6883
	_onDragEnd: function (e) {                                                                                         // 6884
		var map = this._map,                                                                                              // 6885
		    options = map.options,                                                                                        // 6886
		    delay = +new Date() - this._lastTime,                                                                         // 6887
                                                                                                                    // 6888
		    noInertia = !options.inertia || delay > options.inertiaThreshold || !this._positions[0];                      // 6889
                                                                                                                    // 6890
		map.fire('dragend', e);                                                                                           // 6891
                                                                                                                    // 6892
		if (noInertia) {                                                                                                  // 6893
			map.fire('moveend');                                                                                             // 6894
                                                                                                                    // 6895
		} else {                                                                                                          // 6896
                                                                                                                    // 6897
			var direction = this._lastPos.subtract(this._positions[0]),                                                      // 6898
			    duration = (this._lastTime + delay - this._times[0]) / 1000,                                                 // 6899
			    ease = options.easeLinearity,                                                                                // 6900
                                                                                                                    // 6901
			    speedVector = direction.multiplyBy(ease / duration),                                                         // 6902
			    speed = speedVector.distanceTo([0, 0]),                                                                      // 6903
                                                                                                                    // 6904
			    limitedSpeed = Math.min(options.inertiaMaxSpeed, speed),                                                     // 6905
			    limitedSpeedVector = speedVector.multiplyBy(limitedSpeed / speed),                                           // 6906
                                                                                                                    // 6907
			    decelerationDuration = limitedSpeed / (options.inertiaDeceleration * ease),                                  // 6908
			    offset = limitedSpeedVector.multiplyBy(-decelerationDuration / 2).round();                                   // 6909
                                                                                                                    // 6910
			if (!offset.x || !offset.y) {                                                                                    // 6911
				map.fire('moveend');                                                                                            // 6912
                                                                                                                    // 6913
			} else {                                                                                                         // 6914
				offset = map._limitOffset(offset, map.options.maxBounds);                                                       // 6915
                                                                                                                    // 6916
				L.Util.requestAnimFrame(function () {                                                                           // 6917
					map.panBy(offset, {                                                                                            // 6918
						duration: decelerationDuration,                                                                               // 6919
						easeLinearity: ease,                                                                                          // 6920
						noMoveStart: true                                                                                             // 6921
					});                                                                                                            // 6922
				});                                                                                                             // 6923
			}                                                                                                                // 6924
		}                                                                                                                 // 6925
	}                                                                                                                  // 6926
});                                                                                                                 // 6927
                                                                                                                    // 6928
L.Map.addInitHook('addHandler', 'dragging', L.Map.Drag);                                                            // 6929
                                                                                                                    // 6930
                                                                                                                    // 6931
/*                                                                                                                  // 6932
 * L.Handler.DoubleClickZoom is used to handle double-click zoom on the map, enabled by default.                    // 6933
 */                                                                                                                 // 6934
                                                                                                                    // 6935
L.Map.mergeOptions({                                                                                                // 6936
	doubleClickZoom: true                                                                                              // 6937
});                                                                                                                 // 6938
                                                                                                                    // 6939
L.Map.DoubleClickZoom = L.Handler.extend({                                                                          // 6940
	addHooks: function () {                                                                                            // 6941
		this._map.on('dblclick', this._onDoubleClick, this);                                                              // 6942
	},                                                                                                                 // 6943
                                                                                                                    // 6944
	removeHooks: function () {                                                                                         // 6945
		this._map.off('dblclick', this._onDoubleClick, this);                                                             // 6946
	},                                                                                                                 // 6947
                                                                                                                    // 6948
	_onDoubleClick: function (e) {                                                                                     // 6949
		var map = this._map,                                                                                              // 6950
		    zoom = map.getZoom() + (e.originalEvent.shiftKey ? -1 : 1);                                                   // 6951
                                                                                                                    // 6952
		if (map.options.doubleClickZoom === 'center') {                                                                   // 6953
			map.setZoom(zoom);                                                                                               // 6954
		} else {                                                                                                          // 6955
			map.setZoomAround(e.containerPoint, zoom);                                                                       // 6956
		}                                                                                                                 // 6957
	}                                                                                                                  // 6958
});                                                                                                                 // 6959
                                                                                                                    // 6960
L.Map.addInitHook('addHandler', 'doubleClickZoom', L.Map.DoubleClickZoom);                                          // 6961
                                                                                                                    // 6962
                                                                                                                    // 6963
/*                                                                                                                  // 6964
 * L.Handler.ScrollWheelZoom is used by L.Map to enable mouse scroll wheel zoom on the map.                         // 6965
 */                                                                                                                 // 6966
                                                                                                                    // 6967
L.Map.mergeOptions({                                                                                                // 6968
	scrollWheelZoom: true                                                                                              // 6969
});                                                                                                                 // 6970
                                                                                                                    // 6971
L.Map.ScrollWheelZoom = L.Handler.extend({                                                                          // 6972
	addHooks: function () {                                                                                            // 6973
		L.DomEvent.on(this._map._container, 'mousewheel', this._onWheelScroll, this);                                     // 6974
		L.DomEvent.on(this._map._container, 'MozMousePixelScroll', L.DomEvent.preventDefault);                            // 6975
		this._delta = 0;                                                                                                  // 6976
	},                                                                                                                 // 6977
                                                                                                                    // 6978
	removeHooks: function () {                                                                                         // 6979
		L.DomEvent.off(this._map._container, 'mousewheel', this._onWheelScroll);                                          // 6980
		L.DomEvent.off(this._map._container, 'MozMousePixelScroll', L.DomEvent.preventDefault);                           // 6981
	},                                                                                                                 // 6982
                                                                                                                    // 6983
	_onWheelScroll: function (e) {                                                                                     // 6984
		var delta = L.DomEvent.getWheelDelta(e);                                                                          // 6985
                                                                                                                    // 6986
		this._delta += delta;                                                                                             // 6987
		this._lastMousePos = this._map.mouseEventToContainerPoint(e);                                                     // 6988
                                                                                                                    // 6989
		if (!this._startTime) {                                                                                           // 6990
			this._startTime = +new Date();                                                                                   // 6991
		}                                                                                                                 // 6992
                                                                                                                    // 6993
		var left = Math.max(40 - (+new Date() - this._startTime), 0);                                                     // 6994
                                                                                                                    // 6995
		clearTimeout(this._timer);                                                                                        // 6996
		this._timer = setTimeout(L.bind(this._performZoom, this), left);                                                  // 6997
                                                                                                                    // 6998
		L.DomEvent.preventDefault(e);                                                                                     // 6999
		L.DomEvent.stopPropagation(e);                                                                                    // 7000
	},                                                                                                                 // 7001
                                                                                                                    // 7002
	_performZoom: function () {                                                                                        // 7003
		var map = this._map,                                                                                              // 7004
		    delta = this._delta,                                                                                          // 7005
		    zoom = map.getZoom();                                                                                         // 7006
                                                                                                                    // 7007
		delta = delta > 0 ? Math.ceil(delta) : Math.floor(delta);                                                         // 7008
		delta = Math.max(Math.min(delta, 4), -4);                                                                         // 7009
		delta = map._limitZoom(zoom + delta) - zoom;                                                                      // 7010
                                                                                                                    // 7011
		this._delta = 0;                                                                                                  // 7012
		this._startTime = null;                                                                                           // 7013
                                                                                                                    // 7014
		if (!delta) { return; }                                                                                           // 7015
                                                                                                                    // 7016
		if (map.options.scrollWheelZoom === 'center') {                                                                   // 7017
			map.setZoom(zoom + delta);                                                                                       // 7018
		} else {                                                                                                          // 7019
			map.setZoomAround(this._lastMousePos, zoom + delta);                                                             // 7020
		}                                                                                                                 // 7021
	}                                                                                                                  // 7022
});                                                                                                                 // 7023
                                                                                                                    // 7024
L.Map.addInitHook('addHandler', 'scrollWheelZoom', L.Map.ScrollWheelZoom);                                          // 7025
                                                                                                                    // 7026
                                                                                                                    // 7027
/*                                                                                                                  // 7028
 * Extends the event handling code with double tap support for mobile browsers.                                     // 7029
 */                                                                                                                 // 7030
                                                                                                                    // 7031
L.extend(L.DomEvent, {                                                                                              // 7032
                                                                                                                    // 7033
	_touchstart: L.Browser.msPointer ? 'MSPointerDown' : L.Browser.pointer ? 'pointerdown' : 'touchstart',             // 7034
	_touchend: L.Browser.msPointer ? 'MSPointerUp' : L.Browser.pointer ? 'pointerup' : 'touchend',                     // 7035
                                                                                                                    // 7036
	// inspired by Zepto touch code by Thomas Fuchs                                                                    // 7037
	addDoubleTapListener: function (obj, handler, id) {                                                                // 7038
		var last,                                                                                                         // 7039
		    doubleTap = false,                                                                                            // 7040
		    delay = 250,                                                                                                  // 7041
		    touch,                                                                                                        // 7042
		    pre = '_leaflet_',                                                                                            // 7043
		    touchstart = this._touchstart,                                                                                // 7044
		    touchend = this._touchend,                                                                                    // 7045
		    trackedTouches = [];                                                                                          // 7046
                                                                                                                    // 7047
		function onTouchStart(e) {                                                                                        // 7048
			var count;                                                                                                       // 7049
                                                                                                                    // 7050
			if (L.Browser.pointer) {                                                                                         // 7051
				trackedTouches.push(e.pointerId);                                                                               // 7052
				count = trackedTouches.length;                                                                                  // 7053
			} else {                                                                                                         // 7054
				count = e.touches.length;                                                                                       // 7055
			}                                                                                                                // 7056
			if (count > 1) {                                                                                                 // 7057
				return;                                                                                                         // 7058
			}                                                                                                                // 7059
                                                                                                                    // 7060
			var now = Date.now(),                                                                                            // 7061
				delta = now - (last || now);                                                                                    // 7062
                                                                                                                    // 7063
			touch = e.touches ? e.touches[0] : e;                                                                            // 7064
			doubleTap = (delta > 0 && delta <= delay);                                                                       // 7065
			last = now;                                                                                                      // 7066
		}                                                                                                                 // 7067
                                                                                                                    // 7068
		function onTouchEnd(e) {                                                                                          // 7069
			if (L.Browser.pointer) {                                                                                         // 7070
				var idx = trackedTouches.indexOf(e.pointerId);                                                                  // 7071
				if (idx === -1) {                                                                                               // 7072
					return;                                                                                                        // 7073
				}                                                                                                               // 7074
				trackedTouches.splice(idx, 1);                                                                                  // 7075
			}                                                                                                                // 7076
                                                                                                                    // 7077
			if (doubleTap) {                                                                                                 // 7078
				if (L.Browser.pointer) {                                                                                        // 7079
					// work around .type being readonly with MSPointer* events                                                     // 7080
					var newTouch = { },                                                                                            // 7081
						prop;                                                                                                         // 7082
                                                                                                                    // 7083
					// jshint forin:false                                                                                          // 7084
					for (var i in touch) {                                                                                         // 7085
						prop = touch[i];                                                                                              // 7086
						if (typeof prop === 'function') {                                                                             // 7087
							newTouch[i] = prop.bind(touch);                                                                              // 7088
						} else {                                                                                                      // 7089
							newTouch[i] = prop;                                                                                          // 7090
						}                                                                                                             // 7091
					}                                                                                                              // 7092
					touch = newTouch;                                                                                              // 7093
				}                                                                                                               // 7094
				touch.type = 'dblclick';                                                                                        // 7095
				handler(touch);                                                                                                 // 7096
				last = null;                                                                                                    // 7097
			}                                                                                                                // 7098
		}                                                                                                                 // 7099
		obj[pre + touchstart + id] = onTouchStart;                                                                        // 7100
		obj[pre + touchend + id] = onTouchEnd;                                                                            // 7101
                                                                                                                    // 7102
		// on pointer we need to listen on the document, otherwise a drag starting on the map and moving off screen       // 7103
		// will not come through to us, so we will lose track of how many touches are ongoing                             // 7104
		var endElement = L.Browser.pointer ? document.documentElement : obj;                                              // 7105
                                                                                                                    // 7106
		obj.addEventListener(touchstart, onTouchStart, false);                                                            // 7107
		endElement.addEventListener(touchend, onTouchEnd, false);                                                         // 7108
                                                                                                                    // 7109
		if (L.Browser.pointer) {                                                                                          // 7110
			endElement.addEventListener(L.DomEvent.POINTER_CANCEL, onTouchEnd, false);                                       // 7111
		}                                                                                                                 // 7112
                                                                                                                    // 7113
		return this;                                                                                                      // 7114
	},                                                                                                                 // 7115
                                                                                                                    // 7116
	removeDoubleTapListener: function (obj, id) {                                                                      // 7117
		var pre = '_leaflet_';                                                                                            // 7118
                                                                                                                    // 7119
		obj.removeEventListener(this._touchstart, obj[pre + this._touchstart + id], false);                               // 7120
		(L.Browser.pointer ? document.documentElement : obj).removeEventListener(                                         // 7121
		        this._touchend, obj[pre + this._touchend + id], false);                                                   // 7122
                                                                                                                    // 7123
		if (L.Browser.pointer) {                                                                                          // 7124
			document.documentElement.removeEventListener(L.DomEvent.POINTER_CANCEL, obj[pre + this._touchend + id],          // 7125
				false);                                                                                                         // 7126
		}                                                                                                                 // 7127
                                                                                                                    // 7128
		return this;                                                                                                      // 7129
	}                                                                                                                  // 7130
});                                                                                                                 // 7131
                                                                                                                    // 7132
                                                                                                                    // 7133
/*                                                                                                                  // 7134
 * Extends L.DomEvent to provide touch support for Internet Explorer and Windows-based devices.                     // 7135
 */                                                                                                                 // 7136
                                                                                                                    // 7137
L.extend(L.DomEvent, {                                                                                              // 7138
                                                                                                                    // 7139
	//static                                                                                                           // 7140
	POINTER_DOWN: L.Browser.msPointer ? 'MSPointerDown' : 'pointerdown',                                               // 7141
	POINTER_MOVE: L.Browser.msPointer ? 'MSPointerMove' : 'pointermove',                                               // 7142
	POINTER_UP: L.Browser.msPointer ? 'MSPointerUp' : 'pointerup',                                                     // 7143
	POINTER_CANCEL: L.Browser.msPointer ? 'MSPointerCancel' : 'pointercancel',                                         // 7144
                                                                                                                    // 7145
	_pointers: [],                                                                                                     // 7146
	_pointerDocumentListener: false,                                                                                   // 7147
                                                                                                                    // 7148
	// Provides a touch events wrapper for (ms)pointer events.                                                         // 7149
	// Based on changes by veproza https://github.com/CloudMade/Leaflet/pull/1019                                      // 7150
	//ref http://www.w3.org/TR/pointerevents/ https://www.w3.org/Bugs/Public/show_bug.cgi?id=22890                     // 7151
                                                                                                                    // 7152
	addPointerListener: function (obj, type, handler, id) {                                                            // 7153
                                                                                                                    // 7154
		switch (type) {                                                                                                   // 7155
		case 'touchstart':                                                                                                // 7156
			return this.addPointerListenerStart(obj, type, handler, id);                                                     // 7157
		case 'touchend':                                                                                                  // 7158
			return this.addPointerListenerEnd(obj, type, handler, id);                                                       // 7159
		case 'touchmove':                                                                                                 // 7160
			return this.addPointerListenerMove(obj, type, handler, id);                                                      // 7161
		default:                                                                                                          // 7162
			throw 'Unknown touch event type';                                                                                // 7163
		}                                                                                                                 // 7164
	},                                                                                                                 // 7165
                                                                                                                    // 7166
	addPointerListenerStart: function (obj, type, handler, id) {                                                       // 7167
		var pre = '_leaflet_',                                                                                            // 7168
		    pointers = this._pointers;                                                                                    // 7169
                                                                                                                    // 7170
		var cb = function (e) {                                                                                           // 7171
			if (e.pointerType !== 'mouse' && e.pointerType !== e.MSPOINTER_TYPE_MOUSE) {                                     // 7172
				L.DomEvent.preventDefault(e);                                                                                   // 7173
			}                                                                                                                // 7174
                                                                                                                    // 7175
			var alreadyInArray = false;                                                                                      // 7176
			for (var i = 0; i < pointers.length; i++) {                                                                      // 7177
				if (pointers[i].pointerId === e.pointerId) {                                                                    // 7178
					alreadyInArray = true;                                                                                         // 7179
					break;                                                                                                         // 7180
				}                                                                                                               // 7181
			}                                                                                                                // 7182
			if (!alreadyInArray) {                                                                                           // 7183
				pointers.push(e);                                                                                               // 7184
			}                                                                                                                // 7185
                                                                                                                    // 7186
			e.touches = pointers.slice();                                                                                    // 7187
			e.changedTouches = [e];                                                                                          // 7188
                                                                                                                    // 7189
			handler(e);                                                                                                      // 7190
		};                                                                                                                // 7191
                                                                                                                    // 7192
		obj[pre + 'touchstart' + id] = cb;                                                                                // 7193
		obj.addEventListener(this.POINTER_DOWN, cb, false);                                                               // 7194
                                                                                                                    // 7195
		// need to also listen for end events to keep the _pointers list accurate                                         // 7196
		// this needs to be on the body and never go away                                                                 // 7197
		if (!this._pointerDocumentListener) {                                                                             // 7198
			var internalCb = function (e) {                                                                                  // 7199
				for (var i = 0; i < pointers.length; i++) {                                                                     // 7200
					if (pointers[i].pointerId === e.pointerId) {                                                                   // 7201
						pointers.splice(i, 1);                                                                                        // 7202
						break;                                                                                                        // 7203
					}                                                                                                              // 7204
				}                                                                                                               // 7205
			};                                                                                                               // 7206
			//We listen on the documentElement as any drags that end by moving the touch off the screen get fired there      // 7207
			document.documentElement.addEventListener(this.POINTER_UP, internalCb, false);                                   // 7208
			document.documentElement.addEventListener(this.POINTER_CANCEL, internalCb, false);                               // 7209
                                                                                                                    // 7210
			this._pointerDocumentListener = true;                                                                            // 7211
		}                                                                                                                 // 7212
                                                                                                                    // 7213
		return this;                                                                                                      // 7214
	},                                                                                                                 // 7215
                                                                                                                    // 7216
	addPointerListenerMove: function (obj, type, handler, id) {                                                        // 7217
		var pre = '_leaflet_',                                                                                            // 7218
		    touches = this._pointers;                                                                                     // 7219
                                                                                                                    // 7220
		function cb(e) {                                                                                                  // 7221
                                                                                                                    // 7222
			// don't fire touch moves when mouse isn't down                                                                  // 7223
			if ((e.pointerType === e.MSPOINTER_TYPE_MOUSE || e.pointerType === 'mouse') && e.buttons === 0) { return; }      // 7224
                                                                                                                    // 7225
			for (var i = 0; i < touches.length; i++) {                                                                       // 7226
				if (touches[i].pointerId === e.pointerId) {                                                                     // 7227
					touches[i] = e;                                                                                                // 7228
					break;                                                                                                         // 7229
				}                                                                                                               // 7230
			}                                                                                                                // 7231
                                                                                                                    // 7232
			e.touches = touches.slice();                                                                                     // 7233
			e.changedTouches = [e];                                                                                          // 7234
                                                                                                                    // 7235
			handler(e);                                                                                                      // 7236
		}                                                                                                                 // 7237
                                                                                                                    // 7238
		obj[pre + 'touchmove' + id] = cb;                                                                                 // 7239
		obj.addEventListener(this.POINTER_MOVE, cb, false);                                                               // 7240
                                                                                                                    // 7241
		return this;                                                                                                      // 7242
	},                                                                                                                 // 7243
                                                                                                                    // 7244
	addPointerListenerEnd: function (obj, type, handler, id) {                                                         // 7245
		var pre = '_leaflet_',                                                                                            // 7246
		    touches = this._pointers;                                                                                     // 7247
                                                                                                                    // 7248
		var cb = function (e) {                                                                                           // 7249
			for (var i = 0; i < touches.length; i++) {                                                                       // 7250
				if (touches[i].pointerId === e.pointerId) {                                                                     // 7251
					touches.splice(i, 1);                                                                                          // 7252
					break;                                                                                                         // 7253
				}                                                                                                               // 7254
			}                                                                                                                // 7255
                                                                                                                    // 7256
			e.touches = touches.slice();                                                                                     // 7257
			e.changedTouches = [e];                                                                                          // 7258
                                                                                                                    // 7259
			handler(e);                                                                                                      // 7260
		};                                                                                                                // 7261
                                                                                                                    // 7262
		obj[pre + 'touchend' + id] = cb;                                                                                  // 7263
		obj.addEventListener(this.POINTER_UP, cb, false);                                                                 // 7264
		obj.addEventListener(this.POINTER_CANCEL, cb, false);                                                             // 7265
                                                                                                                    // 7266
		return this;                                                                                                      // 7267
	},                                                                                                                 // 7268
                                                                                                                    // 7269
	removePointerListener: function (obj, type, id) {                                                                  // 7270
		var pre = '_leaflet_',                                                                                            // 7271
		    cb = obj[pre + type + id];                                                                                    // 7272
                                                                                                                    // 7273
		switch (type) {                                                                                                   // 7274
		case 'touchstart':                                                                                                // 7275
			obj.removeEventListener(this.POINTER_DOWN, cb, false);                                                           // 7276
			break;                                                                                                           // 7277
		case 'touchmove':                                                                                                 // 7278
			obj.removeEventListener(this.POINTER_MOVE, cb, false);                                                           // 7279
			break;                                                                                                           // 7280
		case 'touchend':                                                                                                  // 7281
			obj.removeEventListener(this.POINTER_UP, cb, false);                                                             // 7282
			obj.removeEventListener(this.POINTER_CANCEL, cb, false);                                                         // 7283
			break;                                                                                                           // 7284
		}                                                                                                                 // 7285
                                                                                                                    // 7286
		return this;                                                                                                      // 7287
	}                                                                                                                  // 7288
});                                                                                                                 // 7289
                                                                                                                    // 7290
                                                                                                                    // 7291
/*                                                                                                                  // 7292
 * L.Handler.TouchZoom is used by L.Map to add pinch zoom on supported mobile browsers.                             // 7293
 */                                                                                                                 // 7294
                                                                                                                    // 7295
L.Map.mergeOptions({                                                                                                // 7296
	touchZoom: L.Browser.touch && !L.Browser.android23,                                                                // 7297
	bounceAtZoomLimits: true                                                                                           // 7298
});                                                                                                                 // 7299
                                                                                                                    // 7300
L.Map.TouchZoom = L.Handler.extend({                                                                                // 7301
	addHooks: function () {                                                                                            // 7302
		L.DomEvent.on(this._map._container, 'touchstart', this._onTouchStart, this);                                      // 7303
	},                                                                                                                 // 7304
                                                                                                                    // 7305
	removeHooks: function () {                                                                                         // 7306
		L.DomEvent.off(this._map._container, 'touchstart', this._onTouchStart, this);                                     // 7307
	},                                                                                                                 // 7308
                                                                                                                    // 7309
	_onTouchStart: function (e) {                                                                                      // 7310
		var map = this._map;                                                                                              // 7311
                                                                                                                    // 7312
		if (!e.touches || e.touches.length !== 2 || map._animatingZoom || this._zooming) { return; }                      // 7313
                                                                                                                    // 7314
		var p1 = map.mouseEventToLayerPoint(e.touches[0]),                                                                // 7315
		    p2 = map.mouseEventToLayerPoint(e.touches[1]),                                                                // 7316
		    viewCenter = map._getCenterLayerPoint();                                                                      // 7317
                                                                                                                    // 7318
		this._startCenter = p1.add(p2)._divideBy(2);                                                                      // 7319
		this._startDist = p1.distanceTo(p2);                                                                              // 7320
                                                                                                                    // 7321
		this._moved = false;                                                                                              // 7322
		this._zooming = true;                                                                                             // 7323
                                                                                                                    // 7324
		this._centerOffset = viewCenter.subtract(this._startCenter);                                                      // 7325
                                                                                                                    // 7326
		if (map._panAnim) {                                                                                               // 7327
			map._panAnim.stop();                                                                                             // 7328
		}                                                                                                                 // 7329
                                                                                                                    // 7330
		L.DomEvent                                                                                                        // 7331
		    .on(document, 'touchmove', this._onTouchMove, this)                                                           // 7332
		    .on(document, 'touchend', this._onTouchEnd, this);                                                            // 7333
                                                                                                                    // 7334
		L.DomEvent.preventDefault(e);                                                                                     // 7335
	},                                                                                                                 // 7336
                                                                                                                    // 7337
	_onTouchMove: function (e) {                                                                                       // 7338
		var map = this._map;                                                                                              // 7339
                                                                                                                    // 7340
		if (!e.touches || e.touches.length !== 2 || !this._zooming) { return; }                                           // 7341
                                                                                                                    // 7342
		var p1 = map.mouseEventToLayerPoint(e.touches[0]),                                                                // 7343
		    p2 = map.mouseEventToLayerPoint(e.touches[1]);                                                                // 7344
                                                                                                                    // 7345
		this._scale = p1.distanceTo(p2) / this._startDist;                                                                // 7346
		this._delta = p1._add(p2)._divideBy(2)._subtract(this._startCenter);                                              // 7347
                                                                                                                    // 7348
		if (this._scale === 1) { return; }                                                                                // 7349
                                                                                                                    // 7350
		if (!map.options.bounceAtZoomLimits) {                                                                            // 7351
			if ((map.getZoom() === map.getMinZoom() && this._scale < 1) ||                                                   // 7352
			    (map.getZoom() === map.getMaxZoom() && this._scale > 1)) { return; }                                         // 7353
		}                                                                                                                 // 7354
                                                                                                                    // 7355
		if (!this._moved) {                                                                                               // 7356
			L.DomUtil.addClass(map._mapPane, 'leaflet-touching');                                                            // 7357
                                                                                                                    // 7358
			map                                                                                                              // 7359
			    .fire('movestart')                                                                                           // 7360
			    .fire('zoomstart');                                                                                          // 7361
                                                                                                                    // 7362
			this._moved = true;                                                                                              // 7363
		}                                                                                                                 // 7364
                                                                                                                    // 7365
		L.Util.cancelAnimFrame(this._animRequest);                                                                        // 7366
		this._animRequest = L.Util.requestAnimFrame(                                                                      // 7367
		        this._updateOnMove, this, true, this._map._container);                                                    // 7368
                                                                                                                    // 7369
		L.DomEvent.preventDefault(e);                                                                                     // 7370
	},                                                                                                                 // 7371
                                                                                                                    // 7372
	_updateOnMove: function () {                                                                                       // 7373
		var map = this._map,                                                                                              // 7374
		    origin = this._getScaleOrigin(),                                                                              // 7375
		    center = map.layerPointToLatLng(origin),                                                                      // 7376
		    zoom = map.getScaleZoom(this._scale);                                                                         // 7377
                                                                                                                    // 7378
		map._animateZoom(center, zoom, this._startCenter, this._scale, this._delta, false, true);                         // 7379
	},                                                                                                                 // 7380
                                                                                                                    // 7381
	_onTouchEnd: function () {                                                                                         // 7382
		if (!this._moved || !this._zooming) {                                                                             // 7383
			this._zooming = false;                                                                                           // 7384
			return;                                                                                                          // 7385
		}                                                                                                                 // 7386
                                                                                                                    // 7387
		var map = this._map;                                                                                              // 7388
                                                                                                                    // 7389
		this._zooming = false;                                                                                            // 7390
		L.DomUtil.removeClass(map._mapPane, 'leaflet-touching');                                                          // 7391
		L.Util.cancelAnimFrame(this._animRequest);                                                                        // 7392
                                                                                                                    // 7393
		L.DomEvent                                                                                                        // 7394
		    .off(document, 'touchmove', this._onTouchMove)                                                                // 7395
		    .off(document, 'touchend', this._onTouchEnd);                                                                 // 7396
                                                                                                                    // 7397
		var origin = this._getScaleOrigin(),                                                                              // 7398
		    center = map.layerPointToLatLng(origin),                                                                      // 7399
                                                                                                                    // 7400
		    oldZoom = map.getZoom(),                                                                                      // 7401
		    floatZoomDelta = map.getScaleZoom(this._scale) - oldZoom,                                                     // 7402
		    roundZoomDelta = (floatZoomDelta > 0 ?                                                                        // 7403
		            Math.ceil(floatZoomDelta) : Math.floor(floatZoomDelta)),                                              // 7404
                                                                                                                    // 7405
		    zoom = map._limitZoom(oldZoom + roundZoomDelta),                                                              // 7406
		    scale = map.getZoomScale(zoom) / this._scale;                                                                 // 7407
                                                                                                                    // 7408
		map._animateZoom(center, zoom, origin, scale);                                                                    // 7409
	},                                                                                                                 // 7410
                                                                                                                    // 7411
	_getScaleOrigin: function () {                                                                                     // 7412
		var centerOffset = this._centerOffset.subtract(this._delta).divideBy(this._scale);                                // 7413
		return this._startCenter.add(centerOffset);                                                                       // 7414
	}                                                                                                                  // 7415
});                                                                                                                 // 7416
                                                                                                                    // 7417
L.Map.addInitHook('addHandler', 'touchZoom', L.Map.TouchZoom);                                                      // 7418
                                                                                                                    // 7419
                                                                                                                    // 7420
/*                                                                                                                  // 7421
 * L.Map.Tap is used to enable mobile hacks like quick taps and long hold.                                          // 7422
 */                                                                                                                 // 7423
                                                                                                                    // 7424
L.Map.mergeOptions({                                                                                                // 7425
	tap: true,                                                                                                         // 7426
	tapTolerance: 15                                                                                                   // 7427
});                                                                                                                 // 7428
                                                                                                                    // 7429
L.Map.Tap = L.Handler.extend({                                                                                      // 7430
	addHooks: function () {                                                                                            // 7431
		L.DomEvent.on(this._map._container, 'touchstart', this._onDown, this);                                            // 7432
	},                                                                                                                 // 7433
                                                                                                                    // 7434
	removeHooks: function () {                                                                                         // 7435
		L.DomEvent.off(this._map._container, 'touchstart', this._onDown, this);                                           // 7436
	},                                                                                                                 // 7437
                                                                                                                    // 7438
	_onDown: function (e) {                                                                                            // 7439
		if (!e.touches) { return; }                                                                                       // 7440
                                                                                                                    // 7441
		L.DomEvent.preventDefault(e);                                                                                     // 7442
                                                                                                                    // 7443
		this._fireClick = true;                                                                                           // 7444
                                                                                                                    // 7445
		// don't simulate click or track longpress if more than 1 touch                                                   // 7446
		if (e.touches.length > 1) {                                                                                       // 7447
			this._fireClick = false;                                                                                         // 7448
			clearTimeout(this._holdTimeout);                                                                                 // 7449
			return;                                                                                                          // 7450
		}                                                                                                                 // 7451
                                                                                                                    // 7452
		var first = e.touches[0],                                                                                         // 7453
		    el = first.target;                                                                                            // 7454
                                                                                                                    // 7455
		this._startPos = this._newPos = new L.Point(first.clientX, first.clientY);                                        // 7456
                                                                                                                    // 7457
		// if touching a link, highlight it                                                                               // 7458
		if (el.tagName && el.tagName.toLowerCase() === 'a') {                                                             // 7459
			L.DomUtil.addClass(el, 'leaflet-active');                                                                        // 7460
		}                                                                                                                 // 7461
                                                                                                                    // 7462
		// simulate long hold but setting a timeout                                                                       // 7463
		this._holdTimeout = setTimeout(L.bind(function () {                                                               // 7464
			if (this._isTapValid()) {                                                                                        // 7465
				this._fireClick = false;                                                                                        // 7466
				this._onUp();                                                                                                   // 7467
				this._simulateEvent('contextmenu', first);                                                                      // 7468
			}                                                                                                                // 7469
		}, this), 1000);                                                                                                  // 7470
                                                                                                                    // 7471
		L.DomEvent                                                                                                        // 7472
			.on(document, 'touchmove', this._onMove, this)                                                                   // 7473
			.on(document, 'touchend', this._onUp, this);                                                                     // 7474
	},                                                                                                                 // 7475
                                                                                                                    // 7476
	_onUp: function (e) {                                                                                              // 7477
		clearTimeout(this._holdTimeout);                                                                                  // 7478
                                                                                                                    // 7479
		L.DomEvent                                                                                                        // 7480
			.off(document, 'touchmove', this._onMove, this)                                                                  // 7481
			.off(document, 'touchend', this._onUp, this);                                                                    // 7482
                                                                                                                    // 7483
		if (this._fireClick && e && e.changedTouches) {                                                                   // 7484
                                                                                                                    // 7485
			var first = e.changedTouches[0],                                                                                 // 7486
			    el = first.target;                                                                                           // 7487
                                                                                                                    // 7488
			if (el && el.tagName && el.tagName.toLowerCase() === 'a') {                                                      // 7489
				L.DomUtil.removeClass(el, 'leaflet-active');                                                                    // 7490
			}                                                                                                                // 7491
                                                                                                                    // 7492
			// simulate click if the touch didn't move too much                                                              // 7493
			if (this._isTapValid()) {                                                                                        // 7494
				this._simulateEvent('click', first);                                                                            // 7495
			}                                                                                                                // 7496
		}                                                                                                                 // 7497
	},                                                                                                                 // 7498
                                                                                                                    // 7499
	_isTapValid: function () {                                                                                         // 7500
		return this._newPos.distanceTo(this._startPos) <= this._map.options.tapTolerance;                                 // 7501
	},                                                                                                                 // 7502
                                                                                                                    // 7503
	_onMove: function (e) {                                                                                            // 7504
		var first = e.touches[0];                                                                                         // 7505
		this._newPos = new L.Point(first.clientX, first.clientY);                                                         // 7506
	},                                                                                                                 // 7507
                                                                                                                    // 7508
	_simulateEvent: function (type, e) {                                                                               // 7509
		var simulatedEvent = document.createEvent('MouseEvents');                                                         // 7510
                                                                                                                    // 7511
		simulatedEvent._simulated = true;                                                                                 // 7512
		e.target._simulatedClick = true;                                                                                  // 7513
                                                                                                                    // 7514
		simulatedEvent.initMouseEvent(                                                                                    // 7515
		        type, true, true, window, 1,                                                                              // 7516
		        e.screenX, e.screenY,                                                                                     // 7517
		        e.clientX, e.clientY,                                                                                     // 7518
		        false, false, false, false, 0, null);                                                                     // 7519
                                                                                                                    // 7520
		e.target.dispatchEvent(simulatedEvent);                                                                           // 7521
	}                                                                                                                  // 7522
});                                                                                                                 // 7523
                                                                                                                    // 7524
if (L.Browser.touch && !L.Browser.pointer) {                                                                        // 7525
	L.Map.addInitHook('addHandler', 'tap', L.Map.Tap);                                                                 // 7526
}                                                                                                                   // 7527
                                                                                                                    // 7528
                                                                                                                    // 7529
/*                                                                                                                  // 7530
 * L.Handler.ShiftDragZoom is used to add shift-drag zoom interaction to the map                                    // 7531
  * (zoom to a selected bounding box), enabled by default.                                                          // 7532
 */                                                                                                                 // 7533
                                                                                                                    // 7534
L.Map.mergeOptions({                                                                                                // 7535
	boxZoom: true                                                                                                      // 7536
});                                                                                                                 // 7537
                                                                                                                    // 7538
L.Map.BoxZoom = L.Handler.extend({                                                                                  // 7539
	initialize: function (map) {                                                                                       // 7540
		this._map = map;                                                                                                  // 7541
		this._container = map._container;                                                                                 // 7542
		this._pane = map._panes.overlayPane;                                                                              // 7543
		this._moved = false;                                                                                              // 7544
	},                                                                                                                 // 7545
                                                                                                                    // 7546
	addHooks: function () {                                                                                            // 7547
		L.DomEvent.on(this._container, 'mousedown', this._onMouseDown, this);                                             // 7548
	},                                                                                                                 // 7549
                                                                                                                    // 7550
	removeHooks: function () {                                                                                         // 7551
		L.DomEvent.off(this._container, 'mousedown', this._onMouseDown);                                                  // 7552
		this._moved = false;                                                                                              // 7553
	},                                                                                                                 // 7554
                                                                                                                    // 7555
	moved: function () {                                                                                               // 7556
		return this._moved;                                                                                               // 7557
	},                                                                                                                 // 7558
                                                                                                                    // 7559
	_onMouseDown: function (e) {                                                                                       // 7560
		this._moved = false;                                                                                              // 7561
                                                                                                                    // 7562
		if (!e.shiftKey || ((e.which !== 1) && (e.button !== 1))) { return false; }                                       // 7563
                                                                                                                    // 7564
		L.DomUtil.disableTextSelection();                                                                                 // 7565
		L.DomUtil.disableImageDrag();                                                                                     // 7566
                                                                                                                    // 7567
		this._startLayerPoint = this._map.mouseEventToLayerPoint(e);                                                      // 7568
                                                                                                                    // 7569
		L.DomEvent                                                                                                        // 7570
		    .on(document, 'mousemove', this._onMouseMove, this)                                                           // 7571
		    .on(document, 'mouseup', this._onMouseUp, this)                                                               // 7572
		    .on(document, 'keydown', this._onKeyDown, this);                                                              // 7573
	},                                                                                                                 // 7574
                                                                                                                    // 7575
	_onMouseMove: function (e) {                                                                                       // 7576
		if (!this._moved) {                                                                                               // 7577
			this._box = L.DomUtil.create('div', 'leaflet-zoom-box', this._pane);                                             // 7578
			L.DomUtil.setPosition(this._box, this._startLayerPoint);                                                         // 7579
                                                                                                                    // 7580
			//TODO refactor: move cursor to styles                                                                           // 7581
			this._container.style.cursor = 'crosshair';                                                                      // 7582
			this._map.fire('boxzoomstart');                                                                                  // 7583
		}                                                                                                                 // 7584
                                                                                                                    // 7585
		var startPoint = this._startLayerPoint,                                                                           // 7586
		    box = this._box,                                                                                              // 7587
                                                                                                                    // 7588
		    layerPoint = this._map.mouseEventToLayerPoint(e),                                                             // 7589
		    offset = layerPoint.subtract(startPoint),                                                                     // 7590
                                                                                                                    // 7591
		    newPos = new L.Point(                                                                                         // 7592
		        Math.min(layerPoint.x, startPoint.x),                                                                     // 7593
		        Math.min(layerPoint.y, startPoint.y));                                                                    // 7594
                                                                                                                    // 7595
		L.DomUtil.setPosition(box, newPos);                                                                               // 7596
                                                                                                                    // 7597
		this._moved = true;                                                                                               // 7598
                                                                                                                    // 7599
		// TODO refactor: remove hardcoded 4 pixels                                                                       // 7600
		box.style.width  = (Math.max(0, Math.abs(offset.x) - 4)) + 'px';                                                  // 7601
		box.style.height = (Math.max(0, Math.abs(offset.y) - 4)) + 'px';                                                  // 7602
	},                                                                                                                 // 7603
                                                                                                                    // 7604
	_finish: function () {                                                                                             // 7605
		if (this._moved) {                                                                                                // 7606
			this._pane.removeChild(this._box);                                                                               // 7607
			this._container.style.cursor = '';                                                                               // 7608
		}                                                                                                                 // 7609
                                                                                                                    // 7610
		L.DomUtil.enableTextSelection();                                                                                  // 7611
		L.DomUtil.enableImageDrag();                                                                                      // 7612
                                                                                                                    // 7613
		L.DomEvent                                                                                                        // 7614
		    .off(document, 'mousemove', this._onMouseMove)                                                                // 7615
		    .off(document, 'mouseup', this._onMouseUp)                                                                    // 7616
		    .off(document, 'keydown', this._onKeyDown);                                                                   // 7617
	},                                                                                                                 // 7618
                                                                                                                    // 7619
	_onMouseUp: function (e) {                                                                                         // 7620
                                                                                                                    // 7621
		this._finish();                                                                                                   // 7622
                                                                                                                    // 7623
		var map = this._map,                                                                                              // 7624
		    layerPoint = map.mouseEventToLayerPoint(e);                                                                   // 7625
                                                                                                                    // 7626
		if (this._startLayerPoint.equals(layerPoint)) { return; }                                                         // 7627
                                                                                                                    // 7628
		var bounds = new L.LatLngBounds(                                                                                  // 7629
		        map.layerPointToLatLng(this._startLayerPoint),                                                            // 7630
		        map.layerPointToLatLng(layerPoint));                                                                      // 7631
                                                                                                                    // 7632
		map.fitBounds(bounds);                                                                                            // 7633
                                                                                                                    // 7634
		map.fire('boxzoomend', {                                                                                          // 7635
			boxZoomBounds: bounds                                                                                            // 7636
		});                                                                                                               // 7637
	},                                                                                                                 // 7638
                                                                                                                    // 7639
	_onKeyDown: function (e) {                                                                                         // 7640
		if (e.keyCode === 27) {                                                                                           // 7641
			this._finish();                                                                                                  // 7642
		}                                                                                                                 // 7643
	}                                                                                                                  // 7644
});                                                                                                                 // 7645
                                                                                                                    // 7646
L.Map.addInitHook('addHandler', 'boxZoom', L.Map.BoxZoom);                                                          // 7647
                                                                                                                    // 7648
                                                                                                                    // 7649
/*                                                                                                                  // 7650
 * L.Map.Keyboard is handling keyboard interaction with the map, enabled by default.                                // 7651
 */                                                                                                                 // 7652
                                                                                                                    // 7653
L.Map.mergeOptions({                                                                                                // 7654
	keyboard: true,                                                                                                    // 7655
	keyboardPanOffset: 80,                                                                                             // 7656
	keyboardZoomOffset: 1                                                                                              // 7657
});                                                                                                                 // 7658
                                                                                                                    // 7659
L.Map.Keyboard = L.Handler.extend({                                                                                 // 7660
                                                                                                                    // 7661
	keyCodes: {                                                                                                        // 7662
		left:    [37],                                                                                                    // 7663
		right:   [39],                                                                                                    // 7664
		down:    [40],                                                                                                    // 7665
		up:      [38],                                                                                                    // 7666
		zoomIn:  [187, 107, 61, 171],                                                                                     // 7667
		zoomOut: [189, 109, 173]                                                                                          // 7668
	},                                                                                                                 // 7669
                                                                                                                    // 7670
	initialize: function (map) {                                                                                       // 7671
		this._map = map;                                                                                                  // 7672
                                                                                                                    // 7673
		this._setPanOffset(map.options.keyboardPanOffset);                                                                // 7674
		this._setZoomOffset(map.options.keyboardZoomOffset);                                                              // 7675
	},                                                                                                                 // 7676
                                                                                                                    // 7677
	addHooks: function () {                                                                                            // 7678
		var container = this._map._container;                                                                             // 7679
                                                                                                                    // 7680
		// make the container focusable by tabbing                                                                        // 7681
		if (container.tabIndex === -1) {                                                                                  // 7682
			container.tabIndex = '0';                                                                                        // 7683
		}                                                                                                                 // 7684
                                                                                                                    // 7685
		L.DomEvent                                                                                                        // 7686
		    .on(container, 'focus', this._onFocus, this)                                                                  // 7687
		    .on(container, 'blur', this._onBlur, this)                                                                    // 7688
		    .on(container, 'mousedown', this._onMouseDown, this);                                                         // 7689
                                                                                                                    // 7690
		this._map                                                                                                         // 7691
		    .on('focus', this._addHooks, this)                                                                            // 7692
		    .on('blur', this._removeHooks, this);                                                                         // 7693
	},                                                                                                                 // 7694
                                                                                                                    // 7695
	removeHooks: function () {                                                                                         // 7696
		this._removeHooks();                                                                                              // 7697
                                                                                                                    // 7698
		var container = this._map._container;                                                                             // 7699
                                                                                                                    // 7700
		L.DomEvent                                                                                                        // 7701
		    .off(container, 'focus', this._onFocus, this)                                                                 // 7702
		    .off(container, 'blur', this._onBlur, this)                                                                   // 7703
		    .off(container, 'mousedown', this._onMouseDown, this);                                                        // 7704
                                                                                                                    // 7705
		this._map                                                                                                         // 7706
		    .off('focus', this._addHooks, this)                                                                           // 7707
		    .off('blur', this._removeHooks, this);                                                                        // 7708
	},                                                                                                                 // 7709
                                                                                                                    // 7710
	_onMouseDown: function () {                                                                                        // 7711
		if (this._focused) { return; }                                                                                    // 7712
                                                                                                                    // 7713
		var body = document.body,                                                                                         // 7714
		    docEl = document.documentElement,                                                                             // 7715
		    top = body.scrollTop || docEl.scrollTop,                                                                      // 7716
		    left = body.scrollLeft || docEl.scrollLeft;                                                                   // 7717
                                                                                                                    // 7718
		this._map._container.focus();                                                                                     // 7719
                                                                                                                    // 7720
		window.scrollTo(left, top);                                                                                       // 7721
	},                                                                                                                 // 7722
                                                                                                                    // 7723
	_onFocus: function () {                                                                                            // 7724
		this._focused = true;                                                                                             // 7725
		this._map.fire('focus');                                                                                          // 7726
	},                                                                                                                 // 7727
                                                                                                                    // 7728
	_onBlur: function () {                                                                                             // 7729
		this._focused = false;                                                                                            // 7730
		this._map.fire('blur');                                                                                           // 7731
	},                                                                                                                 // 7732
                                                                                                                    // 7733
	_setPanOffset: function (pan) {                                                                                    // 7734
		var keys = this._panKeys = {},                                                                                    // 7735
		    codes = this.keyCodes,                                                                                        // 7736
		    i, len;                                                                                                       // 7737
                                                                                                                    // 7738
		for (i = 0, len = codes.left.length; i < len; i++) {                                                              // 7739
			keys[codes.left[i]] = [-1 * pan, 0];                                                                             // 7740
		}                                                                                                                 // 7741
		for (i = 0, len = codes.right.length; i < len; i++) {                                                             // 7742
			keys[codes.right[i]] = [pan, 0];                                                                                 // 7743
		}                                                                                                                 // 7744
		for (i = 0, len = codes.down.length; i < len; i++) {                                                              // 7745
			keys[codes.down[i]] = [0, pan];                                                                                  // 7746
		}                                                                                                                 // 7747
		for (i = 0, len = codes.up.length; i < len; i++) {                                                                // 7748
			keys[codes.up[i]] = [0, -1 * pan];                                                                               // 7749
		}                                                                                                                 // 7750
	},                                                                                                                 // 7751
                                                                                                                    // 7752
	_setZoomOffset: function (zoom) {                                                                                  // 7753
		var keys = this._zoomKeys = {},                                                                                   // 7754
		    codes = this.keyCodes,                                                                                        // 7755
		    i, len;                                                                                                       // 7756
                                                                                                                    // 7757
		for (i = 0, len = codes.zoomIn.length; i < len; i++) {                                                            // 7758
			keys[codes.zoomIn[i]] = zoom;                                                                                    // 7759
		}                                                                                                                 // 7760
		for (i = 0, len = codes.zoomOut.length; i < len; i++) {                                                           // 7761
			keys[codes.zoomOut[i]] = -zoom;                                                                                  // 7762
		}                                                                                                                 // 7763
	},                                                                                                                 // 7764
                                                                                                                    // 7765
	_addHooks: function () {                                                                                           // 7766
		L.DomEvent.on(document, 'keydown', this._onKeyDown, this);                                                        // 7767
	},                                                                                                                 // 7768
                                                                                                                    // 7769
	_removeHooks: function () {                                                                                        // 7770
		L.DomEvent.off(document, 'keydown', this._onKeyDown, this);                                                       // 7771
	},                                                                                                                 // 7772
                                                                                                                    // 7773
	_onKeyDown: function (e) {                                                                                         // 7774
		var key = e.keyCode,                                                                                              // 7775
		    map = this._map;                                                                                              // 7776
                                                                                                                    // 7777
		if (key in this._panKeys) {                                                                                       // 7778
                                                                                                                    // 7779
			if (map._panAnim && map._panAnim._inProgress) { return; }                                                        // 7780
                                                                                                                    // 7781
			map.panBy(this._panKeys[key]);                                                                                   // 7782
                                                                                                                    // 7783
			if (map.options.maxBounds) {                                                                                     // 7784
				map.panInsideBounds(map.options.maxBounds);                                                                     // 7785
			}                                                                                                                // 7786
                                                                                                                    // 7787
		} else if (key in this._zoomKeys) {                                                                               // 7788
			map.setZoom(map.getZoom() + this._zoomKeys[key]);                                                                // 7789
                                                                                                                    // 7790
		} else {                                                                                                          // 7791
			return;                                                                                                          // 7792
		}                                                                                                                 // 7793
                                                                                                                    // 7794
		L.DomEvent.stop(e);                                                                                               // 7795
	}                                                                                                                  // 7796
});                                                                                                                 // 7797
                                                                                                                    // 7798
L.Map.addInitHook('addHandler', 'keyboard', L.Map.Keyboard);                                                        // 7799
                                                                                                                    // 7800
                                                                                                                    // 7801
/*                                                                                                                  // 7802
 * L.Handler.MarkerDrag is used internally by L.Marker to make the markers draggable.                               // 7803
 */                                                                                                                 // 7804
                                                                                                                    // 7805
L.Handler.MarkerDrag = L.Handler.extend({                                                                           // 7806
	initialize: function (marker) {                                                                                    // 7807
		this._marker = marker;                                                                                            // 7808
	},                                                                                                                 // 7809
                                                                                                                    // 7810
	addHooks: function () {                                                                                            // 7811
		var icon = this._marker._icon;                                                                                    // 7812
		if (!this._draggable) {                                                                                           // 7813
			this._draggable = new L.Draggable(icon, icon);                                                                   // 7814
		}                                                                                                                 // 7815
                                                                                                                    // 7816
		this._draggable                                                                                                   // 7817
			.on('dragstart', this._onDragStart, this)                                                                        // 7818
			.on('drag', this._onDrag, this)                                                                                  // 7819
			.on('dragend', this._onDragEnd, this);                                                                           // 7820
		this._draggable.enable();                                                                                         // 7821
		L.DomUtil.addClass(this._marker._icon, 'leaflet-marker-draggable');                                               // 7822
	},                                                                                                                 // 7823
                                                                                                                    // 7824
	removeHooks: function () {                                                                                         // 7825
		this._draggable                                                                                                   // 7826
			.off('dragstart', this._onDragStart, this)                                                                       // 7827
			.off('drag', this._onDrag, this)                                                                                 // 7828
			.off('dragend', this._onDragEnd, this);                                                                          // 7829
                                                                                                                    // 7830
		this._draggable.disable();                                                                                        // 7831
		L.DomUtil.removeClass(this._marker._icon, 'leaflet-marker-draggable');                                            // 7832
	},                                                                                                                 // 7833
                                                                                                                    // 7834
	moved: function () {                                                                                               // 7835
		return this._draggable && this._draggable._moved;                                                                 // 7836
	},                                                                                                                 // 7837
                                                                                                                    // 7838
	_onDragStart: function () {                                                                                        // 7839
		this._marker                                                                                                      // 7840
		    .closePopup()                                                                                                 // 7841
		    .fire('movestart')                                                                                            // 7842
		    .fire('dragstart');                                                                                           // 7843
	},                                                                                                                 // 7844
                                                                                                                    // 7845
	_onDrag: function () {                                                                                             // 7846
		var marker = this._marker,                                                                                        // 7847
		    shadow = marker._shadow,                                                                                      // 7848
		    iconPos = L.DomUtil.getPosition(marker._icon),                                                                // 7849
		    latlng = marker._map.layerPointToLatLng(iconPos);                                                             // 7850
                                                                                                                    // 7851
		// update shadow position                                                                                         // 7852
		if (shadow) {                                                                                                     // 7853
			L.DomUtil.setPosition(shadow, iconPos);                                                                          // 7854
		}                                                                                                                 // 7855
                                                                                                                    // 7856
		marker._latlng = latlng;                                                                                          // 7857
                                                                                                                    // 7858
		marker                                                                                                            // 7859
		    .fire('move', {latlng: latlng})                                                                               // 7860
		    .fire('drag');                                                                                                // 7861
	},                                                                                                                 // 7862
                                                                                                                    // 7863
	_onDragEnd: function (e) {                                                                                         // 7864
		this._marker                                                                                                      // 7865
		    .fire('moveend')                                                                                              // 7866
		    .fire('dragend', e);                                                                                          // 7867
	}                                                                                                                  // 7868
});                                                                                                                 // 7869
                                                                                                                    // 7870
                                                                                                                    // 7871
/*                                                                                                                  // 7872
 * L.Control is a base class for implementing map controls. Handles positioning.                                    // 7873
 * All other controls extend from this class.                                                                       // 7874
 */                                                                                                                 // 7875
                                                                                                                    // 7876
L.Control = L.Class.extend({                                                                                        // 7877
	options: {                                                                                                         // 7878
		position: 'topright'                                                                                              // 7879
	},                                                                                                                 // 7880
                                                                                                                    // 7881
	initialize: function (options) {                                                                                   // 7882
		L.setOptions(this, options);                                                                                      // 7883
	},                                                                                                                 // 7884
                                                                                                                    // 7885
	getPosition: function () {                                                                                         // 7886
		return this.options.position;                                                                                     // 7887
	},                                                                                                                 // 7888
                                                                                                                    // 7889
	setPosition: function (position) {                                                                                 // 7890
		var map = this._map;                                                                                              // 7891
                                                                                                                    // 7892
		if (map) {                                                                                                        // 7893
			map.removeControl(this);                                                                                         // 7894
		}                                                                                                                 // 7895
                                                                                                                    // 7896
		this.options.position = position;                                                                                 // 7897
                                                                                                                    // 7898
		if (map) {                                                                                                        // 7899
			map.addControl(this);                                                                                            // 7900
		}                                                                                                                 // 7901
                                                                                                                    // 7902
		return this;                                                                                                      // 7903
	},                                                                                                                 // 7904
                                                                                                                    // 7905
	getContainer: function () {                                                                                        // 7906
		return this._container;                                                                                           // 7907
	},                                                                                                                 // 7908
                                                                                                                    // 7909
	addTo: function (map) {                                                                                            // 7910
		this._map = map;                                                                                                  // 7911
                                                                                                                    // 7912
		var container = this._container = this.onAdd(map),                                                                // 7913
		    pos = this.getPosition(),                                                                                     // 7914
		    corner = map._controlCorners[pos];                                                                            // 7915
                                                                                                                    // 7916
		L.DomUtil.addClass(container, 'leaflet-control');                                                                 // 7917
                                                                                                                    // 7918
		if (pos.indexOf('bottom') !== -1) {                                                                               // 7919
			corner.insertBefore(container, corner.firstChild);                                                               // 7920
		} else {                                                                                                          // 7921
			corner.appendChild(container);                                                                                   // 7922
		}                                                                                                                 // 7923
                                                                                                                    // 7924
		return this;                                                                                                      // 7925
	},                                                                                                                 // 7926
                                                                                                                    // 7927
	removeFrom: function (map) {                                                                                       // 7928
		var pos = this.getPosition(),                                                                                     // 7929
		    corner = map._controlCorners[pos];                                                                            // 7930
                                                                                                                    // 7931
		corner.removeChild(this._container);                                                                              // 7932
		this._map = null;                                                                                                 // 7933
                                                                                                                    // 7934
		if (this.onRemove) {                                                                                              // 7935
			this.onRemove(map);                                                                                              // 7936
		}                                                                                                                 // 7937
                                                                                                                    // 7938
		return this;                                                                                                      // 7939
	},                                                                                                                 // 7940
                                                                                                                    // 7941
	_refocusOnMap: function () {                                                                                       // 7942
		if (this._map) {                                                                                                  // 7943
			this._map.getContainer().focus();                                                                                // 7944
		}                                                                                                                 // 7945
	}                                                                                                                  // 7946
});                                                                                                                 // 7947
                                                                                                                    // 7948
L.control = function (options) {                                                                                    // 7949
	return new L.Control(options);                                                                                     // 7950
};                                                                                                                  // 7951
                                                                                                                    // 7952
                                                                                                                    // 7953
// adds control-related methods to L.Map                                                                            // 7954
                                                                                                                    // 7955
L.Map.include({                                                                                                     // 7956
	addControl: function (control) {                                                                                   // 7957
		control.addTo(this);                                                                                              // 7958
		return this;                                                                                                      // 7959
	},                                                                                                                 // 7960
                                                                                                                    // 7961
	removeControl: function (control) {                                                                                // 7962
		control.removeFrom(this);                                                                                         // 7963
		return this;                                                                                                      // 7964
	},                                                                                                                 // 7965
                                                                                                                    // 7966
	_initControlPos: function () {                                                                                     // 7967
		var corners = this._controlCorners = {},                                                                          // 7968
		    l = 'leaflet-',                                                                                               // 7969
		    container = this._controlContainer =                                                                          // 7970
		            L.DomUtil.create('div', l + 'control-container', this._container);                                    // 7971
                                                                                                                    // 7972
		function createCorner(vSide, hSide) {                                                                             // 7973
			var className = l + vSide + ' ' + l + hSide;                                                                     // 7974
                                                                                                                    // 7975
			corners[vSide + hSide] = L.DomUtil.create('div', className, container);                                          // 7976
		}                                                                                                                 // 7977
                                                                                                                    // 7978
		createCorner('top', 'left');                                                                                      // 7979
		createCorner('top', 'right');                                                                                     // 7980
		createCorner('bottom', 'left');                                                                                   // 7981
		createCorner('bottom', 'right');                                                                                  // 7982
	},                                                                                                                 // 7983
                                                                                                                    // 7984
	_clearControlPos: function () {                                                                                    // 7985
		this._container.removeChild(this._controlContainer);                                                              // 7986
	}                                                                                                                  // 7987
});                                                                                                                 // 7988
                                                                                                                    // 7989
                                                                                                                    // 7990
/*                                                                                                                  // 7991
 * L.Control.Zoom is used for the default zoom buttons on the map.                                                  // 7992
 */                                                                                                                 // 7993
                                                                                                                    // 7994
L.Control.Zoom = L.Control.extend({                                                                                 // 7995
	options: {                                                                                                         // 7996
		position: 'topleft',                                                                                              // 7997
		zoomInText: '+',                                                                                                  // 7998
		zoomInTitle: 'Zoom in',                                                                                           // 7999
		zoomOutText: '-',                                                                                                 // 8000
		zoomOutTitle: 'Zoom out'                                                                                          // 8001
	},                                                                                                                 // 8002
                                                                                                                    // 8003
	onAdd: function (map) {                                                                                            // 8004
		var zoomName = 'leaflet-control-zoom',                                                                            // 8005
		    container = L.DomUtil.create('div', zoomName + ' leaflet-bar');                                               // 8006
                                                                                                                    // 8007
		this._map = map;                                                                                                  // 8008
                                                                                                                    // 8009
		this._zoomInButton  = this._createButton(                                                                         // 8010
		        this.options.zoomInText, this.options.zoomInTitle,                                                        // 8011
		        zoomName + '-in',  container, this._zoomIn,  this);                                                       // 8012
		this._zoomOutButton = this._createButton(                                                                         // 8013
		        this.options.zoomOutText, this.options.zoomOutTitle,                                                      // 8014
		        zoomName + '-out', container, this._zoomOut, this);                                                       // 8015
                                                                                                                    // 8016
		this._updateDisabled();                                                                                           // 8017
		map.on('zoomend zoomlevelschange', this._updateDisabled, this);                                                   // 8018
                                                                                                                    // 8019
		return container;                                                                                                 // 8020
	},                                                                                                                 // 8021
                                                                                                                    // 8022
	onRemove: function (map) {                                                                                         // 8023
		map.off('zoomend zoomlevelschange', this._updateDisabled, this);                                                  // 8024
	},                                                                                                                 // 8025
                                                                                                                    // 8026
	_zoomIn: function (e) {                                                                                            // 8027
		this._map.zoomIn(e.shiftKey ? 3 : 1);                                                                             // 8028
	},                                                                                                                 // 8029
                                                                                                                    // 8030
	_zoomOut: function (e) {                                                                                           // 8031
		this._map.zoomOut(e.shiftKey ? 3 : 1);                                                                            // 8032
	},                                                                                                                 // 8033
                                                                                                                    // 8034
	_createButton: function (html, title, className, container, fn, context) {                                         // 8035
		var link = L.DomUtil.create('a', className, container);                                                           // 8036
		link.innerHTML = html;                                                                                            // 8037
		link.href = '#';                                                                                                  // 8038
		link.title = title;                                                                                               // 8039
                                                                                                                    // 8040
		var stop = L.DomEvent.stopPropagation;                                                                            // 8041
                                                                                                                    // 8042
		L.DomEvent                                                                                                        // 8043
		    .on(link, 'click', stop)                                                                                      // 8044
		    .on(link, 'mousedown', stop)                                                                                  // 8045
		    .on(link, 'dblclick', stop)                                                                                   // 8046
		    .on(link, 'click', L.DomEvent.preventDefault)                                                                 // 8047
		    .on(link, 'click', fn, context)                                                                               // 8048
		    .on(link, 'click', this._refocusOnMap, context);                                                              // 8049
                                                                                                                    // 8050
		return link;                                                                                                      // 8051
	},                                                                                                                 // 8052
                                                                                                                    // 8053
	_updateDisabled: function () {                                                                                     // 8054
		var map = this._map,                                                                                              // 8055
			className = 'leaflet-disabled';                                                                                  // 8056
                                                                                                                    // 8057
		L.DomUtil.removeClass(this._zoomInButton, className);                                                             // 8058
		L.DomUtil.removeClass(this._zoomOutButton, className);                                                            // 8059
                                                                                                                    // 8060
		if (map._zoom === map.getMinZoom()) {                                                                             // 8061
			L.DomUtil.addClass(this._zoomOutButton, className);                                                              // 8062
		}                                                                                                                 // 8063
		if (map._zoom === map.getMaxZoom()) {                                                                             // 8064
			L.DomUtil.addClass(this._zoomInButton, className);                                                               // 8065
		}                                                                                                                 // 8066
	}                                                                                                                  // 8067
});                                                                                                                 // 8068
                                                                                                                    // 8069
L.Map.mergeOptions({                                                                                                // 8070
	zoomControl: true                                                                                                  // 8071
});                                                                                                                 // 8072
                                                                                                                    // 8073
L.Map.addInitHook(function () {                                                                                     // 8074
	if (this.options.zoomControl) {                                                                                    // 8075
		this.zoomControl = new L.Control.Zoom();                                                                          // 8076
		this.addControl(this.zoomControl);                                                                                // 8077
	}                                                                                                                  // 8078
});                                                                                                                 // 8079
                                                                                                                    // 8080
L.control.zoom = function (options) {                                                                               // 8081
	return new L.Control.Zoom(options);                                                                                // 8082
};                                                                                                                  // 8083
                                                                                                                    // 8084
                                                                                                                    // 8085
                                                                                                                    // 8086
/*                                                                                                                  // 8087
 * L.Control.Attribution is used for displaying attribution on the map (added by default).                          // 8088
 */                                                                                                                 // 8089
                                                                                                                    // 8090
L.Control.Attribution = L.Control.extend({                                                                          // 8091
	options: {                                                                                                         // 8092
		position: 'bottomright',                                                                                          // 8093
		prefix: '<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'                    // 8094
	},                                                                                                                 // 8095
                                                                                                                    // 8096
	initialize: function (options) {                                                                                   // 8097
		L.setOptions(this, options);                                                                                      // 8098
                                                                                                                    // 8099
		this._attributions = {};                                                                                          // 8100
	},                                                                                                                 // 8101
                                                                                                                    // 8102
	onAdd: function (map) {                                                                                            // 8103
		this._container = L.DomUtil.create('div', 'leaflet-control-attribution');                                         // 8104
		L.DomEvent.disableClickPropagation(this._container);                                                              // 8105
                                                                                                                    // 8106
		for (var i in map._layers) {                                                                                      // 8107
			if (map._layers[i].getAttribution) {                                                                             // 8108
				this.addAttribution(map._layers[i].getAttribution());                                                           // 8109
			}                                                                                                                // 8110
		}                                                                                                                 // 8111
		                                                                                                                  // 8112
		map                                                                                                               // 8113
		    .on('layeradd', this._onLayerAdd, this)                                                                       // 8114
		    .on('layerremove', this._onLayerRemove, this);                                                                // 8115
                                                                                                                    // 8116
		this._update();                                                                                                   // 8117
                                                                                                                    // 8118
		return this._container;                                                                                           // 8119
	},                                                                                                                 // 8120
                                                                                                                    // 8121
	onRemove: function (map) {                                                                                         // 8122
		map                                                                                                               // 8123
		    .off('layeradd', this._onLayerAdd)                                                                            // 8124
		    .off('layerremove', this._onLayerRemove);                                                                     // 8125
                                                                                                                    // 8126
	},                                                                                                                 // 8127
                                                                                                                    // 8128
	setPrefix: function (prefix) {                                                                                     // 8129
		this.options.prefix = prefix;                                                                                     // 8130
		this._update();                                                                                                   // 8131
		return this;                                                                                                      // 8132
	},                                                                                                                 // 8133
                                                                                                                    // 8134
	addAttribution: function (text) {                                                                                  // 8135
		if (!text) { return; }                                                                                            // 8136
                                                                                                                    // 8137
		if (!this._attributions[text]) {                                                                                  // 8138
			this._attributions[text] = 0;                                                                                    // 8139
		}                                                                                                                 // 8140
		this._attributions[text]++;                                                                                       // 8141
                                                                                                                    // 8142
		this._update();                                                                                                   // 8143
                                                                                                                    // 8144
		return this;                                                                                                      // 8145
	},                                                                                                                 // 8146
                                                                                                                    // 8147
	removeAttribution: function (text) {                                                                               // 8148
		if (!text) { return; }                                                                                            // 8149
                                                                                                                    // 8150
		if (this._attributions[text]) {                                                                                   // 8151
			this._attributions[text]--;                                                                                      // 8152
			this._update();                                                                                                  // 8153
		}                                                                                                                 // 8154
                                                                                                                    // 8155
		return this;                                                                                                      // 8156
	},                                                                                                                 // 8157
                                                                                                                    // 8158
	_update: function () {                                                                                             // 8159
		if (!this._map) { return; }                                                                                       // 8160
                                                                                                                    // 8161
		var attribs = [];                                                                                                 // 8162
                                                                                                                    // 8163
		for (var i in this._attributions) {                                                                               // 8164
			if (this._attributions[i]) {                                                                                     // 8165
				attribs.push(i);                                                                                                // 8166
			}                                                                                                                // 8167
		}                                                                                                                 // 8168
                                                                                                                    // 8169
		var prefixAndAttribs = [];                                                                                        // 8170
                                                                                                                    // 8171
		if (this.options.prefix) {                                                                                        // 8172
			prefixAndAttribs.push(this.options.prefix);                                                                      // 8173
		}                                                                                                                 // 8174
		if (attribs.length) {                                                                                             // 8175
			prefixAndAttribs.push(attribs.join(', '));                                                                       // 8176
		}                                                                                                                 // 8177
                                                                                                                    // 8178
		this._container.innerHTML = prefixAndAttribs.join(' | ');                                                         // 8179
	},                                                                                                                 // 8180
                                                                                                                    // 8181
	_onLayerAdd: function (e) {                                                                                        // 8182
		if (e.layer.getAttribution) {                                                                                     // 8183
			this.addAttribution(e.layer.getAttribution());                                                                   // 8184
		}                                                                                                                 // 8185
	},                                                                                                                 // 8186
                                                                                                                    // 8187
	_onLayerRemove: function (e) {                                                                                     // 8188
		if (e.layer.getAttribution) {                                                                                     // 8189
			this.removeAttribution(e.layer.getAttribution());                                                                // 8190
		}                                                                                                                 // 8191
	}                                                                                                                  // 8192
});                                                                                                                 // 8193
                                                                                                                    // 8194
L.Map.mergeOptions({                                                                                                // 8195
	attributionControl: true                                                                                           // 8196
});                                                                                                                 // 8197
                                                                                                                    // 8198
L.Map.addInitHook(function () {                                                                                     // 8199
	if (this.options.attributionControl) {                                                                             // 8200
		this.attributionControl = (new L.Control.Attribution()).addTo(this);                                              // 8201
	}                                                                                                                  // 8202
});                                                                                                                 // 8203
                                                                                                                    // 8204
L.control.attribution = function (options) {                                                                        // 8205
	return new L.Control.Attribution(options);                                                                         // 8206
};                                                                                                                  // 8207
                                                                                                                    // 8208
                                                                                                                    // 8209
/*                                                                                                                  // 8210
 * L.Control.Scale is used for displaying metric/imperial scale on the map.                                         // 8211
 */                                                                                                                 // 8212
                                                                                                                    // 8213
L.Control.Scale = L.Control.extend({                                                                                // 8214
	options: {                                                                                                         // 8215
		position: 'bottomleft',                                                                                           // 8216
		maxWidth: 100,                                                                                                    // 8217
		metric: true,                                                                                                     // 8218
		imperial: true,                                                                                                   // 8219
		updateWhenIdle: false                                                                                             // 8220
	},                                                                                                                 // 8221
                                                                                                                    // 8222
	onAdd: function (map) {                                                                                            // 8223
		this._map = map;                                                                                                  // 8224
                                                                                                                    // 8225
		var className = 'leaflet-control-scale',                                                                          // 8226
		    container = L.DomUtil.create('div', className),                                                               // 8227
		    options = this.options;                                                                                       // 8228
                                                                                                                    // 8229
		this._addScales(options, className, container);                                                                   // 8230
                                                                                                                    // 8231
		map.on(options.updateWhenIdle ? 'moveend' : 'move', this._update, this);                                          // 8232
		map.whenReady(this._update, this);                                                                                // 8233
                                                                                                                    // 8234
		return container;                                                                                                 // 8235
	},                                                                                                                 // 8236
                                                                                                                    // 8237
	onRemove: function (map) {                                                                                         // 8238
		map.off(this.options.updateWhenIdle ? 'moveend' : 'move', this._update, this);                                    // 8239
	},                                                                                                                 // 8240
                                                                                                                    // 8241
	_addScales: function (options, className, container) {                                                             // 8242
		if (options.metric) {                                                                                             // 8243
			this._mScale = L.DomUtil.create('div', className + '-line', container);                                          // 8244
		}                                                                                                                 // 8245
		if (options.imperial) {                                                                                           // 8246
			this._iScale = L.DomUtil.create('div', className + '-line', container);                                          // 8247
		}                                                                                                                 // 8248
	},                                                                                                                 // 8249
                                                                                                                    // 8250
	_update: function () {                                                                                             // 8251
		var bounds = this._map.getBounds(),                                                                               // 8252
		    centerLat = bounds.getCenter().lat,                                                                           // 8253
		    halfWorldMeters = 6378137 * Math.PI * Math.cos(centerLat * Math.PI / 180),                                    // 8254
		    dist = halfWorldMeters * (bounds.getNorthEast().lng - bounds.getSouthWest().lng) / 180,                       // 8255
                                                                                                                    // 8256
		    size = this._map.getSize(),                                                                                   // 8257
		    options = this.options,                                                                                       // 8258
		    maxMeters = 0;                                                                                                // 8259
                                                                                                                    // 8260
		if (size.x > 0) {                                                                                                 // 8261
			maxMeters = dist * (options.maxWidth / size.x);                                                                  // 8262
		}                                                                                                                 // 8263
                                                                                                                    // 8264
		this._updateScales(options, maxMeters);                                                                           // 8265
	},                                                                                                                 // 8266
                                                                                                                    // 8267
	_updateScales: function (options, maxMeters) {                                                                     // 8268
		if (options.metric && maxMeters) {                                                                                // 8269
			this._updateMetric(maxMeters);                                                                                   // 8270
		}                                                                                                                 // 8271
                                                                                                                    // 8272
		if (options.imperial && maxMeters) {                                                                              // 8273
			this._updateImperial(maxMeters);                                                                                 // 8274
		}                                                                                                                 // 8275
	},                                                                                                                 // 8276
                                                                                                                    // 8277
	_updateMetric: function (maxMeters) {                                                                              // 8278
		var meters = this._getRoundNum(maxMeters);                                                                        // 8279
                                                                                                                    // 8280
		this._mScale.style.width = this._getScaleWidth(meters / maxMeters) + 'px';                                        // 8281
		this._mScale.innerHTML = meters < 1000 ? meters + ' m' : (meters / 1000) + ' km';                                 // 8282
	},                                                                                                                 // 8283
                                                                                                                    // 8284
	_updateImperial: function (maxMeters) {                                                                            // 8285
		var maxFeet = maxMeters * 3.2808399,                                                                              // 8286
		    scale = this._iScale,                                                                                         // 8287
		    maxMiles, miles, feet;                                                                                        // 8288
                                                                                                                    // 8289
		if (maxFeet > 5280) {                                                                                             // 8290
			maxMiles = maxFeet / 5280;                                                                                       // 8291
			miles = this._getRoundNum(maxMiles);                                                                             // 8292
                                                                                                                    // 8293
			scale.style.width = this._getScaleWidth(miles / maxMiles) + 'px';                                                // 8294
			scale.innerHTML = miles + ' mi';                                                                                 // 8295
                                                                                                                    // 8296
		} else {                                                                                                          // 8297
			feet = this._getRoundNum(maxFeet);                                                                               // 8298
                                                                                                                    // 8299
			scale.style.width = this._getScaleWidth(feet / maxFeet) + 'px';                                                  // 8300
			scale.innerHTML = feet + ' ft';                                                                                  // 8301
		}                                                                                                                 // 8302
	},                                                                                                                 // 8303
                                                                                                                    // 8304
	_getScaleWidth: function (ratio) {                                                                                 // 8305
		return Math.round(this.options.maxWidth * ratio) - 10;                                                            // 8306
	},                                                                                                                 // 8307
                                                                                                                    // 8308
	_getRoundNum: function (num) {                                                                                     // 8309
		var pow10 = Math.pow(10, (Math.floor(num) + '').length - 1),                                                      // 8310
		    d = num / pow10;                                                                                              // 8311
                                                                                                                    // 8312
		d = d >= 10 ? 10 : d >= 5 ? 5 : d >= 3 ? 3 : d >= 2 ? 2 : 1;                                                      // 8313
                                                                                                                    // 8314
		return pow10 * d;                                                                                                 // 8315
	}                                                                                                                  // 8316
});                                                                                                                 // 8317
                                                                                                                    // 8318
L.control.scale = function (options) {                                                                              // 8319
	return new L.Control.Scale(options);                                                                               // 8320
};                                                                                                                  // 8321
                                                                                                                    // 8322
                                                                                                                    // 8323
/*                                                                                                                  // 8324
 * L.Control.Layers is a control to allow users to switch between different layers on the map.                      // 8325
 */                                                                                                                 // 8326
                                                                                                                    // 8327
L.Control.Layers = L.Control.extend({                                                                               // 8328
	options: {                                                                                                         // 8329
		collapsed: true,                                                                                                  // 8330
		position: 'topright',                                                                                             // 8331
		autoZIndex: true                                                                                                  // 8332
	},                                                                                                                 // 8333
                                                                                                                    // 8334
	initialize: function (baseLayers, overlays, options) {                                                             // 8335
		L.setOptions(this, options);                                                                                      // 8336
                                                                                                                    // 8337
		this._layers = {};                                                                                                // 8338
		this._lastZIndex = 0;                                                                                             // 8339
		this._handlingClick = false;                                                                                      // 8340
                                                                                                                    // 8341
		for (var i in baseLayers) {                                                                                       // 8342
			this._addLayer(baseLayers[i], i);                                                                                // 8343
		}                                                                                                                 // 8344
                                                                                                                    // 8345
		for (i in overlays) {                                                                                             // 8346
			this._addLayer(overlays[i], i, true);                                                                            // 8347
		}                                                                                                                 // 8348
	},                                                                                                                 // 8349
                                                                                                                    // 8350
	onAdd: function (map) {                                                                                            // 8351
		this._initLayout();                                                                                               // 8352
		this._update();                                                                                                   // 8353
                                                                                                                    // 8354
		map                                                                                                               // 8355
		    .on('layeradd', this._onLayerChange, this)                                                                    // 8356
		    .on('layerremove', this._onLayerChange, this);                                                                // 8357
                                                                                                                    // 8358
		return this._container;                                                                                           // 8359
	},                                                                                                                 // 8360
                                                                                                                    // 8361
	onRemove: function (map) {                                                                                         // 8362
		map                                                                                                               // 8363
		    .off('layeradd', this._onLayerChange, this)                                                                   // 8364
		    .off('layerremove', this._onLayerChange, this);                                                               // 8365
	},                                                                                                                 // 8366
                                                                                                                    // 8367
	addBaseLayer: function (layer, name) {                                                                             // 8368
		this._addLayer(layer, name);                                                                                      // 8369
		this._update();                                                                                                   // 8370
		return this;                                                                                                      // 8371
	},                                                                                                                 // 8372
                                                                                                                    // 8373
	addOverlay: function (layer, name) {                                                                               // 8374
		this._addLayer(layer, name, true);                                                                                // 8375
		this._update();                                                                                                   // 8376
		return this;                                                                                                      // 8377
	},                                                                                                                 // 8378
                                                                                                                    // 8379
	removeLayer: function (layer) {                                                                                    // 8380
		var id = L.stamp(layer);                                                                                          // 8381
		delete this._layers[id];                                                                                          // 8382
		this._update();                                                                                                   // 8383
		return this;                                                                                                      // 8384
	},                                                                                                                 // 8385
                                                                                                                    // 8386
	_initLayout: function () {                                                                                         // 8387
		var className = 'leaflet-control-layers',                                                                         // 8388
		    container = this._container = L.DomUtil.create('div', className);                                             // 8389
                                                                                                                    // 8390
		//Makes this work on IE10 Touch devices by stopping it from firing a mouseout event when the touch is released    // 8391
		container.setAttribute('aria-haspopup', true);                                                                    // 8392
                                                                                                                    // 8393
		if (!L.Browser.touch) {                                                                                           // 8394
			L.DomEvent                                                                                                       // 8395
				.disableClickPropagation(container)                                                                             // 8396
				.disableScrollPropagation(container);                                                                           // 8397
		} else {                                                                                                          // 8398
			L.DomEvent.on(container, 'click', L.DomEvent.stopPropagation);                                                   // 8399
		}                                                                                                                 // 8400
                                                                                                                    // 8401
		var form = this._form = L.DomUtil.create('form', className + '-list');                                            // 8402
                                                                                                                    // 8403
		if (this.options.collapsed) {                                                                                     // 8404
			if (!L.Browser.android) {                                                                                        // 8405
				L.DomEvent                                                                                                      // 8406
				    .on(container, 'mouseover', this._expand, this)                                                             // 8407
				    .on(container, 'mouseout', this._collapse, this);                                                           // 8408
			}                                                                                                                // 8409
			var link = this._layersLink = L.DomUtil.create('a', className + '-toggle', container);                           // 8410
			link.href = '#';                                                                                                 // 8411
			link.title = 'Layers';                                                                                           // 8412
                                                                                                                    // 8413
			if (L.Browser.touch) {                                                                                           // 8414
				L.DomEvent                                                                                                      // 8415
				    .on(link, 'click', L.DomEvent.stop)                                                                         // 8416
				    .on(link, 'click', this._expand, this);                                                                     // 8417
			}                                                                                                                // 8418
			else {                                                                                                           // 8419
				L.DomEvent.on(link, 'focus', this._expand, this);                                                               // 8420
			}                                                                                                                // 8421
			//Work around for Firefox android issue https://github.com/Leaflet/Leaflet/issues/2033                           // 8422
			L.DomEvent.on(form, 'click', function () {                                                                       // 8423
				setTimeout(L.bind(this._onInputClick, this), 0);                                                                // 8424
			}, this);                                                                                                        // 8425
                                                                                                                    // 8426
			this._map.on('click', this._collapse, this);                                                                     // 8427
			// TODO keyboard accessibility                                                                                   // 8428
		} else {                                                                                                          // 8429
			this._expand();                                                                                                  // 8430
		}                                                                                                                 // 8431
                                                                                                                    // 8432
		this._baseLayersList = L.DomUtil.create('div', className + '-base', form);                                        // 8433
		this._separator = L.DomUtil.create('div', className + '-separator', form);                                        // 8434
		this._overlaysList = L.DomUtil.create('div', className + '-overlays', form);                                      // 8435
                                                                                                                    // 8436
		container.appendChild(form);                                                                                      // 8437
	},                                                                                                                 // 8438
                                                                                                                    // 8439
	_addLayer: function (layer, name, overlay) {                                                                       // 8440
		var id = L.stamp(layer);                                                                                          // 8441
                                                                                                                    // 8442
		this._layers[id] = {                                                                                              // 8443
			layer: layer,                                                                                                    // 8444
			name: name,                                                                                                      // 8445
			overlay: overlay                                                                                                 // 8446
		};                                                                                                                // 8447
                                                                                                                    // 8448
		if (this.options.autoZIndex && layer.setZIndex) {                                                                 // 8449
			this._lastZIndex++;                                                                                              // 8450
			layer.setZIndex(this._lastZIndex);                                                                               // 8451
		}                                                                                                                 // 8452
	},                                                                                                                 // 8453
                                                                                                                    // 8454
	_update: function () {                                                                                             // 8455
		if (!this._container) {                                                                                           // 8456
			return;                                                                                                          // 8457
		}                                                                                                                 // 8458
                                                                                                                    // 8459
		this._baseLayersList.innerHTML = '';                                                                              // 8460
		this._overlaysList.innerHTML = '';                                                                                // 8461
                                                                                                                    // 8462
		var baseLayersPresent = false,                                                                                    // 8463
		    overlaysPresent = false,                                                                                      // 8464
		    i, obj;                                                                                                       // 8465
                                                                                                                    // 8466
		for (i in this._layers) {                                                                                         // 8467
			obj = this._layers[i];                                                                                           // 8468
			this._addItem(obj);                                                                                              // 8469
			overlaysPresent = overlaysPresent || obj.overlay;                                                                // 8470
			baseLayersPresent = baseLayersPresent || !obj.overlay;                                                           // 8471
		}                                                                                                                 // 8472
                                                                                                                    // 8473
		this._separator.style.display = overlaysPresent && baseLayersPresent ? '' : 'none';                               // 8474
	},                                                                                                                 // 8475
                                                                                                                    // 8476
	_onLayerChange: function (e) {                                                                                     // 8477
		var obj = this._layers[L.stamp(e.layer)];                                                                         // 8478
                                                                                                                    // 8479
		if (!obj) { return; }                                                                                             // 8480
                                                                                                                    // 8481
		if (!this._handlingClick) {                                                                                       // 8482
			this._update();                                                                                                  // 8483
		}                                                                                                                 // 8484
                                                                                                                    // 8485
		var type = obj.overlay ?                                                                                          // 8486
			(e.type === 'layeradd' ? 'overlayadd' : 'overlayremove') :                                                       // 8487
			(e.type === 'layeradd' ? 'baselayerchange' : null);                                                              // 8488
                                                                                                                    // 8489
		if (type) {                                                                                                       // 8490
			this._map.fire(type, obj);                                                                                       // 8491
		}                                                                                                                 // 8492
	},                                                                                                                 // 8493
                                                                                                                    // 8494
	// IE7 bugs out if you create a radio dynamically, so you have to do it this hacky way (see http://bit.ly/PqYLBe)  // 8495
	_createRadioElement: function (name, checked) {                                                                    // 8496
                                                                                                                    // 8497
		var radioHtml = '<input type="radio" class="leaflet-control-layers-selector" name="' + name + '"';                // 8498
		if (checked) {                                                                                                    // 8499
			radioHtml += ' checked="checked"';                                                                               // 8500
		}                                                                                                                 // 8501
		radioHtml += '/>';                                                                                                // 8502
                                                                                                                    // 8503
		var radioFragment = document.createElement('div');                                                                // 8504
		radioFragment.innerHTML = radioHtml;                                                                              // 8505
                                                                                                                    // 8506
		return radioFragment.firstChild;                                                                                  // 8507
	},                                                                                                                 // 8508
                                                                                                                    // 8509
	_addItem: function (obj) {                                                                                         // 8510
		var label = document.createElement('label'),                                                                      // 8511
		    input,                                                                                                        // 8512
		    checked = this._map.hasLayer(obj.layer);                                                                      // 8513
                                                                                                                    // 8514
		if (obj.overlay) {                                                                                                // 8515
			input = document.createElement('input');                                                                         // 8516
			input.type = 'checkbox';                                                                                         // 8517
			input.className = 'leaflet-control-layers-selector';                                                             // 8518
			input.defaultChecked = checked;                                                                                  // 8519
		} else {                                                                                                          // 8520
			input = this._createRadioElement('leaflet-base-layers', checked);                                                // 8521
		}                                                                                                                 // 8522
                                                                                                                    // 8523
		input.layerId = L.stamp(obj.layer);                                                                               // 8524
                                                                                                                    // 8525
		L.DomEvent.on(input, 'click', this._onInputClick, this);                                                          // 8526
                                                                                                                    // 8527
		var name = document.createElement('span');                                                                        // 8528
		name.innerHTML = ' ' + obj.name;                                                                                  // 8529
                                                                                                                    // 8530
		label.appendChild(input);                                                                                         // 8531
		label.appendChild(name);                                                                                          // 8532
                                                                                                                    // 8533
		var container = obj.overlay ? this._overlaysList : this._baseLayersList;                                          // 8534
		container.appendChild(label);                                                                                     // 8535
                                                                                                                    // 8536
		return label;                                                                                                     // 8537
	},                                                                                                                 // 8538
                                                                                                                    // 8539
	_onInputClick: function () {                                                                                       // 8540
		var i, input, obj,                                                                                                // 8541
		    inputs = this._form.getElementsByTagName('input'),                                                            // 8542
		    inputsLen = inputs.length;                                                                                    // 8543
                                                                                                                    // 8544
		this._handlingClick = true;                                                                                       // 8545
                                                                                                                    // 8546
		for (i = 0; i < inputsLen; i++) {                                                                                 // 8547
			input = inputs[i];                                                                                               // 8548
			obj = this._layers[input.layerId];                                                                               // 8549
                                                                                                                    // 8550
			if (input.checked && !this._map.hasLayer(obj.layer)) {                                                           // 8551
				this._map.addLayer(obj.layer);                                                                                  // 8552
                                                                                                                    // 8553
			} else if (!input.checked && this._map.hasLayer(obj.layer)) {                                                    // 8554
				this._map.removeLayer(obj.layer);                                                                               // 8555
			}                                                                                                                // 8556
		}                                                                                                                 // 8557
                                                                                                                    // 8558
		this._handlingClick = false;                                                                                      // 8559
                                                                                                                    // 8560
		this._refocusOnMap();                                                                                             // 8561
	},                                                                                                                 // 8562
                                                                                                                    // 8563
	_expand: function () {                                                                                             // 8564
		L.DomUtil.addClass(this._container, 'leaflet-control-layers-expanded');                                           // 8565
	},                                                                                                                 // 8566
                                                                                                                    // 8567
	_collapse: function () {                                                                                           // 8568
		this._container.className = this._container.className.replace(' leaflet-control-layers-expanded', '');            // 8569
	}                                                                                                                  // 8570
});                                                                                                                 // 8571
                                                                                                                    // 8572
L.control.layers = function (baseLayers, overlays, options) {                                                       // 8573
	return new L.Control.Layers(baseLayers, overlays, options);                                                        // 8574
};                                                                                                                  // 8575
                                                                                                                    // 8576
                                                                                                                    // 8577
/*                                                                                                                  // 8578
 * L.PosAnimation is used by Leaflet internally for pan animations.                                                 // 8579
 */                                                                                                                 // 8580
                                                                                                                    // 8581
L.PosAnimation = L.Class.extend({                                                                                   // 8582
	includes: L.Mixin.Events,                                                                                          // 8583
                                                                                                                    // 8584
	run: function (el, newPos, duration, easeLinearity) { // (HTMLElement, Point[, Number, Number])                    // 8585
		this.stop();                                                                                                      // 8586
                                                                                                                    // 8587
		this._el = el;                                                                                                    // 8588
		this._inProgress = true;                                                                                          // 8589
		this._newPos = newPos;                                                                                            // 8590
                                                                                                                    // 8591
		this.fire('start');                                                                                               // 8592
                                                                                                                    // 8593
		el.style[L.DomUtil.TRANSITION] = 'all ' + (duration || 0.25) +                                                    // 8594
		        's cubic-bezier(0,0,' + (easeLinearity || 0.5) + ',1)';                                                   // 8595
                                                                                                                    // 8596
		L.DomEvent.on(el, L.DomUtil.TRANSITION_END, this._onTransitionEnd, this);                                         // 8597
		L.DomUtil.setPosition(el, newPos);                                                                                // 8598
                                                                                                                    // 8599
		// toggle reflow, Chrome flickers for some reason if you don't do this                                            // 8600
		L.Util.falseFn(el.offsetWidth);                                                                                   // 8601
                                                                                                                    // 8602
		// there's no native way to track value updates of transitioned properties, so we imitate this                    // 8603
		this._stepTimer = setInterval(L.bind(this._onStep, this), 50);                                                    // 8604
	},                                                                                                                 // 8605
                                                                                                                    // 8606
	stop: function () {                                                                                                // 8607
		if (!this._inProgress) { return; }                                                                                // 8608
                                                                                                                    // 8609
		// if we just removed the transition property, the element would jump to its final position,                      // 8610
		// so we need to make it stay at the current position                                                             // 8611
                                                                                                                    // 8612
		L.DomUtil.setPosition(this._el, this._getPos());                                                                  // 8613
		this._onTransitionEnd();                                                                                          // 8614
		L.Util.falseFn(this._el.offsetWidth); // force reflow in case we are about to start a new animation               // 8615
	},                                                                                                                 // 8616
                                                                                                                    // 8617
	_onStep: function () {                                                                                             // 8618
		var stepPos = this._getPos();                                                                                     // 8619
		if (!stepPos) {                                                                                                   // 8620
			this._onTransitionEnd();                                                                                         // 8621
			return;                                                                                                          // 8622
		}                                                                                                                 // 8623
		// jshint camelcase: false                                                                                        // 8624
		// make L.DomUtil.getPosition return intermediate position value during animation                                 // 8625
		this._el._leaflet_pos = stepPos;                                                                                  // 8626
                                                                                                                    // 8627
		this.fire('step');                                                                                                // 8628
	},                                                                                                                 // 8629
                                                                                                                    // 8630
	// you can't easily get intermediate values of properties animated with CSS3 Transitions,                          // 8631
	// we need to parse computed style (in case of transform it returns matrix string)                                 // 8632
                                                                                                                    // 8633
	_transformRe: /([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,                                                // 8634
                                                                                                                    // 8635
	_getPos: function () {                                                                                             // 8636
		var left, top, matches,                                                                                           // 8637
		    el = this._el,                                                                                                // 8638
		    style = window.getComputedStyle(el);                                                                          // 8639
                                                                                                                    // 8640
		if (L.Browser.any3d) {                                                                                            // 8641
			matches = style[L.DomUtil.TRANSFORM].match(this._transformRe);                                                   // 8642
			if (!matches) { return; }                                                                                        // 8643
			left = parseFloat(matches[1]);                                                                                   // 8644
			top  = parseFloat(matches[2]);                                                                                   // 8645
		} else {                                                                                                          // 8646
			left = parseFloat(style.left);                                                                                   // 8647
			top  = parseFloat(style.top);                                                                                    // 8648
		}                                                                                                                 // 8649
                                                                                                                    // 8650
		return new L.Point(left, top, true);                                                                              // 8651
	},                                                                                                                 // 8652
                                                                                                                    // 8653
	_onTransitionEnd: function () {                                                                                    // 8654
		L.DomEvent.off(this._el, L.DomUtil.TRANSITION_END, this._onTransitionEnd, this);                                  // 8655
                                                                                                                    // 8656
		if (!this._inProgress) { return; }                                                                                // 8657
		this._inProgress = false;                                                                                         // 8658
                                                                                                                    // 8659
		this._el.style[L.DomUtil.TRANSITION] = '';                                                                        // 8660
                                                                                                                    // 8661
		// jshint camelcase: false                                                                                        // 8662
		// make sure L.DomUtil.getPosition returns the final position value after animation                               // 8663
		this._el._leaflet_pos = this._newPos;                                                                             // 8664
                                                                                                                    // 8665
		clearInterval(this._stepTimer);                                                                                   // 8666
                                                                                                                    // 8667
		this.fire('step').fire('end');                                                                                    // 8668
	}                                                                                                                  // 8669
                                                                                                                    // 8670
});                                                                                                                 // 8671
                                                                                                                    // 8672
                                                                                                                    // 8673
/*                                                                                                                  // 8674
 * Extends L.Map to handle panning animations.                                                                      // 8675
 */                                                                                                                 // 8676
                                                                                                                    // 8677
L.Map.include({                                                                                                     // 8678
                                                                                                                    // 8679
	setView: function (center, zoom, options) {                                                                        // 8680
                                                                                                                    // 8681
		zoom = zoom === undefined ? this._zoom : this._limitZoom(zoom);                                                   // 8682
		center = this._limitCenter(L.latLng(center), zoom, this.options.maxBounds);                                       // 8683
		options = options || {};                                                                                          // 8684
                                                                                                                    // 8685
		if (this._panAnim) {                                                                                              // 8686
			this._panAnim.stop();                                                                                            // 8687
		}                                                                                                                 // 8688
                                                                                                                    // 8689
		if (this._loaded && !options.reset && options !== true) {                                                         // 8690
                                                                                                                    // 8691
			if (options.animate !== undefined) {                                                                             // 8692
				options.zoom = L.extend({animate: options.animate}, options.zoom);                                              // 8693
				options.pan = L.extend({animate: options.animate}, options.pan);                                                // 8694
			}                                                                                                                // 8695
                                                                                                                    // 8696
			// try animating pan or zoom                                                                                     // 8697
			var animated = (this._zoom !== zoom) ?                                                                           // 8698
				this._tryAnimatedZoom && this._tryAnimatedZoom(center, zoom, options.zoom) :                                    // 8699
				this._tryAnimatedPan(center, options.pan);                                                                      // 8700
                                                                                                                    // 8701
			if (animated) {                                                                                                  // 8702
				// prevent resize handler call, the view will refresh after animation anyway                                    // 8703
				clearTimeout(this._sizeTimer);                                                                                  // 8704
				return this;                                                                                                    // 8705
			}                                                                                                                // 8706
		}                                                                                                                 // 8707
                                                                                                                    // 8708
		// animation didn't start, just reset the map view                                                                // 8709
		this._resetView(center, zoom);                                                                                    // 8710
                                                                                                                    // 8711
		return this;                                                                                                      // 8712
	},                                                                                                                 // 8713
                                                                                                                    // 8714
	panBy: function (offset, options) {                                                                                // 8715
		offset = L.point(offset).round();                                                                                 // 8716
		options = options || {};                                                                                          // 8717
                                                                                                                    // 8718
		if (!offset.x && !offset.y) {                                                                                     // 8719
			return this;                                                                                                     // 8720
		}                                                                                                                 // 8721
                                                                                                                    // 8722
		if (!this._panAnim) {                                                                                             // 8723
			this._panAnim = new L.PosAnimation();                                                                            // 8724
                                                                                                                    // 8725
			this._panAnim.on({                                                                                               // 8726
				'step': this._onPanTransitionStep,                                                                              // 8727
				'end': this._onPanTransitionEnd                                                                                 // 8728
			}, this);                                                                                                        // 8729
		}                                                                                                                 // 8730
                                                                                                                    // 8731
		// don't fire movestart if animating inertia                                                                      // 8732
		if (!options.noMoveStart) {                                                                                       // 8733
			this.fire('movestart');                                                                                          // 8734
		}                                                                                                                 // 8735
                                                                                                                    // 8736
		// animate pan unless animate: false specified                                                                    // 8737
		if (options.animate !== false) {                                                                                  // 8738
			L.DomUtil.addClass(this._mapPane, 'leaflet-pan-anim');                                                           // 8739
                                                                                                                    // 8740
			var newPos = this._getMapPanePos().subtract(offset);                                                             // 8741
			this._panAnim.run(this._mapPane, newPos, options.duration || 0.25, options.easeLinearity);                       // 8742
		} else {                                                                                                          // 8743
			this._rawPanBy(offset);                                                                                          // 8744
			this.fire('move').fire('moveend');                                                                               // 8745
		}                                                                                                                 // 8746
                                                                                                                    // 8747
		return this;                                                                                                      // 8748
	},                                                                                                                 // 8749
                                                                                                                    // 8750
	_onPanTransitionStep: function () {                                                                                // 8751
		this.fire('move');                                                                                                // 8752
	},                                                                                                                 // 8753
                                                                                                                    // 8754
	_onPanTransitionEnd: function () {                                                                                 // 8755
		L.DomUtil.removeClass(this._mapPane, 'leaflet-pan-anim');                                                         // 8756
		this.fire('moveend');                                                                                             // 8757
	},                                                                                                                 // 8758
                                                                                                                    // 8759
	_tryAnimatedPan: function (center, options) {                                                                      // 8760
		// difference between the new and current centers in pixels                                                       // 8761
		var offset = this._getCenterOffset(center)._floor();                                                              // 8762
                                                                                                                    // 8763
		// don't animate too far unless animate: true specified in options                                                // 8764
		if ((options && options.animate) !== true && !this.getSize().contains(offset)) { return false; }                  // 8765
                                                                                                                    // 8766
		this.panBy(offset, options);                                                                                      // 8767
                                                                                                                    // 8768
		return true;                                                                                                      // 8769
	}                                                                                                                  // 8770
});                                                                                                                 // 8771
                                                                                                                    // 8772
                                                                                                                    // 8773
/*                                                                                                                  // 8774
 * L.PosAnimation fallback implementation that powers Leaflet pan animations                                        // 8775
 * in browsers that don't support CSS3 Transitions.                                                                 // 8776
 */                                                                                                                 // 8777
                                                                                                                    // 8778
L.PosAnimation = L.DomUtil.TRANSITION ? L.PosAnimation : L.PosAnimation.extend({                                    // 8779
                                                                                                                    // 8780
	run: function (el, newPos, duration, easeLinearity) { // (HTMLElement, Point[, Number, Number])                    // 8781
		this.stop();                                                                                                      // 8782
                                                                                                                    // 8783
		this._el = el;                                                                                                    // 8784
		this._inProgress = true;                                                                                          // 8785
		this._duration = duration || 0.25;                                                                                // 8786
		this._easeOutPower = 1 / Math.max(easeLinearity || 0.5, 0.2);                                                     // 8787
                                                                                                                    // 8788
		this._startPos = L.DomUtil.getPosition(el);                                                                       // 8789
		this._offset = newPos.subtract(this._startPos);                                                                   // 8790
		this._startTime = +new Date();                                                                                    // 8791
                                                                                                                    // 8792
		this.fire('start');                                                                                               // 8793
                                                                                                                    // 8794
		this._animate();                                                                                                  // 8795
	},                                                                                                                 // 8796
                                                                                                                    // 8797
	stop: function () {                                                                                                // 8798
		if (!this._inProgress) { return; }                                                                                // 8799
                                                                                                                    // 8800
		this._step();                                                                                                     // 8801
		this._complete();                                                                                                 // 8802
	},                                                                                                                 // 8803
                                                                                                                    // 8804
	_animate: function () {                                                                                            // 8805
		// animation loop                                                                                                 // 8806
		this._animId = L.Util.requestAnimFrame(this._animate, this);                                                      // 8807
		this._step();                                                                                                     // 8808
	},                                                                                                                 // 8809
                                                                                                                    // 8810
	_step: function () {                                                                                               // 8811
		var elapsed = (+new Date()) - this._startTime,                                                                    // 8812
		    duration = this._duration * 1000;                                                                             // 8813
                                                                                                                    // 8814
		if (elapsed < duration) {                                                                                         // 8815
			this._runFrame(this._easeOut(elapsed / duration));                                                               // 8816
		} else {                                                                                                          // 8817
			this._runFrame(1);                                                                                               // 8818
			this._complete();                                                                                                // 8819
		}                                                                                                                 // 8820
	},                                                                                                                 // 8821
                                                                                                                    // 8822
	_runFrame: function (progress) {                                                                                   // 8823
		var pos = this._startPos.add(this._offset.multiplyBy(progress));                                                  // 8824
		L.DomUtil.setPosition(this._el, pos);                                                                             // 8825
                                                                                                                    // 8826
		this.fire('step');                                                                                                // 8827
	},                                                                                                                 // 8828
                                                                                                                    // 8829
	_complete: function () {                                                                                           // 8830
		L.Util.cancelAnimFrame(this._animId);                                                                             // 8831
                                                                                                                    // 8832
		this._inProgress = false;                                                                                         // 8833
		this.fire('end');                                                                                                 // 8834
	},                                                                                                                 // 8835
                                                                                                                    // 8836
	_easeOut: function (t) {                                                                                           // 8837
		return 1 - Math.pow(1 - t, this._easeOutPower);                                                                   // 8838
	}                                                                                                                  // 8839
});                                                                                                                 // 8840
                                                                                                                    // 8841
                                                                                                                    // 8842
/*                                                                                                                  // 8843
 * Extends L.Map to handle zoom animations.                                                                         // 8844
 */                                                                                                                 // 8845
                                                                                                                    // 8846
L.Map.mergeOptions({                                                                                                // 8847
	zoomAnimation: true,                                                                                               // 8848
	zoomAnimationThreshold: 4                                                                                          // 8849
});                                                                                                                 // 8850
                                                                                                                    // 8851
if (L.DomUtil.TRANSITION) {                                                                                         // 8852
                                                                                                                    // 8853
	L.Map.addInitHook(function () {                                                                                    // 8854
		// don't animate on browsers without hardware-accelerated transitions or old Android/Opera                        // 8855
		this._zoomAnimated = this.options.zoomAnimation && L.DomUtil.TRANSITION &&                                        // 8856
				L.Browser.any3d && !L.Browser.android23 && !L.Browser.mobileOpera;                                              // 8857
                                                                                                                    // 8858
		// zoom transitions run with the same duration for all layers, so if one of transitionend events                  // 8859
		// happens after starting zoom animation (propagating to the map pane), we know that it ended globally            // 8860
		if (this._zoomAnimated) {                                                                                         // 8861
			L.DomEvent.on(this._mapPane, L.DomUtil.TRANSITION_END, this._catchTransitionEnd, this);                          // 8862
		}                                                                                                                 // 8863
	});                                                                                                                // 8864
}                                                                                                                   // 8865
                                                                                                                    // 8866
L.Map.include(!L.DomUtil.TRANSITION ? {} : {                                                                        // 8867
                                                                                                                    // 8868
	_catchTransitionEnd: function (e) {                                                                                // 8869
		if (this._animatingZoom && e.propertyName.indexOf('transform') >= 0) {                                            // 8870
			this._onZoomTransitionEnd();                                                                                     // 8871
		}                                                                                                                 // 8872
	},                                                                                                                 // 8873
                                                                                                                    // 8874
	_nothingToAnimate: function () {                                                                                   // 8875
		return !this._container.getElementsByClassName('leaflet-zoom-animated').length;                                   // 8876
	},                                                                                                                 // 8877
                                                                                                                    // 8878
	_tryAnimatedZoom: function (center, zoom, options) {                                                               // 8879
                                                                                                                    // 8880
		if (this._animatingZoom) { return true; }                                                                         // 8881
                                                                                                                    // 8882
		options = options || {};                                                                                          // 8883
                                                                                                                    // 8884
		// don't animate if disabled, not supported or zoom difference is too large                                       // 8885
		if (!this._zoomAnimated || options.animate === false || this._nothingToAnimate() ||                               // 8886
		        Math.abs(zoom - this._zoom) > this.options.zoomAnimationThreshold) { return false; }                      // 8887
                                                                                                                    // 8888
		// offset is the pixel coords of the zoom origin relative to the current center                                   // 8889
		var scale = this.getZoomScale(zoom),                                                                              // 8890
		    offset = this._getCenterOffset(center)._divideBy(1 - 1 / scale),                                              // 8891
			origin = this._getCenterLayerPoint()._add(offset);                                                               // 8892
                                                                                                                    // 8893
		// don't animate if the zoom origin isn't within one screen from the current center, unless forced                // 8894
		if (options.animate !== true && !this.getSize().contains(offset)) { return false; }                               // 8895
                                                                                                                    // 8896
		this                                                                                                              // 8897
		    .fire('movestart')                                                                                            // 8898
		    .fire('zoomstart');                                                                                           // 8899
                                                                                                                    // 8900
		this._animateZoom(center, zoom, origin, scale, null, true);                                                       // 8901
                                                                                                                    // 8902
		return true;                                                                                                      // 8903
	},                                                                                                                 // 8904
                                                                                                                    // 8905
	_animateZoom: function (center, zoom, origin, scale, delta, backwards, forTouchZoom) {                             // 8906
                                                                                                                    // 8907
		if (!forTouchZoom) {                                                                                              // 8908
			this._animatingZoom = true;                                                                                      // 8909
		}                                                                                                                 // 8910
                                                                                                                    // 8911
		// put transform transition on all layers with leaflet-zoom-animated class                                        // 8912
		L.DomUtil.addClass(this._mapPane, 'leaflet-zoom-anim');                                                           // 8913
                                                                                                                    // 8914
		// remember what center/zoom to set after animation                                                               // 8915
		this._animateToCenter = center;                                                                                   // 8916
		this._animateToZoom = zoom;                                                                                       // 8917
                                                                                                                    // 8918
		// disable any dragging during animation                                                                          // 8919
		if (L.Draggable) {                                                                                                // 8920
			L.Draggable._disabled = true;                                                                                    // 8921
		}                                                                                                                 // 8922
                                                                                                                    // 8923
		L.Util.requestAnimFrame(function () {                                                                             // 8924
			this.fire('zoomanim', {                                                                                          // 8925
				center: center,                                                                                                 // 8926
				zoom: zoom,                                                                                                     // 8927
				origin: origin,                                                                                                 // 8928
				scale: scale,                                                                                                   // 8929
				delta: delta,                                                                                                   // 8930
				backwards: backwards                                                                                            // 8931
			});                                                                                                              // 8932
			// horrible hack to work around a Chrome bug https://github.com/Leaflet/Leaflet/issues/3689                      // 8933
			setTimeout(L.bind(this._onZoomTransitionEnd, this), 250);                                                        // 8934
		}, this);                                                                                                         // 8935
	},                                                                                                                 // 8936
                                                                                                                    // 8937
	_onZoomTransitionEnd: function () {                                                                                // 8938
		if (!this._animatingZoom) { return; }                                                                             // 8939
                                                                                                                    // 8940
		this._animatingZoom = false;                                                                                      // 8941
                                                                                                                    // 8942
		L.DomUtil.removeClass(this._mapPane, 'leaflet-zoom-anim');                                                        // 8943
                                                                                                                    // 8944
		L.Util.requestAnimFrame(function () {                                                                             // 8945
			this._resetView(this._animateToCenter, this._animateToZoom, true, true);                                         // 8946
                                                                                                                    // 8947
			if (L.Draggable) {                                                                                               // 8948
				L.Draggable._disabled = false;                                                                                  // 8949
			}                                                                                                                // 8950
		}, this);                                                                                                         // 8951
	}                                                                                                                  // 8952
});                                                                                                                 // 8953
                                                                                                                    // 8954
                                                                                                                    // 8955
/*                                                                                                                  // 8956
	Zoom animation logic for L.TileLayer.                                                                              // 8957
*/                                                                                                                  // 8958
                                                                                                                    // 8959
L.TileLayer.include({                                                                                               // 8960
	_animateZoom: function (e) {                                                                                       // 8961
		if (!this._animating) {                                                                                           // 8962
			this._animating = true;                                                                                          // 8963
			this._prepareBgBuffer();                                                                                         // 8964
		}                                                                                                                 // 8965
                                                                                                                    // 8966
		var bg = this._bgBuffer,                                                                                          // 8967
		    transform = L.DomUtil.TRANSFORM,                                                                              // 8968
		    initialTransform = e.delta ? L.DomUtil.getTranslateString(e.delta) : bg.style[transform],                     // 8969
		    scaleStr = L.DomUtil.getScaleString(e.scale, e.origin);                                                       // 8970
                                                                                                                    // 8971
		bg.style[transform] = e.backwards ?                                                                               // 8972
				scaleStr + ' ' + initialTransform :                                                                             // 8973
				initialTransform + ' ' + scaleStr;                                                                              // 8974
	},                                                                                                                 // 8975
                                                                                                                    // 8976
	_endZoomAnim: function () {                                                                                        // 8977
		var front = this._tileContainer,                                                                                  // 8978
		    bg = this._bgBuffer;                                                                                          // 8979
                                                                                                                    // 8980
		front.style.visibility = '';                                                                                      // 8981
		front.parentNode.appendChild(front); // Bring to fore                                                             // 8982
                                                                                                                    // 8983
		// force reflow                                                                                                   // 8984
		L.Util.falseFn(bg.offsetWidth);                                                                                   // 8985
                                                                                                                    // 8986
		var zoom = this._map.getZoom();                                                                                   // 8987
		if (zoom > this.options.maxZoom || zoom < this.options.minZoom) {                                                 // 8988
			this._clearBgBuffer();                                                                                           // 8989
		}                                                                                                                 // 8990
                                                                                                                    // 8991
		this._animating = false;                                                                                          // 8992
	},                                                                                                                 // 8993
                                                                                                                    // 8994
	_clearBgBuffer: function () {                                                                                      // 8995
		var map = this._map;                                                                                              // 8996
                                                                                                                    // 8997
		if (map && !map._animatingZoom && !map.touchZoom._zooming) {                                                      // 8998
			this._bgBuffer.innerHTML = '';                                                                                   // 8999
			this._bgBuffer.style[L.DomUtil.TRANSFORM] = '';                                                                  // 9000
		}                                                                                                                 // 9001
	},                                                                                                                 // 9002
                                                                                                                    // 9003
	_prepareBgBuffer: function () {                                                                                    // 9004
                                                                                                                    // 9005
		var front = this._tileContainer,                                                                                  // 9006
		    bg = this._bgBuffer;                                                                                          // 9007
                                                                                                                    // 9008
		// if foreground layer doesn't have many tiles but bg layer does,                                                 // 9009
		// keep the existing bg layer and just zoom it some more                                                          // 9010
                                                                                                                    // 9011
		var bgLoaded = this._getLoadedTilesPercentage(bg),                                                                // 9012
		    frontLoaded = this._getLoadedTilesPercentage(front);                                                          // 9013
                                                                                                                    // 9014
		if (bg && bgLoaded > 0.5 && frontLoaded < 0.5) {                                                                  // 9015
                                                                                                                    // 9016
			front.style.visibility = 'hidden';                                                                               // 9017
			this._stopLoadingImages(front);                                                                                  // 9018
			return;                                                                                                          // 9019
		}                                                                                                                 // 9020
                                                                                                                    // 9021
		// prepare the buffer to become the front tile pane                                                               // 9022
		bg.style.visibility = 'hidden';                                                                                   // 9023
		bg.style[L.DomUtil.TRANSFORM] = '';                                                                               // 9024
                                                                                                                    // 9025
		// switch out the current layer to be the new bg layer (and vice-versa)                                           // 9026
		this._tileContainer = bg;                                                                                         // 9027
		bg = this._bgBuffer = front;                                                                                      // 9028
                                                                                                                    // 9029
		this._stopLoadingImages(bg);                                                                                      // 9030
                                                                                                                    // 9031
		//prevent bg buffer from clearing right after zoom                                                                // 9032
		clearTimeout(this._clearBgBufferTimer);                                                                           // 9033
	},                                                                                                                 // 9034
                                                                                                                    // 9035
	_getLoadedTilesPercentage: function (container) {                                                                  // 9036
		var tiles = container.getElementsByTagName('img'),                                                                // 9037
		    i, len, count = 0;                                                                                            // 9038
                                                                                                                    // 9039
		for (i = 0, len = tiles.length; i < len; i++) {                                                                   // 9040
			if (tiles[i].complete) {                                                                                         // 9041
				count++;                                                                                                        // 9042
			}                                                                                                                // 9043
		}                                                                                                                 // 9044
		return count / len;                                                                                               // 9045
	},                                                                                                                 // 9046
                                                                                                                    // 9047
	// stops loading all tiles in the background layer                                                                 // 9048
	_stopLoadingImages: function (container) {                                                                         // 9049
		var tiles = Array.prototype.slice.call(container.getElementsByTagName('img')),                                    // 9050
		    i, len, tile;                                                                                                 // 9051
                                                                                                                    // 9052
		for (i = 0, len = tiles.length; i < len; i++) {                                                                   // 9053
			tile = tiles[i];                                                                                                 // 9054
                                                                                                                    // 9055
			if (!tile.complete) {                                                                                            // 9056
				tile.onload = L.Util.falseFn;                                                                                   // 9057
				tile.onerror = L.Util.falseFn;                                                                                  // 9058
				tile.src = L.Util.emptyImageUrl;                                                                                // 9059
                                                                                                                    // 9060
				tile.parentNode.removeChild(tile);                                                                              // 9061
			}                                                                                                                // 9062
		}                                                                                                                 // 9063
	}                                                                                                                  // 9064
});                                                                                                                 // 9065
                                                                                                                    // 9066
                                                                                                                    // 9067
/*                                                                                                                  // 9068
 * Provides L.Map with convenient shortcuts for using browser geolocation features.                                 // 9069
 */                                                                                                                 // 9070
                                                                                                                    // 9071
L.Map.include({                                                                                                     // 9072
	_defaultLocateOptions: {                                                                                           // 9073
		watch: false,                                                                                                     // 9074
		setView: false,                                                                                                   // 9075
		maxZoom: Infinity,                                                                                                // 9076
		timeout: 10000,                                                                                                   // 9077
		maximumAge: 0,                                                                                                    // 9078
		enableHighAccuracy: false                                                                                         // 9079
	},                                                                                                                 // 9080
                                                                                                                    // 9081
	locate: function (/*Object*/ options) {                                                                            // 9082
                                                                                                                    // 9083
		options = this._locateOptions = L.extend(this._defaultLocateOptions, options);                                    // 9084
                                                                                                                    // 9085
		if (!navigator.geolocation) {                                                                                     // 9086
			this._handleGeolocationError({                                                                                   // 9087
				code: 0,                                                                                                        // 9088
				message: 'Geolocation not supported.'                                                                           // 9089
			});                                                                                                              // 9090
			return this;                                                                                                     // 9091
		}                                                                                                                 // 9092
                                                                                                                    // 9093
		var onResponse = L.bind(this._handleGeolocationResponse, this),                                                   // 9094
			onError = L.bind(this._handleGeolocationError, this);                                                            // 9095
                                                                                                                    // 9096
		if (options.watch) {                                                                                              // 9097
			this._locationWatchId =                                                                                          // 9098
			        navigator.geolocation.watchPosition(onResponse, onError, options);                                       // 9099
		} else {                                                                                                          // 9100
			navigator.geolocation.getCurrentPosition(onResponse, onError, options);                                          // 9101
		}                                                                                                                 // 9102
		return this;                                                                                                      // 9103
	},                                                                                                                 // 9104
                                                                                                                    // 9105
	stopLocate: function () {                                                                                          // 9106
		if (navigator.geolocation) {                                                                                      // 9107
			navigator.geolocation.clearWatch(this._locationWatchId);                                                         // 9108
		}                                                                                                                 // 9109
		if (this._locateOptions) {                                                                                        // 9110
			this._locateOptions.setView = false;                                                                             // 9111
		}                                                                                                                 // 9112
		return this;                                                                                                      // 9113
	},                                                                                                                 // 9114
                                                                                                                    // 9115
	_handleGeolocationError: function (error) {                                                                        // 9116
		var c = error.code,                                                                                               // 9117
		    message = error.message ||                                                                                    // 9118
		            (c === 1 ? 'permission denied' :                                                                      // 9119
		            (c === 2 ? 'position unavailable' : 'timeout'));                                                      // 9120
                                                                                                                    // 9121
		if (this._locateOptions.setView && !this._loaded) {                                                               // 9122
			this.fitWorld();                                                                                                 // 9123
		}                                                                                                                 // 9124
                                                                                                                    // 9125
		this.fire('locationerror', {                                                                                      // 9126
			code: c,                                                                                                         // 9127
			message: 'Geolocation error: ' + message + '.'                                                                   // 9128
		});                                                                                                               // 9129
	},                                                                                                                 // 9130
                                                                                                                    // 9131
	_handleGeolocationResponse: function (pos) {                                                                       // 9132
		var lat = pos.coords.latitude,                                                                                    // 9133
		    lng = pos.coords.longitude,                                                                                   // 9134
		    latlng = new L.LatLng(lat, lng),                                                                              // 9135
                                                                                                                    // 9136
		    latAccuracy = 180 * pos.coords.accuracy / 40075017,                                                           // 9137
		    lngAccuracy = latAccuracy / Math.cos(L.LatLng.DEG_TO_RAD * lat),                                              // 9138
                                                                                                                    // 9139
		    bounds = L.latLngBounds(                                                                                      // 9140
		            [lat - latAccuracy, lng - lngAccuracy],                                                               // 9141
		            [lat + latAccuracy, lng + lngAccuracy]),                                                              // 9142
                                                                                                                    // 9143
		    options = this._locateOptions;                                                                                // 9144
                                                                                                                    // 9145
		if (options.setView) {                                                                                            // 9146
			var zoom = Math.min(this.getBoundsZoom(bounds), options.maxZoom);                                                // 9147
			this.setView(latlng, zoom);                                                                                      // 9148
		}                                                                                                                 // 9149
                                                                                                                    // 9150
		var data = {                                                                                                      // 9151
			latlng: latlng,                                                                                                  // 9152
			bounds: bounds,                                                                                                  // 9153
			timestamp: pos.timestamp                                                                                         // 9154
		};                                                                                                                // 9155
                                                                                                                    // 9156
		for (var i in pos.coords) {                                                                                       // 9157
			if (typeof pos.coords[i] === 'number') {                                                                         // 9158
				data[i] = pos.coords[i];                                                                                        // 9159
			}                                                                                                                // 9160
		}                                                                                                                 // 9161
                                                                                                                    // 9162
		this.fire('locationfound', data);                                                                                 // 9163
	}                                                                                                                  // 9164
});                                                                                                                 // 9165
                                                                                                                    // 9166
                                                                                                                    // 9167
}(window, document));                                                                                               // 9168
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);






(function(){

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                  //
// packages/bevanhunt_leaflet/.npm/package/node_modules/leaflet-providers/leaflet-providers.js                      //
//                                                                                                                  //
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                    //
(function (root, factory) {                                                                                         // 1
	if (typeof define === 'function' && define.amd) {                                                                  // 2
		// AMD. Register as an anonymous module.                                                                          // 3
		define(['leaflet'], factory);                                                                                     // 4
	} else if (typeof modules === 'object' && module.exports) {                                                        // 5
		// define a Common JS module that relies on 'leaflet'                                                             // 6
		module.exports = factory(require('leaflet'));                                                                     // 7
	} else {                                                                                                           // 8
		// Assume Leaflet is loaded into global object L already                                                          // 9
		factory(L);                                                                                                       // 10
	}                                                                                                                  // 11
}(this, function (L) {                                                                                              // 12
	'use strict';                                                                                                      // 13
                                                                                                                    // 14
	L.TileLayer.Provider = L.TileLayer.extend({                                                                        // 15
		initialize: function (arg, options) {                                                                             // 16
			var providers = L.TileLayer.Provider.providers;                                                                  // 17
                                                                                                                    // 18
			var parts = arg.split('.');                                                                                      // 19
                                                                                                                    // 20
			var providerName = parts[0];                                                                                     // 21
			var variantName = parts[1];                                                                                      // 22
                                                                                                                    // 23
			if (!providers[providerName]) {                                                                                  // 24
				throw 'No such provider (' + providerName + ')';                                                                // 25
			}                                                                                                                // 26
                                                                                                                    // 27
			var provider = {                                                                                                 // 28
				url: providers[providerName].url,                                                                               // 29
				options: providers[providerName].options                                                                        // 30
			};                                                                                                               // 31
                                                                                                                    // 32
			// overwrite values in provider from variant.                                                                    // 33
			if (variantName && 'variants' in providers[providerName]) {                                                      // 34
				if (!(variantName in providers[providerName].variants)) {                                                       // 35
					throw 'No such variant of ' + providerName + ' (' + variantName + ')';                                         // 36
				}                                                                                                               // 37
				var variant = providers[providerName].variants[variantName];                                                    // 38
				var variantOptions;                                                                                             // 39
				if (typeof variant === 'string') {                                                                              // 40
					variantOptions = {                                                                                             // 41
						variant: variant                                                                                              // 42
					};                                                                                                             // 43
				} else {                                                                                                        // 44
					variantOptions = variant.options;                                                                              // 45
				}                                                                                                               // 46
				provider = {                                                                                                    // 47
					url: variant.url || provider.url,                                                                              // 48
					options: L.Util.extend({}, provider.options, variantOptions)                                                   // 49
				};                                                                                                              // 50
			} else if (typeof provider.url === 'function') {                                                                 // 51
				provider.url = provider.url(parts.splice(1, parts.length - 1).join('.'));                                       // 52
			}                                                                                                                // 53
                                                                                                                    // 54
			var forceHTTP = window.location.protocol === 'file:' || provider.options.forceHTTP;                              // 55
			if (provider.url.indexOf('//') === 0 && forceHTTP) {                                                             // 56
				provider.url = 'http:' + provider.url;                                                                          // 57
			}                                                                                                                // 58
                                                                                                                    // 59
			// If retina option is set                                                                                       // 60
			if (provider.options.retina) {                                                                                   // 61
				// Check retina screen                                                                                          // 62
				if (options.detectRetina && L.Browser.retina) {                                                                 // 63
					// The retina option will be active now                                                                        // 64
					// But we need to prevent Leaflet retina mode                                                                  // 65
					options.detectRetina = false;                                                                                  // 66
				} else {                                                                                                        // 67
					// No retina, remove option                                                                                    // 68
					provider.options.retina = '';                                                                                  // 69
				}                                                                                                               // 70
			}                                                                                                                // 71
                                                                                                                    // 72
			// replace attribution placeholders with their values from toplevel provider attribution,                        // 73
			// recursively                                                                                                   // 74
			var attributionReplacer = function (attr) {                                                                      // 75
				if (attr.indexOf('{attribution.') === -1) {                                                                     // 76
					return attr;                                                                                                   // 77
				}                                                                                                               // 78
				return attr.replace(/\{attribution.(\w*)\}/,                                                                    // 79
					function (match, attributionName) {                                                                            // 80
						return attributionReplacer(providers[attributionName].options.attribution);                                   // 81
					}                                                                                                              // 82
				);                                                                                                              // 83
			};                                                                                                               // 84
			provider.options.attribution = attributionReplacer(provider.options.attribution);                                // 85
                                                                                                                    // 86
			// Compute final options combining provider options with any user overrides                                      // 87
			var layerOpts = L.Util.extend({}, provider.options, options);                                                    // 88
			L.TileLayer.prototype.initialize.call(this, provider.url, layerOpts);                                            // 89
		}                                                                                                                 // 90
	});                                                                                                                // 91
                                                                                                                    // 92
	/**                                                                                                                // 93
	 * Definition of providers.                                                                                        // 94
	 * see http://leafletjs.com/reference.html#tilelayer for options in the options map.                               // 95
	 */                                                                                                                // 96
                                                                                                                    // 97
	L.TileLayer.Provider.providers = {                                                                                 // 98
		OpenStreetMap: {                                                                                                  // 99
			url: '//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',                                                             // 100
			options: {                                                                                                       // 101
				maxZoom: 19,                                                                                                    // 102
				attribution:                                                                                                    // 103
					'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'                                    // 104
			},                                                                                                               // 105
			variants: {                                                                                                      // 106
				Mapnik: {},                                                                                                     // 107
				BlackAndWhite: {                                                                                                // 108
					url: 'http://{s}.tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png',                                                 // 109
					options: {                                                                                                     // 110
						maxZoom: 18                                                                                                   // 111
					}                                                                                                              // 112
				},                                                                                                              // 113
				DE: {                                                                                                           // 114
					url: 'http://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png',                                           // 115
					options: {                                                                                                     // 116
						maxZoom: 18                                                                                                   // 117
					}                                                                                                              // 118
				},                                                                                                              // 119
				France: {                                                                                                       // 120
					url: 'http://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png',                                                 // 121
					options: {                                                                                                     // 122
						attribution: '&copy; Openstreetmap France | {attribution.OpenStreetMap}'                                      // 123
					}                                                                                                              // 124
				},                                                                                                              // 125
				HOT: {                                                                                                          // 126
					url: 'http://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png',                                                   // 127
					options: {                                                                                                     // 128
						attribution: '{attribution.OpenStreetMap}, Tiles courtesy of <a href="http://hot.openstreetmap.org/" target="_blank">Humanitarian OpenStreetMap Team</a>'
					}                                                                                                              // 130
				}                                                                                                               // 131
			}                                                                                                                // 132
		},                                                                                                                // 133
		OpenSeaMap: {                                                                                                     // 134
			url: 'http://tiles.openseamap.org/seamark/{z}/{x}/{y}.png',                                                      // 135
			options: {                                                                                                       // 136
				attribution: 'Map data: &copy; <a href="http://www.openseamap.org">OpenSeaMap</a> contributors'                 // 137
			}                                                                                                                // 138
		},                                                                                                                // 139
		OpenTopoMap: {                                                                                                    // 140
			url: '//{s}.tile.opentopomap.org/{z}/{x}/{y}.png',                                                               // 141
			options: {                                                                                                       // 142
				maxZoom: 16,                                                                                                    // 143
				attribution: 'Map data: {attribution.OpenStreetMap}, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'
			}                                                                                                                // 145
		},                                                                                                                // 146
		Thunderforest: {                                                                                                  // 147
			url: '//{s}.tile.thunderforest.com/{variant}/{z}/{x}/{y}.png',                                                   // 148
			options: {                                                                                                       // 149
				attribution:                                                                                                    // 150
					'&copy; <a href="http://www.opencyclemap.org">OpenCycleMap</a>, {attribution.OpenStreetMap}',                  // 151
				variant: 'cycle'                                                                                                // 152
			},                                                                                                               // 153
			variants: {                                                                                                      // 154
				OpenCycleMap: 'cycle',                                                                                          // 155
				Transport: {                                                                                                    // 156
					options: {                                                                                                     // 157
						variant: 'transport',                                                                                         // 158
						maxZoom: 19                                                                                                   // 159
					}                                                                                                              // 160
				},                                                                                                              // 161
				TransportDark: {                                                                                                // 162
					options: {                                                                                                     // 163
						variant: 'transport-dark',                                                                                    // 164
						maxZoom: 19                                                                                                   // 165
					}                                                                                                              // 166
				},                                                                                                              // 167
				Landscape: 'landscape',                                                                                         // 168
				Outdoors: 'outdoors'                                                                                            // 169
			}                                                                                                                // 170
		},                                                                                                                // 171
		OpenMapSurfer: {                                                                                                  // 172
			url: 'http://korona.geog.uni-heidelberg.de/tiles/{variant}/x={x}&y={y}&z={z}',                                   // 173
			options: {                                                                                                       // 174
				maxZoom: 20,                                                                                                    // 175
				variant: 'roads',                                                                                               // 176
				attribution: 'Imagery from <a href="http://giscience.uni-hd.de/">GIScience Research Group @ University of Heidelberg</a> &mdash; Map data {attribution.OpenStreetMap}'
			},                                                                                                               // 178
			variants: {                                                                                                      // 179
				Roads: 'roads',                                                                                                 // 180
				AdminBounds: {                                                                                                  // 181
					options: {                                                                                                     // 182
						variant: 'adminb',                                                                                            // 183
						maxZoom: 19                                                                                                   // 184
					}                                                                                                              // 185
				},                                                                                                              // 186
				Grayscale: {                                                                                                    // 187
					options: {                                                                                                     // 188
						variant: 'roadsg',                                                                                            // 189
						maxZoom: 19                                                                                                   // 190
					}                                                                                                              // 191
				}                                                                                                               // 192
			}                                                                                                                // 193
		},                                                                                                                // 194
		Hydda: {                                                                                                          // 195
			url: 'http://{s}.tile.openstreetmap.se/hydda/{variant}/{z}/{x}/{y}.png',                                         // 196
			options: {                                                                                                       // 197
				variant: 'full',                                                                                                // 198
				attribution: 'Tiles courtesy of <a href="http://openstreetmap.se/" target="_blank">OpenStreetMap Sweden</a> &mdash; Map data {attribution.OpenStreetMap}'
			},                                                                                                               // 200
			variants: {                                                                                                      // 201
				Full: 'full',                                                                                                   // 202
				Base: 'base',                                                                                                   // 203
				RoadsAndLabels: 'roads_and_labels'                                                                              // 204
			}                                                                                                                // 205
		},                                                                                                                // 206
		MapQuestOpen: {                                                                                                   // 207
			/* Mapquest does support https, but with a different subdomain:                                                  // 208
			 * https://otile{s}-s.mqcdn.com/tiles/1.0.0/{type}/{z}/{x}/{y}.{ext}                                             // 209
			 * which makes implementing protocol relativity impossible.                                                      // 210
			 */                                                                                                              // 211
			url: 'http://otile{s}.mqcdn.com/tiles/1.0.0/{type}/{z}/{x}/{y}.{ext}',                                           // 212
			options: {                                                                                                       // 213
				type: 'map',                                                                                                    // 214
				ext: 'jpg',                                                                                                     // 215
				attribution:                                                                                                    // 216
					'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a> &mdash; ' +                                 // 217
					'Map data {attribution.OpenStreetMap}',                                                                        // 218
				subdomains: '1234'                                                                                              // 219
			},                                                                                                               // 220
			variants: {                                                                                                      // 221
				OSM: {},                                                                                                        // 222
				Aerial: {                                                                                                       // 223
					options: {                                                                                                     // 224
						type: 'sat',                                                                                                  // 225
						attribution:                                                                                                  // 226
							'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a> &mdash; ' +                               // 227
							'Portions Courtesy NASA/JPL-Caltech and U.S. Depart. of Agriculture, Farm Service Agency'                    // 228
					}                                                                                                              // 229
				},                                                                                                              // 230
				HybridOverlay: {                                                                                                // 231
					options: {                                                                                                     // 232
						type: 'hyb',                                                                                                  // 233
						ext: 'png',                                                                                                   // 234
						opacity: 0.9                                                                                                  // 235
					}                                                                                                              // 236
				}                                                                                                               // 237
			}                                                                                                                // 238
		},                                                                                                                // 239
		MapBox: {                                                                                                         // 240
			url: '//api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}',                                // 241
			options: {                                                                                                       // 242
				attribution:                                                                                                    // 243
					'Imagery from <a href="http://mapbox.com/about/maps/">MapBox</a> &mdash; ' +                                   // 244
					'Map data {attribution.OpenStreetMap}',                                                                        // 245
				subdomains: 'abcd'                                                                                              // 246
			}                                                                                                                // 247
		},                                                                                                                // 248
		Stamen: {                                                                                                         // 249
			url: '//stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}.{ext}',                                          // 250
			options: {                                                                                                       // 251
				attribution:                                                                                                    // 252
					'Map tiles by <a href="http://stamen.com">Stamen Design</a>, ' +                                               // 253
					'<a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; ' +                                // 254
					'Map data {attribution.OpenStreetMap}',                                                                        // 255
				subdomains: 'abcd',                                                                                             // 256
				minZoom: 0,                                                                                                     // 257
				maxZoom: 20,                                                                                                    // 258
				variant: 'toner',                                                                                               // 259
				ext: 'png'                                                                                                      // 260
			},                                                                                                               // 261
			variants: {                                                                                                      // 262
				Toner: 'toner',                                                                                                 // 263
				TonerBackground: 'toner-background',                                                                            // 264
				TonerHybrid: 'toner-hybrid',                                                                                    // 265
				TonerLines: 'toner-lines',                                                                                      // 266
				TonerLabels: 'toner-labels',                                                                                    // 267
				TonerLite: 'toner-lite',                                                                                        // 268
				Watercolor: {                                                                                                   // 269
					options: {                                                                                                     // 270
						variant: 'watercolor',                                                                                        // 271
						minZoom: 1,                                                                                                   // 272
						maxZoom: 16                                                                                                   // 273
					}                                                                                                              // 274
				},                                                                                                              // 275
				Terrain: {                                                                                                      // 276
					options: {                                                                                                     // 277
						variant: 'terrain',                                                                                           // 278
						minZoom: 4,                                                                                                   // 279
						maxZoom: 18,                                                                                                  // 280
						bounds: [[22, -132], [70, -56]]                                                                               // 281
					}                                                                                                              // 282
				},                                                                                                              // 283
				TerrainBackground: {                                                                                            // 284
					options: {                                                                                                     // 285
						variant: 'terrain-background',                                                                                // 286
						minZoom: 4,                                                                                                   // 287
						maxZoom: 18,                                                                                                  // 288
						bounds: [[22, -132], [70, -56]]                                                                               // 289
					}                                                                                                              // 290
				},                                                                                                              // 291
				TopOSMRelief: {                                                                                                 // 292
					options: {                                                                                                     // 293
						variant: 'toposm-color-relief',                                                                               // 294
						ext: 'jpg',                                                                                                   // 295
						bounds: [[22, -132], [51, -56]]                                                                               // 296
					}                                                                                                              // 297
				},                                                                                                              // 298
				TopOSMFeatures: {                                                                                               // 299
					options: {                                                                                                     // 300
						variant: 'toposm-features',                                                                                   // 301
						bounds: [[22, -132], [51, -56]],                                                                              // 302
						opacity: 0.9                                                                                                  // 303
					}                                                                                                              // 304
				}                                                                                                               // 305
			}                                                                                                                // 306
		},                                                                                                                // 307
		Esri: {                                                                                                           // 308
			url: '//server.arcgisonline.com/ArcGIS/rest/services/{variant}/MapServer/tile/{z}/{y}/{x}',                      // 309
			options: {                                                                                                       // 310
				variant: 'World_Street_Map',                                                                                    // 311
				attribution: 'Tiles &copy; Esri'                                                                                // 312
			},                                                                                                               // 313
			variants: {                                                                                                      // 314
				WorldStreetMap: {                                                                                               // 315
					options: {                                                                                                     // 316
						attribution:                                                                                                  // 317
							'{attribution.Esri} &mdash; ' +                                                                              // 318
							'Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012'
					}                                                                                                              // 320
				},                                                                                                              // 321
				DeLorme: {                                                                                                      // 322
					options: {                                                                                                     // 323
						variant: 'Specialty/DeLorme_World_Base_Map',                                                                  // 324
						minZoom: 1,                                                                                                   // 325
						maxZoom: 11,                                                                                                  // 326
						attribution: '{attribution.Esri} &mdash; Copyright: &copy;2012 DeLorme'                                       // 327
					}                                                                                                              // 328
				},                                                                                                              // 329
				WorldTopoMap: {                                                                                                 // 330
					options: {                                                                                                     // 331
						variant: 'World_Topo_Map',                                                                                    // 332
						attribution:                                                                                                  // 333
							'{attribution.Esri} &mdash; ' +                                                                              // 334
							'Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community'
					}                                                                                                              // 336
				},                                                                                                              // 337
				WorldImagery: {                                                                                                 // 338
					options: {                                                                                                     // 339
						variant: 'World_Imagery',                                                                                     // 340
						attribution:                                                                                                  // 341
							'{attribution.Esri} &mdash; ' +                                                                              // 342
							'Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'
					}                                                                                                              // 344
				},                                                                                                              // 345
				WorldTerrain: {                                                                                                 // 346
					options: {                                                                                                     // 347
						variant: 'World_Terrain_Base',                                                                                // 348
						maxZoom: 13,                                                                                                  // 349
						attribution:                                                                                                  // 350
							'{attribution.Esri} &mdash; ' +                                                                              // 351
							'Source: USGS, Esri, TANA, DeLorme, and NPS'                                                                 // 352
					}                                                                                                              // 353
				},                                                                                                              // 354
				WorldShadedRelief: {                                                                                            // 355
					options: {                                                                                                     // 356
						variant: 'World_Shaded_Relief',                                                                               // 357
						maxZoom: 13,                                                                                                  // 358
						attribution: '{attribution.Esri} &mdash; Source: Esri'                                                        // 359
					}                                                                                                              // 360
				},                                                                                                              // 361
				WorldPhysical: {                                                                                                // 362
					options: {                                                                                                     // 363
						variant: 'World_Physical_Map',                                                                                // 364
						maxZoom: 8,                                                                                                   // 365
						attribution: '{attribution.Esri} &mdash; Source: US National Park Service'                                    // 366
					}                                                                                                              // 367
				},                                                                                                              // 368
				OceanBasemap: {                                                                                                 // 369
					options: {                                                                                                     // 370
						variant: 'Ocean_Basemap',                                                                                     // 371
						maxZoom: 13,                                                                                                  // 372
						attribution: '{attribution.Esri} &mdash; Sources: GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri'
					}                                                                                                              // 374
				},                                                                                                              // 375
				NatGeoWorldMap: {                                                                                               // 376
					options: {                                                                                                     // 377
						variant: 'NatGeo_World_Map',                                                                                  // 378
						maxZoom: 16,                                                                                                  // 379
						attribution: '{attribution.Esri} &mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC'
					}                                                                                                              // 381
				},                                                                                                              // 382
				WorldGrayCanvas: {                                                                                              // 383
					options: {                                                                                                     // 384
						variant: 'Canvas/World_Light_Gray_Base',                                                                      // 385
						maxZoom: 16,                                                                                                  // 386
						attribution: '{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ'                                               // 387
					}                                                                                                              // 388
				}                                                                                                               // 389
			}                                                                                                                // 390
		},                                                                                                                // 391
		OpenWeatherMap: {                                                                                                 // 392
			url: 'http://{s}.tile.openweathermap.org/map/{variant}/{z}/{x}/{y}.png',                                         // 393
			options: {                                                                                                       // 394
				maxZoom: 19,                                                                                                    // 395
				attribution: 'Map data &copy; <a href="http://openweathermap.org">OpenWeatherMap</a>',                          // 396
				opacity: 0.5                                                                                                    // 397
			},                                                                                                               // 398
			variants: {                                                                                                      // 399
				Clouds: 'clouds',                                                                                               // 400
				CloudsClassic: 'clouds_cls',                                                                                    // 401
				Precipitation: 'precipitation',                                                                                 // 402
				PrecipitationClassic: 'precipitation_cls',                                                                      // 403
				Rain: 'rain',                                                                                                   // 404
				RainClassic: 'rain_cls',                                                                                        // 405
				Pressure: 'pressure',                                                                                           // 406
				PressureContour: 'pressure_cntr',                                                                               // 407
				Wind: 'wind',                                                                                                   // 408
				Temperature: 'temp',                                                                                            // 409
				Snow: 'snow'                                                                                                    // 410
			}                                                                                                                // 411
		},                                                                                                                // 412
		HERE: {                                                                                                           // 413
			/*                                                                                                               // 414
			 * HERE maps, formerly Nokia maps.                                                                               // 415
			 * These basemaps are free, but you need an API key. Please sign up at                                           // 416
			 * http://developer.here.com/getting-started                                                                     // 417
			 *                                                                                                               // 418
			 * Note that the base urls contain '.cit' whichs is HERE's                                                       // 419
			 * 'Customer Integration Testing' environment. Please remove for production                                      // 420
			 * envirionments.                                                                                                // 421
			 */                                                                                                              // 422
			url:                                                                                                             // 423
				'//{s}.{base}.maps.cit.api.here.com/maptile/2.1/' +                                                             // 424
				'{type}/{mapID}/{variant}/{z}/{x}/{y}/{size}/{format}?' +                                                       // 425
				'app_id={app_id}&app_code={app_code}&lg={language}',                                                            // 426
			options: {                                                                                                       // 427
				attribution:                                                                                                    // 428
					'Map &copy; 1987-2014 <a href="http://developer.here.com">HERE</a>',                                           // 429
				subdomains: '1234',                                                                                             // 430
				mapID: 'newest',                                                                                                // 431
				'app_id': '<insert your app_id here>',                                                                          // 432
				'app_code': '<insert your app_code here>',                                                                      // 433
				base: 'base',                                                                                                   // 434
				variant: 'normal.day',                                                                                          // 435
				maxZoom: 20,                                                                                                    // 436
				type: 'maptile',                                                                                                // 437
				language: 'eng',                                                                                                // 438
				format: 'png8',                                                                                                 // 439
				size: '256'                                                                                                     // 440
			},                                                                                                               // 441
			variants: {                                                                                                      // 442
				normalDay: 'normal.day',                                                                                        // 443
				normalDayCustom: 'normal.day.custom',                                                                           // 444
				normalDayGrey: 'normal.day.grey',                                                                               // 445
				normalDayMobile: 'normal.day.mobile',                                                                           // 446
				normalDayGreyMobile: 'normal.day.grey.mobile',                                                                  // 447
				normalDayTransit: 'normal.day.transit',                                                                         // 448
				normalDayTransitMobile: 'normal.day.transit.mobile',                                                            // 449
				normalNight: 'normal.night',                                                                                    // 450
				normalNightMobile: 'normal.night.mobile',                                                                       // 451
				normalNightGrey: 'normal.night.grey',                                                                           // 452
				normalNightGreyMobile: 'normal.night.grey.mobile',                                                              // 453
                                                                                                                    // 454
				basicMap: {                                                                                                     // 455
					options: {                                                                                                     // 456
						type: 'basetile'                                                                                              // 457
					}                                                                                                              // 458
				},                                                                                                              // 459
				mapLabels: {                                                                                                    // 460
					options: {                                                                                                     // 461
						type: 'labeltile',                                                                                            // 462
						format: 'png'                                                                                                 // 463
					}                                                                                                              // 464
				},                                                                                                              // 465
				trafficFlow: {                                                                                                  // 466
					options: {                                                                                                     // 467
						base: 'traffic',                                                                                              // 468
						type: 'flowtile'                                                                                              // 469
					}                                                                                                              // 470
				},                                                                                                              // 471
				carnavDayGrey: 'carnav.day.grey',                                                                               // 472
				hybridDay: {                                                                                                    // 473
					options: {                                                                                                     // 474
						base: 'aerial',                                                                                               // 475
						variant: 'hybrid.day'                                                                                         // 476
					}                                                                                                              // 477
				},                                                                                                              // 478
				hybridDayMobile: {                                                                                              // 479
					options: {                                                                                                     // 480
						base: 'aerial',                                                                                               // 481
						variant: 'hybrid.day.mobile'                                                                                  // 482
					}                                                                                                              // 483
				},                                                                                                              // 484
				pedestrianDay: 'pedestrian.day',                                                                                // 485
				pedestrianNight: 'pedestrian.night',                                                                            // 486
				satelliteDay: {                                                                                                 // 487
					options: {                                                                                                     // 488
						base: 'aerial',                                                                                               // 489
						variant: 'satellite.day'                                                                                      // 490
					}                                                                                                              // 491
				},                                                                                                              // 492
				terrainDay: {                                                                                                   // 493
					options: {                                                                                                     // 494
						base: 'aerial',                                                                                               // 495
						variant: 'terrain.day'                                                                                        // 496
					}                                                                                                              // 497
				},                                                                                                              // 498
				terrainDayMobile: {                                                                                             // 499
					options: {                                                                                                     // 500
						base: 'aerial',                                                                                               // 501
						variant: 'terrain.day.mobile'                                                                                 // 502
					}                                                                                                              // 503
				}                                                                                                               // 504
			}                                                                                                                // 505
		},                                                                                                                // 506
		FreeMapSK: {                                                                                                      // 507
			url: 'http://t{s}.freemap.sk/T/{z}/{x}/{y}.jpeg',                                                                // 508
			options: {                                                                                                       // 509
				minZoom: 8,                                                                                                     // 510
				maxZoom: 16,                                                                                                    // 511
				subdomains: '1234',                                                                                             // 512
				bounds: [[47.204642, 15.996093], [49.830896, 22.576904]],                                                       // 513
				attribution:                                                                                                    // 514
					'{attribution.OpenStreetMap}, vizualization CC-By-SA 2.0 <a href="http://freemap.sk">Freemap.sk</a>'           // 515
			}                                                                                                                // 516
		},                                                                                                                // 517
		MtbMap: {                                                                                                         // 518
			url: 'http://tile.mtbmap.cz/mtbmap_tiles/{z}/{x}/{y}.png',                                                       // 519
			options: {                                                                                                       // 520
				attribution:                                                                                                    // 521
					'{attribution.OpenStreetMap} &amp; USGS'                                                                       // 522
			}                                                                                                                // 523
		},                                                                                                                // 524
		CartoDB: {                                                                                                        // 525
			url: 'http://{s}.basemaps.cartocdn.com/{variant}/{z}/{x}/{y}.png',                                               // 526
			options: {                                                                                                       // 527
				attribution: '{attribution.OpenStreetMap} &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',        // 528
				subdomains: 'abcd',                                                                                             // 529
				maxZoom: 19,                                                                                                    // 530
				variant: 'light_all'                                                                                            // 531
			},                                                                                                               // 532
			variants: {                                                                                                      // 533
				Positron: 'light_all',                                                                                          // 534
				PositronNoLabels: 'light_nolabels',                                                                             // 535
				PositronOnlyLabels: 'light_only_labels',                                                                        // 536
				DarkMatter: 'dark_all',                                                                                         // 537
				DarkMatterNoLabels: 'dark_nolabels',                                                                            // 538
				DarkMatterOnlyLabels: 'dark_only_labels'                                                                        // 539
			}                                                                                                                // 540
		},                                                                                                                // 541
		HikeBike: {                                                                                                       // 542
			url: 'http://{s}.tiles.wmflabs.org/{variant}/{z}/{x}/{y}.png',                                                   // 543
			options: {                                                                                                       // 544
				maxZoom: 19,                                                                                                    // 545
				attribution: '{attribution.OpenStreetMap}',                                                                     // 546
				variant: 'hikebike'                                                                                             // 547
			},                                                                                                               // 548
			variants: {                                                                                                      // 549
				HikeBike: {},                                                                                                   // 550
				HillShading: {                                                                                                  // 551
					options: {                                                                                                     // 552
						maxZoom: 15,                                                                                                  // 553
						variant: 'hillshading'                                                                                        // 554
					}                                                                                                              // 555
				}                                                                                                               // 556
			}                                                                                                                // 557
		},                                                                                                                // 558
		BasemapAT: {                                                                                                      // 559
			url: '//maps{s}.wien.gv.at/basemap/{variant}/normal/google3857/{z}/{y}/{x}.{format}',                            // 560
			options: {                                                                                                       // 561
				maxZoom: 19,                                                                                                    // 562
				attribution: 'Datenquelle: <a href="www.basemap.at">basemap.at</a>',                                            // 563
				subdomains: ['', '1', '2', '3', '4'],                                                                           // 564
				format: 'png',                                                                                                  // 565
				bounds: [[46.358770, 8.782379], [49.037872, 17.189532]],                                                        // 566
				variant: 'geolandbasemap'                                                                                       // 567
			},                                                                                                               // 568
			variants: {                                                                                                      // 569
				basemap: 'geolandbasemap',                                                                                      // 570
				grau: 'bmapgrau',                                                                                               // 571
				overlay: 'bmapoverlay',                                                                                         // 572
				highdpi: {                                                                                                      // 573
					options: {                                                                                                     // 574
						variant: 'bmaphidpi',                                                                                         // 575
						format: 'jpeg'                                                                                                // 576
					}                                                                                                              // 577
				},                                                                                                              // 578
				orthofoto: {                                                                                                    // 579
					options: {                                                                                                     // 580
						variant: 'bmaporthofoto30cm',                                                                                 // 581
						format: 'jpeg'                                                                                                // 582
					}                                                                                                              // 583
				}                                                                                                               // 584
			}                                                                                                                // 585
		},                                                                                                                // 586
		NASAGIBS: {                                                                                                       // 587
			url: '//map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}{maxZoom}/{z}/{y}/{x}.{format}',
			options: {                                                                                                       // 589
				attribution:                                                                                                    // 590
					'Imagery provided by services from the Global Imagery Browse Services (GIBS), operated by the NASA/GSFC/Earth Science Data and Information System ' +
					'(<a href="https://earthdata.nasa.gov">ESDIS</a>) with funding provided by NASA/HQ.',                          // 592
				bounds: [[-85.0511287776, -179.999999975], [85.0511287776, 179.999999975]],                                     // 593
				minZoom: 1,                                                                                                     // 594
				maxZoom: 9,                                                                                                     // 595
				format: 'jpg',                                                                                                  // 596
				time: '',                                                                                                       // 597
				tilematrixset: 'GoogleMapsCompatible_Level'                                                                     // 598
			},                                                                                                               // 599
			variants: {                                                                                                      // 600
				ModisTerraTrueColorCR: 'MODIS_Terra_CorrectedReflectance_TrueColor',                                            // 601
				ModisTerraBands367CR: 'MODIS_Terra_CorrectedReflectance_Bands367',                                              // 602
				ViirsEarthAtNight2012: {                                                                                        // 603
					options: {                                                                                                     // 604
						variant: 'VIIRS_CityLights_2012',                                                                             // 605
						maxZoom: 8                                                                                                    // 606
					}                                                                                                              // 607
				},                                                                                                              // 608
				ModisTerraLSTDay: {                                                                                             // 609
					options: {                                                                                                     // 610
						variant: 'MODIS_Terra_Land_Surface_Temp_Day',                                                                 // 611
						format: 'png',                                                                                                // 612
						maxZoom: 7,                                                                                                   // 613
						opacity: 0.75                                                                                                 // 614
					}                                                                                                              // 615
				},                                                                                                              // 616
				ModisTerraSnowCover: {                                                                                          // 617
					options: {                                                                                                     // 618
						variant: 'MODIS_Terra_Snow_Cover',                                                                            // 619
						format: 'png',                                                                                                // 620
						maxZoom: 8,                                                                                                   // 621
						opacity: 0.75                                                                                                 // 622
					}                                                                                                              // 623
				},                                                                                                              // 624
				ModisTerraAOD: {                                                                                                // 625
					options: {                                                                                                     // 626
						variant: 'MODIS_Terra_Aerosol',                                                                               // 627
						format: 'png',                                                                                                // 628
						maxZoom: 6,                                                                                                   // 629
						opacity: 0.75                                                                                                 // 630
					}                                                                                                              // 631
				},                                                                                                              // 632
				ModisTerraChlorophyll: {                                                                                        // 633
					options: {                                                                                                     // 634
						variant: 'MODIS_Terra_Chlorophyll_A',                                                                         // 635
						format: 'png',                                                                                                // 636
						maxZoom: 7,                                                                                                   // 637
						opacity: 0.75                                                                                                 // 638
					}                                                                                                              // 639
				}                                                                                                               // 640
			}                                                                                                                // 641
		},                                                                                                                // 642
		NLS: {                                                                                                            // 643
			// NLS maps are copyright National library of Scotland.                                                          // 644
			// http://maps.nls.uk/projects/api/index.html                                                                    // 645
			// Please contact NLS for anything other than non-commercial low volume usage                                    // 646
			//                                                                                                               // 647
			// Map sources: Ordnance Survey 1:1m to 1:63K, 1920s-1940s                                                       // 648
			//   z0-9  - 1:1m                                                                                                // 649
			//  z10-11 - quarter inch (1:253440)                                                                             // 650
			//  z12-18 - one inch (1:63360)                                                                                  // 651
			url: '//nls-{s}.tileserver.com/nls/{z}/{x}/{y}.jpg',                                                             // 652
			options: {                                                                                                       // 653
				attribution: '<a href="http://geo.nls.uk/maps/">National Library of Scotland Historic Maps</a>',                // 654
				bounds: [[49.6, -12], [61.7, 3]],                                                                               // 655
				minZoom: 1,                                                                                                     // 656
				maxZoom: 18,                                                                                                    // 657
				subdomains: '0123',                                                                                             // 658
			}                                                                                                                // 659
		}                                                                                                                 // 660
	};                                                                                                                 // 661
                                                                                                                    // 662
	L.tileLayer.provider = function (provider, options) {                                                              // 663
		return new L.TileLayer.Provider(provider, options);                                                               // 664
	};                                                                                                                 // 665
                                                                                                                    // 666
	return L;                                                                                                          // 667
}));                                                                                                                // 668
                                                                                                                    // 669
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);






(function(){

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                  //
// packages/bevanhunt_leaflet/.npm/package/node_modules/spin.js/spin.js                                             //
//                                                                                                                  //
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                    //
/**                                                                                                                 // 1
 * Copyright (c) 2011-2014 Felix Gnass                                                                              // 2
 * Licensed under the MIT license                                                                                   // 3
 * http://spin.js.org/                                                                                              // 4
 *                                                                                                                  // 5
 * Example:                                                                                                         // 6
    var opts = {                                                                                                    // 7
      lines: 12             // The number of lines to draw                                                          // 8
    , length: 7             // The length of each line                                                              // 9
    , width: 5              // The line thickness                                                                   // 10
    , radius: 10            // The radius of the inner circle                                                       // 11
    , scale: 1.0            // Scales overall size of the spinner                                                   // 12
    , corners: 1            // Roundness (0..1)                                                                     // 13
    , color: '#000'         // #rgb or #rrggbb                                                                      // 14
    , opacity: 1/4          // Opacity of the lines                                                                 // 15
    , rotate: 0             // Rotation offset                                                                      // 16
    , direction: 1          // 1: clockwise, -1: counterclockwise                                                   // 17
    , speed: 1              // Rounds per second                                                                    // 18
    , trail: 100            // Afterglow percentage                                                                 // 19
    , fps: 20               // Frames per second when using setTimeout()                                            // 20
    , zIndex: 2e9           // Use a high z-index by default                                                        // 21
    , className: 'spinner'  // CSS class to assign to the element                                                   // 22
    , top: '50%'            // center vertically                                                                    // 23
    , left: '50%'           // center horizontally                                                                  // 24
    , shadow: false         // Whether to render a shadow                                                           // 25
    , hwaccel: false        // Whether to use hardware acceleration (might be buggy)                                // 26
    , position: 'absolute'  // Element positioning                                                                  // 27
    }                                                                                                               // 28
    var target = document.getElementById('foo')                                                                     // 29
    var spinner = new Spinner(opts).spin(target)                                                                    // 30
 */                                                                                                                 // 31
;(function (root, factory) {                                                                                        // 32
                                                                                                                    // 33
  /* CommonJS */                                                                                                    // 34
  if (typeof module == 'object' && module.exports) module.exports = factory()                                       // 35
                                                                                                                    // 36
  /* AMD module */                                                                                                  // 37
  else if (typeof define == 'function' && define.amd) define(factory)                                               // 38
                                                                                                                    // 39
  /* Browser global */                                                                                              // 40
  else root.Spinner = factory()                                                                                     // 41
}(this, function () {                                                                                               // 42
  "use strict"                                                                                                      // 43
                                                                                                                    // 44
  var prefixes = ['webkit', 'Moz', 'ms', 'O'] /* Vendor prefixes */                                                 // 45
    , animations = {} /* Animation rules keyed by their name */                                                     // 46
    , useCssAnimations /* Whether to use CSS animations or setTimeout */                                            // 47
    , sheet /* A stylesheet to hold the @keyframe or VML rules. */                                                  // 48
                                                                                                                    // 49
  /**                                                                                                               // 50
   * Utility function to create elements. If no tag name is given,                                                  // 51
   * a DIV is created. Optionally properties can be passed.                                                         // 52
   */                                                                                                               // 53
  function createEl (tag, prop) {                                                                                   // 54
    var el = document.createElement(tag || 'div')                                                                   // 55
      , n                                                                                                           // 56
                                                                                                                    // 57
    for (n in prop) el[n] = prop[n]                                                                                 // 58
    return el                                                                                                       // 59
  }                                                                                                                 // 60
                                                                                                                    // 61
  /**                                                                                                               // 62
   * Appends children and returns the parent.                                                                       // 63
   */                                                                                                               // 64
  function ins (parent /* child1, child2, ...*/) {                                                                  // 65
    for (var i = 1, n = arguments.length; i < n; i++) {                                                             // 66
      parent.appendChild(arguments[i])                                                                              // 67
    }                                                                                                               // 68
                                                                                                                    // 69
    return parent                                                                                                   // 70
  }                                                                                                                 // 71
                                                                                                                    // 72
  /**                                                                                                               // 73
   * Creates an opacity keyframe animation rule and returns its name.                                               // 74
   * Since most mobile Webkits have timing issues with animation-delay,                                             // 75
   * we create separate rules for each line/segment.                                                                // 76
   */                                                                                                               // 77
  function addAnimation (alpha, trail, i, lines) {                                                                  // 78
    var name = ['opacity', trail, ~~(alpha * 100), i, lines].join('-')                                              // 79
      , start = 0.01 + i/lines * 100                                                                                // 80
      , z = Math.max(1 - (1-alpha) / trail * (100-start), alpha)                                                    // 81
      , prefix = useCssAnimations.substring(0, useCssAnimations.indexOf('Animation')).toLowerCase()                 // 82
      , pre = prefix && '-' + prefix + '-' || ''                                                                    // 83
                                                                                                                    // 84
    if (!animations[name]) {                                                                                        // 85
      sheet.insertRule(                                                                                             // 86
        '@' + pre + 'keyframes ' + name + '{' +                                                                     // 87
        '0%{opacity:' + z + '}' +                                                                                   // 88
        start + '%{opacity:' + alpha + '}' +                                                                        // 89
        (start+0.01) + '%{opacity:1}' +                                                                             // 90
        (start+trail) % 100 + '%{opacity:' + alpha + '}' +                                                          // 91
        '100%{opacity:' + z + '}' +                                                                                 // 92
        '}', sheet.cssRules.length)                                                                                 // 93
                                                                                                                    // 94
      animations[name] = 1                                                                                          // 95
    }                                                                                                               // 96
                                                                                                                    // 97
    return name                                                                                                     // 98
  }                                                                                                                 // 99
                                                                                                                    // 100
  /**                                                                                                               // 101
   * Tries various vendor prefixes and returns the first supported property.                                        // 102
   */                                                                                                               // 103
  function vendor (el, prop) {                                                                                      // 104
    var s = el.style                                                                                                // 105
      , pp                                                                                                          // 106
      , i                                                                                                           // 107
                                                                                                                    // 108
    prop = prop.charAt(0).toUpperCase() + prop.slice(1)                                                             // 109
    if (s[prop] !== undefined) return prop                                                                          // 110
    for (i = 0; i < prefixes.length; i++) {                                                                         // 111
      pp = prefixes[i]+prop                                                                                         // 112
      if (s[pp] !== undefined) return pp                                                                            // 113
    }                                                                                                               // 114
  }                                                                                                                 // 115
                                                                                                                    // 116
  /**                                                                                                               // 117
   * Sets multiple style properties at once.                                                                        // 118
   */                                                                                                               // 119
  function css (el, prop) {                                                                                         // 120
    for (var n in prop) {                                                                                           // 121
      el.style[vendor(el, n) || n] = prop[n]                                                                        // 122
    }                                                                                                               // 123
                                                                                                                    // 124
    return el                                                                                                       // 125
  }                                                                                                                 // 126
                                                                                                                    // 127
  /**                                                                                                               // 128
   * Fills in default values.                                                                                       // 129
   */                                                                                                               // 130
  function merge (obj) {                                                                                            // 131
    for (var i = 1; i < arguments.length; i++) {                                                                    // 132
      var def = arguments[i]                                                                                        // 133
      for (var n in def) {                                                                                          // 134
        if (obj[n] === undefined) obj[n] = def[n]                                                                   // 135
      }                                                                                                             // 136
    }                                                                                                               // 137
    return obj                                                                                                      // 138
  }                                                                                                                 // 139
                                                                                                                    // 140
  /**                                                                                                               // 141
   * Returns the line color from the given string or array.                                                         // 142
   */                                                                                                               // 143
  function getColor (color, idx) {                                                                                  // 144
    return typeof color == 'string' ? color : color[idx % color.length]                                             // 145
  }                                                                                                                 // 146
                                                                                                                    // 147
  // Built-in defaults                                                                                              // 148
                                                                                                                    // 149
  var defaults = {                                                                                                  // 150
    lines: 12             // The number of lines to draw                                                            // 151
  , length: 7             // The length of each line                                                                // 152
  , width: 5              // The line thickness                                                                     // 153
  , radius: 10            // The radius of the inner circle                                                         // 154
  , scale: 1.0            // Scales overall size of the spinner                                                     // 155
  , corners: 1            // Roundness (0..1)                                                                       // 156
  , color: '#000'         // #rgb or #rrggbb                                                                        // 157
  , opacity: 1/4          // Opacity of the lines                                                                   // 158
  , rotate: 0             // Rotation offset                                                                        // 159
  , direction: 1          // 1: clockwise, -1: counterclockwise                                                     // 160
  , speed: 1              // Rounds per second                                                                      // 161
  , trail: 100            // Afterglow percentage                                                                   // 162
  , fps: 20               // Frames per second when using setTimeout()                                              // 163
  , zIndex: 2e9           // Use a high z-index by default                                                          // 164
  , className: 'spinner'  // CSS class to assign to the element                                                     // 165
  , top: '50%'            // center vertically                                                                      // 166
  , left: '50%'           // center horizontally                                                                    // 167
  , shadow: false         // Whether to render a shadow                                                             // 168
  , hwaccel: false        // Whether to use hardware acceleration (might be buggy)                                  // 169
  , position: 'absolute'  // Element positioning                                                                    // 170
  }                                                                                                                 // 171
                                                                                                                    // 172
  /** The constructor */                                                                                            // 173
  function Spinner (o) {                                                                                            // 174
    this.opts = merge(o || {}, Spinner.defaults, defaults)                                                          // 175
  }                                                                                                                 // 176
                                                                                                                    // 177
  // Global defaults that override the built-ins:                                                                   // 178
  Spinner.defaults = {}                                                                                             // 179
                                                                                                                    // 180
  merge(Spinner.prototype, {                                                                                        // 181
    /**                                                                                                             // 182
     * Adds the spinner to the given target element. If this instance is already                                    // 183
     * spinning, it is automatically removed from its previous target b calling                                     // 184
     * stop() internally.                                                                                           // 185
     */                                                                                                             // 186
    spin: function (target) {                                                                                       // 187
      this.stop()                                                                                                   // 188
                                                                                                                    // 189
      var self = this                                                                                               // 190
        , o = self.opts                                                                                             // 191
        , el = self.el = createEl(null, {className: o.className})                                                   // 192
                                                                                                                    // 193
      css(el, {                                                                                                     // 194
        position: o.position                                                                                        // 195
      , width: 0                                                                                                    // 196
      , zIndex: o.zIndex                                                                                            // 197
      , left: o.left                                                                                                // 198
      , top: o.top                                                                                                  // 199
      })                                                                                                            // 200
                                                                                                                    // 201
      if (target) {                                                                                                 // 202
        target.insertBefore(el, target.firstChild || null)                                                          // 203
      }                                                                                                             // 204
                                                                                                                    // 205
      el.setAttribute('role', 'progressbar')                                                                        // 206
      self.lines(el, self.opts)                                                                                     // 207
                                                                                                                    // 208
      if (!useCssAnimations) {                                                                                      // 209
        // No CSS animation support, use setTimeout() instead                                                       // 210
        var i = 0                                                                                                   // 211
          , start = (o.lines - 1) * (1 - o.direction) / 2                                                           // 212
          , alpha                                                                                                   // 213
          , fps = o.fps                                                                                             // 214
          , f = fps / o.speed                                                                                       // 215
          , ostep = (1 - o.opacity) / (f * o.trail / 100)                                                           // 216
          , astep = f / o.lines                                                                                     // 217
                                                                                                                    // 218
        ;(function anim () {                                                                                        // 219
          i++                                                                                                       // 220
          for (var j = 0; j < o.lines; j++) {                                                                       // 221
            alpha = Math.max(1 - (i + (o.lines - j) * astep) % f * ostep, o.opacity)                                // 222
                                                                                                                    // 223
            self.opacity(el, j * o.direction + start, alpha, o)                                                     // 224
          }                                                                                                         // 225
          self.timeout = self.el && setTimeout(anim, ~~(1000 / fps))                                                // 226
        })()                                                                                                        // 227
      }                                                                                                             // 228
      return self                                                                                                   // 229
    }                                                                                                               // 230
                                                                                                                    // 231
    /**                                                                                                             // 232
     * Stops and removes the Spinner.                                                                               // 233
     */                                                                                                             // 234
  , stop: function () {                                                                                             // 235
      var el = this.el                                                                                              // 236
      if (el) {                                                                                                     // 237
        clearTimeout(this.timeout)                                                                                  // 238
        if (el.parentNode) el.parentNode.removeChild(el)                                                            // 239
        this.el = undefined                                                                                         // 240
      }                                                                                                             // 241
      return this                                                                                                   // 242
    }                                                                                                               // 243
                                                                                                                    // 244
    /**                                                                                                             // 245
     * Internal method that draws the individual lines. Will be overwritten                                         // 246
     * in VML fallback mode below.                                                                                  // 247
     */                                                                                                             // 248
  , lines: function (el, o) {                                                                                       // 249
      var i = 0                                                                                                     // 250
        , start = (o.lines - 1) * (1 - o.direction) / 2                                                             // 251
        , seg                                                                                                       // 252
                                                                                                                    // 253
      function fill (color, shadow) {                                                                               // 254
        return css(createEl(), {                                                                                    // 255
          position: 'absolute'                                                                                      // 256
        , width: o.scale * (o.length + o.width) + 'px'                                                              // 257
        , height: o.scale * o.width + 'px'                                                                          // 258
        , background: color                                                                                         // 259
        , boxShadow: shadow                                                                                         // 260
        , transformOrigin: 'left'                                                                                   // 261
        , transform: 'rotate(' + ~~(360/o.lines*i + o.rotate) + 'deg) translate(' + o.scale*o.radius + 'px' + ',0)'
        , borderRadius: (o.corners * o.scale * o.width >> 1) + 'px'                                                 // 263
        })                                                                                                          // 264
      }                                                                                                             // 265
                                                                                                                    // 266
      for (; i < o.lines; i++) {                                                                                    // 267
        seg = css(createEl(), {                                                                                     // 268
          position: 'absolute'                                                                                      // 269
        , top: 1 + ~(o.scale * o.width / 2) + 'px'                                                                  // 270
        , transform: o.hwaccel ? 'translate3d(0,0,0)' : ''                                                          // 271
        , opacity: o.opacity                                                                                        // 272
        , animation: useCssAnimations && addAnimation(o.opacity, o.trail, start + i * o.direction, o.lines) + ' ' + 1 / o.speed + 's linear infinite'
        })                                                                                                          // 274
                                                                                                                    // 275
        if (o.shadow) ins(seg, css(fill('#000', '0 0 4px #000'), {top: '2px'}))                                     // 276
        ins(el, ins(seg, fill(getColor(o.color, i), '0 0 1px rgba(0,0,0,.1)')))                                     // 277
      }                                                                                                             // 278
      return el                                                                                                     // 279
    }                                                                                                               // 280
                                                                                                                    // 281
    /**                                                                                                             // 282
     * Internal method that adjusts the opacity of a single line.                                                   // 283
     * Will be overwritten in VML fallback mode below.                                                              // 284
     */                                                                                                             // 285
  , opacity: function (el, i, val) {                                                                                // 286
      if (i < el.childNodes.length) el.childNodes[i].style.opacity = val                                            // 287
    }                                                                                                               // 288
                                                                                                                    // 289
  })                                                                                                                // 290
                                                                                                                    // 291
                                                                                                                    // 292
  function initVML () {                                                                                             // 293
                                                                                                                    // 294
    /* Utility function to create a VML tag */                                                                      // 295
    function vml (tag, attr) {                                                                                      // 296
      return createEl('<' + tag + ' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">', attr)                 // 297
    }                                                                                                               // 298
                                                                                                                    // 299
    // No CSS transforms but VML support, add a CSS rule for VML elements:                                          // 300
    sheet.addRule('.spin-vml', 'behavior:url(#default#VML)')                                                        // 301
                                                                                                                    // 302
    Spinner.prototype.lines = function (el, o) {                                                                    // 303
      var r = o.scale * (o.length + o.width)                                                                        // 304
        , s = o.scale * 2 * r                                                                                       // 305
                                                                                                                    // 306
      function grp () {                                                                                             // 307
        return css(                                                                                                 // 308
          vml('group', {                                                                                            // 309
            coordsize: s + ' ' + s                                                                                  // 310
          , coordorigin: -r + ' ' + -r                                                                              // 311
          })                                                                                                        // 312
        , { width: s, height: s }                                                                                   // 313
        )                                                                                                           // 314
      }                                                                                                             // 315
                                                                                                                    // 316
      var margin = -(o.width + o.length) * o.scale * 2 + 'px'                                                       // 317
        , g = css(grp(), {position: 'absolute', top: margin, left: margin})                                         // 318
        , i                                                                                                         // 319
                                                                                                                    // 320
      function seg (i, dx, filter) {                                                                                // 321
        ins(                                                                                                        // 322
          g                                                                                                         // 323
        , ins(                                                                                                      // 324
            css(grp(), {rotation: 360 / o.lines * i + 'deg', left: ~~dx})                                           // 325
          , ins(                                                                                                    // 326
              css(                                                                                                  // 327
                vml('roundrect', {arcsize: o.corners})                                                              // 328
              , { width: r                                                                                          // 329
                , height: o.scale * o.width                                                                         // 330
                , left: o.scale * o.radius                                                                          // 331
                , top: -o.scale * o.width >> 1                                                                      // 332
                , filter: filter                                                                                    // 333
                }                                                                                                   // 334
              )                                                                                                     // 335
            , vml('fill', {color: getColor(o.color, i), opacity: o.opacity})                                        // 336
            , vml('stroke', {opacity: 0}) // transparent stroke to fix color bleeding upon opacity change           // 337
            )                                                                                                       // 338
          )                                                                                                         // 339
        )                                                                                                           // 340
      }                                                                                                             // 341
                                                                                                                    // 342
      if (o.shadow)                                                                                                 // 343
        for (i = 1; i <= o.lines; i++) {                                                                            // 344
          seg(i, -2, 'progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)')         // 345
        }                                                                                                           // 346
                                                                                                                    // 347
      for (i = 1; i <= o.lines; i++) seg(i)                                                                         // 348
      return ins(el, g)                                                                                             // 349
    }                                                                                                               // 350
                                                                                                                    // 351
    Spinner.prototype.opacity = function (el, i, val, o) {                                                          // 352
      var c = el.firstChild                                                                                         // 353
      o = o.shadow && o.lines || 0                                                                                  // 354
      if (c && i + o < c.childNodes.length) {                                                                       // 355
        c = c.childNodes[i + o]; c = c && c.firstChild; c = c && c.firstChild                                       // 356
        if (c) c.opacity = val                                                                                      // 357
      }                                                                                                             // 358
    }                                                                                                               // 359
  }                                                                                                                 // 360
                                                                                                                    // 361
  if (typeof document !== 'undefined') {                                                                            // 362
    sheet = (function () {                                                                                          // 363
      var el = createEl('style', {type : 'text/css'})                                                               // 364
      ins(document.getElementsByTagName('head')[0], el)                                                             // 365
      return el.sheet || el.styleSheet                                                                              // 366
    }())                                                                                                            // 367
                                                                                                                    // 368
    var probe = css(createEl('group'), {behavior: 'url(#default#VML)'})                                             // 369
                                                                                                                    // 370
    if (!vendor(probe, 'transform') && probe.adj) initVML()                                                         // 371
    else useCssAnimations = vendor(probe, 'animation')                                                              // 372
  }                                                                                                                 // 373
                                                                                                                    // 374
  return Spinner                                                                                                    // 375
                                                                                                                    // 376
}));                                                                                                                // 377
                                                                                                                    // 378
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);






(function(){

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                  //
// packages/bevanhunt_leaflet/lib/leaflet_spin.js                                                                   //
//                                                                                                                  //
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                    //
L.SpinMapMixin = {                                                                                                  // 1
    spin: function (state, options) {                                                                               // 2
        if (!!state) {                                                                                              // 3
            // start spinning !                                                                                     // 4
            if (!this._spinner) {                                                                                   // 5
                this._spinner = new Spinner(options).spin(this._container);                                         // 6
                this._spinning = 0;                                                                                 // 7
            }                                                                                                       // 8
            this._spinning++;                                                                                       // 9
        }                                                                                                           // 10
        else {                                                                                                      // 11
            this._spinning--;                                                                                       // 12
            if (this._spinning <= 0) {                                                                              // 13
                // end spinning !                                                                                   // 14
                if (this._spinner) {                                                                                // 15
                    this._spinner.stop();                                                                           // 16
                    this._spinner = null;                                                                           // 17
                }                                                                                                   // 18
            }                                                                                                       // 19
        }                                                                                                           // 20
    }                                                                                                               // 21
};                                                                                                                  // 22
                                                                                                                    // 23
L.Map.include(L.SpinMapMixin);                                                                                      // 24
                                                                                                                    // 25
L.Map.addInitHook(function () {                                                                                     // 26
    this.on('layeradd', function (e) {                                                                              // 27
        // If added layer is currently loading, spin !                                                              // 28
        if (e.layer.loading) this.spin(true);                                                                       // 29
        if (typeof e.layer.on != 'function') return;                                                                // 30
        e.layer.on('data:loading', function () { this.spin(true); }, this);                                         // 31
        e.layer.on('data:loaded',  function () { this.spin(false); }, this);                                        // 32
    }, this);                                                                                                       // 33
    this.on('layerremove', function (e) {                                                                           // 34
        // Clean-up                                                                                                 // 35
        if (e.layer.loading) this.spin(false);                                                                      // 36
        if (typeof e.layer.on != 'function') return;                                                                // 37
        e.layer.off('data:loaded');                                                                                 // 38
        e.layer.off('data:loading');                                                                                // 39
    }, this);                                                                                                       // 40
});                                                                                                                 // 41
                                                                                                                    // 42
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);


/* Exports */
if (typeof Package === 'undefined') Package = {};
Package['bevanhunt:leaflet'] = {};

})();
