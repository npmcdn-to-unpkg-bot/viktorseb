[{"type":"js","data":"//////////////////////////////////////////////////////////////////////////\n//                                                                      //\n// This is a generated file. You can view the original                  //\n// source in your browser if your browser supports source maps.         //\n// Source maps are supported by all recent versions of Chrome, Safari,  //\n// and Firefox, and by Internet Explorer 11.                            //\n//                                                                      //\n//////////////////////////////////////////////////////////////////////////\n\n\n(function () {\n\n/* Imports */\nvar Meteor = Package.meteor.Meteor;\nvar global = Package.meteor.global;\nvar meteorEnv = Package.meteor.meteorEnv;\n\n(function(){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// packages/bevanhunt_leaflet/.npm/package/node_modules/leaflet/dist/leaflet-src.js                                 //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\n/*                                                                                                                  // 1\n Leaflet, a JavaScript library for mobile-friendly interactive maps. http://leafletjs.com                           // 2\n (c) 2010-2013, Vladimir Agafonkin                                                                                  // 3\n (c) 2010-2011, CloudMade                                                                                           // 4\n*/                                                                                                                  // 5\n(function (window, document, undefined) {                                                                           // 6\nvar oldL = window.L,                                                                                                // 7\n    L = {};                                                                                                         // 8\n                                                                                                                    // 9\nL.version = '0.7.7';                                                                                                // 10\n                                                                                                                    // 11\n// define Leaflet for Node module pattern loaders, including Browserify                                             // 12\nif (typeof module === 'object' && typeof module.exports === 'object') {                                             // 13\n\tmodule.exports = L;                                                                                                // 14\n                                                                                                                    // 15\n// define Leaflet as an AMD module                                                                                  // 16\n} else if (typeof define === 'function' && define.amd) {                                                            // 17\n\tdefine(L);                                                                                                         // 18\n}                                                                                                                   // 19\n                                                                                                                    // 20\n// define Leaflet as a global L variable, saving the original L to restore later if needed                          // 21\n                                                                                                                    // 22\nL.noConflict = function () {                                                                                        // 23\n\twindow.L = oldL;                                                                                                   // 24\n\treturn this;                                                                                                       // 25\n};                                                                                                                  // 26\n                                                                                                                    // 27\nwindow.L = L;                                                                                                       // 28\n                                                                                                                    // 29\n                                                                                                                    // 30\n/*                                                                                                                  // 31\n * L.Util contains various utility functions used throughout Leaflet code.                                          // 32\n */                                                                                                                 // 33\n                                                                                                                    // 34\nL.Util = {                                                                                                          // 35\n\textend: function (dest) { // (Object[, Object, ...]) ->                                                            // 36\n\t\tvar sources = Array.prototype.slice.call(arguments, 1),                                                           // 37\n\t\t    i, j, len, src;                                                                                               // 38\n                                                                                                                    // 39\n\t\tfor (j = 0, len = sources.length; j < len; j++) {                                                                 // 40\n\t\t\tsrc = sources[j] || {};                                                                                          // 41\n\t\t\tfor (i in src) {                                                                                                 // 42\n\t\t\t\tif (src.hasOwnProperty(i)) {                                                                                    // 43\n\t\t\t\t\tdest[i] = src[i];                                                                                              // 44\n\t\t\t\t}                                                                                                               // 45\n\t\t\t}                                                                                                                // 46\n\t\t}                                                                                                                 // 47\n\t\treturn dest;                                                                                                      // 48\n\t},                                                                                                                 // 49\n                                                                                                                    // 50\n\tbind: function (fn, obj) { // (Function, Object) -> Function                                                       // 51\n\t\tvar args = arguments.length > 2 ? Array.prototype.slice.call(arguments, 2) : null;                                // 52\n\t\treturn function () {                                                                                              // 53\n\t\t\treturn fn.apply(obj, args || arguments);                                                                         // 54\n\t\t};                                                                                                                // 55\n\t},                                                                                                                 // 56\n                                                                                                                    // 57\n\tstamp: (function () {                                                                                              // 58\n\t\tvar lastId = 0,                                                                                                   // 59\n\t\t    key = '_leaflet_id';                                                                                          // 60\n\t\treturn function (obj) {                                                                                           // 61\n\t\t\tobj[key] = obj[key] || ++lastId;                                                                                 // 62\n\t\t\treturn obj[key];                                                                                                 // 63\n\t\t};                                                                                                                // 64\n\t}()),                                                                                                              // 65\n                                                                                                                    // 66\n\tinvokeEach: function (obj, method, context) {                                                                      // 67\n\t\tvar i, args;                                                                                                      // 68\n                                                                                                                    // 69\n\t\tif (typeof obj === 'object') {                                                                                    // 70\n\t\t\targs = Array.prototype.slice.call(arguments, 3);                                                                 // 71\n                                                                                                                    // 72\n\t\t\tfor (i in obj) {                                                                                                 // 73\n\t\t\t\tmethod.apply(context, [i, obj[i]].concat(args));                                                                // 74\n\t\t\t}                                                                                                                // 75\n\t\t\treturn true;                                                                                                     // 76\n\t\t}                                                                                                                 // 77\n                                                                                                                    // 78\n\t\treturn false;                                                                                                     // 79\n\t},                                                                                                                 // 80\n                                                                                                                    // 81\n\tlimitExecByInterval: function (fn, time, context) {                                                                // 82\n\t\tvar lock, execOnUnlock;                                                                                           // 83\n                                                                                                                    // 84\n\t\treturn function wrapperFn() {                                                                                     // 85\n\t\t\tvar args = arguments;                                                                                            // 86\n                                                                                                                    // 87\n\t\t\tif (lock) {                                                                                                      // 88\n\t\t\t\texecOnUnlock = true;                                                                                            // 89\n\t\t\t\treturn;                                                                                                         // 90\n\t\t\t}                                                                                                                // 91\n                                                                                                                    // 92\n\t\t\tlock = true;                                                                                                     // 93\n                                                                                                                    // 94\n\t\t\tsetTimeout(function () {                                                                                         // 95\n\t\t\t\tlock = false;                                                                                                   // 96\n                                                                                                                    // 97\n\t\t\t\tif (execOnUnlock) {                                                                                             // 98\n\t\t\t\t\twrapperFn.apply(context, args);                                                                                // 99\n\t\t\t\t\texecOnUnlock = false;                                                                                          // 100\n\t\t\t\t}                                                                                                               // 101\n\t\t\t}, time);                                                                                                        // 102\n                                                                                                                    // 103\n\t\t\tfn.apply(context, args);                                                                                         // 104\n\t\t};                                                                                                                // 105\n\t},                                                                                                                 // 106\n                                                                                                                    // 107\n\tfalseFn: function () {                                                                                             // 108\n\t\treturn false;                                                                                                     // 109\n\t},                                                                                                                 // 110\n                                                                                                                    // 111\n\tformatNum: function (num, digits) {                                                                                // 112\n\t\tvar pow = Math.pow(10, digits || 5);                                                                              // 113\n\t\treturn Math.round(num * pow) / pow;                                                                               // 114\n\t},                                                                                                                 // 115\n                                                                                                                    // 116\n\ttrim: function (str) {                                                                                             // 117\n\t\treturn str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g, '');                                                     // 118\n\t},                                                                                                                 // 119\n                                                                                                                    // 120\n\tsplitWords: function (str) {                                                                                       // 121\n\t\treturn L.Util.trim(str).split(/\\s+/);                                                                             // 122\n\t},                                                                                                                 // 123\n                                                                                                                    // 124\n\tsetOptions: function (obj, options) {                                                                              // 125\n\t\tobj.options = L.extend({}, obj.options, options);                                                                 // 126\n\t\treturn obj.options;                                                                                               // 127\n\t},                                                                                                                 // 128\n                                                                                                                    // 129\n\tgetParamString: function (obj, existingUrl, uppercase) {                                                           // 130\n\t\tvar params = [];                                                                                                  // 131\n\t\tfor (var i in obj) {                                                                                              // 132\n\t\t\tparams.push(encodeURIComponent(uppercase ? i.toUpperCase() : i) + '=' + encodeURIComponent(obj[i]));             // 133\n\t\t}                                                                                                                 // 134\n\t\treturn ((!existingUrl || existingUrl.indexOf('?') === -1) ? '?' : '&') + params.join('&');                        // 135\n\t},                                                                                                                 // 136\n\ttemplate: function (str, data) {                                                                                   // 137\n\t\treturn str.replace(/\\{ *([\\w_]+) *\\}/g, function (str, key) {                                                     // 138\n\t\t\tvar value = data[key];                                                                                           // 139\n\t\t\tif (value === undefined) {                                                                                       // 140\n\t\t\t\tthrow new Error('No value provided for variable ' + str);                                                       // 141\n\t\t\t} else if (typeof value === 'function') {                                                                        // 142\n\t\t\t\tvalue = value(data);                                                                                            // 143\n\t\t\t}                                                                                                                // 144\n\t\t\treturn value;                                                                                                    // 145\n\t\t});                                                                                                               // 146\n\t},                                                                                                                 // 147\n                                                                                                                    // 148\n\tisArray: Array.isArray || function (obj) {                                                                         // 149\n\t\treturn (Object.prototype.toString.call(obj) === '[object Array]');                                                // 150\n\t},                                                                                                                 // 151\n                                                                                                                    // 152\n\temptyImageUrl: 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs='                                        // 153\n};                                                                                                                  // 154\n                                                                                                                    // 155\n(function () {                                                                                                      // 156\n                                                                                                                    // 157\n\t// inspired by http://paulirish.com/2011/requestanimationframe-for-smart-animating/                                // 158\n                                                                                                                    // 159\n\tfunction getPrefixed(name) {                                                                                       // 160\n\t\tvar i, fn,                                                                                                        // 161\n\t\t    prefixes = ['webkit', 'moz', 'o', 'ms'];                                                                      // 162\n                                                                                                                    // 163\n\t\tfor (i = 0; i < prefixes.length && !fn; i++) {                                                                    // 164\n\t\t\tfn = window[prefixes[i] + name];                                                                                 // 165\n\t\t}                                                                                                                 // 166\n                                                                                                                    // 167\n\t\treturn fn;                                                                                                        // 168\n\t}                                                                                                                  // 169\n                                                                                                                    // 170\n\tvar lastTime = 0;                                                                                                  // 171\n                                                                                                                    // 172\n\tfunction timeoutDefer(fn) {                                                                                        // 173\n\t\tvar time = +new Date(),                                                                                           // 174\n\t\t    timeToCall = Math.max(0, 16 - (time - lastTime));                                                             // 175\n                                                                                                                    // 176\n\t\tlastTime = time + timeToCall;                                                                                     // 177\n\t\treturn window.setTimeout(fn, timeToCall);                                                                         // 178\n\t}                                                                                                                  // 179\n                                                                                                                    // 180\n\tvar requestFn = window.requestAnimationFrame ||                                                                    // 181\n\t        getPrefixed('RequestAnimationFrame') || timeoutDefer;                                                      // 182\n                                                                                                                    // 183\n\tvar cancelFn = window.cancelAnimationFrame ||                                                                      // 184\n\t        getPrefixed('CancelAnimationFrame') ||                                                                     // 185\n\t        getPrefixed('CancelRequestAnimationFrame') ||                                                              // 186\n\t        function (id) { window.clearTimeout(id); };                                                                // 187\n                                                                                                                    // 188\n                                                                                                                    // 189\n\tL.Util.requestAnimFrame = function (fn, context, immediate, element) {                                             // 190\n\t\tfn = L.bind(fn, context);                                                                                         // 191\n                                                                                                                    // 192\n\t\tif (immediate && requestFn === timeoutDefer) {                                                                    // 193\n\t\t\tfn();                                                                                                            // 194\n\t\t} else {                                                                                                          // 195\n\t\t\treturn requestFn.call(window, fn, element);                                                                      // 196\n\t\t}                                                                                                                 // 197\n\t};                                                                                                                 // 198\n                                                                                                                    // 199\n\tL.Util.cancelAnimFrame = function (id) {                                                                           // 200\n\t\tif (id) {                                                                                                         // 201\n\t\t\tcancelFn.call(window, id);                                                                                       // 202\n\t\t}                                                                                                                 // 203\n\t};                                                                                                                 // 204\n                                                                                                                    // 205\n}());                                                                                                               // 206\n                                                                                                                    // 207\n// shortcuts for most used utility functions                                                                        // 208\nL.extend = L.Util.extend;                                                                                           // 209\nL.bind = L.Util.bind;                                                                                               // 210\nL.stamp = L.Util.stamp;                                                                                             // 211\nL.setOptions = L.Util.setOptions;                                                                                   // 212\n                                                                                                                    // 213\n                                                                                                                    // 214\n/*                                                                                                                  // 215\n * L.Class powers the OOP facilities of the library.                                                                // 216\n * Thanks to John Resig and Dean Edwards for inspiration!                                                           // 217\n */                                                                                                                 // 218\n                                                                                                                    // 219\nL.Class = function () {};                                                                                           // 220\n                                                                                                                    // 221\nL.Class.extend = function (props) {                                                                                 // 222\n                                                                                                                    // 223\n\t// extended class with the new prototype                                                                           // 224\n\tvar NewClass = function () {                                                                                       // 225\n                                                                                                                    // 226\n\t\t// call the constructor                                                                                           // 227\n\t\tif (this.initialize) {                                                                                            // 228\n\t\t\tthis.initialize.apply(this, arguments);                                                                          // 229\n\t\t}                                                                                                                 // 230\n                                                                                                                    // 231\n\t\t// call all constructor hooks                                                                                     // 232\n\t\tif (this._initHooks) {                                                                                            // 233\n\t\t\tthis.callInitHooks();                                                                                            // 234\n\t\t}                                                                                                                 // 235\n\t};                                                                                                                 // 236\n                                                                                                                    // 237\n\t// instantiate class without calling constructor                                                                   // 238\n\tvar F = function () {};                                                                                            // 239\n\tF.prototype = this.prototype;                                                                                      // 240\n                                                                                                                    // 241\n\tvar proto = new F();                                                                                               // 242\n\tproto.constructor = NewClass;                                                                                      // 243\n                                                                                                                    // 244\n\tNewClass.prototype = proto;                                                                                        // 245\n                                                                                                                    // 246\n\t//inherit parent's statics                                                                                         // 247\n\tfor (var i in this) {                                                                                              // 248\n\t\tif (this.hasOwnProperty(i) && i !== 'prototype') {                                                                // 249\n\t\t\tNewClass[i] = this[i];                                                                                           // 250\n\t\t}                                                                                                                 // 251\n\t}                                                                                                                  // 252\n                                                                                                                    // 253\n\t// mix static properties into the class                                                                            // 254\n\tif (props.statics) {                                                                                               // 255\n\t\tL.extend(NewClass, props.statics);                                                                                // 256\n\t\tdelete props.statics;                                                                                             // 257\n\t}                                                                                                                  // 258\n                                                                                                                    // 259\n\t// mix includes into the prototype                                                                                 // 260\n\tif (props.includes) {                                                                                              // 261\n\t\tL.Util.extend.apply(null, [proto].concat(props.includes));                                                        // 262\n\t\tdelete props.includes;                                                                                            // 263\n\t}                                                                                                                  // 264\n                                                                                                                    // 265\n\t// merge options                                                                                                   // 266\n\tif (props.options && proto.options) {                                                                              // 267\n\t\tprops.options = L.extend({}, proto.options, props.options);                                                       // 268\n\t}                                                                                                                  // 269\n                                                                                                                    // 270\n\t// mix given properties into the prototype                                                                         // 271\n\tL.extend(proto, props);                                                                                            // 272\n                                                                                                                    // 273\n\tproto._initHooks = [];                                                                                             // 274\n                                                                                                                    // 275\n\tvar parent = this;                                                                                                 // 276\n\t// jshint camelcase: false                                                                                         // 277\n\tNewClass.__super__ = parent.prototype;                                                                             // 278\n                                                                                                                    // 279\n\t// add method for calling all hooks                                                                                // 280\n\tproto.callInitHooks = function () {                                                                                // 281\n                                                                                                                    // 282\n\t\tif (this._initHooksCalled) { return; }                                                                            // 283\n                                                                                                                    // 284\n\t\tif (parent.prototype.callInitHooks) {                                                                             // 285\n\t\t\tparent.prototype.callInitHooks.call(this);                                                                       // 286\n\t\t}                                                                                                                 // 287\n                                                                                                                    // 288\n\t\tthis._initHooksCalled = true;                                                                                     // 289\n                                                                                                                    // 290\n\t\tfor (var i = 0, len = proto._initHooks.length; i < len; i++) {                                                    // 291\n\t\t\tproto._initHooks[i].call(this);                                                                                  // 292\n\t\t}                                                                                                                 // 293\n\t};                                                                                                                 // 294\n                                                                                                                    // 295\n\treturn NewClass;                                                                                                   // 296\n};                                                                                                                  // 297\n                                                                                                                    // 298\n                                                                                                                    // 299\n// method for adding properties to prototype                                                                        // 300\nL.Class.include = function (props) {                                                                                // 301\n\tL.extend(this.prototype, props);                                                                                   // 302\n};                                                                                                                  // 303\n                                                                                                                    // 304\n// merge new default options to the Class                                                                           // 305\nL.Class.mergeOptions = function (options) {                                                                         // 306\n\tL.extend(this.prototype.options, options);                                                                         // 307\n};                                                                                                                  // 308\n                                                                                                                    // 309\n// add a constructor hook                                                                                           // 310\nL.Class.addInitHook = function (fn) { // (Function) || (String, args...)                                            // 311\n\tvar args = Array.prototype.slice.call(arguments, 1);                                                               // 312\n                                                                                                                    // 313\n\tvar init = typeof fn === 'function' ? fn : function () {                                                           // 314\n\t\tthis[fn].apply(this, args);                                                                                       // 315\n\t};                                                                                                                 // 316\n                                                                                                                    // 317\n\tthis.prototype._initHooks = this.prototype._initHooks || [];                                                       // 318\n\tthis.prototype._initHooks.push(init);                                                                              // 319\n};                                                                                                                  // 320\n                                                                                                                    // 321\n                                                                                                                    // 322\n/*                                                                                                                  // 323\n * L.Mixin.Events is used to add custom events functionality to Leaflet classes.                                    // 324\n */                                                                                                                 // 325\n                                                                                                                    // 326\nvar eventsKey = '_leaflet_events';                                                                                  // 327\n                                                                                                                    // 328\nL.Mixin = {};                                                                                                       // 329\n                                                                                                                    // 330\nL.Mixin.Events = {                                                                                                  // 331\n                                                                                                                    // 332\n\taddEventListener: function (types, fn, context) { // (String, Function[, Object]) or (Object[, Object])            // 333\n                                                                                                                    // 334\n\t\t// types can be a map of types/handlers                                                                           // 335\n\t\tif (L.Util.invokeEach(types, this.addEventListener, this, fn, context)) { return this; }                          // 336\n                                                                                                                    // 337\n\t\tvar events = this[eventsKey] = this[eventsKey] || {},                                                             // 338\n\t\t    contextId = context && context !== this && L.stamp(context),                                                  // 339\n\t\t    i, len, event, type, indexKey, indexLenKey, typeIndex;                                                        // 340\n                                                                                                                    // 341\n\t\t// types can be a string of space-separated words                                                                 // 342\n\t\ttypes = L.Util.splitWords(types);                                                                                 // 343\n                                                                                                                    // 344\n\t\tfor (i = 0, len = types.length; i < len; i++) {                                                                   // 345\n\t\t\tevent = {                                                                                                        // 346\n\t\t\t\taction: fn,                                                                                                     // 347\n\t\t\t\tcontext: context || this                                                                                        // 348\n\t\t\t};                                                                                                               // 349\n\t\t\ttype = types[i];                                                                                                 // 350\n                                                                                                                    // 351\n\t\t\tif (contextId) {                                                                                                 // 352\n\t\t\t\t// store listeners of a particular context in a separate hash (if it has an id)                                 // 353\n\t\t\t\t// gives a major performance boost when removing thousands of map layers                                        // 354\n                                                                                                                    // 355\n\t\t\t\tindexKey = type + '_idx';                                                                                       // 356\n\t\t\t\tindexLenKey = indexKey + '_len';                                                                                // 357\n                                                                                                                    // 358\n\t\t\t\ttypeIndex = events[indexKey] = events[indexKey] || {};                                                          // 359\n                                                                                                                    // 360\n\t\t\t\tif (!typeIndex[contextId]) {                                                                                    // 361\n\t\t\t\t\ttypeIndex[contextId] = [];                                                                                     // 362\n                                                                                                                    // 363\n\t\t\t\t\t// keep track of the number of keys in the index to quickly check if it's empty                                // 364\n\t\t\t\t\tevents[indexLenKey] = (events[indexLenKey] || 0) + 1;                                                          // 365\n\t\t\t\t}                                                                                                               // 366\n                                                                                                                    // 367\n\t\t\t\ttypeIndex[contextId].push(event);                                                                               // 368\n                                                                                                                    // 369\n                                                                                                                    // 370\n\t\t\t} else {                                                                                                         // 371\n\t\t\t\tevents[type] = events[type] || [];                                                                              // 372\n\t\t\t\tevents[type].push(event);                                                                                       // 373\n\t\t\t}                                                                                                                // 374\n\t\t}                                                                                                                 // 375\n                                                                                                                    // 376\n\t\treturn this;                                                                                                      // 377\n\t},                                                                                                                 // 378\n                                                                                                                    // 379\n\thasEventListeners: function (type) { // (String) -> Boolean                                                        // 380\n\t\tvar events = this[eventsKey];                                                                                     // 381\n\t\treturn !!events && ((type in events && events[type].length > 0) ||                                                // 382\n\t\t                    (type + '_idx' in events && events[type + '_idx_len'] > 0));                                  // 383\n\t},                                                                                                                 // 384\n                                                                                                                    // 385\n\tremoveEventListener: function (types, fn, context) { // ([String, Function, Object]) or (Object[, Object])         // 386\n                                                                                                                    // 387\n\t\tif (!this[eventsKey]) {                                                                                           // 388\n\t\t\treturn this;                                                                                                     // 389\n\t\t}                                                                                                                 // 390\n                                                                                                                    // 391\n\t\tif (!types) {                                                                                                     // 392\n\t\t\treturn this.clearAllEventListeners();                                                                            // 393\n\t\t}                                                                                                                 // 394\n                                                                                                                    // 395\n\t\tif (L.Util.invokeEach(types, this.removeEventListener, this, fn, context)) { return this; }                       // 396\n                                                                                                                    // 397\n\t\tvar events = this[eventsKey],                                                                                     // 398\n\t\t    contextId = context && context !== this && L.stamp(context),                                                  // 399\n\t\t    i, len, type, listeners, j, indexKey, indexLenKey, typeIndex, removed;                                        // 400\n                                                                                                                    // 401\n\t\ttypes = L.Util.splitWords(types);                                                                                 // 402\n                                                                                                                    // 403\n\t\tfor (i = 0, len = types.length; i < len; i++) {                                                                   // 404\n\t\t\ttype = types[i];                                                                                                 // 405\n\t\t\tindexKey = type + '_idx';                                                                                        // 406\n\t\t\tindexLenKey = indexKey + '_len';                                                                                 // 407\n                                                                                                                    // 408\n\t\t\ttypeIndex = events[indexKey];                                                                                    // 409\n                                                                                                                    // 410\n\t\t\tif (!fn) {                                                                                                       // 411\n\t\t\t\t// clear all listeners for a type if function isn't specified                                                   // 412\n\t\t\t\tdelete events[type];                                                                                            // 413\n\t\t\t\tdelete events[indexKey];                                                                                        // 414\n\t\t\t\tdelete events[indexLenKey];                                                                                     // 415\n                                                                                                                    // 416\n\t\t\t} else {                                                                                                         // 417\n\t\t\t\tlisteners = contextId && typeIndex ? typeIndex[contextId] : events[type];                                       // 418\n                                                                                                                    // 419\n\t\t\t\tif (listeners) {                                                                                                // 420\n\t\t\t\t\tfor (j = listeners.length - 1; j >= 0; j--) {                                                                  // 421\n\t\t\t\t\t\tif ((listeners[j].action === fn) && (!context || (listeners[j].context === context))) {                       // 422\n\t\t\t\t\t\t\tremoved = listeners.splice(j, 1);                                                                            // 423\n\t\t\t\t\t\t\t// set the old action to a no-op, because it is possible                                                     // 424\n\t\t\t\t\t\t\t// that the listener is being iterated over as part of a dispatch                                            // 425\n\t\t\t\t\t\t\tremoved[0].action = L.Util.falseFn;                                                                          // 426\n\t\t\t\t\t\t}                                                                                                             // 427\n\t\t\t\t\t}                                                                                                              // 428\n                                                                                                                    // 429\n\t\t\t\t\tif (context && typeIndex && (listeners.length === 0)) {                                                        // 430\n\t\t\t\t\t\tdelete typeIndex[contextId];                                                                                  // 431\n\t\t\t\t\t\tevents[indexLenKey]--;                                                                                        // 432\n\t\t\t\t\t}                                                                                                              // 433\n\t\t\t\t}                                                                                                               // 434\n\t\t\t}                                                                                                                // 435\n\t\t}                                                                                                                 // 436\n                                                                                                                    // 437\n\t\treturn this;                                                                                                      // 438\n\t},                                                                                                                 // 439\n                                                                                                                    // 440\n\tclearAllEventListeners: function () {                                                                              // 441\n\t\tdelete this[eventsKey];                                                                                           // 442\n\t\treturn this;                                                                                                      // 443\n\t},                                                                                                                 // 444\n                                                                                                                    // 445\n\tfireEvent: function (type, data) { // (String[, Object])                                                           // 446\n\t\tif (!this.hasEventListeners(type)) {                                                                              // 447\n\t\t\treturn this;                                                                                                     // 448\n\t\t}                                                                                                                 // 449\n                                                                                                                    // 450\n\t\tvar event = L.Util.extend({}, data, { type: type, target: this });                                                // 451\n                                                                                                                    // 452\n\t\tvar events = this[eventsKey],                                                                                     // 453\n\t\t    listeners, i, len, typeIndex, contextId;                                                                      // 454\n                                                                                                                    // 455\n\t\tif (events[type]) {                                                                                               // 456\n\t\t\t// make sure adding/removing listeners inside other listeners won't cause infinite loop                          // 457\n\t\t\tlisteners = events[type].slice();                                                                                // 458\n                                                                                                                    // 459\n\t\t\tfor (i = 0, len = listeners.length; i < len; i++) {                                                              // 460\n\t\t\t\tlisteners[i].action.call(listeners[i].context, event);                                                          // 461\n\t\t\t}                                                                                                                // 462\n\t\t}                                                                                                                 // 463\n                                                                                                                    // 464\n\t\t// fire event for the context-indexed listeners as well                                                           // 465\n\t\ttypeIndex = events[type + '_idx'];                                                                                // 466\n                                                                                                                    // 467\n\t\tfor (contextId in typeIndex) {                                                                                    // 468\n\t\t\tlisteners = typeIndex[contextId].slice();                                                                        // 469\n                                                                                                                    // 470\n\t\t\tif (listeners) {                                                                                                 // 471\n\t\t\t\tfor (i = 0, len = listeners.length; i < len; i++) {                                                             // 472\n\t\t\t\t\tlisteners[i].action.call(listeners[i].context, event);                                                         // 473\n\t\t\t\t}                                                                                                               // 474\n\t\t\t}                                                                                                                // 475\n\t\t}                                                                                                                 // 476\n                                                                                                                    // 477\n\t\treturn this;                                                                                                      // 478\n\t},                                                                                                                 // 479\n                                                                                                                    // 480\n\taddOneTimeEventListener: function (types, fn, context) {                                                           // 481\n                                                                                                                    // 482\n\t\tif (L.Util.invokeEach(types, this.addOneTimeEventListener, this, fn, context)) { return this; }                   // 483\n                                                                                                                    // 484\n\t\tvar handler = L.bind(function () {                                                                                // 485\n\t\t\tthis                                                                                                             // 486\n\t\t\t    .removeEventListener(types, fn, context)                                                                     // 487\n\t\t\t    .removeEventListener(types, handler, context);                                                               // 488\n\t\t}, this);                                                                                                         // 489\n                                                                                                                    // 490\n\t\treturn this                                                                                                       // 491\n\t\t    .addEventListener(types, fn, context)                                                                         // 492\n\t\t    .addEventListener(types, handler, context);                                                                   // 493\n\t}                                                                                                                  // 494\n};                                                                                                                  // 495\n                                                                                                                    // 496\nL.Mixin.Events.on = L.Mixin.Events.addEventListener;                                                                // 497\nL.Mixin.Events.off = L.Mixin.Events.removeEventListener;                                                            // 498\nL.Mixin.Events.once = L.Mixin.Events.addOneTimeEventListener;                                                       // 499\nL.Mixin.Events.fire = L.Mixin.Events.fireEvent;                                                                     // 500\n                                                                                                                    // 501\n                                                                                                                    // 502\n/*                                                                                                                  // 503\n * L.Browser handles different browser and feature detections for internal Leaflet use.                             // 504\n */                                                                                                                 // 505\n                                                                                                                    // 506\n(function () {                                                                                                      // 507\n                                                                                                                    // 508\n\tvar ie = 'ActiveXObject' in window,                                                                                // 509\n\t\tielt9 = ie && !document.addEventListener,                                                                         // 510\n                                                                                                                    // 511\n\t    // terrible browser detection to work around Safari / iOS / Android browser bugs                               // 512\n\t    ua = navigator.userAgent.toLowerCase(),                                                                        // 513\n\t    webkit = ua.indexOf('webkit') !== -1,                                                                          // 514\n\t    chrome = ua.indexOf('chrome') !== -1,                                                                          // 515\n\t    phantomjs = ua.indexOf('phantom') !== -1,                                                                      // 516\n\t    android = ua.indexOf('android') !== -1,                                                                        // 517\n\t    android23 = ua.search('android [23]') !== -1,                                                                  // 518\n\t\tgecko = ua.indexOf('gecko') !== -1,                                                                               // 519\n                                                                                                                    // 520\n\t    mobile = typeof orientation !== undefined + '',                                                                // 521\n\t    msPointer = !window.PointerEvent && window.MSPointerEvent,                                                     // 522\n\t\tpointer = (window.PointerEvent && window.navigator.pointerEnabled) ||                                             // 523\n\t\t\t\t  msPointer,                                                                                                    // 524\n\t    retina = ('devicePixelRatio' in window && window.devicePixelRatio > 1) ||                                      // 525\n\t             ('matchMedia' in window && window.matchMedia('(min-resolution:144dpi)') &&                            // 526\n\t              window.matchMedia('(min-resolution:144dpi)').matches),                                               // 527\n                                                                                                                    // 528\n\t    doc = document.documentElement,                                                                                // 529\n\t    ie3d = ie && ('transition' in doc.style),                                                                      // 530\n\t    webkit3d = ('WebKitCSSMatrix' in window) && ('m11' in new window.WebKitCSSMatrix()) && !android23,             // 531\n\t    gecko3d = 'MozPerspective' in doc.style,                                                                       // 532\n\t    opera3d = 'OTransition' in doc.style,                                                                          // 533\n\t    any3d = !window.L_DISABLE_3D && (ie3d || webkit3d || gecko3d || opera3d) && !phantomjs;                        // 534\n                                                                                                                    // 535\n\tvar touch = !window.L_NO_TOUCH && !phantomjs && (pointer || 'ontouchstart' in window ||                            // 536\n\t\t(window.DocumentTouch && document instanceof window.DocumentTouch));                                              // 537\n                                                                                                                    // 538\n\tL.Browser = {                                                                                                      // 539\n\t\tie: ie,                                                                                                           // 540\n\t\tielt9: ielt9,                                                                                                     // 541\n\t\twebkit: webkit,                                                                                                   // 542\n\t\tgecko: gecko && !webkit && !window.opera && !ie,                                                                  // 543\n                                                                                                                    // 544\n\t\tandroid: android,                                                                                                 // 545\n\t\tandroid23: android23,                                                                                             // 546\n                                                                                                                    // 547\n\t\tchrome: chrome,                                                                                                   // 548\n                                                                                                                    // 549\n\t\tie3d: ie3d,                                                                                                       // 550\n\t\twebkit3d: webkit3d,                                                                                               // 551\n\t\tgecko3d: gecko3d,                                                                                                 // 552\n\t\topera3d: opera3d,                                                                                                 // 553\n\t\tany3d: any3d,                                                                                                     // 554\n                                                                                                                    // 555\n\t\tmobile: mobile,                                                                                                   // 556\n\t\tmobileWebkit: mobile && webkit,                                                                                   // 557\n\t\tmobileWebkit3d: mobile && webkit3d,                                                                               // 558\n\t\tmobileOpera: mobile && window.opera,                                                                              // 559\n                                                                                                                    // 560\n\t\ttouch: touch,                                                                                                     // 561\n\t\tmsPointer: msPointer,                                                                                             // 562\n\t\tpointer: pointer,                                                                                                 // 563\n                                                                                                                    // 564\n\t\tretina: retina                                                                                                    // 565\n\t};                                                                                                                 // 566\n                                                                                                                    // 567\n}());                                                                                                               // 568\n                                                                                                                    // 569\n                                                                                                                    // 570\n/*                                                                                                                  // 571\n * L.Point represents a point with x and y coordinates.                                                             // 572\n */                                                                                                                 // 573\n                                                                                                                    // 574\nL.Point = function (/*Number*/ x, /*Number*/ y, /*Boolean*/ round) {                                                // 575\n\tthis.x = (round ? Math.round(x) : x);                                                                              // 576\n\tthis.y = (round ? Math.round(y) : y);                                                                              // 577\n};                                                                                                                  // 578\n                                                                                                                    // 579\nL.Point.prototype = {                                                                                               // 580\n                                                                                                                    // 581\n\tclone: function () {                                                                                               // 582\n\t\treturn new L.Point(this.x, this.y);                                                                               // 583\n\t},                                                                                                                 // 584\n                                                                                                                    // 585\n\t// non-destructive, returns a new point                                                                            // 586\n\tadd: function (point) {                                                                                            // 587\n\t\treturn this.clone()._add(L.point(point));                                                                         // 588\n\t},                                                                                                                 // 589\n                                                                                                                    // 590\n\t// destructive, used directly for performance in situations where it's safe to modify existing point               // 591\n\t_add: function (point) {                                                                                           // 592\n\t\tthis.x += point.x;                                                                                                // 593\n\t\tthis.y += point.y;                                                                                                // 594\n\t\treturn this;                                                                                                      // 595\n\t},                                                                                                                 // 596\n                                                                                                                    // 597\n\tsubtract: function (point) {                                                                                       // 598\n\t\treturn this.clone()._subtract(L.point(point));                                                                    // 599\n\t},                                                                                                                 // 600\n                                                                                                                    // 601\n\t_subtract: function (point) {                                                                                      // 602\n\t\tthis.x -= point.x;                                                                                                // 603\n\t\tthis.y -= point.y;                                                                                                // 604\n\t\treturn this;                                                                                                      // 605\n\t},                                                                                                                 // 606\n                                                                                                                    // 607\n\tdivideBy: function (num) {                                                                                         // 608\n\t\treturn this.clone()._divideBy(num);                                                                               // 609\n\t},                                                                                                                 // 610\n                                                                                                                    // 611\n\t_divideBy: function (num) {                                                                                        // 612\n\t\tthis.x /= num;                                                                                                    // 613\n\t\tthis.y /= num;                                                                                                    // 614\n\t\treturn this;                                                                                                      // 615\n\t},                                                                                                                 // 616\n                                                                                                                    // 617\n\tmultiplyBy: function (num) {                                                                                       // 618\n\t\treturn this.clone()._multiplyBy(num);                                                                             // 619\n\t},                                                                                                                 // 620\n                                                                                                                    // 621\n\t_multiplyBy: function (num) {                                                                                      // 622\n\t\tthis.x *= num;                                                                                                    // 623\n\t\tthis.y *= num;                                                                                                    // 624\n\t\treturn this;                                                                                                      // 625\n\t},                                                                                                                 // 626\n                                                                                                                    // 627\n\tround: function () {                                                                                               // 628\n\t\treturn this.clone()._round();                                                                                     // 629\n\t},                                                                                                                 // 630\n                                                                                                                    // 631\n\t_round: function () {                                                                                              // 632\n\t\tthis.x = Math.round(this.x);                                                                                      // 633\n\t\tthis.y = Math.round(this.y);                                                                                      // 634\n\t\treturn this;                                                                                                      // 635\n\t},                                                                                                                 // 636\n                                                                                                                    // 637\n\tfloor: function () {                                                                                               // 638\n\t\treturn this.clone()._floor();                                                                                     // 639\n\t},                                                                                                                 // 640\n                                                                                                                    // 641\n\t_floor: function () {                                                                                              // 642\n\t\tthis.x = Math.floor(this.x);                                                                                      // 643\n\t\tthis.y = Math.floor(this.y);                                                                                      // 644\n\t\treturn this;                                                                                                      // 645\n\t},                                                                                                                 // 646\n                                                                                                                    // 647\n\tdistanceTo: function (point) {                                                                                     // 648\n\t\tpoint = L.point(point);                                                                                           // 649\n                                                                                                                    // 650\n\t\tvar x = point.x - this.x,                                                                                         // 651\n\t\t    y = point.y - this.y;                                                                                         // 652\n                                                                                                                    // 653\n\t\treturn Math.sqrt(x * x + y * y);                                                                                  // 654\n\t},                                                                                                                 // 655\n                                                                                                                    // 656\n\tequals: function (point) {                                                                                         // 657\n\t\tpoint = L.point(point);                                                                                           // 658\n                                                                                                                    // 659\n\t\treturn point.x === this.x &&                                                                                      // 660\n\t\t       point.y === this.y;                                                                                        // 661\n\t},                                                                                                                 // 662\n                                                                                                                    // 663\n\tcontains: function (point) {                                                                                       // 664\n\t\tpoint = L.point(point);                                                                                           // 665\n                                                                                                                    // 666\n\t\treturn Math.abs(point.x) <= Math.abs(this.x) &&                                                                   // 667\n\t\t       Math.abs(point.y) <= Math.abs(this.y);                                                                     // 668\n\t},                                                                                                                 // 669\n                                                                                                                    // 670\n\ttoString: function () {                                                                                            // 671\n\t\treturn 'Point(' +                                                                                                 // 672\n\t\t        L.Util.formatNum(this.x) + ', ' +                                                                         // 673\n\t\t        L.Util.formatNum(this.y) + ')';                                                                           // 674\n\t}                                                                                                                  // 675\n};                                                                                                                  // 676\n                                                                                                                    // 677\nL.point = function (x, y, round) {                                                                                  // 678\n\tif (x instanceof L.Point) {                                                                                        // 679\n\t\treturn x;                                                                                                         // 680\n\t}                                                                                                                  // 681\n\tif (L.Util.isArray(x)) {                                                                                           // 682\n\t\treturn new L.Point(x[0], x[1]);                                                                                   // 683\n\t}                                                                                                                  // 684\n\tif (x === undefined || x === null) {                                                                               // 685\n\t\treturn x;                                                                                                         // 686\n\t}                                                                                                                  // 687\n\treturn new L.Point(x, y, round);                                                                                   // 688\n};                                                                                                                  // 689\n                                                                                                                    // 690\n                                                                                                                    // 691\n/*                                                                                                                  // 692\n * L.Bounds represents a rectangular area on the screen in pixel coordinates.                                       // 693\n */                                                                                                                 // 694\n                                                                                                                    // 695\nL.Bounds = function (a, b) { //(Point, Point) or Point[]                                                            // 696\n\tif (!a) { return; }                                                                                                // 697\n                                                                                                                    // 698\n\tvar points = b ? [a, b] : a;                                                                                       // 699\n                                                                                                                    // 700\n\tfor (var i = 0, len = points.length; i < len; i++) {                                                               // 701\n\t\tthis.extend(points[i]);                                                                                           // 702\n\t}                                                                                                                  // 703\n};                                                                                                                  // 704\n                                                                                                                    // 705\nL.Bounds.prototype = {                                                                                              // 706\n\t// extend the bounds to contain the given point                                                                    // 707\n\textend: function (point) { // (Point)                                                                              // 708\n\t\tpoint = L.point(point);                                                                                           // 709\n                                                                                                                    // 710\n\t\tif (!this.min && !this.max) {                                                                                     // 711\n\t\t\tthis.min = point.clone();                                                                                        // 712\n\t\t\tthis.max = point.clone();                                                                                        // 713\n\t\t} else {                                                                                                          // 714\n\t\t\tthis.min.x = Math.min(point.x, this.min.x);                                                                      // 715\n\t\t\tthis.max.x = Math.max(point.x, this.max.x);                                                                      // 716\n\t\t\tthis.min.y = Math.min(point.y, this.min.y);                                                                      // 717\n\t\t\tthis.max.y = Math.max(point.y, this.max.y);                                                                      // 718\n\t\t}                                                                                                                 // 719\n\t\treturn this;                                                                                                      // 720\n\t},                                                                                                                 // 721\n                                                                                                                    // 722\n\tgetCenter: function (round) { // (Boolean) -> Point                                                                // 723\n\t\treturn new L.Point(                                                                                               // 724\n\t\t        (this.min.x + this.max.x) / 2,                                                                            // 725\n\t\t        (this.min.y + this.max.y) / 2, round);                                                                    // 726\n\t},                                                                                                                 // 727\n                                                                                                                    // 728\n\tgetBottomLeft: function () { // -> Point                                                                           // 729\n\t\treturn new L.Point(this.min.x, this.max.y);                                                                       // 730\n\t},                                                                                                                 // 731\n                                                                                                                    // 732\n\tgetTopRight: function () { // -> Point                                                                             // 733\n\t\treturn new L.Point(this.max.x, this.min.y);                                                                       // 734\n\t},                                                                                                                 // 735\n                                                                                                                    // 736\n\tgetSize: function () {                                                                                             // 737\n\t\treturn this.max.subtract(this.min);                                                                               // 738\n\t},                                                                                                                 // 739\n                                                                                                                    // 740\n\tcontains: function (obj) { // (Bounds) or (Point) -> Boolean                                                       // 741\n\t\tvar min, max;                                                                                                     // 742\n                                                                                                                    // 743\n\t\tif (typeof obj[0] === 'number' || obj instanceof L.Point) {                                                       // 744\n\t\t\tobj = L.point(obj);                                                                                              // 745\n\t\t} else {                                                                                                          // 746\n\t\t\tobj = L.bounds(obj);                                                                                             // 747\n\t\t}                                                                                                                 // 748\n                                                                                                                    // 749\n\t\tif (obj instanceof L.Bounds) {                                                                                    // 750\n\t\t\tmin = obj.min;                                                                                                   // 751\n\t\t\tmax = obj.max;                                                                                                   // 752\n\t\t} else {                                                                                                          // 753\n\t\t\tmin = max = obj;                                                                                                 // 754\n\t\t}                                                                                                                 // 755\n                                                                                                                    // 756\n\t\treturn (min.x >= this.min.x) &&                                                                                   // 757\n\t\t       (max.x <= this.max.x) &&                                                                                   // 758\n\t\t       (min.y >= this.min.y) &&                                                                                   // 759\n\t\t       (max.y <= this.max.y);                                                                                     // 760\n\t},                                                                                                                 // 761\n                                                                                                                    // 762\n\tintersects: function (bounds) { // (Bounds) -> Boolean                                                             // 763\n\t\tbounds = L.bounds(bounds);                                                                                        // 764\n                                                                                                                    // 765\n\t\tvar min = this.min,                                                                                               // 766\n\t\t    max = this.max,                                                                                               // 767\n\t\t    min2 = bounds.min,                                                                                            // 768\n\t\t    max2 = bounds.max,                                                                                            // 769\n\t\t    xIntersects = (max2.x >= min.x) && (min2.x <= max.x),                                                         // 770\n\t\t    yIntersects = (max2.y >= min.y) && (min2.y <= max.y);                                                         // 771\n                                                                                                                    // 772\n\t\treturn xIntersects && yIntersects;                                                                                // 773\n\t},                                                                                                                 // 774\n                                                                                                                    // 775\n\tisValid: function () {                                                                                             // 776\n\t\treturn !!(this.min && this.max);                                                                                  // 777\n\t}                                                                                                                  // 778\n};                                                                                                                  // 779\n                                                                                                                    // 780\nL.bounds = function (a, b) { // (Bounds) or (Point, Point) or (Point[])                                             // 781\n\tif (!a || a instanceof L.Bounds) {                                                                                 // 782\n\t\treturn a;                                                                                                         // 783\n\t}                                                                                                                  // 784\n\treturn new L.Bounds(a, b);                                                                                         // 785\n};                                                                                                                  // 786\n                                                                                                                    // 787\n                                                                                                                    // 788\n/*                                                                                                                  // 789\n * L.Transformation is an utility class to perform simple point transformations through a 2d-matrix.                // 790\n */                                                                                                                 // 791\n                                                                                                                    // 792\nL.Transformation = function (a, b, c, d) {                                                                          // 793\n\tthis._a = a;                                                                                                       // 794\n\tthis._b = b;                                                                                                       // 795\n\tthis._c = c;                                                                                                       // 796\n\tthis._d = d;                                                                                                       // 797\n};                                                                                                                  // 798\n                                                                                                                    // 799\nL.Transformation.prototype = {                                                                                      // 800\n\ttransform: function (point, scale) { // (Point, Number) -> Point                                                   // 801\n\t\treturn this._transform(point.clone(), scale);                                                                     // 802\n\t},                                                                                                                 // 803\n                                                                                                                    // 804\n\t// destructive transform (faster)                                                                                  // 805\n\t_transform: function (point, scale) {                                                                              // 806\n\t\tscale = scale || 1;                                                                                               // 807\n\t\tpoint.x = scale * (this._a * point.x + this._b);                                                                  // 808\n\t\tpoint.y = scale * (this._c * point.y + this._d);                                                                  // 809\n\t\treturn point;                                                                                                     // 810\n\t},                                                                                                                 // 811\n                                                                                                                    // 812\n\tuntransform: function (point, scale) {                                                                             // 813\n\t\tscale = scale || 1;                                                                                               // 814\n\t\treturn new L.Point(                                                                                               // 815\n\t\t        (point.x / scale - this._b) / this._a,                                                                    // 816\n\t\t        (point.y / scale - this._d) / this._c);                                                                   // 817\n\t}                                                                                                                  // 818\n};                                                                                                                  // 819\n                                                                                                                    // 820\n                                                                                                                    // 821\n/*                                                                                                                  // 822\n * L.DomUtil contains various utility functions for working with DOM.                                               // 823\n */                                                                                                                 // 824\n                                                                                                                    // 825\nL.DomUtil = {                                                                                                       // 826\n\tget: function (id) {                                                                                               // 827\n\t\treturn (typeof id === 'string' ? document.getElementById(id) : id);                                               // 828\n\t},                                                                                                                 // 829\n                                                                                                                    // 830\n\tgetStyle: function (el, style) {                                                                                   // 831\n                                                                                                                    // 832\n\t\tvar value = el.style[style];                                                                                      // 833\n                                                                                                                    // 834\n\t\tif (!value && el.currentStyle) {                                                                                  // 835\n\t\t\tvalue = el.currentStyle[style];                                                                                  // 836\n\t\t}                                                                                                                 // 837\n                                                                                                                    // 838\n\t\tif ((!value || value === 'auto') && document.defaultView) {                                                       // 839\n\t\t\tvar css = document.defaultView.getComputedStyle(el, null);                                                       // 840\n\t\t\tvalue = css ? css[style] : null;                                                                                 // 841\n\t\t}                                                                                                                 // 842\n                                                                                                                    // 843\n\t\treturn value === 'auto' ? null : value;                                                                           // 844\n\t},                                                                                                                 // 845\n                                                                                                                    // 846\n\tgetViewportOffset: function (element) {                                                                            // 847\n                                                                                                                    // 848\n\t\tvar top = 0,                                                                                                      // 849\n\t\t    left = 0,                                                                                                     // 850\n\t\t    el = element,                                                                                                 // 851\n\t\t    docBody = document.body,                                                                                      // 852\n\t\t    docEl = document.documentElement,                                                                             // 853\n\t\t    pos;                                                                                                          // 854\n                                                                                                                    // 855\n\t\tdo {                                                                                                              // 856\n\t\t\ttop  += el.offsetTop  || 0;                                                                                      // 857\n\t\t\tleft += el.offsetLeft || 0;                                                                                      // 858\n                                                                                                                    // 859\n\t\t\t//add borders                                                                                                    // 860\n\t\t\ttop += parseInt(L.DomUtil.getStyle(el, 'borderTopWidth'), 10) || 0;                                              // 861\n\t\t\tleft += parseInt(L.DomUtil.getStyle(el, 'borderLeftWidth'), 10) || 0;                                            // 862\n                                                                                                                    // 863\n\t\t\tpos = L.DomUtil.getStyle(el, 'position');                                                                        // 864\n                                                                                                                    // 865\n\t\t\tif (el.offsetParent === docBody && pos === 'absolute') { break; }                                                // 866\n                                                                                                                    // 867\n\t\t\tif (pos === 'fixed') {                                                                                           // 868\n\t\t\t\ttop  += docBody.scrollTop  || docEl.scrollTop  || 0;                                                            // 869\n\t\t\t\tleft += docBody.scrollLeft || docEl.scrollLeft || 0;                                                            // 870\n\t\t\t\tbreak;                                                                                                          // 871\n\t\t\t}                                                                                                                // 872\n                                                                                                                    // 873\n\t\t\tif (pos === 'relative' && !el.offsetLeft) {                                                                      // 874\n\t\t\t\tvar width = L.DomUtil.getStyle(el, 'width'),                                                                    // 875\n\t\t\t\t    maxWidth = L.DomUtil.getStyle(el, 'max-width'),                                                             // 876\n\t\t\t\t    r = el.getBoundingClientRect();                                                                             // 877\n                                                                                                                    // 878\n\t\t\t\tif (width !== 'none' || maxWidth !== 'none') {                                                                  // 879\n\t\t\t\t\tleft += r.left + el.clientLeft;                                                                                // 880\n\t\t\t\t}                                                                                                               // 881\n                                                                                                                    // 882\n\t\t\t\t//calculate full y offset since we're breaking out of the loop                                                  // 883\n\t\t\t\ttop += r.top + (docBody.scrollTop  || docEl.scrollTop  || 0);                                                   // 884\n                                                                                                                    // 885\n\t\t\t\tbreak;                                                                                                          // 886\n\t\t\t}                                                                                                                // 887\n                                                                                                                    // 888\n\t\t\tel = el.offsetParent;                                                                                            // 889\n                                                                                                                    // 890\n\t\t} while (el);                                                                                                     // 891\n                                                                                                                    // 892\n\t\tel = element;                                                                                                     // 893\n                                                                                                                    // 894\n\t\tdo {                                                                                                              // 895\n\t\t\tif (el === docBody) { break; }                                                                                   // 896\n                                                                                                                    // 897\n\t\t\ttop  -= el.scrollTop  || 0;                                                                                      // 898\n\t\t\tleft -= el.scrollLeft || 0;                                                                                      // 899\n                                                                                                                    // 900\n\t\t\tel = el.parentNode;                                                                                              // 901\n\t\t} while (el);                                                                                                     // 902\n                                                                                                                    // 903\n\t\treturn new L.Point(left, top);                                                                                    // 904\n\t},                                                                                                                 // 905\n                                                                                                                    // 906\n\tdocumentIsLtr: function () {                                                                                       // 907\n\t\tif (!L.DomUtil._docIsLtrCached) {                                                                                 // 908\n\t\t\tL.DomUtil._docIsLtrCached = true;                                                                                // 909\n\t\t\tL.DomUtil._docIsLtr = L.DomUtil.getStyle(document.body, 'direction') === 'ltr';                                  // 910\n\t\t}                                                                                                                 // 911\n\t\treturn L.DomUtil._docIsLtr;                                                                                       // 912\n\t},                                                                                                                 // 913\n                                                                                                                    // 914\n\tcreate: function (tagName, className, container) {                                                                 // 915\n                                                                                                                    // 916\n\t\tvar el = document.createElement(tagName);                                                                         // 917\n\t\tel.className = className;                                                                                         // 918\n                                                                                                                    // 919\n\t\tif (container) {                                                                                                  // 920\n\t\t\tcontainer.appendChild(el);                                                                                       // 921\n\t\t}                                                                                                                 // 922\n                                                                                                                    // 923\n\t\treturn el;                                                                                                        // 924\n\t},                                                                                                                 // 925\n                                                                                                                    // 926\n\thasClass: function (el, name) {                                                                                    // 927\n\t\tif (el.classList !== undefined) {                                                                                 // 928\n\t\t\treturn el.classList.contains(name);                                                                              // 929\n\t\t}                                                                                                                 // 930\n\t\tvar className = L.DomUtil._getClass(el);                                                                          // 931\n\t\treturn className.length > 0 && new RegExp('(^|\\\\s)' + name + '(\\\\s|$)').test(className);                          // 932\n\t},                                                                                                                 // 933\n                                                                                                                    // 934\n\taddClass: function (el, name) {                                                                                    // 935\n\t\tif (el.classList !== undefined) {                                                                                 // 936\n\t\t\tvar classes = L.Util.splitWords(name);                                                                           // 937\n\t\t\tfor (var i = 0, len = classes.length; i < len; i++) {                                                            // 938\n\t\t\t\tel.classList.add(classes[i]);                                                                                   // 939\n\t\t\t}                                                                                                                // 940\n\t\t} else if (!L.DomUtil.hasClass(el, name)) {                                                                       // 941\n\t\t\tvar className = L.DomUtil._getClass(el);                                                                         // 942\n\t\t\tL.DomUtil._setClass(el, (className ? className + ' ' : '') + name);                                              // 943\n\t\t}                                                                                                                 // 944\n\t},                                                                                                                 // 945\n                                                                                                                    // 946\n\tremoveClass: function (el, name) {                                                                                 // 947\n\t\tif (el.classList !== undefined) {                                                                                 // 948\n\t\t\tel.classList.remove(name);                                                                                       // 949\n\t\t} else {                                                                                                          // 950\n\t\t\tL.DomUtil._setClass(el, L.Util.trim((' ' + L.DomUtil._getClass(el) + ' ').replace(' ' + name + ' ', ' ')));      // 951\n\t\t}                                                                                                                 // 952\n\t},                                                                                                                 // 953\n                                                                                                                    // 954\n\t_setClass: function (el, name) {                                                                                   // 955\n\t\tif (el.className.baseVal === undefined) {                                                                         // 956\n\t\t\tel.className = name;                                                                                             // 957\n\t\t} else {                                                                                                          // 958\n\t\t\t// in case of SVG element                                                                                        // 959\n\t\t\tel.className.baseVal = name;                                                                                     // 960\n\t\t}                                                                                                                 // 961\n\t},                                                                                                                 // 962\n                                                                                                                    // 963\n\t_getClass: function (el) {                                                                                         // 964\n\t\treturn el.className.baseVal === undefined ? el.className : el.className.baseVal;                                  // 965\n\t},                                                                                                                 // 966\n                                                                                                                    // 967\n\tsetOpacity: function (el, value) {                                                                                 // 968\n                                                                                                                    // 969\n\t\tif ('opacity' in el.style) {                                                                                      // 970\n\t\t\tel.style.opacity = value;                                                                                        // 971\n                                                                                                                    // 972\n\t\t} else if ('filter' in el.style) {                                                                                // 973\n                                                                                                                    // 974\n\t\t\tvar filter = false,                                                                                              // 975\n\t\t\t    filterName = 'DXImageTransform.Microsoft.Alpha';                                                             // 976\n                                                                                                                    // 977\n\t\t\t// filters collection throws an error if we try to retrieve a filter that doesn't exist                          // 978\n\t\t\ttry {                                                                                                            // 979\n\t\t\t\tfilter = el.filters.item(filterName);                                                                           // 980\n\t\t\t} catch (e) {                                                                                                    // 981\n\t\t\t\t// don't set opacity to 1 if we haven't already set an opacity,                                                 // 982\n\t\t\t\t// it isn't needed and breaks transparent pngs.                                                                 // 983\n\t\t\t\tif (value === 1) { return; }                                                                                    // 984\n\t\t\t}                                                                                                                // 985\n                                                                                                                    // 986\n\t\t\tvalue = Math.round(value * 100);                                                                                 // 987\n                                                                                                                    // 988\n\t\t\tif (filter) {                                                                                                    // 989\n\t\t\t\tfilter.Enabled = (value !== 100);                                                                               // 990\n\t\t\t\tfilter.Opacity = value;                                                                                         // 991\n\t\t\t} else {                                                                                                         // 992\n\t\t\t\tel.style.filter += ' progid:' + filterName + '(opacity=' + value + ')';                                         // 993\n\t\t\t}                                                                                                                // 994\n\t\t}                                                                                                                 // 995\n\t},                                                                                                                 // 996\n                                                                                                                    // 997\n\ttestProp: function (props) {                                                                                       // 998\n                                                                                                                    // 999\n\t\tvar style = document.documentElement.style;                                                                       // 1000\n                                                                                                                    // 1001\n\t\tfor (var i = 0; i < props.length; i++) {                                                                          // 1002\n\t\t\tif (props[i] in style) {                                                                                         // 1003\n\t\t\t\treturn props[i];                                                                                                // 1004\n\t\t\t}                                                                                                                // 1005\n\t\t}                                                                                                                 // 1006\n\t\treturn false;                                                                                                     // 1007\n\t},                                                                                                                 // 1008\n                                                                                                                    // 1009\n\tgetTranslateString: function (point) {                                                                             // 1010\n\t\t// on WebKit browsers (Chrome/Safari/iOS Safari/Android) using translate3d instead of translate                   // 1011\n\t\t// makes animation smoother as it ensures HW accel is used. Firefox 13 doesn't care                               // 1012\n\t\t// (same speed either way), Opera 12 doesn't support translate3d                                                  // 1013\n                                                                                                                    // 1014\n\t\tvar is3d = L.Browser.webkit3d,                                                                                    // 1015\n\t\t    open = 'translate' + (is3d ? '3d' : '') + '(',                                                                // 1016\n\t\t    close = (is3d ? ',0' : '') + ')';                                                                             // 1017\n                                                                                                                    // 1018\n\t\treturn open + point.x + 'px,' + point.y + 'px' + close;                                                           // 1019\n\t},                                                                                                                 // 1020\n                                                                                                                    // 1021\n\tgetScaleString: function (scale, origin) {                                                                         // 1022\n                                                                                                                    // 1023\n\t\tvar preTranslateStr = L.DomUtil.getTranslateString(origin.add(origin.multiplyBy(-1 * scale))),                    // 1024\n\t\t    scaleStr = ' scale(' + scale + ') ';                                                                          // 1025\n                                                                                                                    // 1026\n\t\treturn preTranslateStr + scaleStr;                                                                                // 1027\n\t},                                                                                                                 // 1028\n                                                                                                                    // 1029\n\tsetPosition: function (el, point, disable3D) { // (HTMLElement, Point[, Boolean])                                  // 1030\n                                                                                                                    // 1031\n\t\t// jshint camelcase: false                                                                                        // 1032\n\t\tel._leaflet_pos = point;                                                                                          // 1033\n                                                                                                                    // 1034\n\t\tif (!disable3D && L.Browser.any3d) {                                                                              // 1035\n\t\t\tel.style[L.DomUtil.TRANSFORM] =  L.DomUtil.getTranslateString(point);                                            // 1036\n\t\t} else {                                                                                                          // 1037\n\t\t\tel.style.left = point.x + 'px';                                                                                  // 1038\n\t\t\tel.style.top = point.y + 'px';                                                                                   // 1039\n\t\t}                                                                                                                 // 1040\n\t},                                                                                                                 // 1041\n                                                                                                                    // 1042\n\tgetPosition: function (el) {                                                                                       // 1043\n\t\t// this method is only used for elements previously positioned using setPosition,                                 // 1044\n\t\t// so it's safe to cache the position for performance                                                             // 1045\n                                                                                                                    // 1046\n\t\t// jshint camelcase: false                                                                                        // 1047\n\t\treturn el._leaflet_pos;                                                                                           // 1048\n\t}                                                                                                                  // 1049\n};                                                                                                                  // 1050\n                                                                                                                    // 1051\n                                                                                                                    // 1052\n// prefix style property names                                                                                      // 1053\n                                                                                                                    // 1054\nL.DomUtil.TRANSFORM = L.DomUtil.testProp(                                                                           // 1055\n        ['transform', 'WebkitTransform', 'OTransform', 'MozTransform', 'msTransform']);                             // 1056\n                                                                                                                    // 1057\n// webkitTransition comes first because some browser versions that drop vendor prefix don't do                      // 1058\n// the same for the transitionend event, in particular the Android 4.1 stock browser                                // 1059\n                                                                                                                    // 1060\nL.DomUtil.TRANSITION = L.DomUtil.testProp(                                                                          // 1061\n        ['webkitTransition', 'transition', 'OTransition', 'MozTransition', 'msTransition']);                        // 1062\n                                                                                                                    // 1063\nL.DomUtil.TRANSITION_END =                                                                                          // 1064\n        L.DomUtil.TRANSITION === 'webkitTransition' || L.DomUtil.TRANSITION === 'OTransition' ?                     // 1065\n        L.DomUtil.TRANSITION + 'End' : 'transitionend';                                                             // 1066\n                                                                                                                    // 1067\n(function () {                                                                                                      // 1068\n    if ('onselectstart' in document) {                                                                              // 1069\n        L.extend(L.DomUtil, {                                                                                       // 1070\n            disableTextSelection: function () {                                                                     // 1071\n                L.DomEvent.on(window, 'selectstart', L.DomEvent.preventDefault);                                    // 1072\n            },                                                                                                      // 1073\n                                                                                                                    // 1074\n            enableTextSelection: function () {                                                                      // 1075\n                L.DomEvent.off(window, 'selectstart', L.DomEvent.preventDefault);                                   // 1076\n            }                                                                                                       // 1077\n        });                                                                                                         // 1078\n    } else {                                                                                                        // 1079\n        var userSelectProperty = L.DomUtil.testProp(                                                                // 1080\n            ['userSelect', 'WebkitUserSelect', 'OUserSelect', 'MozUserSelect', 'msUserSelect']);                    // 1081\n                                                                                                                    // 1082\n        L.extend(L.DomUtil, {                                                                                       // 1083\n            disableTextSelection: function () {                                                                     // 1084\n                if (userSelectProperty) {                                                                           // 1085\n                    var style = document.documentElement.style;                                                     // 1086\n                    this._userSelect = style[userSelectProperty];                                                   // 1087\n                    style[userSelectProperty] = 'none';                                                             // 1088\n                }                                                                                                   // 1089\n            },                                                                                                      // 1090\n                                                                                                                    // 1091\n            enableTextSelection: function () {                                                                      // 1092\n                if (userSelectProperty) {                                                                           // 1093\n                    document.documentElement.style[userSelectProperty] = this._userSelect;                          // 1094\n                    delete this._userSelect;                                                                        // 1095\n                }                                                                                                   // 1096\n            }                                                                                                       // 1097\n        });                                                                                                         // 1098\n    }                                                                                                               // 1099\n                                                                                                                    // 1100\n\tL.extend(L.DomUtil, {                                                                                              // 1101\n\t\tdisableImageDrag: function () {                                                                                   // 1102\n\t\t\tL.DomEvent.on(window, 'dragstart', L.DomEvent.preventDefault);                                                   // 1103\n\t\t},                                                                                                                // 1104\n                                                                                                                    // 1105\n\t\tenableImageDrag: function () {                                                                                    // 1106\n\t\t\tL.DomEvent.off(window, 'dragstart', L.DomEvent.preventDefault);                                                  // 1107\n\t\t}                                                                                                                 // 1108\n\t});                                                                                                                // 1109\n})();                                                                                                               // 1110\n                                                                                                                    // 1111\n                                                                                                                    // 1112\n/*                                                                                                                  // 1113\n * L.LatLng represents a geographical point with latitude and longitude coordinates.                                // 1114\n */                                                                                                                 // 1115\n                                                                                                                    // 1116\nL.LatLng = function (lat, lng, alt) { // (Number, Number, Number)                                                   // 1117\n\tlat = parseFloat(lat);                                                                                             // 1118\n\tlng = parseFloat(lng);                                                                                             // 1119\n                                                                                                                    // 1120\n\tif (isNaN(lat) || isNaN(lng)) {                                                                                    // 1121\n\t\tthrow new Error('Invalid LatLng object: (' + lat + ', ' + lng + ')');                                             // 1122\n\t}                                                                                                                  // 1123\n                                                                                                                    // 1124\n\tthis.lat = lat;                                                                                                    // 1125\n\tthis.lng = lng;                                                                                                    // 1126\n                                                                                                                    // 1127\n\tif (alt !== undefined) {                                                                                           // 1128\n\t\tthis.alt = parseFloat(alt);                                                                                       // 1129\n\t}                                                                                                                  // 1130\n};                                                                                                                  // 1131\n                                                                                                                    // 1132\nL.extend(L.LatLng, {                                                                                                // 1133\n\tDEG_TO_RAD: Math.PI / 180,                                                                                         // 1134\n\tRAD_TO_DEG: 180 / Math.PI,                                                                                         // 1135\n\tMAX_MARGIN: 1.0E-9 // max margin of error for the \"equals\" check                                                   // 1136\n});                                                                                                                 // 1137\n                                                                                                                    // 1138\nL.LatLng.prototype = {                                                                                              // 1139\n\tequals: function (obj) { // (LatLng) -> Boolean                                                                    // 1140\n\t\tif (!obj) { return false; }                                                                                       // 1141\n                                                                                                                    // 1142\n\t\tobj = L.latLng(obj);                                                                                              // 1143\n                                                                                                                    // 1144\n\t\tvar margin = Math.max(                                                                                            // 1145\n\t\t        Math.abs(this.lat - obj.lat),                                                                             // 1146\n\t\t        Math.abs(this.lng - obj.lng));                                                                            // 1147\n                                                                                                                    // 1148\n\t\treturn margin <= L.LatLng.MAX_MARGIN;                                                                             // 1149\n\t},                                                                                                                 // 1150\n                                                                                                                    // 1151\n\ttoString: function (precision) { // (Number) -> String                                                             // 1152\n\t\treturn 'LatLng(' +                                                                                                // 1153\n\t\t        L.Util.formatNum(this.lat, precision) + ', ' +                                                            // 1154\n\t\t        L.Util.formatNum(this.lng, precision) + ')';                                                              // 1155\n\t},                                                                                                                 // 1156\n                                                                                                                    // 1157\n\t// Haversine distance formula, see http://en.wikipedia.org/wiki/Haversine_formula                                  // 1158\n\t// TODO move to projection code, LatLng shouldn't know about Earth                                                 // 1159\n\tdistanceTo: function (other) { // (LatLng) -> Number                                                               // 1160\n\t\tother = L.latLng(other);                                                                                          // 1161\n                                                                                                                    // 1162\n\t\tvar R = 6378137, // earth radius in meters                                                                        // 1163\n\t\t    d2r = L.LatLng.DEG_TO_RAD,                                                                                    // 1164\n\t\t    dLat = (other.lat - this.lat) * d2r,                                                                          // 1165\n\t\t    dLon = (other.lng - this.lng) * d2r,                                                                          // 1166\n\t\t    lat1 = this.lat * d2r,                                                                                        // 1167\n\t\t    lat2 = other.lat * d2r,                                                                                       // 1168\n\t\t    sin1 = Math.sin(dLat / 2),                                                                                    // 1169\n\t\t    sin2 = Math.sin(dLon / 2);                                                                                    // 1170\n                                                                                                                    // 1171\n\t\tvar a = sin1 * sin1 + sin2 * sin2 * Math.cos(lat1) * Math.cos(lat2);                                              // 1172\n                                                                                                                    // 1173\n\t\treturn R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));                                                        // 1174\n\t},                                                                                                                 // 1175\n                                                                                                                    // 1176\n\twrap: function (a, b) { // (Number, Number) -> LatLng                                                              // 1177\n\t\tvar lng = this.lng;                                                                                               // 1178\n                                                                                                                    // 1179\n\t\ta = a || -180;                                                                                                    // 1180\n\t\tb = b ||  180;                                                                                                    // 1181\n                                                                                                                    // 1182\n\t\tlng = (lng + b) % (b - a) + (lng < a || lng === b ? b : a);                                                       // 1183\n                                                                                                                    // 1184\n\t\treturn new L.LatLng(this.lat, lng);                                                                               // 1185\n\t}                                                                                                                  // 1186\n};                                                                                                                  // 1187\n                                                                                                                    // 1188\nL.latLng = function (a, b) { // (LatLng) or ([Number, Number]) or (Number, Number)                                  // 1189\n\tif (a instanceof L.LatLng) {                                                                                       // 1190\n\t\treturn a;                                                                                                         // 1191\n\t}                                                                                                                  // 1192\n\tif (L.Util.isArray(a)) {                                                                                           // 1193\n\t\tif (typeof a[0] === 'number' || typeof a[0] === 'string') {                                                       // 1194\n\t\t\treturn new L.LatLng(a[0], a[1], a[2]);                                                                           // 1195\n\t\t} else {                                                                                                          // 1196\n\t\t\treturn null;                                                                                                     // 1197\n\t\t}                                                                                                                 // 1198\n\t}                                                                                                                  // 1199\n\tif (a === undefined || a === null) {                                                                               // 1200\n\t\treturn a;                                                                                                         // 1201\n\t}                                                                                                                  // 1202\n\tif (typeof a === 'object' && 'lat' in a) {                                                                         // 1203\n\t\treturn new L.LatLng(a.lat, 'lng' in a ? a.lng : a.lon);                                                           // 1204\n\t}                                                                                                                  // 1205\n\tif (b === undefined) {                                                                                             // 1206\n\t\treturn null;                                                                                                      // 1207\n\t}                                                                                                                  // 1208\n\treturn new L.LatLng(a, b);                                                                                         // 1209\n};                                                                                                                  // 1210\n                                                                                                                    // 1211\n                                                                                                                    // 1212\n                                                                                                                    // 1213\n/*                                                                                                                  // 1214\n * L.LatLngBounds represents a rectangular area on the map in geographical coordinates.                             // 1215\n */                                                                                                                 // 1216\n                                                                                                                    // 1217\nL.LatLngBounds = function (southWest, northEast) { // (LatLng, LatLng) or (LatLng[])                                // 1218\n\tif (!southWest) { return; }                                                                                        // 1219\n                                                                                                                    // 1220\n\tvar latlngs = northEast ? [southWest, northEast] : southWest;                                                      // 1221\n                                                                                                                    // 1222\n\tfor (var i = 0, len = latlngs.length; i < len; i++) {                                                              // 1223\n\t\tthis.extend(latlngs[i]);                                                                                          // 1224\n\t}                                                                                                                  // 1225\n};                                                                                                                  // 1226\n                                                                                                                    // 1227\nL.LatLngBounds.prototype = {                                                                                        // 1228\n\t// extend the bounds to contain the given point or bounds                                                          // 1229\n\textend: function (obj) { // (LatLng) or (LatLngBounds)                                                             // 1230\n\t\tif (!obj) { return this; }                                                                                        // 1231\n                                                                                                                    // 1232\n\t\tvar latLng = L.latLng(obj);                                                                                       // 1233\n\t\tif (latLng !== null) {                                                                                            // 1234\n\t\t\tobj = latLng;                                                                                                    // 1235\n\t\t} else {                                                                                                          // 1236\n\t\t\tobj = L.latLngBounds(obj);                                                                                       // 1237\n\t\t}                                                                                                                 // 1238\n                                                                                                                    // 1239\n\t\tif (obj instanceof L.LatLng) {                                                                                    // 1240\n\t\t\tif (!this._southWest && !this._northEast) {                                                                      // 1241\n\t\t\t\tthis._southWest = new L.LatLng(obj.lat, obj.lng);                                                               // 1242\n\t\t\t\tthis._northEast = new L.LatLng(obj.lat, obj.lng);                                                               // 1243\n\t\t\t} else {                                                                                                         // 1244\n\t\t\t\tthis._southWest.lat = Math.min(obj.lat, this._southWest.lat);                                                   // 1245\n\t\t\t\tthis._southWest.lng = Math.min(obj.lng, this._southWest.lng);                                                   // 1246\n                                                                                                                    // 1247\n\t\t\t\tthis._northEast.lat = Math.max(obj.lat, this._northEast.lat);                                                   // 1248\n\t\t\t\tthis._northEast.lng = Math.max(obj.lng, this._northEast.lng);                                                   // 1249\n\t\t\t}                                                                                                                // 1250\n\t\t} else if (obj instanceof L.LatLngBounds) {                                                                       // 1251\n\t\t\tthis.extend(obj._southWest);                                                                                     // 1252\n\t\t\tthis.extend(obj._northEast);                                                                                     // 1253\n\t\t}                                                                                                                 // 1254\n\t\treturn this;                                                                                                      // 1255\n\t},                                                                                                                 // 1256\n                                                                                                                    // 1257\n\t// extend the bounds by a percentage                                                                               // 1258\n\tpad: function (bufferRatio) { // (Number) -> LatLngBounds                                                          // 1259\n\t\tvar sw = this._southWest,                                                                                         // 1260\n\t\t    ne = this._northEast,                                                                                         // 1261\n\t\t    heightBuffer = Math.abs(sw.lat - ne.lat) * bufferRatio,                                                       // 1262\n\t\t    widthBuffer = Math.abs(sw.lng - ne.lng) * bufferRatio;                                                        // 1263\n                                                                                                                    // 1264\n\t\treturn new L.LatLngBounds(                                                                                        // 1265\n\t\t        new L.LatLng(sw.lat - heightBuffer, sw.lng - widthBuffer),                                                // 1266\n\t\t        new L.LatLng(ne.lat + heightBuffer, ne.lng + widthBuffer));                                               // 1267\n\t},                                                                                                                 // 1268\n                                                                                                                    // 1269\n\tgetCenter: function () { // -> LatLng                                                                              // 1270\n\t\treturn new L.LatLng(                                                                                              // 1271\n\t\t        (this._southWest.lat + this._northEast.lat) / 2,                                                          // 1272\n\t\t        (this._southWest.lng + this._northEast.lng) / 2);                                                         // 1273\n\t},                                                                                                                 // 1274\n                                                                                                                    // 1275\n\tgetSouthWest: function () {                                                                                        // 1276\n\t\treturn this._southWest;                                                                                           // 1277\n\t},                                                                                                                 // 1278\n                                                                                                                    // 1279\n\tgetNorthEast: function () {                                                                                        // 1280\n\t\treturn this._northEast;                                                                                           // 1281\n\t},                                                                                                                 // 1282\n                                                                                                                    // 1283\n\tgetNorthWest: function () {                                                                                        // 1284\n\t\treturn new L.LatLng(this.getNorth(), this.getWest());                                                             // 1285\n\t},                                                                                                                 // 1286\n                                                                                                                    // 1287\n\tgetSouthEast: function () {                                                                                        // 1288\n\t\treturn new L.LatLng(this.getSouth(), this.getEast());                                                             // 1289\n\t},                                                                                                                 // 1290\n                                                                                                                    // 1291\n\tgetWest: function () {                                                                                             // 1292\n\t\treturn this._southWest.lng;                                                                                       // 1293\n\t},                                                                                                                 // 1294\n                                                                                                                    // 1295\n\tgetSouth: function () {                                                                                            // 1296\n\t\treturn this._southWest.lat;                                                                                       // 1297\n\t},                                                                                                                 // 1298\n                                                                                                                    // 1299\n\tgetEast: function () {                                                                                             // 1300\n\t\treturn this._northEast.lng;                                                                                       // 1301\n\t},                                                                                                                 // 1302\n                                                                                                                    // 1303\n\tgetNorth: function () {                                                                                            // 1304\n\t\treturn this._northEast.lat;                                                                                       // 1305\n\t},                                                                                                                 // 1306\n                                                                                                                    // 1307\n\tcontains: function (obj) { // (LatLngBounds) or (LatLng) -> Boolean                                                // 1308\n\t\tif (typeof obj[0] === 'number' || obj instanceof L.LatLng) {                                                      // 1309\n\t\t\tobj = L.latLng(obj);                                                                                             // 1310\n\t\t} else {                                                                                                          // 1311\n\t\t\tobj = L.latLngBounds(obj);                                                                                       // 1312\n\t\t}                                                                                                                 // 1313\n                                                                                                                    // 1314\n\t\tvar sw = this._southWest,                                                                                         // 1315\n\t\t    ne = this._northEast,                                                                                         // 1316\n\t\t    sw2, ne2;                                                                                                     // 1317\n                                                                                                                    // 1318\n\t\tif (obj instanceof L.LatLngBounds) {                                                                              // 1319\n\t\t\tsw2 = obj.getSouthWest();                                                                                        // 1320\n\t\t\tne2 = obj.getNorthEast();                                                                                        // 1321\n\t\t} else {                                                                                                          // 1322\n\t\t\tsw2 = ne2 = obj;                                                                                                 // 1323\n\t\t}                                                                                                                 // 1324\n                                                                                                                    // 1325\n\t\treturn (sw2.lat >= sw.lat) && (ne2.lat <= ne.lat) &&                                                              // 1326\n\t\t       (sw2.lng >= sw.lng) && (ne2.lng <= ne.lng);                                                                // 1327\n\t},                                                                                                                 // 1328\n                                                                                                                    // 1329\n\tintersects: function (bounds) { // (LatLngBounds)                                                                  // 1330\n\t\tbounds = L.latLngBounds(bounds);                                                                                  // 1331\n                                                                                                                    // 1332\n\t\tvar sw = this._southWest,                                                                                         // 1333\n\t\t    ne = this._northEast,                                                                                         // 1334\n\t\t    sw2 = bounds.getSouthWest(),                                                                                  // 1335\n\t\t    ne2 = bounds.getNorthEast(),                                                                                  // 1336\n                                                                                                                    // 1337\n\t\t    latIntersects = (ne2.lat >= sw.lat) && (sw2.lat <= ne.lat),                                                   // 1338\n\t\t    lngIntersects = (ne2.lng >= sw.lng) && (sw2.lng <= ne.lng);                                                   // 1339\n                                                                                                                    // 1340\n\t\treturn latIntersects && lngIntersects;                                                                            // 1341\n\t},                                                                                                                 // 1342\n                                                                                                                    // 1343\n\ttoBBoxString: function () {                                                                                        // 1344\n\t\treturn [this.getWest(), this.getSouth(), this.getEast(), this.getNorth()].join(',');                              // 1345\n\t},                                                                                                                 // 1346\n                                                                                                                    // 1347\n\tequals: function (bounds) { // (LatLngBounds)                                                                      // 1348\n\t\tif (!bounds) { return false; }                                                                                    // 1349\n                                                                                                                    // 1350\n\t\tbounds = L.latLngBounds(bounds);                                                                                  // 1351\n                                                                                                                    // 1352\n\t\treturn this._southWest.equals(bounds.getSouthWest()) &&                                                           // 1353\n\t\t       this._northEast.equals(bounds.getNorthEast());                                                             // 1354\n\t},                                                                                                                 // 1355\n                                                                                                                    // 1356\n\tisValid: function () {                                                                                             // 1357\n\t\treturn !!(this._southWest && this._northEast);                                                                    // 1358\n\t}                                                                                                                  // 1359\n};                                                                                                                  // 1360\n                                                                                                                    // 1361\n//TODO International date line?                                                                                     // 1362\n                                                                                                                    // 1363\nL.latLngBounds = function (a, b) { // (LatLngBounds) or (LatLng, LatLng)                                            // 1364\n\tif (!a || a instanceof L.LatLngBounds) {                                                                           // 1365\n\t\treturn a;                                                                                                         // 1366\n\t}                                                                                                                  // 1367\n\treturn new L.LatLngBounds(a, b);                                                                                   // 1368\n};                                                                                                                  // 1369\n                                                                                                                    // 1370\n                                                                                                                    // 1371\n/*                                                                                                                  // 1372\n * L.Projection contains various geographical projections used by CRS classes.                                      // 1373\n */                                                                                                                 // 1374\n                                                                                                                    // 1375\nL.Projection = {};                                                                                                  // 1376\n                                                                                                                    // 1377\n                                                                                                                    // 1378\n/*                                                                                                                  // 1379\n * Spherical Mercator is the most popular map projection, used by EPSG:3857 CRS used by default.                    // 1380\n */                                                                                                                 // 1381\n                                                                                                                    // 1382\nL.Projection.SphericalMercator = {                                                                                  // 1383\n\tMAX_LATITUDE: 85.0511287798,                                                                                       // 1384\n                                                                                                                    // 1385\n\tproject: function (latlng) { // (LatLng) -> Point                                                                  // 1386\n\t\tvar d = L.LatLng.DEG_TO_RAD,                                                                                      // 1387\n\t\t    max = this.MAX_LATITUDE,                                                                                      // 1388\n\t\t    lat = Math.max(Math.min(max, latlng.lat), -max),                                                              // 1389\n\t\t    x = latlng.lng * d,                                                                                           // 1390\n\t\t    y = lat * d;                                                                                                  // 1391\n                                                                                                                    // 1392\n\t\ty = Math.log(Math.tan((Math.PI / 4) + (y / 2)));                                                                  // 1393\n                                                                                                                    // 1394\n\t\treturn new L.Point(x, y);                                                                                         // 1395\n\t},                                                                                                                 // 1396\n                                                                                                                    // 1397\n\tunproject: function (point) { // (Point, Boolean) -> LatLng                                                        // 1398\n\t\tvar d = L.LatLng.RAD_TO_DEG,                                                                                      // 1399\n\t\t    lng = point.x * d,                                                                                            // 1400\n\t\t    lat = (2 * Math.atan(Math.exp(point.y)) - (Math.PI / 2)) * d;                                                 // 1401\n                                                                                                                    // 1402\n\t\treturn new L.LatLng(lat, lng);                                                                                    // 1403\n\t}                                                                                                                  // 1404\n};                                                                                                                  // 1405\n                                                                                                                    // 1406\n                                                                                                                    // 1407\n/*                                                                                                                  // 1408\n * Simple equirectangular (Plate Carree) projection, used by CRS like EPSG:4326 and Simple.                         // 1409\n */                                                                                                                 // 1410\n                                                                                                                    // 1411\nL.Projection.LonLat = {                                                                                             // 1412\n\tproject: function (latlng) {                                                                                       // 1413\n\t\treturn new L.Point(latlng.lng, latlng.lat);                                                                       // 1414\n\t},                                                                                                                 // 1415\n                                                                                                                    // 1416\n\tunproject: function (point) {                                                                                      // 1417\n\t\treturn new L.LatLng(point.y, point.x);                                                                            // 1418\n\t}                                                                                                                  // 1419\n};                                                                                                                  // 1420\n                                                                                                                    // 1421\n                                                                                                                    // 1422\n/*                                                                                                                  // 1423\n * L.CRS is a base object for all defined CRS (Coordinate Reference Systems) in Leaflet.                            // 1424\n */                                                                                                                 // 1425\n                                                                                                                    // 1426\nL.CRS = {                                                                                                           // 1427\n\tlatLngToPoint: function (latlng, zoom) { // (LatLng, Number) -> Point                                              // 1428\n\t\tvar projectedPoint = this.projection.project(latlng),                                                             // 1429\n\t\t    scale = this.scale(zoom);                                                                                     // 1430\n                                                                                                                    // 1431\n\t\treturn this.transformation._transform(projectedPoint, scale);                                                     // 1432\n\t},                                                                                                                 // 1433\n                                                                                                                    // 1434\n\tpointToLatLng: function (point, zoom) { // (Point, Number[, Boolean]) -> LatLng                                    // 1435\n\t\tvar scale = this.scale(zoom),                                                                                     // 1436\n\t\t    untransformedPoint = this.transformation.untransform(point, scale);                                           // 1437\n                                                                                                                    // 1438\n\t\treturn this.projection.unproject(untransformedPoint);                                                             // 1439\n\t},                                                                                                                 // 1440\n                                                                                                                    // 1441\n\tproject: function (latlng) {                                                                                       // 1442\n\t\treturn this.projection.project(latlng);                                                                           // 1443\n\t},                                                                                                                 // 1444\n                                                                                                                    // 1445\n\tscale: function (zoom) {                                                                                           // 1446\n\t\treturn 256 * Math.pow(2, zoom);                                                                                   // 1447\n\t},                                                                                                                 // 1448\n                                                                                                                    // 1449\n\tgetSize: function (zoom) {                                                                                         // 1450\n\t\tvar s = this.scale(zoom);                                                                                         // 1451\n\t\treturn L.point(s, s);                                                                                             // 1452\n\t}                                                                                                                  // 1453\n};                                                                                                                  // 1454\n                                                                                                                    // 1455\n                                                                                                                    // 1456\n/*                                                                                                                  // 1457\n * A simple CRS that can be used for flat non-Earth maps like panoramas or game maps.                               // 1458\n */                                                                                                                 // 1459\n                                                                                                                    // 1460\nL.CRS.Simple = L.extend({}, L.CRS, {                                                                                // 1461\n\tprojection: L.Projection.LonLat,                                                                                   // 1462\n\ttransformation: new L.Transformation(1, 0, -1, 0),                                                                 // 1463\n                                                                                                                    // 1464\n\tscale: function (zoom) {                                                                                           // 1465\n\t\treturn Math.pow(2, zoom);                                                                                         // 1466\n\t}                                                                                                                  // 1467\n});                                                                                                                 // 1468\n                                                                                                                    // 1469\n                                                                                                                    // 1470\n/*                                                                                                                  // 1471\n * L.CRS.EPSG3857 (Spherical Mercator) is the most common CRS for web mapping                                       // 1472\n * and is used by Leaflet by default.                                                                               // 1473\n */                                                                                                                 // 1474\n                                                                                                                    // 1475\nL.CRS.EPSG3857 = L.extend({}, L.CRS, {                                                                              // 1476\n\tcode: 'EPSG:3857',                                                                                                 // 1477\n                                                                                                                    // 1478\n\tprojection: L.Projection.SphericalMercator,                                                                        // 1479\n\ttransformation: new L.Transformation(0.5 / Math.PI, 0.5, -0.5 / Math.PI, 0.5),                                     // 1480\n                                                                                                                    // 1481\n\tproject: function (latlng) { // (LatLng) -> Point                                                                  // 1482\n\t\tvar projectedPoint = this.projection.project(latlng),                                                             // 1483\n\t\t    earthRadius = 6378137;                                                                                        // 1484\n\t\treturn projectedPoint.multiplyBy(earthRadius);                                                                    // 1485\n\t}                                                                                                                  // 1486\n});                                                                                                                 // 1487\n                                                                                                                    // 1488\nL.CRS.EPSG900913 = L.extend({}, L.CRS.EPSG3857, {                                                                   // 1489\n\tcode: 'EPSG:900913'                                                                                                // 1490\n});                                                                                                                 // 1491\n                                                                                                                    // 1492\n                                                                                                                    // 1493\n/*                                                                                                                  // 1494\n * L.CRS.EPSG4326 is a CRS popular among advanced GIS specialists.                                                  // 1495\n */                                                                                                                 // 1496\n                                                                                                                    // 1497\nL.CRS.EPSG4326 = L.extend({}, L.CRS, {                                                                              // 1498\n\tcode: 'EPSG:4326',                                                                                                 // 1499\n                                                                                                                    // 1500\n\tprojection: L.Projection.LonLat,                                                                                   // 1501\n\ttransformation: new L.Transformation(1 / 360, 0.5, -1 / 360, 0.5)                                                  // 1502\n});                                                                                                                 // 1503\n                                                                                                                    // 1504\n                                                                                                                    // 1505\n/*                                                                                                                  // 1506\n * L.Map is the central class of the API - it is used to create a map.                                              // 1507\n */                                                                                                                 // 1508\n                                                                                                                    // 1509\nL.Map = L.Class.extend({                                                                                            // 1510\n                                                                                                                    // 1511\n\tincludes: L.Mixin.Events,                                                                                          // 1512\n                                                                                                                    // 1513\n\toptions: {                                                                                                         // 1514\n\t\tcrs: L.CRS.EPSG3857,                                                                                              // 1515\n                                                                                                                    // 1516\n\t\t/*                                                                                                                // 1517\n\t\tcenter: LatLng,                                                                                                   // 1518\n\t\tzoom: Number,                                                                                                     // 1519\n\t\tlayers: Array,                                                                                                    // 1520\n\t\t*/                                                                                                                // 1521\n                                                                                                                    // 1522\n\t\tfadeAnimation: L.DomUtil.TRANSITION && !L.Browser.android23,                                                      // 1523\n\t\ttrackResize: true,                                                                                                // 1524\n\t\tmarkerZoomAnimation: L.DomUtil.TRANSITION && L.Browser.any3d                                                      // 1525\n\t},                                                                                                                 // 1526\n                                                                                                                    // 1527\n\tinitialize: function (id, options) { // (HTMLElement or String, Object)                                            // 1528\n\t\toptions = L.setOptions(this, options);                                                                            // 1529\n                                                                                                                    // 1530\n                                                                                                                    // 1531\n\t\tthis._initContainer(id);                                                                                          // 1532\n\t\tthis._initLayout();                                                                                               // 1533\n                                                                                                                    // 1534\n\t\t// hack for https://github.com/Leaflet/Leaflet/issues/1980                                                        // 1535\n\t\tthis._onResize = L.bind(this._onResize, this);                                                                    // 1536\n                                                                                                                    // 1537\n\t\tthis._initEvents();                                                                                               // 1538\n                                                                                                                    // 1539\n\t\tif (options.maxBounds) {                                                                                          // 1540\n\t\t\tthis.setMaxBounds(options.maxBounds);                                                                            // 1541\n\t\t}                                                                                                                 // 1542\n                                                                                                                    // 1543\n\t\tif (options.center && options.zoom !== undefined) {                                                               // 1544\n\t\t\tthis.setView(L.latLng(options.center), options.zoom, {reset: true});                                             // 1545\n\t\t}                                                                                                                 // 1546\n                                                                                                                    // 1547\n\t\tthis._handlers = [];                                                                                              // 1548\n                                                                                                                    // 1549\n\t\tthis._layers = {};                                                                                                // 1550\n\t\tthis._zoomBoundLayers = {};                                                                                       // 1551\n\t\tthis._tileLayersNum = 0;                                                                                          // 1552\n                                                                                                                    // 1553\n\t\tthis.callInitHooks();                                                                                             // 1554\n                                                                                                                    // 1555\n\t\tthis._addLayers(options.layers);                                                                                  // 1556\n\t},                                                                                                                 // 1557\n                                                                                                                    // 1558\n                                                                                                                    // 1559\n\t// public methods that modify map state                                                                            // 1560\n                                                                                                                    // 1561\n\t// replaced by animation-powered implementation in Map.PanAnimation.js                                             // 1562\n\tsetView: function (center, zoom) {                                                                                 // 1563\n\t\tzoom = zoom === undefined ? this.getZoom() : zoom;                                                                // 1564\n\t\tthis._resetView(L.latLng(center), this._limitZoom(zoom));                                                         // 1565\n\t\treturn this;                                                                                                      // 1566\n\t},                                                                                                                 // 1567\n                                                                                                                    // 1568\n\tsetZoom: function (zoom, options) {                                                                                // 1569\n\t\tif (!this._loaded) {                                                                                              // 1570\n\t\t\tthis._zoom = this._limitZoom(zoom);                                                                              // 1571\n\t\t\treturn this;                                                                                                     // 1572\n\t\t}                                                                                                                 // 1573\n\t\treturn this.setView(this.getCenter(), zoom, {zoom: options});                                                     // 1574\n\t},                                                                                                                 // 1575\n                                                                                                                    // 1576\n\tzoomIn: function (delta, options) {                                                                                // 1577\n\t\treturn this.setZoom(this._zoom + (delta || 1), options);                                                          // 1578\n\t},                                                                                                                 // 1579\n                                                                                                                    // 1580\n\tzoomOut: function (delta, options) {                                                                               // 1581\n\t\treturn this.setZoom(this._zoom - (delta || 1), options);                                                          // 1582\n\t},                                                                                                                 // 1583\n                                                                                                                    // 1584\n\tsetZoomAround: function (latlng, zoom, options) {                                                                  // 1585\n\t\tvar scale = this.getZoomScale(zoom),                                                                              // 1586\n\t\t    viewHalf = this.getSize().divideBy(2),                                                                        // 1587\n\t\t    containerPoint = latlng instanceof L.Point ? latlng : this.latLngToContainerPoint(latlng),                    // 1588\n                                                                                                                    // 1589\n\t\t    centerOffset = containerPoint.subtract(viewHalf).multiplyBy(1 - 1 / scale),                                   // 1590\n\t\t    newCenter = this.containerPointToLatLng(viewHalf.add(centerOffset));                                          // 1591\n                                                                                                                    // 1592\n\t\treturn this.setView(newCenter, zoom, {zoom: options});                                                            // 1593\n\t},                                                                                                                 // 1594\n                                                                                                                    // 1595\n\tfitBounds: function (bounds, options) {                                                                            // 1596\n                                                                                                                    // 1597\n\t\toptions = options || {};                                                                                          // 1598\n\t\tbounds = bounds.getBounds ? bounds.getBounds() : L.latLngBounds(bounds);                                          // 1599\n                                                                                                                    // 1600\n\t\tvar paddingTL = L.point(options.paddingTopLeft || options.padding || [0, 0]),                                     // 1601\n\t\t    paddingBR = L.point(options.paddingBottomRight || options.padding || [0, 0]),                                 // 1602\n                                                                                                                    // 1603\n\t\t    zoom = this.getBoundsZoom(bounds, false, paddingTL.add(paddingBR));                                           // 1604\n                                                                                                                    // 1605\n\t\tzoom = (options.maxZoom) ? Math.min(options.maxZoom, zoom) : zoom;                                                // 1606\n                                                                                                                    // 1607\n\t\tvar paddingOffset = paddingBR.subtract(paddingTL).divideBy(2),                                                    // 1608\n                                                                                                                    // 1609\n\t\t    swPoint = this.project(bounds.getSouthWest(), zoom),                                                          // 1610\n\t\t    nePoint = this.project(bounds.getNorthEast(), zoom),                                                          // 1611\n\t\t    center = this.unproject(swPoint.add(nePoint).divideBy(2).add(paddingOffset), zoom);                           // 1612\n                                                                                                                    // 1613\n\t\treturn this.setView(center, zoom, options);                                                                       // 1614\n\t},                                                                                                                 // 1615\n                                                                                                                    // 1616\n\tfitWorld: function (options) {                                                                                     // 1617\n\t\treturn this.fitBounds([[-90, -180], [90, 180]], options);                                                         // 1618\n\t},                                                                                                                 // 1619\n                                                                                                                    // 1620\n\tpanTo: function (center, options) { // (LatLng)                                                                    // 1621\n\t\treturn this.setView(center, this._zoom, {pan: options});                                                          // 1622\n\t},                                                                                                                 // 1623\n                                                                                                                    // 1624\n\tpanBy: function (offset) { // (Point)                                                                              // 1625\n\t\t// replaced with animated panBy in Map.PanAnimation.js                                                            // 1626\n\t\tthis.fire('movestart');                                                                                           // 1627\n                                                                                                                    // 1628\n\t\tthis._rawPanBy(L.point(offset));                                                                                  // 1629\n                                                                                                                    // 1630\n\t\tthis.fire('move');                                                                                                // 1631\n\t\treturn this.fire('moveend');                                                                                      // 1632\n\t},                                                                                                                 // 1633\n                                                                                                                    // 1634\n\tsetMaxBounds: function (bounds) {                                                                                  // 1635\n\t\tbounds = L.latLngBounds(bounds);                                                                                  // 1636\n                                                                                                                    // 1637\n\t\tthis.options.maxBounds = bounds;                                                                                  // 1638\n                                                                                                                    // 1639\n\t\tif (!bounds) {                                                                                                    // 1640\n\t\t\treturn this.off('moveend', this._panInsideMaxBounds, this);                                                      // 1641\n\t\t}                                                                                                                 // 1642\n                                                                                                                    // 1643\n\t\tif (this._loaded) {                                                                                               // 1644\n\t\t\tthis._panInsideMaxBounds();                                                                                      // 1645\n\t\t}                                                                                                                 // 1646\n                                                                                                                    // 1647\n\t\treturn this.on('moveend', this._panInsideMaxBounds, this);                                                        // 1648\n\t},                                                                                                                 // 1649\n                                                                                                                    // 1650\n\tpanInsideBounds: function (bounds, options) {                                                                      // 1651\n\t\tvar center = this.getCenter(),                                                                                    // 1652\n\t\t\tnewCenter = this._limitCenter(center, this._zoom, bounds);                                                       // 1653\n                                                                                                                    // 1654\n\t\tif (center.equals(newCenter)) { return this; }                                                                    // 1655\n                                                                                                                    // 1656\n\t\treturn this.panTo(newCenter, options);                                                                            // 1657\n\t},                                                                                                                 // 1658\n                                                                                                                    // 1659\n\taddLayer: function (layer) {                                                                                       // 1660\n\t\t// TODO method is too big, refactor                                                                               // 1661\n                                                                                                                    // 1662\n\t\tvar id = L.stamp(layer);                                                                                          // 1663\n                                                                                                                    // 1664\n\t\tif (this._layers[id]) { return this; }                                                                            // 1665\n                                                                                                                    // 1666\n\t\tthis._layers[id] = layer;                                                                                         // 1667\n                                                                                                                    // 1668\n\t\t// TODO getMaxZoom, getMinZoom in ILayer (instead of options)                                                     // 1669\n\t\tif (layer.options && (!isNaN(layer.options.maxZoom) || !isNaN(layer.options.minZoom))) {                          // 1670\n\t\t\tthis._zoomBoundLayers[id] = layer;                                                                               // 1671\n\t\t\tthis._updateZoomLevels();                                                                                        // 1672\n\t\t}                                                                                                                 // 1673\n                                                                                                                    // 1674\n\t\t// TODO looks ugly, refactor!!!                                                                                   // 1675\n\t\tif (this.options.zoomAnimation && L.TileLayer && (layer instanceof L.TileLayer)) {                                // 1676\n\t\t\tthis._tileLayersNum++;                                                                                           // 1677\n\t\t\tthis._tileLayersToLoad++;                                                                                        // 1678\n\t\t\tlayer.on('load', this._onTileLayerLoad, this);                                                                   // 1679\n\t\t}                                                                                                                 // 1680\n                                                                                                                    // 1681\n\t\tif (this._loaded) {                                                                                               // 1682\n\t\t\tthis._layerAdd(layer);                                                                                           // 1683\n\t\t}                                                                                                                 // 1684\n                                                                                                                    // 1685\n\t\treturn this;                                                                                                      // 1686\n\t},                                                                                                                 // 1687\n                                                                                                                    // 1688\n\tremoveLayer: function (layer) {                                                                                    // 1689\n\t\tvar id = L.stamp(layer);                                                                                          // 1690\n                                                                                                                    // 1691\n\t\tif (!this._layers[id]) { return this; }                                                                           // 1692\n                                                                                                                    // 1693\n\t\tif (this._loaded) {                                                                                               // 1694\n\t\t\tlayer.onRemove(this);                                                                                            // 1695\n\t\t}                                                                                                                 // 1696\n                                                                                                                    // 1697\n\t\tdelete this._layers[id];                                                                                          // 1698\n                                                                                                                    // 1699\n\t\tif (this._loaded) {                                                                                               // 1700\n\t\t\tthis.fire('layerremove', {layer: layer});                                                                        // 1701\n\t\t}                                                                                                                 // 1702\n                                                                                                                    // 1703\n\t\tif (this._zoomBoundLayers[id]) {                                                                                  // 1704\n\t\t\tdelete this._zoomBoundLayers[id];                                                                                // 1705\n\t\t\tthis._updateZoomLevels();                                                                                        // 1706\n\t\t}                                                                                                                 // 1707\n                                                                                                                    // 1708\n\t\t// TODO looks ugly, refactor                                                                                      // 1709\n\t\tif (this.options.zoomAnimation && L.TileLayer && (layer instanceof L.TileLayer)) {                                // 1710\n\t\t\tthis._tileLayersNum--;                                                                                           // 1711\n\t\t\tthis._tileLayersToLoad--;                                                                                        // 1712\n\t\t\tlayer.off('load', this._onTileLayerLoad, this);                                                                  // 1713\n\t\t}                                                                                                                 // 1714\n                                                                                                                    // 1715\n\t\treturn this;                                                                                                      // 1716\n\t},                                                                                                                 // 1717\n                                                                                                                    // 1718\n\thasLayer: function (layer) {                                                                                       // 1719\n\t\tif (!layer) { return false; }                                                                                     // 1720\n                                                                                                                    // 1721\n\t\treturn (L.stamp(layer) in this._layers);                                                                          // 1722\n\t},                                                                                                                 // 1723\n                                                                                                                    // 1724\n\teachLayer: function (method, context) {                                                                            // 1725\n\t\tfor (var i in this._layers) {                                                                                     // 1726\n\t\t\tmethod.call(context, this._layers[i]);                                                                           // 1727\n\t\t}                                                                                                                 // 1728\n\t\treturn this;                                                                                                      // 1729\n\t},                                                                                                                 // 1730\n                                                                                                                    // 1731\n\tinvalidateSize: function (options) {                                                                               // 1732\n\t\tif (!this._loaded) { return this; }                                                                               // 1733\n                                                                                                                    // 1734\n\t\toptions = L.extend({                                                                                              // 1735\n\t\t\tanimate: false,                                                                                                  // 1736\n\t\t\tpan: true                                                                                                        // 1737\n\t\t}, options === true ? {animate: true} : options);                                                                 // 1738\n                                                                                                                    // 1739\n\t\tvar oldSize = this.getSize();                                                                                     // 1740\n\t\tthis._sizeChanged = true;                                                                                         // 1741\n\t\tthis._initialCenter = null;                                                                                       // 1742\n                                                                                                                    // 1743\n\t\tvar newSize = this.getSize(),                                                                                     // 1744\n\t\t    oldCenter = oldSize.divideBy(2).round(),                                                                      // 1745\n\t\t    newCenter = newSize.divideBy(2).round(),                                                                      // 1746\n\t\t    offset = oldCenter.subtract(newCenter);                                                                       // 1747\n                                                                                                                    // 1748\n\t\tif (!offset.x && !offset.y) { return this; }                                                                      // 1749\n                                                                                                                    // 1750\n\t\tif (options.animate && options.pan) {                                                                             // 1751\n\t\t\tthis.panBy(offset);                                                                                              // 1752\n                                                                                                                    // 1753\n\t\t} else {                                                                                                          // 1754\n\t\t\tif (options.pan) {                                                                                               // 1755\n\t\t\t\tthis._rawPanBy(offset);                                                                                         // 1756\n\t\t\t}                                                                                                                // 1757\n                                                                                                                    // 1758\n\t\t\tthis.fire('move');                                                                                               // 1759\n                                                                                                                    // 1760\n\t\t\tif (options.debounceMoveend) {                                                                                   // 1761\n\t\t\t\tclearTimeout(this._sizeTimer);                                                                                  // 1762\n\t\t\t\tthis._sizeTimer = setTimeout(L.bind(this.fire, this, 'moveend'), 200);                                          // 1763\n\t\t\t} else {                                                                                                         // 1764\n\t\t\t\tthis.fire('moveend');                                                                                           // 1765\n\t\t\t}                                                                                                                // 1766\n\t\t}                                                                                                                 // 1767\n                                                                                                                    // 1768\n\t\treturn this.fire('resize', {                                                                                      // 1769\n\t\t\toldSize: oldSize,                                                                                                // 1770\n\t\t\tnewSize: newSize                                                                                                 // 1771\n\t\t});                                                                                                               // 1772\n\t},                                                                                                                 // 1773\n                                                                                                                    // 1774\n\t// TODO handler.addTo                                                                                              // 1775\n\taddHandler: function (name, HandlerClass) {                                                                        // 1776\n\t\tif (!HandlerClass) { return this; }                                                                               // 1777\n                                                                                                                    // 1778\n\t\tvar handler = this[name] = new HandlerClass(this);                                                                // 1779\n                                                                                                                    // 1780\n\t\tthis._handlers.push(handler);                                                                                     // 1781\n                                                                                                                    // 1782\n\t\tif (this.options[name]) {                                                                                         // 1783\n\t\t\thandler.enable();                                                                                                // 1784\n\t\t}                                                                                                                 // 1785\n                                                                                                                    // 1786\n\t\treturn this;                                                                                                      // 1787\n\t},                                                                                                                 // 1788\n                                                                                                                    // 1789\n\tremove: function () {                                                                                              // 1790\n\t\tif (this._loaded) {                                                                                               // 1791\n\t\t\tthis.fire('unload');                                                                                             // 1792\n\t\t}                                                                                                                 // 1793\n                                                                                                                    // 1794\n\t\tthis._initEvents('off');                                                                                          // 1795\n                                                                                                                    // 1796\n\t\ttry {                                                                                                             // 1797\n\t\t\t// throws error in IE6-8                                                                                         // 1798\n\t\t\tdelete this._container._leaflet;                                                                                 // 1799\n\t\t} catch (e) {                                                                                                     // 1800\n\t\t\tthis._container._leaflet = undefined;                                                                            // 1801\n\t\t}                                                                                                                 // 1802\n                                                                                                                    // 1803\n\t\tthis._clearPanes();                                                                                               // 1804\n\t\tif (this._clearControlPos) {                                                                                      // 1805\n\t\t\tthis._clearControlPos();                                                                                         // 1806\n\t\t}                                                                                                                 // 1807\n                                                                                                                    // 1808\n\t\tthis._clearHandlers();                                                                                            // 1809\n                                                                                                                    // 1810\n\t\treturn this;                                                                                                      // 1811\n\t},                                                                                                                 // 1812\n                                                                                                                    // 1813\n                                                                                                                    // 1814\n\t// public methods for getting map state                                                                            // 1815\n                                                                                                                    // 1816\n\tgetCenter: function () { // (Boolean) -> LatLng                                                                    // 1817\n\t\tthis._checkIfLoaded();                                                                                            // 1818\n                                                                                                                    // 1819\n\t\tif (this._initialCenter && !this._moved()) {                                                                      // 1820\n\t\t\treturn this._initialCenter;                                                                                      // 1821\n\t\t}                                                                                                                 // 1822\n\t\treturn this.layerPointToLatLng(this._getCenterLayerPoint());                                                      // 1823\n\t},                                                                                                                 // 1824\n                                                                                                                    // 1825\n\tgetZoom: function () {                                                                                             // 1826\n\t\treturn this._zoom;                                                                                                // 1827\n\t},                                                                                                                 // 1828\n                                                                                                                    // 1829\n\tgetBounds: function () {                                                                                           // 1830\n\t\tvar bounds = this.getPixelBounds(),                                                                               // 1831\n\t\t    sw = this.unproject(bounds.getBottomLeft()),                                                                  // 1832\n\t\t    ne = this.unproject(bounds.getTopRight());                                                                    // 1833\n                                                                                                                    // 1834\n\t\treturn new L.LatLngBounds(sw, ne);                                                                                // 1835\n\t},                                                                                                                 // 1836\n                                                                                                                    // 1837\n\tgetMinZoom: function () {                                                                                          // 1838\n\t\treturn this.options.minZoom === undefined ?                                                                       // 1839\n\t\t\t(this._layersMinZoom === undefined ? 0 : this._layersMinZoom) :                                                  // 1840\n\t\t\tthis.options.minZoom;                                                                                            // 1841\n\t},                                                                                                                 // 1842\n                                                                                                                    // 1843\n\tgetMaxZoom: function () {                                                                                          // 1844\n\t\treturn this.options.maxZoom === undefined ?                                                                       // 1845\n\t\t\t(this._layersMaxZoom === undefined ? Infinity : this._layersMaxZoom) :                                           // 1846\n\t\t\tthis.options.maxZoom;                                                                                            // 1847\n\t},                                                                                                                 // 1848\n                                                                                                                    // 1849\n\tgetBoundsZoom: function (bounds, inside, padding) { // (LatLngBounds[, Boolean, Point]) -> Number                  // 1850\n\t\tbounds = L.latLngBounds(bounds);                                                                                  // 1851\n                                                                                                                    // 1852\n\t\tvar zoom = this.getMinZoom() - (inside ? 1 : 0),                                                                  // 1853\n\t\t    maxZoom = this.getMaxZoom(),                                                                                  // 1854\n\t\t    size = this.getSize(),                                                                                        // 1855\n                                                                                                                    // 1856\n\t\t    nw = bounds.getNorthWest(),                                                                                   // 1857\n\t\t    se = bounds.getSouthEast(),                                                                                   // 1858\n                                                                                                                    // 1859\n\t\t    zoomNotFound = true,                                                                                          // 1860\n\t\t    boundsSize;                                                                                                   // 1861\n                                                                                                                    // 1862\n\t\tpadding = L.point(padding || [0, 0]);                                                                             // 1863\n                                                                                                                    // 1864\n\t\tdo {                                                                                                              // 1865\n\t\t\tzoom++;                                                                                                          // 1866\n\t\t\tboundsSize = this.project(se, zoom).subtract(this.project(nw, zoom)).add(padding);                               // 1867\n\t\t\tzoomNotFound = !inside ? size.contains(boundsSize) : boundsSize.x < size.x || boundsSize.y < size.y;             // 1868\n                                                                                                                    // 1869\n\t\t} while (zoomNotFound && zoom <= maxZoom);                                                                        // 1870\n                                                                                                                    // 1871\n\t\tif (zoomNotFound && inside) {                                                                                     // 1872\n\t\t\treturn null;                                                                                                     // 1873\n\t\t}                                                                                                                 // 1874\n                                                                                                                    // 1875\n\t\treturn inside ? zoom : zoom - 1;                                                                                  // 1876\n\t},                                                                                                                 // 1877\n                                                                                                                    // 1878\n\tgetSize: function () {                                                                                             // 1879\n\t\tif (!this._size || this._sizeChanged) {                                                                           // 1880\n\t\t\tthis._size = new L.Point(                                                                                        // 1881\n\t\t\t\tthis._container.clientWidth,                                                                                    // 1882\n\t\t\t\tthis._container.clientHeight);                                                                                  // 1883\n                                                                                                                    // 1884\n\t\t\tthis._sizeChanged = false;                                                                                       // 1885\n\t\t}                                                                                                                 // 1886\n\t\treturn this._size.clone();                                                                                        // 1887\n\t},                                                                                                                 // 1888\n                                                                                                                    // 1889\n\tgetPixelBounds: function () {                                                                                      // 1890\n\t\tvar topLeftPoint = this._getTopLeftPoint();                                                                       // 1891\n\t\treturn new L.Bounds(topLeftPoint, topLeftPoint.add(this.getSize()));                                              // 1892\n\t},                                                                                                                 // 1893\n                                                                                                                    // 1894\n\tgetPixelOrigin: function () {                                                                                      // 1895\n\t\tthis._checkIfLoaded();                                                                                            // 1896\n\t\treturn this._initialTopLeftPoint;                                                                                 // 1897\n\t},                                                                                                                 // 1898\n                                                                                                                    // 1899\n\tgetPanes: function () {                                                                                            // 1900\n\t\treturn this._panes;                                                                                               // 1901\n\t},                                                                                                                 // 1902\n                                                                                                                    // 1903\n\tgetContainer: function () {                                                                                        // 1904\n\t\treturn this._container;                                                                                           // 1905\n\t},                                                                                                                 // 1906\n                                                                                                                    // 1907\n                                                                                                                    // 1908\n\t// TODO replace with universal implementation after refactoring projections                                        // 1909\n                                                                                                                    // 1910\n\tgetZoomScale: function (toZoom) {                                                                                  // 1911\n\t\tvar crs = this.options.crs;                                                                                       // 1912\n\t\treturn crs.scale(toZoom) / crs.scale(this._zoom);                                                                 // 1913\n\t},                                                                                                                 // 1914\n                                                                                                                    // 1915\n\tgetScaleZoom: function (scale) {                                                                                   // 1916\n\t\treturn this._zoom + (Math.log(scale) / Math.LN2);                                                                 // 1917\n\t},                                                                                                                 // 1918\n                                                                                                                    // 1919\n                                                                                                                    // 1920\n\t// conversion methods                                                                                              // 1921\n                                                                                                                    // 1922\n\tproject: function (latlng, zoom) { // (LatLng[, Number]) -> Point                                                  // 1923\n\t\tzoom = zoom === undefined ? this._zoom : zoom;                                                                    // 1924\n\t\treturn this.options.crs.latLngToPoint(L.latLng(latlng), zoom);                                                    // 1925\n\t},                                                                                                                 // 1926\n                                                                                                                    // 1927\n\tunproject: function (point, zoom) { // (Point[, Number]) -> LatLng                                                 // 1928\n\t\tzoom = zoom === undefined ? this._zoom : zoom;                                                                    // 1929\n\t\treturn this.options.crs.pointToLatLng(L.point(point), zoom);                                                      // 1930\n\t},                                                                                                                 // 1931\n                                                                                                                    // 1932\n\tlayerPointToLatLng: function (point) { // (Point)                                                                  // 1933\n\t\tvar projectedPoint = L.point(point).add(this.getPixelOrigin());                                                   // 1934\n\t\treturn this.unproject(projectedPoint);                                                                            // 1935\n\t},                                                                                                                 // 1936\n                                                                                                                    // 1937\n\tlatLngToLayerPoint: function (latlng) { // (LatLng)                                                                // 1938\n\t\tvar projectedPoint = this.project(L.latLng(latlng))._round();                                                     // 1939\n\t\treturn projectedPoint._subtract(this.getPixelOrigin());                                                           // 1940\n\t},                                                                                                                 // 1941\n                                                                                                                    // 1942\n\tcontainerPointToLayerPoint: function (point) { // (Point)                                                          // 1943\n\t\treturn L.point(point).subtract(this._getMapPanePos());                                                            // 1944\n\t},                                                                                                                 // 1945\n                                                                                                                    // 1946\n\tlayerPointToContainerPoint: function (point) { // (Point)                                                          // 1947\n\t\treturn L.point(point).add(this._getMapPanePos());                                                                 // 1948\n\t},                                                                                                                 // 1949\n                                                                                                                    // 1950\n\tcontainerPointToLatLng: function (point) {                                                                         // 1951\n\t\tvar layerPoint = this.containerPointToLayerPoint(L.point(point));                                                 // 1952\n\t\treturn this.layerPointToLatLng(layerPoint);                                                                       // 1953\n\t},                                                                                                                 // 1954\n                                                                                                                    // 1955\n\tlatLngToContainerPoint: function (latlng) {                                                                        // 1956\n\t\treturn this.layerPointToContainerPoint(this.latLngToLayerPoint(L.latLng(latlng)));                                // 1957\n\t},                                                                                                                 // 1958\n                                                                                                                    // 1959\n\tmouseEventToContainerPoint: function (e) { // (MouseEvent)                                                         // 1960\n\t\treturn L.DomEvent.getMousePosition(e, this._container);                                                           // 1961\n\t},                                                                                                                 // 1962\n                                                                                                                    // 1963\n\tmouseEventToLayerPoint: function (e) { // (MouseEvent)                                                             // 1964\n\t\treturn this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e));                                       // 1965\n\t},                                                                                                                 // 1966\n                                                                                                                    // 1967\n\tmouseEventToLatLng: function (e) { // (MouseEvent)                                                                 // 1968\n\t\treturn this.layerPointToLatLng(this.mouseEventToLayerPoint(e));                                                   // 1969\n\t},                                                                                                                 // 1970\n                                                                                                                    // 1971\n                                                                                                                    // 1972\n\t// map initialization methods                                                                                      // 1973\n                                                                                                                    // 1974\n\t_initContainer: function (id) {                                                                                    // 1975\n\t\tvar container = this._container = L.DomUtil.get(id);                                                              // 1976\n                                                                                                                    // 1977\n\t\tif (!container) {                                                                                                 // 1978\n\t\t\tthrow new Error('Map container not found.');                                                                     // 1979\n\t\t} else if (container._leaflet) {                                                                                  // 1980\n\t\t\tthrow new Error('Map container is already initialized.');                                                        // 1981\n\t\t}                                                                                                                 // 1982\n                                                                                                                    // 1983\n\t\tcontainer._leaflet = true;                                                                                        // 1984\n\t},                                                                                                                 // 1985\n                                                                                                                    // 1986\n\t_initLayout: function () {                                                                                         // 1987\n\t\tvar container = this._container;                                                                                  // 1988\n                                                                                                                    // 1989\n\t\tL.DomUtil.addClass(container, 'leaflet-container' +                                                               // 1990\n\t\t\t(L.Browser.touch ? ' leaflet-touch' : '') +                                                                      // 1991\n\t\t\t(L.Browser.retina ? ' leaflet-retina' : '') +                                                                    // 1992\n\t\t\t(L.Browser.ielt9 ? ' leaflet-oldie' : '') +                                                                      // 1993\n\t\t\t(this.options.fadeAnimation ? ' leaflet-fade-anim' : ''));                                                       // 1994\n                                                                                                                    // 1995\n\t\tvar position = L.DomUtil.getStyle(container, 'position');                                                         // 1996\n                                                                                                                    // 1997\n\t\tif (position !== 'absolute' && position !== 'relative' && position !== 'fixed') {                                 // 1998\n\t\t\tcontainer.style.position = 'relative';                                                                           // 1999\n\t\t}                                                                                                                 // 2000\n                                                                                                                    // 2001\n\t\tthis._initPanes();                                                                                                // 2002\n                                                                                                                    // 2003\n\t\tif (this._initControlPos) {                                                                                       // 2004\n\t\t\tthis._initControlPos();                                                                                          // 2005\n\t\t}                                                                                                                 // 2006\n\t},                                                                                                                 // 2007\n                                                                                                                    // 2008\n\t_initPanes: function () {                                                                                          // 2009\n\t\tvar panes = this._panes = {};                                                                                     // 2010\n                                                                                                                    // 2011\n\t\tthis._mapPane = panes.mapPane = this._createPane('leaflet-map-pane', this._container);                            // 2012\n                                                                                                                    // 2013\n\t\tthis._tilePane = panes.tilePane = this._createPane('leaflet-tile-pane', this._mapPane);                           // 2014\n\t\tpanes.objectsPane = this._createPane('leaflet-objects-pane', this._mapPane);                                      // 2015\n\t\tpanes.shadowPane = this._createPane('leaflet-shadow-pane');                                                       // 2016\n\t\tpanes.overlayPane = this._createPane('leaflet-overlay-pane');                                                     // 2017\n\t\tpanes.markerPane = this._createPane('leaflet-marker-pane');                                                       // 2018\n\t\tpanes.popupPane = this._createPane('leaflet-popup-pane');                                                         // 2019\n                                                                                                                    // 2020\n\t\tvar zoomHide = ' leaflet-zoom-hide';                                                                              // 2021\n                                                                                                                    // 2022\n\t\tif (!this.options.markerZoomAnimation) {                                                                          // 2023\n\t\t\tL.DomUtil.addClass(panes.markerPane, zoomHide);                                                                  // 2024\n\t\t\tL.DomUtil.addClass(panes.shadowPane, zoomHide);                                                                  // 2025\n\t\t\tL.DomUtil.addClass(panes.popupPane, zoomHide);                                                                   // 2026\n\t\t}                                                                                                                 // 2027\n\t},                                                                                                                 // 2028\n                                                                                                                    // 2029\n\t_createPane: function (className, container) {                                                                     // 2030\n\t\treturn L.DomUtil.create('div', className, container || this._panes.objectsPane);                                  // 2031\n\t},                                                                                                                 // 2032\n                                                                                                                    // 2033\n\t_clearPanes: function () {                                                                                         // 2034\n\t\tthis._container.removeChild(this._mapPane);                                                                       // 2035\n\t},                                                                                                                 // 2036\n                                                                                                                    // 2037\n\t_addLayers: function (layers) {                                                                                    // 2038\n\t\tlayers = layers ? (L.Util.isArray(layers) ? layers : [layers]) : [];                                              // 2039\n                                                                                                                    // 2040\n\t\tfor (var i = 0, len = layers.length; i < len; i++) {                                                              // 2041\n\t\t\tthis.addLayer(layers[i]);                                                                                        // 2042\n\t\t}                                                                                                                 // 2043\n\t},                                                                                                                 // 2044\n                                                                                                                    // 2045\n                                                                                                                    // 2046\n\t// private methods that modify map state                                                                           // 2047\n                                                                                                                    // 2048\n\t_resetView: function (center, zoom, preserveMapOffset, afterZoomAnim) {                                            // 2049\n                                                                                                                    // 2050\n\t\tvar zoomChanged = (this._zoom !== zoom);                                                                          // 2051\n                                                                                                                    // 2052\n\t\tif (!afterZoomAnim) {                                                                                             // 2053\n\t\t\tthis.fire('movestart');                                                                                          // 2054\n                                                                                                                    // 2055\n\t\t\tif (zoomChanged) {                                                                                               // 2056\n\t\t\t\tthis.fire('zoomstart');                                                                                         // 2057\n\t\t\t}                                                                                                                // 2058\n\t\t}                                                                                                                 // 2059\n                                                                                                                    // 2060\n\t\tthis._zoom = zoom;                                                                                                // 2061\n\t\tthis._initialCenter = center;                                                                                     // 2062\n                                                                                                                    // 2063\n\t\tthis._initialTopLeftPoint = this._getNewTopLeftPoint(center);                                                     // 2064\n                                                                                                                    // 2065\n\t\tif (!preserveMapOffset) {                                                                                         // 2066\n\t\t\tL.DomUtil.setPosition(this._mapPane, new L.Point(0, 0));                                                         // 2067\n\t\t} else {                                                                                                          // 2068\n\t\t\tthis._initialTopLeftPoint._add(this._getMapPanePos());                                                           // 2069\n\t\t}                                                                                                                 // 2070\n                                                                                                                    // 2071\n\t\tthis._tileLayersToLoad = this._tileLayersNum;                                                                     // 2072\n                                                                                                                    // 2073\n\t\tvar loading = !this._loaded;                                                                                      // 2074\n\t\tthis._loaded = true;                                                                                              // 2075\n                                                                                                                    // 2076\n\t\tthis.fire('viewreset', {hard: !preserveMapOffset});                                                               // 2077\n                                                                                                                    // 2078\n\t\tif (loading) {                                                                                                    // 2079\n\t\t\tthis.fire('load');                                                                                               // 2080\n\t\t\tthis.eachLayer(this._layerAdd, this);                                                                            // 2081\n\t\t}                                                                                                                 // 2082\n                                                                                                                    // 2083\n\t\tthis.fire('move');                                                                                                // 2084\n                                                                                                                    // 2085\n\t\tif (zoomChanged || afterZoomAnim) {                                                                               // 2086\n\t\t\tthis.fire('zoomend');                                                                                            // 2087\n\t\t}                                                                                                                 // 2088\n                                                                                                                    // 2089\n\t\tthis.fire('moveend', {hard: !preserveMapOffset});                                                                 // 2090\n\t},                                                                                                                 // 2091\n                                                                                                                    // 2092\n\t_rawPanBy: function (offset) {                                                                                     // 2093\n\t\tL.DomUtil.setPosition(this._mapPane, this._getMapPanePos().subtract(offset));                                     // 2094\n\t},                                                                                                                 // 2095\n                                                                                                                    // 2096\n\t_getZoomSpan: function () {                                                                                        // 2097\n\t\treturn this.getMaxZoom() - this.getMinZoom();                                                                     // 2098\n\t},                                                                                                                 // 2099\n                                                                                                                    // 2100\n\t_updateZoomLevels: function () {                                                                                   // 2101\n\t\tvar i,                                                                                                            // 2102\n\t\t\tminZoom = Infinity,                                                                                              // 2103\n\t\t\tmaxZoom = -Infinity,                                                                                             // 2104\n\t\t\toldZoomSpan = this._getZoomSpan();                                                                               // 2105\n                                                                                                                    // 2106\n\t\tfor (i in this._zoomBoundLayers) {                                                                                // 2107\n\t\t\tvar layer = this._zoomBoundLayers[i];                                                                            // 2108\n\t\t\tif (!isNaN(layer.options.minZoom)) {                                                                             // 2109\n\t\t\t\tminZoom = Math.min(minZoom, layer.options.minZoom);                                                             // 2110\n\t\t\t}                                                                                                                // 2111\n\t\t\tif (!isNaN(layer.options.maxZoom)) {                                                                             // 2112\n\t\t\t\tmaxZoom = Math.max(maxZoom, layer.options.maxZoom);                                                             // 2113\n\t\t\t}                                                                                                                // 2114\n\t\t}                                                                                                                 // 2115\n                                                                                                                    // 2116\n\t\tif (i === undefined) { // we have no tilelayers                                                                   // 2117\n\t\t\tthis._layersMaxZoom = this._layersMinZoom = undefined;                                                           // 2118\n\t\t} else {                                                                                                          // 2119\n\t\t\tthis._layersMaxZoom = maxZoom;                                                                                   // 2120\n\t\t\tthis._layersMinZoom = minZoom;                                                                                   // 2121\n\t\t}                                                                                                                 // 2122\n                                                                                                                    // 2123\n\t\tif (oldZoomSpan !== this._getZoomSpan()) {                                                                        // 2124\n\t\t\tthis.fire('zoomlevelschange');                                                                                   // 2125\n\t\t}                                                                                                                 // 2126\n\t},                                                                                                                 // 2127\n                                                                                                                    // 2128\n\t_panInsideMaxBounds: function () {                                                                                 // 2129\n\t\tthis.panInsideBounds(this.options.maxBounds);                                                                     // 2130\n\t},                                                                                                                 // 2131\n                                                                                                                    // 2132\n\t_checkIfLoaded: function () {                                                                                      // 2133\n\t\tif (!this._loaded) {                                                                                              // 2134\n\t\t\tthrow new Error('Set map center and zoom first.');                                                               // 2135\n\t\t}                                                                                                                 // 2136\n\t},                                                                                                                 // 2137\n                                                                                                                    // 2138\n\t// map events                                                                                                      // 2139\n                                                                                                                    // 2140\n\t_initEvents: function (onOff) {                                                                                    // 2141\n\t\tif (!L.DomEvent) { return; }                                                                                      // 2142\n                                                                                                                    // 2143\n\t\tonOff = onOff || 'on';                                                                                            // 2144\n                                                                                                                    // 2145\n\t\tL.DomEvent[onOff](this._container, 'click', this._onMouseClick, this);                                            // 2146\n                                                                                                                    // 2147\n\t\tvar events = ['dblclick', 'mousedown', 'mouseup', 'mouseenter',                                                   // 2148\n\t\t              'mouseleave', 'mousemove', 'contextmenu'],                                                          // 2149\n\t\t    i, len;                                                                                                       // 2150\n                                                                                                                    // 2151\n\t\tfor (i = 0, len = events.length; i < len; i++) {                                                                  // 2152\n\t\t\tL.DomEvent[onOff](this._container, events[i], this._fireMouseEvent, this);                                       // 2153\n\t\t}                                                                                                                 // 2154\n                                                                                                                    // 2155\n\t\tif (this.options.trackResize) {                                                                                   // 2156\n\t\t\tL.DomEvent[onOff](window, 'resize', this._onResize, this);                                                       // 2157\n\t\t}                                                                                                                 // 2158\n\t},                                                                                                                 // 2159\n                                                                                                                    // 2160\n\t_onResize: function () {                                                                                           // 2161\n\t\tL.Util.cancelAnimFrame(this._resizeRequest);                                                                      // 2162\n\t\tthis._resizeRequest = L.Util.requestAnimFrame(                                                                    // 2163\n\t\t        function () { this.invalidateSize({debounceMoveend: true}); }, this, false, this._container);             // 2164\n\t},                                                                                                                 // 2165\n                                                                                                                    // 2166\n\t_onMouseClick: function (e) {                                                                                      // 2167\n\t\tif (!this._loaded || (!e._simulated &&                                                                            // 2168\n\t\t        ((this.dragging && this.dragging.moved()) ||                                                              // 2169\n\t\t         (this.boxZoom  && this.boxZoom.moved()))) ||                                                             // 2170\n\t\t            L.DomEvent._skipped(e)) { return; }                                                                   // 2171\n                                                                                                                    // 2172\n\t\tthis.fire('preclick');                                                                                            // 2173\n\t\tthis._fireMouseEvent(e);                                                                                          // 2174\n\t},                                                                                                                 // 2175\n                                                                                                                    // 2176\n\t_fireMouseEvent: function (e) {                                                                                    // 2177\n\t\tif (!this._loaded || L.DomEvent._skipped(e)) { return; }                                                          // 2178\n                                                                                                                    // 2179\n\t\tvar type = e.type;                                                                                                // 2180\n                                                                                                                    // 2181\n\t\ttype = (type === 'mouseenter' ? 'mouseover' : (type === 'mouseleave' ? 'mouseout' : type));                       // 2182\n                                                                                                                    // 2183\n\t\tif (!this.hasEventListeners(type)) { return; }                                                                    // 2184\n                                                                                                                    // 2185\n\t\tif (type === 'contextmenu') {                                                                                     // 2186\n\t\t\tL.DomEvent.preventDefault(e);                                                                                    // 2187\n\t\t}                                                                                                                 // 2188\n                                                                                                                    // 2189\n\t\tvar containerPoint = this.mouseEventToContainerPoint(e),                                                          // 2190\n\t\t    layerPoint = this.containerPointToLayerPoint(containerPoint),                                                 // 2191\n\t\t    latlng = this.layerPointToLatLng(layerPoint);                                                                 // 2192\n                                                                                                                    // 2193\n\t\tthis.fire(type, {                                                                                                 // 2194\n\t\t\tlatlng: latlng,                                                                                                  // 2195\n\t\t\tlayerPoint: layerPoint,                                                                                          // 2196\n\t\t\tcontainerPoint: containerPoint,                                                                                  // 2197\n\t\t\toriginalEvent: e                                                                                                 // 2198\n\t\t});                                                                                                               // 2199\n\t},                                                                                                                 // 2200\n                                                                                                                    // 2201\n\t_onTileLayerLoad: function () {                                                                                    // 2202\n\t\tthis._tileLayersToLoad--;                                                                                         // 2203\n\t\tif (this._tileLayersNum && !this._tileLayersToLoad) {                                                             // 2204\n\t\t\tthis.fire('tilelayersload');                                                                                     // 2205\n\t\t}                                                                                                                 // 2206\n\t},                                                                                                                 // 2207\n                                                                                                                    // 2208\n\t_clearHandlers: function () {                                                                                      // 2209\n\t\tfor (var i = 0, len = this._handlers.length; i < len; i++) {                                                      // 2210\n\t\t\tthis._handlers[i].disable();                                                                                     // 2211\n\t\t}                                                                                                                 // 2212\n\t},                                                                                                                 // 2213\n                                                                                                                    // 2214\n\twhenReady: function (callback, context) {                                                                          // 2215\n\t\tif (this._loaded) {                                                                                               // 2216\n\t\t\tcallback.call(context || this, this);                                                                            // 2217\n\t\t} else {                                                                                                          // 2218\n\t\t\tthis.on('load', callback, context);                                                                              // 2219\n\t\t}                                                                                                                 // 2220\n\t\treturn this;                                                                                                      // 2221\n\t},                                                                                                                 // 2222\n                                                                                                                    // 2223\n\t_layerAdd: function (layer) {                                                                                      // 2224\n\t\tlayer.onAdd(this);                                                                                                // 2225\n\t\tthis.fire('layeradd', {layer: layer});                                                                            // 2226\n\t},                                                                                                                 // 2227\n                                                                                                                    // 2228\n                                                                                                                    // 2229\n\t// private methods for getting map state                                                                           // 2230\n                                                                                                                    // 2231\n\t_getMapPanePos: function () {                                                                                      // 2232\n\t\treturn L.DomUtil.getPosition(this._mapPane);                                                                      // 2233\n\t},                                                                                                                 // 2234\n                                                                                                                    // 2235\n\t_moved: function () {                                                                                              // 2236\n\t\tvar pos = this._getMapPanePos();                                                                                  // 2237\n\t\treturn pos && !pos.equals([0, 0]);                                                                                // 2238\n\t},                                                                                                                 // 2239\n                                                                                                                    // 2240\n\t_getTopLeftPoint: function () {                                                                                    // 2241\n\t\treturn this.getPixelOrigin().subtract(this._getMapPanePos());                                                     // 2242\n\t},                                                                                                                 // 2243\n                                                                                                                    // 2244\n\t_getNewTopLeftPoint: function (center, zoom) {                                                                     // 2245\n\t\tvar viewHalf = this.getSize()._divideBy(2);                                                                       // 2246\n\t\t// TODO round on display, not calculation to increase precision?                                                  // 2247\n\t\treturn this.project(center, zoom)._subtract(viewHalf)._round();                                                   // 2248\n\t},                                                                                                                 // 2249\n                                                                                                                    // 2250\n\t_latLngToNewLayerPoint: function (latlng, newZoom, newCenter) {                                                    // 2251\n\t\tvar topLeft = this._getNewTopLeftPoint(newCenter, newZoom).add(this._getMapPanePos());                            // 2252\n\t\treturn this.project(latlng, newZoom)._subtract(topLeft);                                                          // 2253\n\t},                                                                                                                 // 2254\n                                                                                                                    // 2255\n\t// layer point of the current center                                                                               // 2256\n\t_getCenterLayerPoint: function () {                                                                                // 2257\n\t\treturn this.containerPointToLayerPoint(this.getSize()._divideBy(2));                                              // 2258\n\t},                                                                                                                 // 2259\n                                                                                                                    // 2260\n\t// offset of the specified place to the current center in pixels                                                   // 2261\n\t_getCenterOffset: function (latlng) {                                                                              // 2262\n\t\treturn this.latLngToLayerPoint(latlng).subtract(this._getCenterLayerPoint());                                     // 2263\n\t},                                                                                                                 // 2264\n                                                                                                                    // 2265\n\t// adjust center for view to get inside bounds                                                                     // 2266\n\t_limitCenter: function (center, zoom, bounds) {                                                                    // 2267\n                                                                                                                    // 2268\n\t\tif (!bounds) { return center; }                                                                                   // 2269\n                                                                                                                    // 2270\n\t\tvar centerPoint = this.project(center, zoom),                                                                     // 2271\n\t\t    viewHalf = this.getSize().divideBy(2),                                                                        // 2272\n\t\t    viewBounds = new L.Bounds(centerPoint.subtract(viewHalf), centerPoint.add(viewHalf)),                         // 2273\n\t\t    offset = this._getBoundsOffset(viewBounds, bounds, zoom);                                                     // 2274\n                                                                                                                    // 2275\n\t\treturn this.unproject(centerPoint.add(offset), zoom);                                                             // 2276\n\t},                                                                                                                 // 2277\n                                                                                                                    // 2278\n\t// adjust offset for view to get inside bounds                                                                     // 2279\n\t_limitOffset: function (offset, bounds) {                                                                          // 2280\n\t\tif (!bounds) { return offset; }                                                                                   // 2281\n                                                                                                                    // 2282\n\t\tvar viewBounds = this.getPixelBounds(),                                                                           // 2283\n\t\t    newBounds = new L.Bounds(viewBounds.min.add(offset), viewBounds.max.add(offset));                             // 2284\n                                                                                                                    // 2285\n\t\treturn offset.add(this._getBoundsOffset(newBounds, bounds));                                                      // 2286\n\t},                                                                                                                 // 2287\n                                                                                                                    // 2288\n\t// returns offset needed for pxBounds to get inside maxBounds at a specified zoom                                  // 2289\n\t_getBoundsOffset: function (pxBounds, maxBounds, zoom) {                                                           // 2290\n\t\tvar nwOffset = this.project(maxBounds.getNorthWest(), zoom).subtract(pxBounds.min),                               // 2291\n\t\t    seOffset = this.project(maxBounds.getSouthEast(), zoom).subtract(pxBounds.max),                               // 2292\n                                                                                                                    // 2293\n\t\t    dx = this._rebound(nwOffset.x, -seOffset.x),                                                                  // 2294\n\t\t    dy = this._rebound(nwOffset.y, -seOffset.y);                                                                  // 2295\n                                                                                                                    // 2296\n\t\treturn new L.Point(dx, dy);                                                                                       // 2297\n\t},                                                                                                                 // 2298\n                                                                                                                    // 2299\n\t_rebound: function (left, right) {                                                                                 // 2300\n\t\treturn left + right > 0 ?                                                                                         // 2301\n\t\t\tMath.round(left - right) / 2 :                                                                                   // 2302\n\t\t\tMath.max(0, Math.ceil(left)) - Math.max(0, Math.floor(right));                                                   // 2303\n\t},                                                                                                                 // 2304\n                                                                                                                    // 2305\n\t_limitZoom: function (zoom) {                                                                                      // 2306\n\t\tvar min = this.getMinZoom(),                                                                                      // 2307\n\t\t    max = this.getMaxZoom();                                                                                      // 2308\n                                                                                                                    // 2309\n\t\treturn Math.max(min, Math.min(max, zoom));                                                                        // 2310\n\t}                                                                                                                  // 2311\n});                                                                                                                 // 2312\n                                                                                                                    // 2313\nL.map = function (id, options) {                                                                                    // 2314\n\treturn new L.Map(id, options);                                                                                     // 2315\n};                                                                                                                  // 2316\n                                                                                                                    // 2317\n                                                                                                                    // 2318\n/*                                                                                                                  // 2319\n * Mercator projection that takes into account that the Earth is not a perfect sphere.                              // 2320\n * Less popular than spherical mercator; used by projections like EPSG:3395.                                        // 2321\n */                                                                                                                 // 2322\n                                                                                                                    // 2323\nL.Projection.Mercator = {                                                                                           // 2324\n\tMAX_LATITUDE: 85.0840591556,                                                                                       // 2325\n                                                                                                                    // 2326\n\tR_MINOR: 6356752.314245179,                                                                                        // 2327\n\tR_MAJOR: 6378137,                                                                                                  // 2328\n                                                                                                                    // 2329\n\tproject: function (latlng) { // (LatLng) -> Point                                                                  // 2330\n\t\tvar d = L.LatLng.DEG_TO_RAD,                                                                                      // 2331\n\t\t    max = this.MAX_LATITUDE,                                                                                      // 2332\n\t\t    lat = Math.max(Math.min(max, latlng.lat), -max),                                                              // 2333\n\t\t    r = this.R_MAJOR,                                                                                             // 2334\n\t\t    r2 = this.R_MINOR,                                                                                            // 2335\n\t\t    x = latlng.lng * d * r,                                                                                       // 2336\n\t\t    y = lat * d,                                                                                                  // 2337\n\t\t    tmp = r2 / r,                                                                                                 // 2338\n\t\t    eccent = Math.sqrt(1.0 - tmp * tmp),                                                                          // 2339\n\t\t    con = eccent * Math.sin(y);                                                                                   // 2340\n                                                                                                                    // 2341\n\t\tcon = Math.pow((1 - con) / (1 + con), eccent * 0.5);                                                              // 2342\n                                                                                                                    // 2343\n\t\tvar ts = Math.tan(0.5 * ((Math.PI * 0.5) - y)) / con;                                                             // 2344\n\t\ty = -r * Math.log(ts);                                                                                            // 2345\n                                                                                                                    // 2346\n\t\treturn new L.Point(x, y);                                                                                         // 2347\n\t},                                                                                                                 // 2348\n                                                                                                                    // 2349\n\tunproject: function (point) { // (Point, Boolean) -> LatLng                                                        // 2350\n\t\tvar d = L.LatLng.RAD_TO_DEG,                                                                                      // 2351\n\t\t    r = this.R_MAJOR,                                                                                             // 2352\n\t\t    r2 = this.R_MINOR,                                                                                            // 2353\n\t\t    lng = point.x * d / r,                                                                                        // 2354\n\t\t    tmp = r2 / r,                                                                                                 // 2355\n\t\t    eccent = Math.sqrt(1 - (tmp * tmp)),                                                                          // 2356\n\t\t    ts = Math.exp(- point.y / r),                                                                                 // 2357\n\t\t    phi = (Math.PI / 2) - 2 * Math.atan(ts),                                                                      // 2358\n\t\t    numIter = 15,                                                                                                 // 2359\n\t\t    tol = 1e-7,                                                                                                   // 2360\n\t\t    i = numIter,                                                                                                  // 2361\n\t\t    dphi = 0.1,                                                                                                   // 2362\n\t\t    con;                                                                                                          // 2363\n                                                                                                                    // 2364\n\t\twhile ((Math.abs(dphi) > tol) && (--i > 0)) {                                                                     // 2365\n\t\t\tcon = eccent * Math.sin(phi);                                                                                    // 2366\n\t\t\tdphi = (Math.PI / 2) - 2 * Math.atan(ts *                                                                        // 2367\n\t\t\t            Math.pow((1.0 - con) / (1.0 + con), 0.5 * eccent)) - phi;                                            // 2368\n\t\t\tphi += dphi;                                                                                                     // 2369\n\t\t}                                                                                                                 // 2370\n                                                                                                                    // 2371\n\t\treturn new L.LatLng(phi * d, lng);                                                                                // 2372\n\t}                                                                                                                  // 2373\n};                                                                                                                  // 2374\n                                                                                                                    // 2375\n                                                                                                                    // 2376\n                                                                                                                    // 2377\nL.CRS.EPSG3395 = L.extend({}, L.CRS, {                                                                              // 2378\n\tcode: 'EPSG:3395',                                                                                                 // 2379\n                                                                                                                    // 2380\n\tprojection: L.Projection.Mercator,                                                                                 // 2381\n                                                                                                                    // 2382\n\ttransformation: (function () {                                                                                     // 2383\n\t\tvar m = L.Projection.Mercator,                                                                                    // 2384\n\t\t    r = m.R_MAJOR,                                                                                                // 2385\n\t\t    scale = 0.5 / (Math.PI * r);                                                                                  // 2386\n                                                                                                                    // 2387\n\t\treturn new L.Transformation(scale, 0.5, -scale, 0.5);                                                             // 2388\n\t}())                                                                                                               // 2389\n});                                                                                                                 // 2390\n                                                                                                                    // 2391\n                                                                                                                    // 2392\n/*                                                                                                                  // 2393\n * L.TileLayer is used for standard xyz-numbered tile layers.                                                       // 2394\n */                                                                                                                 // 2395\n                                                                                                                    // 2396\nL.TileLayer = L.Class.extend({                                                                                      // 2397\n\tincludes: L.Mixin.Events,                                                                                          // 2398\n                                                                                                                    // 2399\n\toptions: {                                                                                                         // 2400\n\t\tminZoom: 0,                                                                                                       // 2401\n\t\tmaxZoom: 18,                                                                                                      // 2402\n\t\ttileSize: 256,                                                                                                    // 2403\n\t\tsubdomains: 'abc',                                                                                                // 2404\n\t\terrorTileUrl: '',                                                                                                 // 2405\n\t\tattribution: '',                                                                                                  // 2406\n\t\tzoomOffset: 0,                                                                                                    // 2407\n\t\topacity: 1,                                                                                                       // 2408\n\t\t/*                                                                                                                // 2409\n\t\tmaxNativeZoom: null,                                                                                              // 2410\n\t\tzIndex: null,                                                                                                     // 2411\n\t\ttms: false,                                                                                                       // 2412\n\t\tcontinuousWorld: false,                                                                                           // 2413\n\t\tnoWrap: false,                                                                                                    // 2414\n\t\tzoomReverse: false,                                                                                               // 2415\n\t\tdetectRetina: false,                                                                                              // 2416\n\t\treuseTiles: false,                                                                                                // 2417\n\t\tbounds: false,                                                                                                    // 2418\n\t\t*/                                                                                                                // 2419\n\t\tunloadInvisibleTiles: L.Browser.mobile,                                                                           // 2420\n\t\tupdateWhenIdle: L.Browser.mobile                                                                                  // 2421\n\t},                                                                                                                 // 2422\n                                                                                                                    // 2423\n\tinitialize: function (url, options) {                                                                              // 2424\n\t\toptions = L.setOptions(this, options);                                                                            // 2425\n                                                                                                                    // 2426\n\t\t// detecting retina displays, adjusting tileSize and zoom levels                                                  // 2427\n\t\tif (options.detectRetina && L.Browser.retina && options.maxZoom > 0) {                                            // 2428\n                                                                                                                    // 2429\n\t\t\toptions.tileSize = Math.floor(options.tileSize / 2);                                                             // 2430\n\t\t\toptions.zoomOffset++;                                                                                            // 2431\n                                                                                                                    // 2432\n\t\t\tif (options.minZoom > 0) {                                                                                       // 2433\n\t\t\t\toptions.minZoom--;                                                                                              // 2434\n\t\t\t}                                                                                                                // 2435\n\t\t\tthis.options.maxZoom--;                                                                                          // 2436\n\t\t}                                                                                                                 // 2437\n                                                                                                                    // 2438\n\t\tif (options.bounds) {                                                                                             // 2439\n\t\t\toptions.bounds = L.latLngBounds(options.bounds);                                                                 // 2440\n\t\t}                                                                                                                 // 2441\n                                                                                                                    // 2442\n\t\tthis._url = url;                                                                                                  // 2443\n                                                                                                                    // 2444\n\t\tvar subdomains = this.options.subdomains;                                                                         // 2445\n                                                                                                                    // 2446\n\t\tif (typeof subdomains === 'string') {                                                                             // 2447\n\t\t\tthis.options.subdomains = subdomains.split('');                                                                  // 2448\n\t\t}                                                                                                                 // 2449\n\t},                                                                                                                 // 2450\n                                                                                                                    // 2451\n\tonAdd: function (map) {                                                                                            // 2452\n\t\tthis._map = map;                                                                                                  // 2453\n\t\tthis._animated = map._zoomAnimated;                                                                               // 2454\n                                                                                                                    // 2455\n\t\t// create a container div for tiles                                                                               // 2456\n\t\tthis._initContainer();                                                                                            // 2457\n                                                                                                                    // 2458\n\t\t// set up events                                                                                                  // 2459\n\t\tmap.on({                                                                                                          // 2460\n\t\t\t'viewreset': this._reset,                                                                                        // 2461\n\t\t\t'moveend': this._update                                                                                          // 2462\n\t\t}, this);                                                                                                         // 2463\n                                                                                                                    // 2464\n\t\tif (this._animated) {                                                                                             // 2465\n\t\t\tmap.on({                                                                                                         // 2466\n\t\t\t\t'zoomanim': this._animateZoom,                                                                                  // 2467\n\t\t\t\t'zoomend': this._endZoomAnim                                                                                    // 2468\n\t\t\t}, this);                                                                                                        // 2469\n\t\t}                                                                                                                 // 2470\n                                                                                                                    // 2471\n\t\tif (!this.options.updateWhenIdle) {                                                                               // 2472\n\t\t\tthis._limitedUpdate = L.Util.limitExecByInterval(this._update, 150, this);                                       // 2473\n\t\t\tmap.on('move', this._limitedUpdate, this);                                                                       // 2474\n\t\t}                                                                                                                 // 2475\n                                                                                                                    // 2476\n\t\tthis._reset();                                                                                                    // 2477\n\t\tthis._update();                                                                                                   // 2478\n\t},                                                                                                                 // 2479\n                                                                                                                    // 2480\n\taddTo: function (map) {                                                                                            // 2481\n\t\tmap.addLayer(this);                                                                                               // 2482\n\t\treturn this;                                                                                                      // 2483\n\t},                                                                                                                 // 2484\n                                                                                                                    // 2485\n\tonRemove: function (map) {                                                                                         // 2486\n\t\tthis._container.parentNode.removeChild(this._container);                                                          // 2487\n                                                                                                                    // 2488\n\t\tmap.off({                                                                                                         // 2489\n\t\t\t'viewreset': this._reset,                                                                                        // 2490\n\t\t\t'moveend': this._update                                                                                          // 2491\n\t\t}, this);                                                                                                         // 2492\n                                                                                                                    // 2493\n\t\tif (this._animated) {                                                                                             // 2494\n\t\t\tmap.off({                                                                                                        // 2495\n\t\t\t\t'zoomanim': this._animateZoom,                                                                                  // 2496\n\t\t\t\t'zoomend': this._endZoomAnim                                                                                    // 2497\n\t\t\t}, this);                                                                                                        // 2498\n\t\t}                                                                                                                 // 2499\n                                                                                                                    // 2500\n\t\tif (!this.options.updateWhenIdle) {                                                                               // 2501\n\t\t\tmap.off('move', this._limitedUpdate, this);                                                                      // 2502\n\t\t}                                                                                                                 // 2503\n                                                                                                                    // 2504\n\t\tthis._container = null;                                                                                           // 2505\n\t\tthis._map = null;                                                                                                 // 2506\n\t},                                                                                                                 // 2507\n                                                                                                                    // 2508\n\tbringToFront: function () {                                                                                        // 2509\n\t\tvar pane = this._map._panes.tilePane;                                                                             // 2510\n                                                                                                                    // 2511\n\t\tif (this._container) {                                                                                            // 2512\n\t\t\tpane.appendChild(this._container);                                                                               // 2513\n\t\t\tthis._setAutoZIndex(pane, Math.max);                                                                             // 2514\n\t\t}                                                                                                                 // 2515\n                                                                                                                    // 2516\n\t\treturn this;                                                                                                      // 2517\n\t},                                                                                                                 // 2518\n                                                                                                                    // 2519\n\tbringToBack: function () {                                                                                         // 2520\n\t\tvar pane = this._map._panes.tilePane;                                                                             // 2521\n                                                                                                                    // 2522\n\t\tif (this._container) {                                                                                            // 2523\n\t\t\tpane.insertBefore(this._container, pane.firstChild);                                                             // 2524\n\t\t\tthis._setAutoZIndex(pane, Math.min);                                                                             // 2525\n\t\t}                                                                                                                 // 2526\n                                                                                                                    // 2527\n\t\treturn this;                                                                                                      // 2528\n\t},                                                                                                                 // 2529\n                                                                                                                    // 2530\n\tgetAttribution: function () {                                                                                      // 2531\n\t\treturn this.options.attribution;                                                                                  // 2532\n\t},                                                                                                                 // 2533\n                                                                                                                    // 2534\n\tgetContainer: function () {                                                                                        // 2535\n\t\treturn this._container;                                                                                           // 2536\n\t},                                                                                                                 // 2537\n                                                                                                                    // 2538\n\tsetOpacity: function (opacity) {                                                                                   // 2539\n\t\tthis.options.opacity = opacity;                                                                                   // 2540\n                                                                                                                    // 2541\n\t\tif (this._map) {                                                                                                  // 2542\n\t\t\tthis._updateOpacity();                                                                                           // 2543\n\t\t}                                                                                                                 // 2544\n                                                                                                                    // 2545\n\t\treturn this;                                                                                                      // 2546\n\t},                                                                                                                 // 2547\n                                                                                                                    // 2548\n\tsetZIndex: function (zIndex) {                                                                                     // 2549\n\t\tthis.options.zIndex = zIndex;                                                                                     // 2550\n\t\tthis._updateZIndex();                                                                                             // 2551\n                                                                                                                    // 2552\n\t\treturn this;                                                                                                      // 2553\n\t},                                                                                                                 // 2554\n                                                                                                                    // 2555\n\tsetUrl: function (url, noRedraw) {                                                                                 // 2556\n\t\tthis._url = url;                                                                                                  // 2557\n                                                                                                                    // 2558\n\t\tif (!noRedraw) {                                                                                                  // 2559\n\t\t\tthis.redraw();                                                                                                   // 2560\n\t\t}                                                                                                                 // 2561\n                                                                                                                    // 2562\n\t\treturn this;                                                                                                      // 2563\n\t},                                                                                                                 // 2564\n                                                                                                                    // 2565\n\tredraw: function () {                                                                                              // 2566\n\t\tif (this._map) {                                                                                                  // 2567\n\t\t\tthis._reset({hard: true});                                                                                       // 2568\n\t\t\tthis._update();                                                                                                  // 2569\n\t\t}                                                                                                                 // 2570\n\t\treturn this;                                                                                                      // 2571\n\t},                                                                                                                 // 2572\n                                                                                                                    // 2573\n\t_updateZIndex: function () {                                                                                       // 2574\n\t\tif (this._container && this.options.zIndex !== undefined) {                                                       // 2575\n\t\t\tthis._container.style.zIndex = this.options.zIndex;                                                              // 2576\n\t\t}                                                                                                                 // 2577\n\t},                                                                                                                 // 2578\n                                                                                                                    // 2579\n\t_setAutoZIndex: function (pane, compare) {                                                                         // 2580\n                                                                                                                    // 2581\n\t\tvar layers = pane.children,                                                                                       // 2582\n\t\t    edgeZIndex = -compare(Infinity, -Infinity), // -Infinity for max, Infinity for min                            // 2583\n\t\t    zIndex, i, len;                                                                                               // 2584\n                                                                                                                    // 2585\n\t\tfor (i = 0, len = layers.length; i < len; i++) {                                                                  // 2586\n                                                                                                                    // 2587\n\t\t\tif (layers[i] !== this._container) {                                                                             // 2588\n\t\t\t\tzIndex = parseInt(layers[i].style.zIndex, 10);                                                                  // 2589\n                                                                                                                    // 2590\n\t\t\t\tif (!isNaN(zIndex)) {                                                                                           // 2591\n\t\t\t\t\tedgeZIndex = compare(edgeZIndex, zIndex);                                                                      // 2592\n\t\t\t\t}                                                                                                               // 2593\n\t\t\t}                                                                                                                // 2594\n\t\t}                                                                                                                 // 2595\n                                                                                                                    // 2596\n\t\tthis.options.zIndex = this._container.style.zIndex =                                                              // 2597\n\t\t        (isFinite(edgeZIndex) ? edgeZIndex : 0) + compare(1, -1);                                                 // 2598\n\t},                                                                                                                 // 2599\n                                                                                                                    // 2600\n\t_updateOpacity: function () {                                                                                      // 2601\n\t\tvar i,                                                                                                            // 2602\n\t\t    tiles = this._tiles;                                                                                          // 2603\n                                                                                                                    // 2604\n\t\tif (L.Browser.ielt9) {                                                                                            // 2605\n\t\t\tfor (i in tiles) {                                                                                               // 2606\n\t\t\t\tL.DomUtil.setOpacity(tiles[i], this.options.opacity);                                                           // 2607\n\t\t\t}                                                                                                                // 2608\n\t\t} else {                                                                                                          // 2609\n\t\t\tL.DomUtil.setOpacity(this._container, this.options.opacity);                                                     // 2610\n\t\t}                                                                                                                 // 2611\n\t},                                                                                                                 // 2612\n                                                                                                                    // 2613\n\t_initContainer: function () {                                                                                      // 2614\n\t\tvar tilePane = this._map._panes.tilePane;                                                                         // 2615\n                                                                                                                    // 2616\n\t\tif (!this._container) {                                                                                           // 2617\n\t\t\tthis._container = L.DomUtil.create('div', 'leaflet-layer');                                                      // 2618\n                                                                                                                    // 2619\n\t\t\tthis._updateZIndex();                                                                                            // 2620\n                                                                                                                    // 2621\n\t\t\tif (this._animated) {                                                                                            // 2622\n\t\t\t\tvar className = 'leaflet-tile-container';                                                                       // 2623\n                                                                                                                    // 2624\n\t\t\t\tthis._bgBuffer = L.DomUtil.create('div', className, this._container);                                           // 2625\n\t\t\t\tthis._tileContainer = L.DomUtil.create('div', className, this._container);                                      // 2626\n                                                                                                                    // 2627\n\t\t\t} else {                                                                                                         // 2628\n\t\t\t\tthis._tileContainer = this._container;                                                                          // 2629\n\t\t\t}                                                                                                                // 2630\n                                                                                                                    // 2631\n\t\t\ttilePane.appendChild(this._container);                                                                           // 2632\n                                                                                                                    // 2633\n\t\t\tif (this.options.opacity < 1) {                                                                                  // 2634\n\t\t\t\tthis._updateOpacity();                                                                                          // 2635\n\t\t\t}                                                                                                                // 2636\n\t\t}                                                                                                                 // 2637\n\t},                                                                                                                 // 2638\n                                                                                                                    // 2639\n\t_reset: function (e) {                                                                                             // 2640\n\t\tfor (var key in this._tiles) {                                                                                    // 2641\n\t\t\tthis.fire('tileunload', {tile: this._tiles[key]});                                                               // 2642\n\t\t}                                                                                                                 // 2643\n                                                                                                                    // 2644\n\t\tthis._tiles = {};                                                                                                 // 2645\n\t\tthis._tilesToLoad = 0;                                                                                            // 2646\n                                                                                                                    // 2647\n\t\tif (this.options.reuseTiles) {                                                                                    // 2648\n\t\t\tthis._unusedTiles = [];                                                                                          // 2649\n\t\t}                                                                                                                 // 2650\n                                                                                                                    // 2651\n\t\tthis._tileContainer.innerHTML = '';                                                                               // 2652\n                                                                                                                    // 2653\n\t\tif (this._animated && e && e.hard) {                                                                              // 2654\n\t\t\tthis._clearBgBuffer();                                                                                           // 2655\n\t\t}                                                                                                                 // 2656\n                                                                                                                    // 2657\n\t\tthis._initContainer();                                                                                            // 2658\n\t},                                                                                                                 // 2659\n                                                                                                                    // 2660\n\t_getTileSize: function () {                                                                                        // 2661\n\t\tvar map = this._map,                                                                                              // 2662\n\t\t    zoom = map.getZoom() + this.options.zoomOffset,                                                               // 2663\n\t\t    zoomN = this.options.maxNativeZoom,                                                                           // 2664\n\t\t    tileSize = this.options.tileSize;                                                                             // 2665\n                                                                                                                    // 2666\n\t\tif (zoomN && zoom > zoomN) {                                                                                      // 2667\n\t\t\ttileSize = Math.round(map.getZoomScale(zoom) / map.getZoomScale(zoomN) * tileSize);                              // 2668\n\t\t}                                                                                                                 // 2669\n                                                                                                                    // 2670\n\t\treturn tileSize;                                                                                                  // 2671\n\t},                                                                                                                 // 2672\n                                                                                                                    // 2673\n\t_update: function () {                                                                                             // 2674\n                                                                                                                    // 2675\n\t\tif (!this._map) { return; }                                                                                       // 2676\n                                                                                                                    // 2677\n\t\tvar map = this._map,                                                                                              // 2678\n\t\t    bounds = map.getPixelBounds(),                                                                                // 2679\n\t\t    zoom = map.getZoom(),                                                                                         // 2680\n\t\t    tileSize = this._getTileSize();                                                                               // 2681\n                                                                                                                    // 2682\n\t\tif (zoom > this.options.maxZoom || zoom < this.options.minZoom) {                                                 // 2683\n\t\t\treturn;                                                                                                          // 2684\n\t\t}                                                                                                                 // 2685\n                                                                                                                    // 2686\n\t\tvar tileBounds = L.bounds(                                                                                        // 2687\n\t\t        bounds.min.divideBy(tileSize)._floor(),                                                                   // 2688\n\t\t        bounds.max.divideBy(tileSize)._floor());                                                                  // 2689\n                                                                                                                    // 2690\n\t\tthis._addTilesFromCenterOut(tileBounds);                                                                          // 2691\n                                                                                                                    // 2692\n\t\tif (this.options.unloadInvisibleTiles || this.options.reuseTiles) {                                               // 2693\n\t\t\tthis._removeOtherTiles(tileBounds);                                                                              // 2694\n\t\t}                                                                                                                 // 2695\n\t},                                                                                                                 // 2696\n                                                                                                                    // 2697\n\t_addTilesFromCenterOut: function (bounds) {                                                                        // 2698\n\t\tvar queue = [],                                                                                                   // 2699\n\t\t    center = bounds.getCenter();                                                                                  // 2700\n                                                                                                                    // 2701\n\t\tvar j, i, point;                                                                                                  // 2702\n                                                                                                                    // 2703\n\t\tfor (j = bounds.min.y; j <= bounds.max.y; j++) {                                                                  // 2704\n\t\t\tfor (i = bounds.min.x; i <= bounds.max.x; i++) {                                                                 // 2705\n\t\t\t\tpoint = new L.Point(i, j);                                                                                      // 2706\n                                                                                                                    // 2707\n\t\t\t\tif (this._tileShouldBeLoaded(point)) {                                                                          // 2708\n\t\t\t\t\tqueue.push(point);                                                                                             // 2709\n\t\t\t\t}                                                                                                               // 2710\n\t\t\t}                                                                                                                // 2711\n\t\t}                                                                                                                 // 2712\n                                                                                                                    // 2713\n\t\tvar tilesToLoad = queue.length;                                                                                   // 2714\n                                                                                                                    // 2715\n\t\tif (tilesToLoad === 0) { return; }                                                                                // 2716\n                                                                                                                    // 2717\n\t\t// load tiles in order of their distance to center                                                                // 2718\n\t\tqueue.sort(function (a, b) {                                                                                      // 2719\n\t\t\treturn a.distanceTo(center) - b.distanceTo(center);                                                              // 2720\n\t\t});                                                                                                               // 2721\n                                                                                                                    // 2722\n\t\tvar fragment = document.createDocumentFragment();                                                                 // 2723\n                                                                                                                    // 2724\n\t\t// if its the first batch of tiles to load                                                                        // 2725\n\t\tif (!this._tilesToLoad) {                                                                                         // 2726\n\t\t\tthis.fire('loading');                                                                                            // 2727\n\t\t}                                                                                                                 // 2728\n                                                                                                                    // 2729\n\t\tthis._tilesToLoad += tilesToLoad;                                                                                 // 2730\n                                                                                                                    // 2731\n\t\tfor (i = 0; i < tilesToLoad; i++) {                                                                               // 2732\n\t\t\tthis._addTile(queue[i], fragment);                                                                               // 2733\n\t\t}                                                                                                                 // 2734\n                                                                                                                    // 2735\n\t\tthis._tileContainer.appendChild(fragment);                                                                        // 2736\n\t},                                                                                                                 // 2737\n                                                                                                                    // 2738\n\t_tileShouldBeLoaded: function (tilePoint) {                                                                        // 2739\n\t\tif ((tilePoint.x + ':' + tilePoint.y) in this._tiles) {                                                           // 2740\n\t\t\treturn false; // already loaded                                                                                  // 2741\n\t\t}                                                                                                                 // 2742\n                                                                                                                    // 2743\n\t\tvar options = this.options;                                                                                       // 2744\n                                                                                                                    // 2745\n\t\tif (!options.continuousWorld) {                                                                                   // 2746\n\t\t\tvar limit = this._getWrapTileNum();                                                                              // 2747\n                                                                                                                    // 2748\n\t\t\t// don't load if exceeds world bounds                                                                            // 2749\n\t\t\tif ((options.noWrap && (tilePoint.x < 0 || tilePoint.x >= limit.x)) ||                                           // 2750\n\t\t\t\ttilePoint.y < 0 || tilePoint.y >= limit.y) { return false; }                                                    // 2751\n\t\t}                                                                                                                 // 2752\n                                                                                                                    // 2753\n\t\tif (options.bounds) {                                                                                             // 2754\n\t\t\tvar tileSize = this._getTileSize(),                                                                              // 2755\n\t\t\t    nwPoint = tilePoint.multiplyBy(tileSize),                                                                    // 2756\n\t\t\t    sePoint = nwPoint.add([tileSize, tileSize]),                                                                 // 2757\n\t\t\t    nw = this._map.unproject(nwPoint),                                                                           // 2758\n\t\t\t    se = this._map.unproject(sePoint);                                                                           // 2759\n                                                                                                                    // 2760\n\t\t\t// TODO temporary hack, will be removed after refactoring projections                                            // 2761\n\t\t\t// https://github.com/Leaflet/Leaflet/issues/1618                                                                // 2762\n\t\t\tif (!options.continuousWorld && !options.noWrap) {                                                               // 2763\n\t\t\t\tnw = nw.wrap();                                                                                                 // 2764\n\t\t\t\tse = se.wrap();                                                                                                 // 2765\n\t\t\t}                                                                                                                // 2766\n                                                                                                                    // 2767\n\t\t\tif (!options.bounds.intersects([nw, se])) { return false; }                                                      // 2768\n\t\t}                                                                                                                 // 2769\n                                                                                                                    // 2770\n\t\treturn true;                                                                                                      // 2771\n\t},                                                                                                                 // 2772\n                                                                                                                    // 2773\n\t_removeOtherTiles: function (bounds) {                                                                             // 2774\n\t\tvar kArr, x, y, key;                                                                                              // 2775\n                                                                                                                    // 2776\n\t\tfor (key in this._tiles) {                                                                                        // 2777\n\t\t\tkArr = key.split(':');                                                                                           // 2778\n\t\t\tx = parseInt(kArr[0], 10);                                                                                       // 2779\n\t\t\ty = parseInt(kArr[1], 10);                                                                                       // 2780\n                                                                                                                    // 2781\n\t\t\t// remove tile if it's out of bounds                                                                             // 2782\n\t\t\tif (x < bounds.min.x || x > bounds.max.x || y < bounds.min.y || y > bounds.max.y) {                              // 2783\n\t\t\t\tthis._removeTile(key);                                                                                          // 2784\n\t\t\t}                                                                                                                // 2785\n\t\t}                                                                                                                 // 2786\n\t},                                                                                                                 // 2787\n                                                                                                                    // 2788\n\t_removeTile: function (key) {                                                                                      // 2789\n\t\tvar tile = this._tiles[key];                                                                                      // 2790\n                                                                                                                    // 2791\n\t\tthis.fire('tileunload', {tile: tile, url: tile.src});                                                             // 2792\n                                                                                                                    // 2793\n\t\tif (this.options.reuseTiles) {                                                                                    // 2794\n\t\t\tL.DomUtil.removeClass(tile, 'leaflet-tile-loaded');                                                              // 2795\n\t\t\tthis._unusedTiles.push(tile);                                                                                    // 2796\n                                                                                                                    // 2797\n\t\t} else if (tile.parentNode === this._tileContainer) {                                                             // 2798\n\t\t\tthis._tileContainer.removeChild(tile);                                                                           // 2799\n\t\t}                                                                                                                 // 2800\n                                                                                                                    // 2801\n\t\t// for https://github.com/CloudMade/Leaflet/issues/137                                                            // 2802\n\t\tif (!L.Browser.android) {                                                                                         // 2803\n\t\t\ttile.onload = null;                                                                                              // 2804\n\t\t\ttile.src = L.Util.emptyImageUrl;                                                                                 // 2805\n\t\t}                                                                                                                 // 2806\n                                                                                                                    // 2807\n\t\tdelete this._tiles[key];                                                                                          // 2808\n\t},                                                                                                                 // 2809\n                                                                                                                    // 2810\n\t_addTile: function (tilePoint, container) {                                                                        // 2811\n\t\tvar tilePos = this._getTilePos(tilePoint);                                                                        // 2812\n                                                                                                                    // 2813\n\t\t// get unused tile - or create a new tile                                                                         // 2814\n\t\tvar tile = this._getTile();                                                                                       // 2815\n                                                                                                                    // 2816\n\t\t/*                                                                                                                // 2817\n\t\tChrome 20 layouts much faster with top/left (verify with timeline, frames)                                        // 2818\n\t\tAndroid 4 browser has display issues with top/left and requires transform instead                                 // 2819\n\t\t(other browsers don't currently care) - see debug/hacks/jitter.html for an example                                // 2820\n\t\t*/                                                                                                                // 2821\n\t\tL.DomUtil.setPosition(tile, tilePos, L.Browser.chrome);                                                           // 2822\n                                                                                                                    // 2823\n\t\tthis._tiles[tilePoint.x + ':' + tilePoint.y] = tile;                                                              // 2824\n                                                                                                                    // 2825\n\t\tthis._loadTile(tile, tilePoint);                                                                                  // 2826\n                                                                                                                    // 2827\n\t\tif (tile.parentNode !== this._tileContainer) {                                                                    // 2828\n\t\t\tcontainer.appendChild(tile);                                                                                     // 2829\n\t\t}                                                                                                                 // 2830\n\t},                                                                                                                 // 2831\n                                                                                                                    // 2832\n\t_getZoomForUrl: function () {                                                                                      // 2833\n                                                                                                                    // 2834\n\t\tvar options = this.options,                                                                                       // 2835\n\t\t    zoom = this._map.getZoom();                                                                                   // 2836\n                                                                                                                    // 2837\n\t\tif (options.zoomReverse) {                                                                                        // 2838\n\t\t\tzoom = options.maxZoom - zoom;                                                                                   // 2839\n\t\t}                                                                                                                 // 2840\n                                                                                                                    // 2841\n\t\tzoom += options.zoomOffset;                                                                                       // 2842\n                                                                                                                    // 2843\n\t\treturn options.maxNativeZoom ? Math.min(zoom, options.maxNativeZoom) : zoom;                                      // 2844\n\t},                                                                                                                 // 2845\n                                                                                                                    // 2846\n\t_getTilePos: function (tilePoint) {                                                                                // 2847\n\t\tvar origin = this._map.getPixelOrigin(),                                                                          // 2848\n\t\t    tileSize = this._getTileSize();                                                                               // 2849\n                                                                                                                    // 2850\n\t\treturn tilePoint.multiplyBy(tileSize).subtract(origin);                                                           // 2851\n\t},                                                                                                                 // 2852\n                                                                                                                    // 2853\n\t// image-specific code (override to implement e.g. Canvas or SVG tile layer)                                       // 2854\n                                                                                                                    // 2855\n\tgetTileUrl: function (tilePoint) {                                                                                 // 2856\n\t\treturn L.Util.template(this._url, L.extend({                                                                      // 2857\n\t\t\ts: this._getSubdomain(tilePoint),                                                                                // 2858\n\t\t\tz: tilePoint.z,                                                                                                  // 2859\n\t\t\tx: tilePoint.x,                                                                                                  // 2860\n\t\t\ty: tilePoint.y                                                                                                   // 2861\n\t\t}, this.options));                                                                                                // 2862\n\t},                                                                                                                 // 2863\n                                                                                                                    // 2864\n\t_getWrapTileNum: function () {                                                                                     // 2865\n\t\tvar crs = this._map.options.crs,                                                                                  // 2866\n\t\t    size = crs.getSize(this._map.getZoom());                                                                      // 2867\n\t\treturn size.divideBy(this._getTileSize())._floor();                                                               // 2868\n\t},                                                                                                                 // 2869\n                                                                                                                    // 2870\n\t_adjustTilePoint: function (tilePoint) {                                                                           // 2871\n                                                                                                                    // 2872\n\t\tvar limit = this._getWrapTileNum();                                                                               // 2873\n                                                                                                                    // 2874\n\t\t// wrap tile coordinates                                                                                          // 2875\n\t\tif (!this.options.continuousWorld && !this.options.noWrap) {                                                      // 2876\n\t\t\ttilePoint.x = ((tilePoint.x % limit.x) + limit.x) % limit.x;                                                     // 2877\n\t\t}                                                                                                                 // 2878\n                                                                                                                    // 2879\n\t\tif (this.options.tms) {                                                                                           // 2880\n\t\t\ttilePoint.y = limit.y - tilePoint.y - 1;                                                                         // 2881\n\t\t}                                                                                                                 // 2882\n                                                                                                                    // 2883\n\t\ttilePoint.z = this._getZoomForUrl();                                                                              // 2884\n\t},                                                                                                                 // 2885\n                                                                                                                    // 2886\n\t_getSubdomain: function (tilePoint) {                                                                              // 2887\n\t\tvar index = Math.abs(tilePoint.x + tilePoint.y) % this.options.subdomains.length;                                 // 2888\n\t\treturn this.options.subdomains[index];                                                                            // 2889\n\t},                                                                                                                 // 2890\n                                                                                                                    // 2891\n\t_getTile: function () {                                                                                            // 2892\n\t\tif (this.options.reuseTiles && this._unusedTiles.length > 0) {                                                    // 2893\n\t\t\tvar tile = this._unusedTiles.pop();                                                                              // 2894\n\t\t\tthis._resetTile(tile);                                                                                           // 2895\n\t\t\treturn tile;                                                                                                     // 2896\n\t\t}                                                                                                                 // 2897\n\t\treturn this._createTile();                                                                                        // 2898\n\t},                                                                                                                 // 2899\n                                                                                                                    // 2900\n\t// Override if data stored on a tile needs to be cleaned up before reuse                                           // 2901\n\t_resetTile: function (/*tile*/) {},                                                                                // 2902\n                                                                                                                    // 2903\n\t_createTile: function () {                                                                                         // 2904\n\t\tvar tile = L.DomUtil.create('img', 'leaflet-tile');                                                               // 2905\n\t\ttile.style.width = tile.style.height = this._getTileSize() + 'px';                                                // 2906\n\t\ttile.galleryimg = 'no';                                                                                           // 2907\n                                                                                                                    // 2908\n\t\ttile.onselectstart = tile.onmousemove = L.Util.falseFn;                                                           // 2909\n                                                                                                                    // 2910\n\t\tif (L.Browser.ielt9 && this.options.opacity !== undefined) {                                                      // 2911\n\t\t\tL.DomUtil.setOpacity(tile, this.options.opacity);                                                                // 2912\n\t\t}                                                                                                                 // 2913\n\t\t// without this hack, tiles disappear after zoom on Chrome for Android                                            // 2914\n\t\t// https://github.com/Leaflet/Leaflet/issues/2078                                                                 // 2915\n\t\tif (L.Browser.mobileWebkit3d) {                                                                                   // 2916\n\t\t\ttile.style.WebkitBackfaceVisibility = 'hidden';                                                                  // 2917\n\t\t}                                                                                                                 // 2918\n\t\treturn tile;                                                                                                      // 2919\n\t},                                                                                                                 // 2920\n                                                                                                                    // 2921\n\t_loadTile: function (tile, tilePoint) {                                                                            // 2922\n\t\ttile._layer  = this;                                                                                              // 2923\n\t\ttile.onload  = this._tileOnLoad;                                                                                  // 2924\n\t\ttile.onerror = this._tileOnError;                                                                                 // 2925\n                                                                                                                    // 2926\n\t\tthis._adjustTilePoint(tilePoint);                                                                                 // 2927\n\t\ttile.src     = this.getTileUrl(tilePoint);                                                                        // 2928\n                                                                                                                    // 2929\n\t\tthis.fire('tileloadstart', {                                                                                      // 2930\n\t\t\ttile: tile,                                                                                                      // 2931\n\t\t\turl: tile.src                                                                                                    // 2932\n\t\t});                                                                                                               // 2933\n\t},                                                                                                                 // 2934\n                                                                                                                    // 2935\n\t_tileLoaded: function () {                                                                                         // 2936\n\t\tthis._tilesToLoad--;                                                                                              // 2937\n                                                                                                                    // 2938\n\t\tif (this._animated) {                                                                                             // 2939\n\t\t\tL.DomUtil.addClass(this._tileContainer, 'leaflet-zoom-animated');                                                // 2940\n\t\t}                                                                                                                 // 2941\n                                                                                                                    // 2942\n\t\tif (!this._tilesToLoad) {                                                                                         // 2943\n\t\t\tthis.fire('load');                                                                                               // 2944\n                                                                                                                    // 2945\n\t\t\tif (this._animated) {                                                                                            // 2946\n\t\t\t\t// clear scaled tiles after all new tiles are loaded (for performance)                                          // 2947\n\t\t\t\tclearTimeout(this._clearBgBufferTimer);                                                                         // 2948\n\t\t\t\tthis._clearBgBufferTimer = setTimeout(L.bind(this._clearBgBuffer, this), 500);                                  // 2949\n\t\t\t}                                                                                                                // 2950\n\t\t}                                                                                                                 // 2951\n\t},                                                                                                                 // 2952\n                                                                                                                    // 2953\n\t_tileOnLoad: function () {                                                                                         // 2954\n\t\tvar layer = this._layer;                                                                                          // 2955\n                                                                                                                    // 2956\n\t\t//Only if we are loading an actual image                                                                          // 2957\n\t\tif (this.src !== L.Util.emptyImageUrl) {                                                                          // 2958\n\t\t\tL.DomUtil.addClass(this, 'leaflet-tile-loaded');                                                                 // 2959\n                                                                                                                    // 2960\n\t\t\tlayer.fire('tileload', {                                                                                         // 2961\n\t\t\t\ttile: this,                                                                                                     // 2962\n\t\t\t\turl: this.src                                                                                                   // 2963\n\t\t\t});                                                                                                              // 2964\n\t\t}                                                                                                                 // 2965\n                                                                                                                    // 2966\n\t\tlayer._tileLoaded();                                                                                              // 2967\n\t},                                                                                                                 // 2968\n                                                                                                                    // 2969\n\t_tileOnError: function () {                                                                                        // 2970\n\t\tvar layer = this._layer;                                                                                          // 2971\n                                                                                                                    // 2972\n\t\tlayer.fire('tileerror', {                                                                                         // 2973\n\t\t\ttile: this,                                                                                                      // 2974\n\t\t\turl: this.src                                                                                                    // 2975\n\t\t});                                                                                                               // 2976\n                                                                                                                    // 2977\n\t\tvar newUrl = layer.options.errorTileUrl;                                                                          // 2978\n\t\tif (newUrl) {                                                                                                     // 2979\n\t\t\tthis.src = newUrl;                                                                                               // 2980\n\t\t}                                                                                                                 // 2981\n                                                                                                                    // 2982\n\t\tlayer._tileLoaded();                                                                                              // 2983\n\t}                                                                                                                  // 2984\n});                                                                                                                 // 2985\n                                                                                                                    // 2986\nL.tileLayer = function (url, options) {                                                                             // 2987\n\treturn new L.TileLayer(url, options);                                                                              // 2988\n};                                                                                                                  // 2989\n                                                                                                                    // 2990\n                                                                                                                    // 2991\n/*                                                                                                                  // 2992\n * L.TileLayer.WMS is used for putting WMS tile layers on the map.                                                  // 2993\n */                                                                                                                 // 2994\n                                                                                                                    // 2995\nL.TileLayer.WMS = L.TileLayer.extend({                                                                              // 2996\n                                                                                                                    // 2997\n\tdefaultWmsParams: {                                                                                                // 2998\n\t\tservice: 'WMS',                                                                                                   // 2999\n\t\trequest: 'GetMap',                                                                                                // 3000\n\t\tversion: '1.1.1',                                                                                                 // 3001\n\t\tlayers: '',                                                                                                       // 3002\n\t\tstyles: '',                                                                                                       // 3003\n\t\tformat: 'image/jpeg',                                                                                             // 3004\n\t\ttransparent: false                                                                                                // 3005\n\t},                                                                                                                 // 3006\n                                                                                                                    // 3007\n\tinitialize: function (url, options) { // (String, Object)                                                          // 3008\n                                                                                                                    // 3009\n\t\tthis._url = url;                                                                                                  // 3010\n                                                                                                                    // 3011\n\t\tvar wmsParams = L.extend({}, this.defaultWmsParams),                                                              // 3012\n\t\t    tileSize = options.tileSize || this.options.tileSize;                                                         // 3013\n                                                                                                                    // 3014\n\t\tif (options.detectRetina && L.Browser.retina) {                                                                   // 3015\n\t\t\twmsParams.width = wmsParams.height = tileSize * 2;                                                               // 3016\n\t\t} else {                                                                                                          // 3017\n\t\t\twmsParams.width = wmsParams.height = tileSize;                                                                   // 3018\n\t\t}                                                                                                                 // 3019\n                                                                                                                    // 3020\n\t\tfor (var i in options) {                                                                                          // 3021\n\t\t\t// all keys that are not TileLayer options go to WMS params                                                      // 3022\n\t\t\tif (!this.options.hasOwnProperty(i) && i !== 'crs') {                                                            // 3023\n\t\t\t\twmsParams[i] = options[i];                                                                                      // 3024\n\t\t\t}                                                                                                                // 3025\n\t\t}                                                                                                                 // 3026\n                                                                                                                    // 3027\n\t\tthis.wmsParams = wmsParams;                                                                                       // 3028\n                                                                                                                    // 3029\n\t\tL.setOptions(this, options);                                                                                      // 3030\n\t},                                                                                                                 // 3031\n                                                                                                                    // 3032\n\tonAdd: function (map) {                                                                                            // 3033\n                                                                                                                    // 3034\n\t\tthis._crs = this.options.crs || map.options.crs;                                                                  // 3035\n                                                                                                                    // 3036\n\t\tthis._wmsVersion = parseFloat(this.wmsParams.version);                                                            // 3037\n                                                                                                                    // 3038\n\t\tvar projectionKey = this._wmsVersion >= 1.3 ? 'crs' : 'srs';                                                      // 3039\n\t\tthis.wmsParams[projectionKey] = this._crs.code;                                                                   // 3040\n                                                                                                                    // 3041\n\t\tL.TileLayer.prototype.onAdd.call(this, map);                                                                      // 3042\n\t},                                                                                                                 // 3043\n                                                                                                                    // 3044\n\tgetTileUrl: function (tilePoint) { // (Point, Number) -> String                                                    // 3045\n                                                                                                                    // 3046\n\t\tvar map = this._map,                                                                                              // 3047\n\t\t    tileSize = this.options.tileSize,                                                                             // 3048\n                                                                                                                    // 3049\n\t\t    nwPoint = tilePoint.multiplyBy(tileSize),                                                                     // 3050\n\t\t    sePoint = nwPoint.add([tileSize, tileSize]),                                                                  // 3051\n                                                                                                                    // 3052\n\t\t    nw = this._crs.project(map.unproject(nwPoint, tilePoint.z)),                                                  // 3053\n\t\t    se = this._crs.project(map.unproject(sePoint, tilePoint.z)),                                                  // 3054\n\t\t    bbox = this._wmsVersion >= 1.3 && this._crs === L.CRS.EPSG4326 ?                                              // 3055\n\t\t        [se.y, nw.x, nw.y, se.x].join(',') :                                                                      // 3056\n\t\t        [nw.x, se.y, se.x, nw.y].join(','),                                                                       // 3057\n                                                                                                                    // 3058\n\t\t    url = L.Util.template(this._url, {s: this._getSubdomain(tilePoint)});                                         // 3059\n                                                                                                                    // 3060\n\t\treturn url + L.Util.getParamString(this.wmsParams, url, true) + '&BBOX=' + bbox;                                  // 3061\n\t},                                                                                                                 // 3062\n                                                                                                                    // 3063\n\tsetParams: function (params, noRedraw) {                                                                           // 3064\n                                                                                                                    // 3065\n\t\tL.extend(this.wmsParams, params);                                                                                 // 3066\n                                                                                                                    // 3067\n\t\tif (!noRedraw) {                                                                                                  // 3068\n\t\t\tthis.redraw();                                                                                                   // 3069\n\t\t}                                                                                                                 // 3070\n                                                                                                                    // 3071\n\t\treturn this;                                                                                                      // 3072\n\t}                                                                                                                  // 3073\n});                                                                                                                 // 3074\n                                                                                                                    // 3075\nL.tileLayer.wms = function (url, options) {                                                                         // 3076\n\treturn new L.TileLayer.WMS(url, options);                                                                          // 3077\n};                                                                                                                  // 3078\n                                                                                                                    // 3079\n                                                                                                                    // 3080\n/*                                                                                                                  // 3081\n * L.TileLayer.Canvas is a class that you can use as a base for creating                                            // 3082\n * dynamically drawn Canvas-based tile layers.                                                                      // 3083\n */                                                                                                                 // 3084\n                                                                                                                    // 3085\nL.TileLayer.Canvas = L.TileLayer.extend({                                                                           // 3086\n\toptions: {                                                                                                         // 3087\n\t\tasync: false                                                                                                      // 3088\n\t},                                                                                                                 // 3089\n                                                                                                                    // 3090\n\tinitialize: function (options) {                                                                                   // 3091\n\t\tL.setOptions(this, options);                                                                                      // 3092\n\t},                                                                                                                 // 3093\n                                                                                                                    // 3094\n\tredraw: function () {                                                                                              // 3095\n\t\tif (this._map) {                                                                                                  // 3096\n\t\t\tthis._reset({hard: true});                                                                                       // 3097\n\t\t\tthis._update();                                                                                                  // 3098\n\t\t}                                                                                                                 // 3099\n                                                                                                                    // 3100\n\t\tfor (var i in this._tiles) {                                                                                      // 3101\n\t\t\tthis._redrawTile(this._tiles[i]);                                                                                // 3102\n\t\t}                                                                                                                 // 3103\n\t\treturn this;                                                                                                      // 3104\n\t},                                                                                                                 // 3105\n                                                                                                                    // 3106\n\t_redrawTile: function (tile) {                                                                                     // 3107\n\t\tthis.drawTile(tile, tile._tilePoint, this._map._zoom);                                                            // 3108\n\t},                                                                                                                 // 3109\n                                                                                                                    // 3110\n\t_createTile: function () {                                                                                         // 3111\n\t\tvar tile = L.DomUtil.create('canvas', 'leaflet-tile');                                                            // 3112\n\t\ttile.width = tile.height = this.options.tileSize;                                                                 // 3113\n\t\ttile.onselectstart = tile.onmousemove = L.Util.falseFn;                                                           // 3114\n\t\treturn tile;                                                                                                      // 3115\n\t},                                                                                                                 // 3116\n                                                                                                                    // 3117\n\t_loadTile: function (tile, tilePoint) {                                                                            // 3118\n\t\ttile._layer = this;                                                                                               // 3119\n\t\ttile._tilePoint = tilePoint;                                                                                      // 3120\n                                                                                                                    // 3121\n\t\tthis._redrawTile(tile);                                                                                           // 3122\n                                                                                                                    // 3123\n\t\tif (!this.options.async) {                                                                                        // 3124\n\t\t\tthis.tileDrawn(tile);                                                                                            // 3125\n\t\t}                                                                                                                 // 3126\n\t},                                                                                                                 // 3127\n                                                                                                                    // 3128\n\tdrawTile: function (/*tile, tilePoint*/) {                                                                         // 3129\n\t\t// override with rendering code                                                                                   // 3130\n\t},                                                                                                                 // 3131\n                                                                                                                    // 3132\n\ttileDrawn: function (tile) {                                                                                       // 3133\n\t\tthis._tileOnLoad.call(tile);                                                                                      // 3134\n\t}                                                                                                                  // 3135\n});                                                                                                                 // 3136\n                                                                                                                    // 3137\n                                                                                                                    // 3138\nL.tileLayer.canvas = function (options) {                                                                           // 3139\n\treturn new L.TileLayer.Canvas(options);                                                                            // 3140\n};                                                                                                                  // 3141\n                                                                                                                    // 3142\n                                                                                                                    // 3143\n/*                                                                                                                  // 3144\n * L.ImageOverlay is used to overlay images over the map (to specific geographical bounds).                         // 3145\n */                                                                                                                 // 3146\n                                                                                                                    // 3147\nL.ImageOverlay = L.Class.extend({                                                                                   // 3148\n\tincludes: L.Mixin.Events,                                                                                          // 3149\n                                                                                                                    // 3150\n\toptions: {                                                                                                         // 3151\n\t\topacity: 1                                                                                                        // 3152\n\t},                                                                                                                 // 3153\n                                                                                                                    // 3154\n\tinitialize: function (url, bounds, options) { // (String, LatLngBounds, Object)                                    // 3155\n\t\tthis._url = url;                                                                                                  // 3156\n\t\tthis._bounds = L.latLngBounds(bounds);                                                                            // 3157\n                                                                                                                    // 3158\n\t\tL.setOptions(this, options);                                                                                      // 3159\n\t},                                                                                                                 // 3160\n                                                                                                                    // 3161\n\tonAdd: function (map) {                                                                                            // 3162\n\t\tthis._map = map;                                                                                                  // 3163\n                                                                                                                    // 3164\n\t\tif (!this._image) {                                                                                               // 3165\n\t\t\tthis._initImage();                                                                                               // 3166\n\t\t}                                                                                                                 // 3167\n                                                                                                                    // 3168\n\t\tmap._panes.overlayPane.appendChild(this._image);                                                                  // 3169\n                                                                                                                    // 3170\n\t\tmap.on('viewreset', this._reset, this);                                                                           // 3171\n                                                                                                                    // 3172\n\t\tif (map.options.zoomAnimation && L.Browser.any3d) {                                                               // 3173\n\t\t\tmap.on('zoomanim', this._animateZoom, this);                                                                     // 3174\n\t\t}                                                                                                                 // 3175\n                                                                                                                    // 3176\n\t\tthis._reset();                                                                                                    // 3177\n\t},                                                                                                                 // 3178\n                                                                                                                    // 3179\n\tonRemove: function (map) {                                                                                         // 3180\n\t\tmap.getPanes().overlayPane.removeChild(this._image);                                                              // 3181\n                                                                                                                    // 3182\n\t\tmap.off('viewreset', this._reset, this);                                                                          // 3183\n                                                                                                                    // 3184\n\t\tif (map.options.zoomAnimation) {                                                                                  // 3185\n\t\t\tmap.off('zoomanim', this._animateZoom, this);                                                                    // 3186\n\t\t}                                                                                                                 // 3187\n\t},                                                                                                                 // 3188\n                                                                                                                    // 3189\n\taddTo: function (map) {                                                                                            // 3190\n\t\tmap.addLayer(this);                                                                                               // 3191\n\t\treturn this;                                                                                                      // 3192\n\t},                                                                                                                 // 3193\n                                                                                                                    // 3194\n\tsetOpacity: function (opacity) {                                                                                   // 3195\n\t\tthis.options.opacity = opacity;                                                                                   // 3196\n\t\tthis._updateOpacity();                                                                                            // 3197\n\t\treturn this;                                                                                                      // 3198\n\t},                                                                                                                 // 3199\n                                                                                                                    // 3200\n\t// TODO remove bringToFront/bringToBack duplication from TileLayer/Path                                            // 3201\n\tbringToFront: function () {                                                                                        // 3202\n\t\tif (this._image) {                                                                                                // 3203\n\t\t\tthis._map._panes.overlayPane.appendChild(this._image);                                                           // 3204\n\t\t}                                                                                                                 // 3205\n\t\treturn this;                                                                                                      // 3206\n\t},                                                                                                                 // 3207\n                                                                                                                    // 3208\n\tbringToBack: function () {                                                                                         // 3209\n\t\tvar pane = this._map._panes.overlayPane;                                                                          // 3210\n\t\tif (this._image) {                                                                                                // 3211\n\t\t\tpane.insertBefore(this._image, pane.firstChild);                                                                 // 3212\n\t\t}                                                                                                                 // 3213\n\t\treturn this;                                                                                                      // 3214\n\t},                                                                                                                 // 3215\n                                                                                                                    // 3216\n\tsetUrl: function (url) {                                                                                           // 3217\n\t\tthis._url = url;                                                                                                  // 3218\n\t\tthis._image.src = this._url;                                                                                      // 3219\n\t},                                                                                                                 // 3220\n                                                                                                                    // 3221\n\tgetAttribution: function () {                                                                                      // 3222\n\t\treturn this.options.attribution;                                                                                  // 3223\n\t},                                                                                                                 // 3224\n                                                                                                                    // 3225\n\t_initImage: function () {                                                                                          // 3226\n\t\tthis._image = L.DomUtil.create('img', 'leaflet-image-layer');                                                     // 3227\n                                                                                                                    // 3228\n\t\tif (this._map.options.zoomAnimation && L.Browser.any3d) {                                                         // 3229\n\t\t\tL.DomUtil.addClass(this._image, 'leaflet-zoom-animated');                                                        // 3230\n\t\t} else {                                                                                                          // 3231\n\t\t\tL.DomUtil.addClass(this._image, 'leaflet-zoom-hide');                                                            // 3232\n\t\t}                                                                                                                 // 3233\n                                                                                                                    // 3234\n\t\tthis._updateOpacity();                                                                                            // 3235\n                                                                                                                    // 3236\n\t\t//TODO createImage util method to remove duplication                                                              // 3237\n\t\tL.extend(this._image, {                                                                                           // 3238\n\t\t\tgalleryimg: 'no',                                                                                                // 3239\n\t\t\tonselectstart: L.Util.falseFn,                                                                                   // 3240\n\t\t\tonmousemove: L.Util.falseFn,                                                                                     // 3241\n\t\t\tonload: L.bind(this._onImageLoad, this),                                                                         // 3242\n\t\t\tsrc: this._url                                                                                                   // 3243\n\t\t});                                                                                                               // 3244\n\t},                                                                                                                 // 3245\n                                                                                                                    // 3246\n\t_animateZoom: function (e) {                                                                                       // 3247\n\t\tvar map = this._map,                                                                                              // 3248\n\t\t    image = this._image,                                                                                          // 3249\n\t\t    scale = map.getZoomScale(e.zoom),                                                                             // 3250\n\t\t    nw = this._bounds.getNorthWest(),                                                                             // 3251\n\t\t    se = this._bounds.getSouthEast(),                                                                             // 3252\n                                                                                                                    // 3253\n\t\t    topLeft = map._latLngToNewLayerPoint(nw, e.zoom, e.center),                                                   // 3254\n\t\t    size = map._latLngToNewLayerPoint(se, e.zoom, e.center)._subtract(topLeft),                                   // 3255\n\t\t    origin = topLeft._add(size._multiplyBy((1 / 2) * (1 - 1 / scale)));                                           // 3256\n                                                                                                                    // 3257\n\t\timage.style[L.DomUtil.TRANSFORM] =                                                                                // 3258\n\t\t        L.DomUtil.getTranslateString(origin) + ' scale(' + scale + ') ';                                          // 3259\n\t},                                                                                                                 // 3260\n                                                                                                                    // 3261\n\t_reset: function () {                                                                                              // 3262\n\t\tvar image   = this._image,                                                                                        // 3263\n\t\t    topLeft = this._map.latLngToLayerPoint(this._bounds.getNorthWest()),                                          // 3264\n\t\t    size = this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(topLeft);                          // 3265\n                                                                                                                    // 3266\n\t\tL.DomUtil.setPosition(image, topLeft);                                                                            // 3267\n                                                                                                                    // 3268\n\t\timage.style.width  = size.x + 'px';                                                                               // 3269\n\t\timage.style.height = size.y + 'px';                                                                               // 3270\n\t},                                                                                                                 // 3271\n                                                                                                                    // 3272\n\t_onImageLoad: function () {                                                                                        // 3273\n\t\tthis.fire('load');                                                                                                // 3274\n\t},                                                                                                                 // 3275\n                                                                                                                    // 3276\n\t_updateOpacity: function () {                                                                                      // 3277\n\t\tL.DomUtil.setOpacity(this._image, this.options.opacity);                                                          // 3278\n\t}                                                                                                                  // 3279\n});                                                                                                                 // 3280\n                                                                                                                    // 3281\nL.imageOverlay = function (url, bounds, options) {                                                                  // 3282\n\treturn new L.ImageOverlay(url, bounds, options);                                                                   // 3283\n};                                                                                                                  // 3284\n                                                                                                                    // 3285\n                                                                                                                    // 3286\n/*                                                                                                                  // 3287\n * L.Icon is an image-based icon class that you can use with L.Marker for custom markers.                           // 3288\n */                                                                                                                 // 3289\n                                                                                                                    // 3290\nL.Icon = L.Class.extend({                                                                                           // 3291\n\toptions: {                                                                                                         // 3292\n\t\t/*                                                                                                                // 3293\n\t\ticonUrl: (String) (required)                                                                                      // 3294\n\t\ticonRetinaUrl: (String) (optional, used for retina devices if detected)                                           // 3295\n\t\ticonSize: (Point) (can be set through CSS)                                                                        // 3296\n\t\ticonAnchor: (Point) (centered by default, can be set in CSS with negative margins)                                // 3297\n\t\tpopupAnchor: (Point) (if not specified, popup opens in the anchor point)                                          // 3298\n\t\tshadowUrl: (String) (no shadow by default)                                                                        // 3299\n\t\tshadowRetinaUrl: (String) (optional, used for retina devices if detected)                                         // 3300\n\t\tshadowSize: (Point)                                                                                               // 3301\n\t\tshadowAnchor: (Point)                                                                                             // 3302\n\t\t*/                                                                                                                // 3303\n\t\tclassName: ''                                                                                                     // 3304\n\t},                                                                                                                 // 3305\n                                                                                                                    // 3306\n\tinitialize: function (options) {                                                                                   // 3307\n\t\tL.setOptions(this, options);                                                                                      // 3308\n\t},                                                                                                                 // 3309\n                                                                                                                    // 3310\n\tcreateIcon: function (oldIcon) {                                                                                   // 3311\n\t\treturn this._createIcon('icon', oldIcon);                                                                         // 3312\n\t},                                                                                                                 // 3313\n                                                                                                                    // 3314\n\tcreateShadow: function (oldIcon) {                                                                                 // 3315\n\t\treturn this._createIcon('shadow', oldIcon);                                                                       // 3316\n\t},                                                                                                                 // 3317\n                                                                                                                    // 3318\n\t_createIcon: function (name, oldIcon) {                                                                            // 3319\n\t\tvar src = this._getIconUrl(name);                                                                                 // 3320\n                                                                                                                    // 3321\n\t\tif (!src) {                                                                                                       // 3322\n\t\t\tif (name === 'icon') {                                                                                           // 3323\n\t\t\t\tthrow new Error('iconUrl not set in Icon options (see the docs).');                                             // 3324\n\t\t\t}                                                                                                                // 3325\n\t\t\treturn null;                                                                                                     // 3326\n\t\t}                                                                                                                 // 3327\n                                                                                                                    // 3328\n\t\tvar img;                                                                                                          // 3329\n\t\tif (!oldIcon || oldIcon.tagName !== 'IMG') {                                                                      // 3330\n\t\t\timg = this._createImg(src);                                                                                      // 3331\n\t\t} else {                                                                                                          // 3332\n\t\t\timg = this._createImg(src, oldIcon);                                                                             // 3333\n\t\t}                                                                                                                 // 3334\n\t\tthis._setIconStyles(img, name);                                                                                   // 3335\n                                                                                                                    // 3336\n\t\treturn img;                                                                                                       // 3337\n\t},                                                                                                                 // 3338\n                                                                                                                    // 3339\n\t_setIconStyles: function (img, name) {                                                                             // 3340\n\t\tvar options = this.options,                                                                                       // 3341\n\t\t    size = L.point(options[name + 'Size']),                                                                       // 3342\n\t\t    anchor;                                                                                                       // 3343\n                                                                                                                    // 3344\n\t\tif (name === 'shadow') {                                                                                          // 3345\n\t\t\tanchor = L.point(options.shadowAnchor || options.iconAnchor);                                                    // 3346\n\t\t} else {                                                                                                          // 3347\n\t\t\tanchor = L.point(options.iconAnchor);                                                                            // 3348\n\t\t}                                                                                                                 // 3349\n                                                                                                                    // 3350\n\t\tif (!anchor && size) {                                                                                            // 3351\n\t\t\tanchor = size.divideBy(2, true);                                                                                 // 3352\n\t\t}                                                                                                                 // 3353\n                                                                                                                    // 3354\n\t\timg.className = 'leaflet-marker-' + name + ' ' + options.className;                                               // 3355\n                                                                                                                    // 3356\n\t\tif (anchor) {                                                                                                     // 3357\n\t\t\timg.style.marginLeft = (-anchor.x) + 'px';                                                                       // 3358\n\t\t\timg.style.marginTop  = (-anchor.y) + 'px';                                                                       // 3359\n\t\t}                                                                                                                 // 3360\n                                                                                                                    // 3361\n\t\tif (size) {                                                                                                       // 3362\n\t\t\timg.style.width  = size.x + 'px';                                                                                // 3363\n\t\t\timg.style.height = size.y + 'px';                                                                                // 3364\n\t\t}                                                                                                                 // 3365\n\t},                                                                                                                 // 3366\n                                                                                                                    // 3367\n\t_createImg: function (src, el) {                                                                                   // 3368\n\t\tel = el || document.createElement('img');                                                                         // 3369\n\t\tel.src = src;                                                                                                     // 3370\n\t\treturn el;                                                                                                        // 3371\n\t},                                                                                                                 // 3372\n                                                                                                                    // 3373\n\t_getIconUrl: function (name) {                                                                                     // 3374\n\t\tif (L.Browser.retina && this.options[name + 'RetinaUrl']) {                                                       // 3375\n\t\t\treturn this.options[name + 'RetinaUrl'];                                                                         // 3376\n\t\t}                                                                                                                 // 3377\n\t\treturn this.options[name + 'Url'];                                                                                // 3378\n\t}                                                                                                                  // 3379\n});                                                                                                                 // 3380\n                                                                                                                    // 3381\nL.icon = function (options) {                                                                                       // 3382\n\treturn new L.Icon(options);                                                                                        // 3383\n};                                                                                                                  // 3384\n                                                                                                                    // 3385\n                                                                                                                    // 3386\n/*                                                                                                                  // 3387\n * L.Icon.Default is the blue marker icon used by default in Leaflet.                                               // 3388\n */                                                                                                                 // 3389\n                                                                                                                    // 3390\nL.Icon.Default = L.Icon.extend({                                                                                    // 3391\n                                                                                                                    // 3392\n\toptions: {                                                                                                         // 3393\n\t\ticonSize: [25, 41],                                                                                               // 3394\n\t\ticonAnchor: [12, 41],                                                                                             // 3395\n\t\tpopupAnchor: [1, -34],                                                                                            // 3396\n                                                                                                                    // 3397\n\t\tshadowSize: [41, 41]                                                                                              // 3398\n\t},                                                                                                                 // 3399\n                                                                                                                    // 3400\n\t_getIconUrl: function (name) {                                                                                     // 3401\n\t\tvar key = name + 'Url';                                                                                           // 3402\n                                                                                                                    // 3403\n\t\tif (this.options[key]) {                                                                                          // 3404\n\t\t\treturn this.options[key];                                                                                        // 3405\n\t\t}                                                                                                                 // 3406\n                                                                                                                    // 3407\n\t\tif (L.Browser.retina && name === 'icon') {                                                                        // 3408\n\t\t\tname += '-2x';                                                                                                   // 3409\n\t\t}                                                                                                                 // 3410\n                                                                                                                    // 3411\n\t\tvar path = L.Icon.Default.imagePath;                                                                              // 3412\n                                                                                                                    // 3413\n\t\tif (!path) {                                                                                                      // 3414\n\t\t\tthrow new Error('Couldn\\'t autodetect L.Icon.Default.imagePath, set it manually.');                              // 3415\n\t\t}                                                                                                                 // 3416\n                                                                                                                    // 3417\n\t\treturn path + '/marker-' + name + '.png';                                                                         // 3418\n\t}                                                                                                                  // 3419\n});                                                                                                                 // 3420\n                                                                                                                    // 3421\nL.Icon.Default.imagePath = (function () {                                                                           // 3422\n\tvar scripts = document.getElementsByTagName('script'),                                                             // 3423\n\t    leafletRe = /[\\/^]leaflet[\\-\\._]?([\\w\\-\\._]*)\\.js\\??/;                                                         // 3424\n                                                                                                                    // 3425\n\tvar i, len, src, matches, path;                                                                                    // 3426\n                                                                                                                    // 3427\n\tfor (i = 0, len = scripts.length; i < len; i++) {                                                                  // 3428\n\t\tsrc = scripts[i].src;                                                                                             // 3429\n\t\tmatches = src.match(leafletRe);                                                                                   // 3430\n                                                                                                                    // 3431\n\t\tif (matches) {                                                                                                    // 3432\n\t\t\tpath = src.split(leafletRe)[0];                                                                                  // 3433\n\t\t\treturn (path ? path + '/' : '') + 'images';                                                                      // 3434\n\t\t}                                                                                                                 // 3435\n\t}                                                                                                                  // 3436\n}());                                                                                                               // 3437\n                                                                                                                    // 3438\n                                                                                                                    // 3439\n/*                                                                                                                  // 3440\n * L.Marker is used to display clickable/draggable icons on the map.                                                // 3441\n */                                                                                                                 // 3442\n                                                                                                                    // 3443\nL.Marker = L.Class.extend({                                                                                         // 3444\n                                                                                                                    // 3445\n\tincludes: L.Mixin.Events,                                                                                          // 3446\n                                                                                                                    // 3447\n\toptions: {                                                                                                         // 3448\n\t\ticon: new L.Icon.Default(),                                                                                       // 3449\n\t\ttitle: '',                                                                                                        // 3450\n\t\talt: '',                                                                                                          // 3451\n\t\tclickable: true,                                                                                                  // 3452\n\t\tdraggable: false,                                                                                                 // 3453\n\t\tkeyboard: true,                                                                                                   // 3454\n\t\tzIndexOffset: 0,                                                                                                  // 3455\n\t\topacity: 1,                                                                                                       // 3456\n\t\triseOnHover: false,                                                                                               // 3457\n\t\triseOffset: 250                                                                                                   // 3458\n\t},                                                                                                                 // 3459\n                                                                                                                    // 3460\n\tinitialize: function (latlng, options) {                                                                           // 3461\n\t\tL.setOptions(this, options);                                                                                      // 3462\n\t\tthis._latlng = L.latLng(latlng);                                                                                  // 3463\n\t},                                                                                                                 // 3464\n                                                                                                                    // 3465\n\tonAdd: function (map) {                                                                                            // 3466\n\t\tthis._map = map;                                                                                                  // 3467\n                                                                                                                    // 3468\n\t\tmap.on('viewreset', this.update, this);                                                                           // 3469\n                                                                                                                    // 3470\n\t\tthis._initIcon();                                                                                                 // 3471\n\t\tthis.update();                                                                                                    // 3472\n\t\tthis.fire('add');                                                                                                 // 3473\n                                                                                                                    // 3474\n\t\tif (map.options.zoomAnimation && map.options.markerZoomAnimation) {                                               // 3475\n\t\t\tmap.on('zoomanim', this._animateZoom, this);                                                                     // 3476\n\t\t}                                                                                                                 // 3477\n\t},                                                                                                                 // 3478\n                                                                                                                    // 3479\n\taddTo: function (map) {                                                                                            // 3480\n\t\tmap.addLayer(this);                                                                                               // 3481\n\t\treturn this;                                                                                                      // 3482\n\t},                                                                                                                 // 3483\n                                                                                                                    // 3484\n\tonRemove: function (map) {                                                                                         // 3485\n\t\tif (this.dragging) {                                                                                              // 3486\n\t\t\tthis.dragging.disable();                                                                                         // 3487\n\t\t}                                                                                                                 // 3488\n                                                                                                                    // 3489\n\t\tthis._removeIcon();                                                                                               // 3490\n\t\tthis._removeShadow();                                                                                             // 3491\n                                                                                                                    // 3492\n\t\tthis.fire('remove');                                                                                              // 3493\n                                                                                                                    // 3494\n\t\tmap.off({                                                                                                         // 3495\n\t\t\t'viewreset': this.update,                                                                                        // 3496\n\t\t\t'zoomanim': this._animateZoom                                                                                    // 3497\n\t\t}, this);                                                                                                         // 3498\n                                                                                                                    // 3499\n\t\tthis._map = null;                                                                                                 // 3500\n\t},                                                                                                                 // 3501\n                                                                                                                    // 3502\n\tgetLatLng: function () {                                                                                           // 3503\n\t\treturn this._latlng;                                                                                              // 3504\n\t},                                                                                                                 // 3505\n                                                                                                                    // 3506\n\tsetLatLng: function (latlng) {                                                                                     // 3507\n\t\tthis._latlng = L.latLng(latlng);                                                                                  // 3508\n                                                                                                                    // 3509\n\t\tthis.update();                                                                                                    // 3510\n                                                                                                                    // 3511\n\t\treturn this.fire('move', { latlng: this._latlng });                                                               // 3512\n\t},                                                                                                                 // 3513\n                                                                                                                    // 3514\n\tsetZIndexOffset: function (offset) {                                                                               // 3515\n\t\tthis.options.zIndexOffset = offset;                                                                               // 3516\n\t\tthis.update();                                                                                                    // 3517\n                                                                                                                    // 3518\n\t\treturn this;                                                                                                      // 3519\n\t},                                                                                                                 // 3520\n                                                                                                                    // 3521\n\tsetIcon: function (icon) {                                                                                         // 3522\n                                                                                                                    // 3523\n\t\tthis.options.icon = icon;                                                                                         // 3524\n                                                                                                                    // 3525\n\t\tif (this._map) {                                                                                                  // 3526\n\t\t\tthis._initIcon();                                                                                                // 3527\n\t\t\tthis.update();                                                                                                   // 3528\n\t\t}                                                                                                                 // 3529\n                                                                                                                    // 3530\n\t\tif (this._popup) {                                                                                                // 3531\n\t\t\tthis.bindPopup(this._popup);                                                                                     // 3532\n\t\t}                                                                                                                 // 3533\n                                                                                                                    // 3534\n\t\treturn this;                                                                                                      // 3535\n\t},                                                                                                                 // 3536\n                                                                                                                    // 3537\n\tupdate: function () {                                                                                              // 3538\n\t\tif (this._icon) {                                                                                                 // 3539\n\t\t\tthis._setPos(this._map.latLngToLayerPoint(this._latlng).round());                                                // 3540\n\t\t}                                                                                                                 // 3541\n\t\treturn this;                                                                                                      // 3542\n\t},                                                                                                                 // 3543\n                                                                                                                    // 3544\n\t_initIcon: function () {                                                                                           // 3545\n\t\tvar options = this.options,                                                                                       // 3546\n\t\t    map = this._map,                                                                                              // 3547\n\t\t    animation = (map.options.zoomAnimation && map.options.markerZoomAnimation),                                   // 3548\n\t\t    classToAdd = animation ? 'leaflet-zoom-animated' : 'leaflet-zoom-hide';                                       // 3549\n                                                                                                                    // 3550\n\t\tvar icon = options.icon.createIcon(this._icon),                                                                   // 3551\n\t\t\taddIcon = false;                                                                                                 // 3552\n                                                                                                                    // 3553\n\t\t// if we're not reusing the icon, remove the old one and init new one                                             // 3554\n\t\tif (icon !== this._icon) {                                                                                        // 3555\n\t\t\tif (this._icon) {                                                                                                // 3556\n\t\t\t\tthis._removeIcon();                                                                                             // 3557\n\t\t\t}                                                                                                                // 3558\n\t\t\taddIcon = true;                                                                                                  // 3559\n                                                                                                                    // 3560\n\t\t\tif (options.title) {                                                                                             // 3561\n\t\t\t\ticon.title = options.title;                                                                                     // 3562\n\t\t\t}                                                                                                                // 3563\n                                                                                                                    // 3564\n\t\t\tif (options.alt) {                                                                                               // 3565\n\t\t\t\ticon.alt = options.alt;                                                                                         // 3566\n\t\t\t}                                                                                                                // 3567\n\t\t}                                                                                                                 // 3568\n                                                                                                                    // 3569\n\t\tL.DomUtil.addClass(icon, classToAdd);                                                                             // 3570\n                                                                                                                    // 3571\n\t\tif (options.keyboard) {                                                                                           // 3572\n\t\t\ticon.tabIndex = '0';                                                                                             // 3573\n\t\t}                                                                                                                 // 3574\n                                                                                                                    // 3575\n\t\tthis._icon = icon;                                                                                                // 3576\n                                                                                                                    // 3577\n\t\tthis._initInteraction();                                                                                          // 3578\n                                                                                                                    // 3579\n\t\tif (options.riseOnHover) {                                                                                        // 3580\n\t\t\tL.DomEvent                                                                                                       // 3581\n\t\t\t\t.on(icon, 'mouseover', this._bringToFront, this)                                                                // 3582\n\t\t\t\t.on(icon, 'mouseout', this._resetZIndex, this);                                                                 // 3583\n\t\t}                                                                                                                 // 3584\n                                                                                                                    // 3585\n\t\tvar newShadow = options.icon.createShadow(this._shadow),                                                          // 3586\n\t\t\taddShadow = false;                                                                                               // 3587\n                                                                                                                    // 3588\n\t\tif (newShadow !== this._shadow) {                                                                                 // 3589\n\t\t\tthis._removeShadow();                                                                                            // 3590\n\t\t\taddShadow = true;                                                                                                // 3591\n\t\t}                                                                                                                 // 3592\n                                                                                                                    // 3593\n\t\tif (newShadow) {                                                                                                  // 3594\n\t\t\tL.DomUtil.addClass(newShadow, classToAdd);                                                                       // 3595\n\t\t}                                                                                                                 // 3596\n\t\tthis._shadow = newShadow;                                                                                         // 3597\n                                                                                                                    // 3598\n                                                                                                                    // 3599\n\t\tif (options.opacity < 1) {                                                                                        // 3600\n\t\t\tthis._updateOpacity();                                                                                           // 3601\n\t\t}                                                                                                                 // 3602\n                                                                                                                    // 3603\n                                                                                                                    // 3604\n\t\tvar panes = this._map._panes;                                                                                     // 3605\n                                                                                                                    // 3606\n\t\tif (addIcon) {                                                                                                    // 3607\n\t\t\tpanes.markerPane.appendChild(this._icon);                                                                        // 3608\n\t\t}                                                                                                                 // 3609\n                                                                                                                    // 3610\n\t\tif (newShadow && addShadow) {                                                                                     // 3611\n\t\t\tpanes.shadowPane.appendChild(this._shadow);                                                                      // 3612\n\t\t}                                                                                                                 // 3613\n\t},                                                                                                                 // 3614\n                                                                                                                    // 3615\n\t_removeIcon: function () {                                                                                         // 3616\n\t\tif (this.options.riseOnHover) {                                                                                   // 3617\n\t\t\tL.DomEvent                                                                                                       // 3618\n\t\t\t    .off(this._icon, 'mouseover', this._bringToFront)                                                            // 3619\n\t\t\t    .off(this._icon, 'mouseout', this._resetZIndex);                                                             // 3620\n\t\t}                                                                                                                 // 3621\n                                                                                                                    // 3622\n\t\tthis._map._panes.markerPane.removeChild(this._icon);                                                              // 3623\n                                                                                                                    // 3624\n\t\tthis._icon = null;                                                                                                // 3625\n\t},                                                                                                                 // 3626\n                                                                                                                    // 3627\n\t_removeShadow: function () {                                                                                       // 3628\n\t\tif (this._shadow) {                                                                                               // 3629\n\t\t\tthis._map._panes.shadowPane.removeChild(this._shadow);                                                           // 3630\n\t\t}                                                                                                                 // 3631\n\t\tthis._shadow = null;                                                                                              // 3632\n\t},                                                                                                                 // 3633\n                                                                                                                    // 3634\n\t_setPos: function (pos) {                                                                                          // 3635\n\t\tL.DomUtil.setPosition(this._icon, pos);                                                                           // 3636\n                                                                                                                    // 3637\n\t\tif (this._shadow) {                                                                                               // 3638\n\t\t\tL.DomUtil.setPosition(this._shadow, pos);                                                                        // 3639\n\t\t}                                                                                                                 // 3640\n                                                                                                                    // 3641\n\t\tthis._zIndex = pos.y + this.options.zIndexOffset;                                                                 // 3642\n                                                                                                                    // 3643\n\t\tthis._resetZIndex();                                                                                              // 3644\n\t},                                                                                                                 // 3645\n                                                                                                                    // 3646\n\t_updateZIndex: function (offset) {                                                                                 // 3647\n\t\tthis._icon.style.zIndex = this._zIndex + offset;                                                                  // 3648\n\t},                                                                                                                 // 3649\n                                                                                                                    // 3650\n\t_animateZoom: function (opt) {                                                                                     // 3651\n\t\tvar pos = this._map._latLngToNewLayerPoint(this._latlng, opt.zoom, opt.center).round();                           // 3652\n                                                                                                                    // 3653\n\t\tthis._setPos(pos);                                                                                                // 3654\n\t},                                                                                                                 // 3655\n                                                                                                                    // 3656\n\t_initInteraction: function () {                                                                                    // 3657\n                                                                                                                    // 3658\n\t\tif (!this.options.clickable) { return; }                                                                          // 3659\n                                                                                                                    // 3660\n\t\t// TODO refactor into something shared with Map/Path/etc. to DRY it up                                            // 3661\n                                                                                                                    // 3662\n\t\tvar icon = this._icon,                                                                                            // 3663\n\t\t    events = ['dblclick', 'mousedown', 'mouseover', 'mouseout', 'contextmenu'];                                   // 3664\n                                                                                                                    // 3665\n\t\tL.DomUtil.addClass(icon, 'leaflet-clickable');                                                                    // 3666\n\t\tL.DomEvent.on(icon, 'click', this._onMouseClick, this);                                                           // 3667\n\t\tL.DomEvent.on(icon, 'keypress', this._onKeyPress, this);                                                          // 3668\n                                                                                                                    // 3669\n\t\tfor (var i = 0; i < events.length; i++) {                                                                         // 3670\n\t\t\tL.DomEvent.on(icon, events[i], this._fireMouseEvent, this);                                                      // 3671\n\t\t}                                                                                                                 // 3672\n                                                                                                                    // 3673\n\t\tif (L.Handler.MarkerDrag) {                                                                                       // 3674\n\t\t\tthis.dragging = new L.Handler.MarkerDrag(this);                                                                  // 3675\n                                                                                                                    // 3676\n\t\t\tif (this.options.draggable) {                                                                                    // 3677\n\t\t\t\tthis.dragging.enable();                                                                                         // 3678\n\t\t\t}                                                                                                                // 3679\n\t\t}                                                                                                                 // 3680\n\t},                                                                                                                 // 3681\n                                                                                                                    // 3682\n\t_onMouseClick: function (e) {                                                                                      // 3683\n\t\tvar wasDragged = this.dragging && this.dragging.moved();                                                          // 3684\n                                                                                                                    // 3685\n\t\tif (this.hasEventListeners(e.type) || wasDragged) {                                                               // 3686\n\t\t\tL.DomEvent.stopPropagation(e);                                                                                   // 3687\n\t\t}                                                                                                                 // 3688\n                                                                                                                    // 3689\n\t\tif (wasDragged) { return; }                                                                                       // 3690\n                                                                                                                    // 3691\n\t\tif ((!this.dragging || !this.dragging._enabled) && this._map.dragging && this._map.dragging.moved()) { return; }  // 3692\n                                                                                                                    // 3693\n\t\tthis.fire(e.type, {                                                                                               // 3694\n\t\t\toriginalEvent: e,                                                                                                // 3695\n\t\t\tlatlng: this._latlng                                                                                             // 3696\n\t\t});                                                                                                               // 3697\n\t},                                                                                                                 // 3698\n                                                                                                                    // 3699\n\t_onKeyPress: function (e) {                                                                                        // 3700\n\t\tif (e.keyCode === 13) {                                                                                           // 3701\n\t\t\tthis.fire('click', {                                                                                             // 3702\n\t\t\t\toriginalEvent: e,                                                                                               // 3703\n\t\t\t\tlatlng: this._latlng                                                                                            // 3704\n\t\t\t});                                                                                                              // 3705\n\t\t}                                                                                                                 // 3706\n\t},                                                                                                                 // 3707\n                                                                                                                    // 3708\n\t_fireMouseEvent: function (e) {                                                                                    // 3709\n                                                                                                                    // 3710\n\t\tthis.fire(e.type, {                                                                                               // 3711\n\t\t\toriginalEvent: e,                                                                                                // 3712\n\t\t\tlatlng: this._latlng                                                                                             // 3713\n\t\t});                                                                                                               // 3714\n                                                                                                                    // 3715\n\t\t// TODO proper custom event propagation                                                                           // 3716\n\t\t// this line will always be called if marker is in a FeatureGroup                                                 // 3717\n\t\tif (e.type === 'contextmenu' && this.hasEventListeners(e.type)) {                                                 // 3718\n\t\t\tL.DomEvent.preventDefault(e);                                                                                    // 3719\n\t\t}                                                                                                                 // 3720\n\t\tif (e.type !== 'mousedown') {                                                                                     // 3721\n\t\t\tL.DomEvent.stopPropagation(e);                                                                                   // 3722\n\t\t} else {                                                                                                          // 3723\n\t\t\tL.DomEvent.preventDefault(e);                                                                                    // 3724\n\t\t}                                                                                                                 // 3725\n\t},                                                                                                                 // 3726\n                                                                                                                    // 3727\n\tsetOpacity: function (opacity) {                                                                                   // 3728\n\t\tthis.options.opacity = opacity;                                                                                   // 3729\n\t\tif (this._map) {                                                                                                  // 3730\n\t\t\tthis._updateOpacity();                                                                                           // 3731\n\t\t}                                                                                                                 // 3732\n                                                                                                                    // 3733\n\t\treturn this;                                                                                                      // 3734\n\t},                                                                                                                 // 3735\n                                                                                                                    // 3736\n\t_updateOpacity: function () {                                                                                      // 3737\n\t\tL.DomUtil.setOpacity(this._icon, this.options.opacity);                                                           // 3738\n\t\tif (this._shadow) {                                                                                               // 3739\n\t\t\tL.DomUtil.setOpacity(this._shadow, this.options.opacity);                                                        // 3740\n\t\t}                                                                                                                 // 3741\n\t},                                                                                                                 // 3742\n                                                                                                                    // 3743\n\t_bringToFront: function () {                                                                                       // 3744\n\t\tthis._updateZIndex(this.options.riseOffset);                                                                      // 3745\n\t},                                                                                                                 // 3746\n                                                                                                                    // 3747\n\t_resetZIndex: function () {                                                                                        // 3748\n\t\tthis._updateZIndex(0);                                                                                            // 3749\n\t}                                                                                                                  // 3750\n});                                                                                                                 // 3751\n                                                                                                                    // 3752\nL.marker = function (latlng, options) {                                                                             // 3753\n\treturn new L.Marker(latlng, options);                                                                              // 3754\n};                                                                                                                  // 3755\n                                                                                                                    // 3756\n                                                                                                                    // 3757\n/*                                                                                                                  // 3758\n * L.DivIcon is a lightweight HTML-based icon class (as opposed to the image-based L.Icon)                          // 3759\n * to use with L.Marker.                                                                                            // 3760\n */                                                                                                                 // 3761\n                                                                                                                    // 3762\nL.DivIcon = L.Icon.extend({                                                                                         // 3763\n\toptions: {                                                                                                         // 3764\n\t\ticonSize: [12, 12], // also can be set through CSS                                                                // 3765\n\t\t/*                                                                                                                // 3766\n\t\ticonAnchor: (Point)                                                                                               // 3767\n\t\tpopupAnchor: (Point)                                                                                              // 3768\n\t\thtml: (String)                                                                                                    // 3769\n\t\tbgPos: (Point)                                                                                                    // 3770\n\t\t*/                                                                                                                // 3771\n\t\tclassName: 'leaflet-div-icon',                                                                                    // 3772\n\t\thtml: false                                                                                                       // 3773\n\t},                                                                                                                 // 3774\n                                                                                                                    // 3775\n\tcreateIcon: function (oldIcon) {                                                                                   // 3776\n\t\tvar div = (oldIcon && oldIcon.tagName === 'DIV') ? oldIcon : document.createElement('div'),                       // 3777\n\t\t    options = this.options;                                                                                       // 3778\n                                                                                                                    // 3779\n\t\tif (options.html !== false) {                                                                                     // 3780\n\t\t\tdiv.innerHTML = options.html;                                                                                    // 3781\n\t\t} else {                                                                                                          // 3782\n\t\t\tdiv.innerHTML = '';                                                                                              // 3783\n\t\t}                                                                                                                 // 3784\n                                                                                                                    // 3785\n\t\tif (options.bgPos) {                                                                                              // 3786\n\t\t\tdiv.style.backgroundPosition =                                                                                   // 3787\n\t\t\t        (-options.bgPos.x) + 'px ' + (-options.bgPos.y) + 'px';                                                  // 3788\n\t\t}                                                                                                                 // 3789\n                                                                                                                    // 3790\n\t\tthis._setIconStyles(div, 'icon');                                                                                 // 3791\n\t\treturn div;                                                                                                       // 3792\n\t},                                                                                                                 // 3793\n                                                                                                                    // 3794\n\tcreateShadow: function () {                                                                                        // 3795\n\t\treturn null;                                                                                                      // 3796\n\t}                                                                                                                  // 3797\n});                                                                                                                 // 3798\n                                                                                                                    // 3799\nL.divIcon = function (options) {                                                                                    // 3800\n\treturn new L.DivIcon(options);                                                                                     // 3801\n};                                                                                                                  // 3802\n                                                                                                                    // 3803\n                                                                                                                    // 3804\n/*                                                                                                                  // 3805\n * L.Popup is used for displaying popups on the map.                                                                // 3806\n */                                                                                                                 // 3807\n                                                                                                                    // 3808\nL.Map.mergeOptions({                                                                                                // 3809\n\tclosePopupOnClick: true                                                                                            // 3810\n});                                                                                                                 // 3811\n                                                                                                                    // 3812\nL.Popup = L.Class.extend({                                                                                          // 3813\n\tincludes: L.Mixin.Events,                                                                                          // 3814\n                                                                                                                    // 3815\n\toptions: {                                                                                                         // 3816\n\t\tminWidth: 50,                                                                                                     // 3817\n\t\tmaxWidth: 300,                                                                                                    // 3818\n\t\t// maxHeight: null,                                                                                               // 3819\n\t\tautoPan: true,                                                                                                    // 3820\n\t\tcloseButton: true,                                                                                                // 3821\n\t\toffset: [0, 7],                                                                                                   // 3822\n\t\tautoPanPadding: [5, 5],                                                                                           // 3823\n\t\t// autoPanPaddingTopLeft: null,                                                                                   // 3824\n\t\t// autoPanPaddingBottomRight: null,                                                                               // 3825\n\t\tkeepInView: false,                                                                                                // 3826\n\t\tclassName: '',                                                                                                    // 3827\n\t\tzoomAnimation: true                                                                                               // 3828\n\t},                                                                                                                 // 3829\n                                                                                                                    // 3830\n\tinitialize: function (options, source) {                                                                           // 3831\n\t\tL.setOptions(this, options);                                                                                      // 3832\n                                                                                                                    // 3833\n\t\tthis._source = source;                                                                                            // 3834\n\t\tthis._animated = L.Browser.any3d && this.options.zoomAnimation;                                                   // 3835\n\t\tthis._isOpen = false;                                                                                             // 3836\n\t},                                                                                                                 // 3837\n                                                                                                                    // 3838\n\tonAdd: function (map) {                                                                                            // 3839\n\t\tthis._map = map;                                                                                                  // 3840\n                                                                                                                    // 3841\n\t\tif (!this._container) {                                                                                           // 3842\n\t\t\tthis._initLayout();                                                                                              // 3843\n\t\t}                                                                                                                 // 3844\n                                                                                                                    // 3845\n\t\tvar animFade = map.options.fadeAnimation;                                                                         // 3846\n                                                                                                                    // 3847\n\t\tif (animFade) {                                                                                                   // 3848\n\t\t\tL.DomUtil.setOpacity(this._container, 0);                                                                        // 3849\n\t\t}                                                                                                                 // 3850\n\t\tmap._panes.popupPane.appendChild(this._container);                                                                // 3851\n                                                                                                                    // 3852\n\t\tmap.on(this._getEvents(), this);                                                                                  // 3853\n                                                                                                                    // 3854\n\t\tthis.update();                                                                                                    // 3855\n                                                                                                                    // 3856\n\t\tif (animFade) {                                                                                                   // 3857\n\t\t\tL.DomUtil.setOpacity(this._container, 1);                                                                        // 3858\n\t\t}                                                                                                                 // 3859\n                                                                                                                    // 3860\n\t\tthis.fire('open');                                                                                                // 3861\n                                                                                                                    // 3862\n\t\tmap.fire('popupopen', {popup: this});                                                                             // 3863\n                                                                                                                    // 3864\n\t\tif (this._source) {                                                                                               // 3865\n\t\t\tthis._source.fire('popupopen', {popup: this});                                                                   // 3866\n\t\t}                                                                                                                 // 3867\n\t},                                                                                                                 // 3868\n                                                                                                                    // 3869\n\taddTo: function (map) {                                                                                            // 3870\n\t\tmap.addLayer(this);                                                                                               // 3871\n\t\treturn this;                                                                                                      // 3872\n\t},                                                                                                                 // 3873\n                                                                                                                    // 3874\n\topenOn: function (map) {                                                                                           // 3875\n\t\tmap.openPopup(this);                                                                                              // 3876\n\t\treturn this;                                                                                                      // 3877\n\t},                                                                                                                 // 3878\n                                                                                                                    // 3879\n\tonRemove: function (map) {                                                                                         // 3880\n\t\tmap._panes.popupPane.removeChild(this._container);                                                                // 3881\n                                                                                                                    // 3882\n\t\tL.Util.falseFn(this._container.offsetWidth); // force reflow                                                      // 3883\n                                                                                                                    // 3884\n\t\tmap.off(this._getEvents(), this);                                                                                 // 3885\n                                                                                                                    // 3886\n\t\tif (map.options.fadeAnimation) {                                                                                  // 3887\n\t\t\tL.DomUtil.setOpacity(this._container, 0);                                                                        // 3888\n\t\t}                                                                                                                 // 3889\n                                                                                                                    // 3890\n\t\tthis._map = null;                                                                                                 // 3891\n                                                                                                                    // 3892\n\t\tthis.fire('close');                                                                                               // 3893\n                                                                                                                    // 3894\n\t\tmap.fire('popupclose', {popup: this});                                                                            // 3895\n                                                                                                                    // 3896\n\t\tif (this._source) {                                                                                               // 3897\n\t\t\tthis._source.fire('popupclose', {popup: this});                                                                  // 3898\n\t\t}                                                                                                                 // 3899\n\t},                                                                                                                 // 3900\n                                                                                                                    // 3901\n\tgetLatLng: function () {                                                                                           // 3902\n\t\treturn this._latlng;                                                                                              // 3903\n\t},                                                                                                                 // 3904\n                                                                                                                    // 3905\n\tsetLatLng: function (latlng) {                                                                                     // 3906\n\t\tthis._latlng = L.latLng(latlng);                                                                                  // 3907\n\t\tif (this._map) {                                                                                                  // 3908\n\t\t\tthis._updatePosition();                                                                                          // 3909\n\t\t\tthis._adjustPan();                                                                                               // 3910\n\t\t}                                                                                                                 // 3911\n\t\treturn this;                                                                                                      // 3912\n\t},                                                                                                                 // 3913\n                                                                                                                    // 3914\n\tgetContent: function () {                                                                                          // 3915\n\t\treturn this._content;                                                                                             // 3916\n\t},                                                                                                                 // 3917\n                                                                                                                    // 3918\n\tsetContent: function (content) {                                                                                   // 3919\n\t\tthis._content = content;                                                                                          // 3920\n\t\tthis.update();                                                                                                    // 3921\n\t\treturn this;                                                                                                      // 3922\n\t},                                                                                                                 // 3923\n                                                                                                                    // 3924\n\tupdate: function () {                                                                                              // 3925\n\t\tif (!this._map) { return; }                                                                                       // 3926\n                                                                                                                    // 3927\n\t\tthis._container.style.visibility = 'hidden';                                                                      // 3928\n                                                                                                                    // 3929\n\t\tthis._updateContent();                                                                                            // 3930\n\t\tthis._updateLayout();                                                                                             // 3931\n\t\tthis._updatePosition();                                                                                           // 3932\n                                                                                                                    // 3933\n\t\tthis._container.style.visibility = '';                                                                            // 3934\n                                                                                                                    // 3935\n\t\tthis._adjustPan();                                                                                                // 3936\n\t},                                                                                                                 // 3937\n                                                                                                                    // 3938\n\t_getEvents: function () {                                                                                          // 3939\n\t\tvar events = {                                                                                                    // 3940\n\t\t\tviewreset: this._updatePosition                                                                                  // 3941\n\t\t};                                                                                                                // 3942\n                                                                                                                    // 3943\n\t\tif (this._animated) {                                                                                             // 3944\n\t\t\tevents.zoomanim = this._zoomAnimation;                                                                           // 3945\n\t\t}                                                                                                                 // 3946\n\t\tif ('closeOnClick' in this.options ? this.options.closeOnClick : this._map.options.closePopupOnClick) {           // 3947\n\t\t\tevents.preclick = this._close;                                                                                   // 3948\n\t\t}                                                                                                                 // 3949\n\t\tif (this.options.keepInView) {                                                                                    // 3950\n\t\t\tevents.moveend = this._adjustPan;                                                                                // 3951\n\t\t}                                                                                                                 // 3952\n                                                                                                                    // 3953\n\t\treturn events;                                                                                                    // 3954\n\t},                                                                                                                 // 3955\n                                                                                                                    // 3956\n\t_close: function () {                                                                                              // 3957\n\t\tif (this._map) {                                                                                                  // 3958\n\t\t\tthis._map.closePopup(this);                                                                                      // 3959\n\t\t}                                                                                                                 // 3960\n\t},                                                                                                                 // 3961\n                                                                                                                    // 3962\n\t_initLayout: function () {                                                                                         // 3963\n\t\tvar prefix = 'leaflet-popup',                                                                                     // 3964\n\t\t\tcontainerClass = prefix + ' ' + this.options.className + ' leaflet-zoom-' +                                      // 3965\n\t\t\t        (this._animated ? 'animated' : 'hide'),                                                                  // 3966\n\t\t\tcontainer = this._container = L.DomUtil.create('div', containerClass),                                           // 3967\n\t\t\tcloseButton;                                                                                                     // 3968\n                                                                                                                    // 3969\n\t\tif (this.options.closeButton) {                                                                                   // 3970\n\t\t\tcloseButton = this._closeButton =                                                                                // 3971\n\t\t\t        L.DomUtil.create('a', prefix + '-close-button', container);                                              // 3972\n\t\t\tcloseButton.href = '#close';                                                                                     // 3973\n\t\t\tcloseButton.innerHTML = '&#215;';                                                                                // 3974\n\t\t\tL.DomEvent.disableClickPropagation(closeButton);                                                                 // 3975\n                                                                                                                    // 3976\n\t\t\tL.DomEvent.on(closeButton, 'click', this._onCloseButtonClick, this);                                             // 3977\n\t\t}                                                                                                                 // 3978\n                                                                                                                    // 3979\n\t\tvar wrapper = this._wrapper =                                                                                     // 3980\n\t\t        L.DomUtil.create('div', prefix + '-content-wrapper', container);                                          // 3981\n\t\tL.DomEvent.disableClickPropagation(wrapper);                                                                      // 3982\n                                                                                                                    // 3983\n\t\tthis._contentNode = L.DomUtil.create('div', prefix + '-content', wrapper);                                        // 3984\n                                                                                                                    // 3985\n\t\tL.DomEvent.disableScrollPropagation(this._contentNode);                                                           // 3986\n\t\tL.DomEvent.on(wrapper, 'contextmenu', L.DomEvent.stopPropagation);                                                // 3987\n                                                                                                                    // 3988\n\t\tthis._tipContainer = L.DomUtil.create('div', prefix + '-tip-container', container);                               // 3989\n\t\tthis._tip = L.DomUtil.create('div', prefix + '-tip', this._tipContainer);                                         // 3990\n\t},                                                                                                                 // 3991\n                                                                                                                    // 3992\n\t_updateContent: function () {                                                                                      // 3993\n\t\tif (!this._content) { return; }                                                                                   // 3994\n                                                                                                                    // 3995\n\t\tif (typeof this._content === 'string') {                                                                          // 3996\n\t\t\tthis._contentNode.innerHTML = this._content;                                                                     // 3997\n\t\t} else {                                                                                                          // 3998\n\t\t\twhile (this._contentNode.hasChildNodes()) {                                                                      // 3999\n\t\t\t\tthis._contentNode.removeChild(this._contentNode.firstChild);                                                    // 4000\n\t\t\t}                                                                                                                // 4001\n\t\t\tthis._contentNode.appendChild(this._content);                                                                    // 4002\n\t\t}                                                                                                                 // 4003\n\t\tthis.fire('contentupdate');                                                                                       // 4004\n\t},                                                                                                                 // 4005\n                                                                                                                    // 4006\n\t_updateLayout: function () {                                                                                       // 4007\n\t\tvar container = this._contentNode,                                                                                // 4008\n\t\t    style = container.style;                                                                                      // 4009\n                                                                                                                    // 4010\n\t\tstyle.width = '';                                                                                                 // 4011\n\t\tstyle.whiteSpace = 'nowrap';                                                                                      // 4012\n                                                                                                                    // 4013\n\t\tvar width = container.offsetWidth;                                                                                // 4014\n\t\twidth = Math.min(width, this.options.maxWidth);                                                                   // 4015\n\t\twidth = Math.max(width, this.options.minWidth);                                                                   // 4016\n                                                                                                                    // 4017\n\t\tstyle.width = (width + 1) + 'px';                                                                                 // 4018\n\t\tstyle.whiteSpace = '';                                                                                            // 4019\n                                                                                                                    // 4020\n\t\tstyle.height = '';                                                                                                // 4021\n                                                                                                                    // 4022\n\t\tvar height = container.offsetHeight,                                                                              // 4023\n\t\t    maxHeight = this.options.maxHeight,                                                                           // 4024\n\t\t    scrolledClass = 'leaflet-popup-scrolled';                                                                     // 4025\n                                                                                                                    // 4026\n\t\tif (maxHeight && height > maxHeight) {                                                                            // 4027\n\t\t\tstyle.height = maxHeight + 'px';                                                                                 // 4028\n\t\t\tL.DomUtil.addClass(container, scrolledClass);                                                                    // 4029\n\t\t} else {                                                                                                          // 4030\n\t\t\tL.DomUtil.removeClass(container, scrolledClass);                                                                 // 4031\n\t\t}                                                                                                                 // 4032\n                                                                                                                    // 4033\n\t\tthis._containerWidth = this._container.offsetWidth;                                                               // 4034\n\t},                                                                                                                 // 4035\n                                                                                                                    // 4036\n\t_updatePosition: function () {                                                                                     // 4037\n\t\tif (!this._map) { return; }                                                                                       // 4038\n                                                                                                                    // 4039\n\t\tvar pos = this._map.latLngToLayerPoint(this._latlng),                                                             // 4040\n\t\t    animated = this._animated,                                                                                    // 4041\n\t\t    offset = L.point(this.options.offset);                                                                        // 4042\n                                                                                                                    // 4043\n\t\tif (animated) {                                                                                                   // 4044\n\t\t\tL.DomUtil.setPosition(this._container, pos);                                                                     // 4045\n\t\t}                                                                                                                 // 4046\n                                                                                                                    // 4047\n\t\tthis._containerBottom = -offset.y - (animated ? 0 : pos.y);                                                       // 4048\n\t\tthis._containerLeft = -Math.round(this._containerWidth / 2) + offset.x + (animated ? 0 : pos.x);                  // 4049\n                                                                                                                    // 4050\n\t\t// bottom position the popup in case the height of the popup changes (images loading etc)                         // 4051\n\t\tthis._container.style.bottom = this._containerBottom + 'px';                                                      // 4052\n\t\tthis._container.style.left = this._containerLeft + 'px';                                                          // 4053\n\t},                                                                                                                 // 4054\n                                                                                                                    // 4055\n\t_zoomAnimation: function (opt) {                                                                                   // 4056\n\t\tvar pos = this._map._latLngToNewLayerPoint(this._latlng, opt.zoom, opt.center);                                   // 4057\n                                                                                                                    // 4058\n\t\tL.DomUtil.setPosition(this._container, pos);                                                                      // 4059\n\t},                                                                                                                 // 4060\n                                                                                                                    // 4061\n\t_adjustPan: function () {                                                                                          // 4062\n\t\tif (!this.options.autoPan) { return; }                                                                            // 4063\n                                                                                                                    // 4064\n\t\tvar map = this._map,                                                                                              // 4065\n\t\t    containerHeight = this._container.offsetHeight,                                                               // 4066\n\t\t    containerWidth = this._containerWidth,                                                                        // 4067\n                                                                                                                    // 4068\n\t\t    layerPos = new L.Point(this._containerLeft, -containerHeight - this._containerBottom);                        // 4069\n                                                                                                                    // 4070\n\t\tif (this._animated) {                                                                                             // 4071\n\t\t\tlayerPos._add(L.DomUtil.getPosition(this._container));                                                           // 4072\n\t\t}                                                                                                                 // 4073\n                                                                                                                    // 4074\n\t\tvar containerPos = map.layerPointToContainerPoint(layerPos),                                                      // 4075\n\t\t    padding = L.point(this.options.autoPanPadding),                                                               // 4076\n\t\t    paddingTL = L.point(this.options.autoPanPaddingTopLeft || padding),                                           // 4077\n\t\t    paddingBR = L.point(this.options.autoPanPaddingBottomRight || padding),                                       // 4078\n\t\t    size = map.getSize(),                                                                                         // 4079\n\t\t    dx = 0,                                                                                                       // 4080\n\t\t    dy = 0;                                                                                                       // 4081\n                                                                                                                    // 4082\n\t\tif (containerPos.x + containerWidth + paddingBR.x > size.x) { // right                                            // 4083\n\t\t\tdx = containerPos.x + containerWidth - size.x + paddingBR.x;                                                     // 4084\n\t\t}                                                                                                                 // 4085\n\t\tif (containerPos.x - dx - paddingTL.x < 0) { // left                                                              // 4086\n\t\t\tdx = containerPos.x - paddingTL.x;                                                                               // 4087\n\t\t}                                                                                                                 // 4088\n\t\tif (containerPos.y + containerHeight + paddingBR.y > size.y) { // bottom                                          // 4089\n\t\t\tdy = containerPos.y + containerHeight - size.y + paddingBR.y;                                                    // 4090\n\t\t}                                                                                                                 // 4091\n\t\tif (containerPos.y - dy - paddingTL.y < 0) { // top                                                               // 4092\n\t\t\tdy = containerPos.y - paddingTL.y;                                                                               // 4093\n\t\t}                                                                                                                 // 4094\n                                                                                                                    // 4095\n\t\tif (dx || dy) {                                                                                                   // 4096\n\t\t\tmap                                                                                                              // 4097\n\t\t\t    .fire('autopanstart')                                                                                        // 4098\n\t\t\t    .panBy([dx, dy]);                                                                                            // 4099\n\t\t}                                                                                                                 // 4100\n\t},                                                                                                                 // 4101\n                                                                                                                    // 4102\n\t_onCloseButtonClick: function (e) {                                                                                // 4103\n\t\tthis._close();                                                                                                    // 4104\n\t\tL.DomEvent.stop(e);                                                                                               // 4105\n\t}                                                                                                                  // 4106\n});                                                                                                                 // 4107\n                                                                                                                    // 4108\nL.popup = function (options, source) {                                                                              // 4109\n\treturn new L.Popup(options, source);                                                                               // 4110\n};                                                                                                                  // 4111\n                                                                                                                    // 4112\n                                                                                                                    // 4113\nL.Map.include({                                                                                                     // 4114\n\topenPopup: function (popup, latlng, options) { // (Popup) or (String || HTMLElement, LatLng[, Object])             // 4115\n\t\tthis.closePopup();                                                                                                // 4116\n                                                                                                                    // 4117\n\t\tif (!(popup instanceof L.Popup)) {                                                                                // 4118\n\t\t\tvar content = popup;                                                                                             // 4119\n                                                                                                                    // 4120\n\t\t\tpopup = new L.Popup(options)                                                                                     // 4121\n\t\t\t    .setLatLng(latlng)                                                                                           // 4122\n\t\t\t    .setContent(content);                                                                                        // 4123\n\t\t}                                                                                                                 // 4124\n\t\tpopup._isOpen = true;                                                                                             // 4125\n                                                                                                                    // 4126\n\t\tthis._popup = popup;                                                                                              // 4127\n\t\treturn this.addLayer(popup);                                                                                      // 4128\n\t},                                                                                                                 // 4129\n                                                                                                                    // 4130\n\tclosePopup: function (popup) {                                                                                     // 4131\n\t\tif (!popup || popup === this._popup) {                                                                            // 4132\n\t\t\tpopup = this._popup;                                                                                             // 4133\n\t\t\tthis._popup = null;                                                                                              // 4134\n\t\t}                                                                                                                 // 4135\n\t\tif (popup) {                                                                                                      // 4136\n\t\t\tthis.removeLayer(popup);                                                                                         // 4137\n\t\t\tpopup._isOpen = false;                                                                                           // 4138\n\t\t}                                                                                                                 // 4139\n\t\treturn this;                                                                                                      // 4140\n\t}                                                                                                                  // 4141\n});                                                                                                                 // 4142\n                                                                                                                    // 4143\n                                                                                                                    // 4144\n/*                                                                                                                  // 4145\n * Popup extension to L.Marker, adding popup-related methods.                                                       // 4146\n */                                                                                                                 // 4147\n                                                                                                                    // 4148\nL.Marker.include({                                                                                                  // 4149\n\topenPopup: function () {                                                                                           // 4150\n\t\tif (this._popup && this._map && !this._map.hasLayer(this._popup)) {                                               // 4151\n\t\t\tthis._popup.setLatLng(this._latlng);                                                                             // 4152\n\t\t\tthis._map.openPopup(this._popup);                                                                                // 4153\n\t\t}                                                                                                                 // 4154\n                                                                                                                    // 4155\n\t\treturn this;                                                                                                      // 4156\n\t},                                                                                                                 // 4157\n                                                                                                                    // 4158\n\tclosePopup: function () {                                                                                          // 4159\n\t\tif (this._popup) {                                                                                                // 4160\n\t\t\tthis._popup._close();                                                                                            // 4161\n\t\t}                                                                                                                 // 4162\n\t\treturn this;                                                                                                      // 4163\n\t},                                                                                                                 // 4164\n                                                                                                                    // 4165\n\ttogglePopup: function () {                                                                                         // 4166\n\t\tif (this._popup) {                                                                                                // 4167\n\t\t\tif (this._popup._isOpen) {                                                                                       // 4168\n\t\t\t\tthis.closePopup();                                                                                              // 4169\n\t\t\t} else {                                                                                                         // 4170\n\t\t\t\tthis.openPopup();                                                                                               // 4171\n\t\t\t}                                                                                                                // 4172\n\t\t}                                                                                                                 // 4173\n\t\treturn this;                                                                                                      // 4174\n\t},                                                                                                                 // 4175\n                                                                                                                    // 4176\n\tbindPopup: function (content, options) {                                                                           // 4177\n\t\tvar anchor = L.point(this.options.icon.options.popupAnchor || [0, 0]);                                            // 4178\n                                                                                                                    // 4179\n\t\tanchor = anchor.add(L.Popup.prototype.options.offset);                                                            // 4180\n                                                                                                                    // 4181\n\t\tif (options && options.offset) {                                                                                  // 4182\n\t\t\tanchor = anchor.add(options.offset);                                                                             // 4183\n\t\t}                                                                                                                 // 4184\n                                                                                                                    // 4185\n\t\toptions = L.extend({offset: anchor}, options);                                                                    // 4186\n                                                                                                                    // 4187\n\t\tif (!this._popupHandlersAdded) {                                                                                  // 4188\n\t\t\tthis                                                                                                             // 4189\n\t\t\t    .on('click', this.togglePopup, this)                                                                         // 4190\n\t\t\t    .on('remove', this.closePopup, this)                                                                         // 4191\n\t\t\t    .on('move', this._movePopup, this);                                                                          // 4192\n\t\t\tthis._popupHandlersAdded = true;                                                                                 // 4193\n\t\t}                                                                                                                 // 4194\n                                                                                                                    // 4195\n\t\tif (content instanceof L.Popup) {                                                                                 // 4196\n\t\t\tL.setOptions(content, options);                                                                                  // 4197\n\t\t\tthis._popup = content;                                                                                           // 4198\n\t\t\tcontent._source = this;                                                                                          // 4199\n\t\t} else {                                                                                                          // 4200\n\t\t\tthis._popup = new L.Popup(options, this)                                                                         // 4201\n\t\t\t\t.setContent(content);                                                                                           // 4202\n\t\t}                                                                                                                 // 4203\n                                                                                                                    // 4204\n\t\treturn this;                                                                                                      // 4205\n\t},                                                                                                                 // 4206\n                                                                                                                    // 4207\n\tsetPopupContent: function (content) {                                                                              // 4208\n\t\tif (this._popup) {                                                                                                // 4209\n\t\t\tthis._popup.setContent(content);                                                                                 // 4210\n\t\t}                                                                                                                 // 4211\n\t\treturn this;                                                                                                      // 4212\n\t},                                                                                                                 // 4213\n                                                                                                                    // 4214\n\tunbindPopup: function () {                                                                                         // 4215\n\t\tif (this._popup) {                                                                                                // 4216\n\t\t\tthis._popup = null;                                                                                              // 4217\n\t\t\tthis                                                                                                             // 4218\n\t\t\t    .off('click', this.togglePopup, this)                                                                        // 4219\n\t\t\t    .off('remove', this.closePopup, this)                                                                        // 4220\n\t\t\t    .off('move', this._movePopup, this);                                                                         // 4221\n\t\t\tthis._popupHandlersAdded = false;                                                                                // 4222\n\t\t}                                                                                                                 // 4223\n\t\treturn this;                                                                                                      // 4224\n\t},                                                                                                                 // 4225\n                                                                                                                    // 4226\n\tgetPopup: function () {                                                                                            // 4227\n\t\treturn this._popup;                                                                                               // 4228\n\t},                                                                                                                 // 4229\n                                                                                                                    // 4230\n\t_movePopup: function (e) {                                                                                         // 4231\n\t\tthis._popup.setLatLng(e.latlng);                                                                                  // 4232\n\t}                                                                                                                  // 4233\n});                                                                                                                 // 4234\n                                                                                                                    // 4235\n                                                                                                                    // 4236\n/*                                                                                                                  // 4237\n * L.LayerGroup is a class to combine several layers into one so that                                               // 4238\n * you can manipulate the group (e.g. add/remove it) as one layer.                                                  // 4239\n */                                                                                                                 // 4240\n                                                                                                                    // 4241\nL.LayerGroup = L.Class.extend({                                                                                     // 4242\n\tinitialize: function (layers) {                                                                                    // 4243\n\t\tthis._layers = {};                                                                                                // 4244\n                                                                                                                    // 4245\n\t\tvar i, len;                                                                                                       // 4246\n                                                                                                                    // 4247\n\t\tif (layers) {                                                                                                     // 4248\n\t\t\tfor (i = 0, len = layers.length; i < len; i++) {                                                                 // 4249\n\t\t\t\tthis.addLayer(layers[i]);                                                                                       // 4250\n\t\t\t}                                                                                                                // 4251\n\t\t}                                                                                                                 // 4252\n\t},                                                                                                                 // 4253\n                                                                                                                    // 4254\n\taddLayer: function (layer) {                                                                                       // 4255\n\t\tvar id = this.getLayerId(layer);                                                                                  // 4256\n                                                                                                                    // 4257\n\t\tthis._layers[id] = layer;                                                                                         // 4258\n                                                                                                                    // 4259\n\t\tif (this._map) {                                                                                                  // 4260\n\t\t\tthis._map.addLayer(layer);                                                                                       // 4261\n\t\t}                                                                                                                 // 4262\n                                                                                                                    // 4263\n\t\treturn this;                                                                                                      // 4264\n\t},                                                                                                                 // 4265\n                                                                                                                    // 4266\n\tremoveLayer: function (layer) {                                                                                    // 4267\n\t\tvar id = layer in this._layers ? layer : this.getLayerId(layer);                                                  // 4268\n                                                                                                                    // 4269\n\t\tif (this._map && this._layers[id]) {                                                                              // 4270\n\t\t\tthis._map.removeLayer(this._layers[id]);                                                                         // 4271\n\t\t}                                                                                                                 // 4272\n                                                                                                                    // 4273\n\t\tdelete this._layers[id];                                                                                          // 4274\n                                                                                                                    // 4275\n\t\treturn this;                                                                                                      // 4276\n\t},                                                                                                                 // 4277\n                                                                                                                    // 4278\n\thasLayer: function (layer) {                                                                                       // 4279\n\t\tif (!layer) { return false; }                                                                                     // 4280\n                                                                                                                    // 4281\n\t\treturn (layer in this._layers || this.getLayerId(layer) in this._layers);                                         // 4282\n\t},                                                                                                                 // 4283\n                                                                                                                    // 4284\n\tclearLayers: function () {                                                                                         // 4285\n\t\tthis.eachLayer(this.removeLayer, this);                                                                           // 4286\n\t\treturn this;                                                                                                      // 4287\n\t},                                                                                                                 // 4288\n                                                                                                                    // 4289\n\tinvoke: function (methodName) {                                                                                    // 4290\n\t\tvar args = Array.prototype.slice.call(arguments, 1),                                                              // 4291\n\t\t    i, layer;                                                                                                     // 4292\n                                                                                                                    // 4293\n\t\tfor (i in this._layers) {                                                                                         // 4294\n\t\t\tlayer = this._layers[i];                                                                                         // 4295\n                                                                                                                    // 4296\n\t\t\tif (layer[methodName]) {                                                                                         // 4297\n\t\t\t\tlayer[methodName].apply(layer, args);                                                                           // 4298\n\t\t\t}                                                                                                                // 4299\n\t\t}                                                                                                                 // 4300\n                                                                                                                    // 4301\n\t\treturn this;                                                                                                      // 4302\n\t},                                                                                                                 // 4303\n                                                                                                                    // 4304\n\tonAdd: function (map) {                                                                                            // 4305\n\t\tthis._map = map;                                                                                                  // 4306\n\t\tthis.eachLayer(map.addLayer, map);                                                                                // 4307\n\t},                                                                                                                 // 4308\n                                                                                                                    // 4309\n\tonRemove: function (map) {                                                                                         // 4310\n\t\tthis.eachLayer(map.removeLayer, map);                                                                             // 4311\n\t\tthis._map = null;                                                                                                 // 4312\n\t},                                                                                                                 // 4313\n                                                                                                                    // 4314\n\taddTo: function (map) {                                                                                            // 4315\n\t\tmap.addLayer(this);                                                                                               // 4316\n\t\treturn this;                                                                                                      // 4317\n\t},                                                                                                                 // 4318\n                                                                                                                    // 4319\n\teachLayer: function (method, context) {                                                                            // 4320\n\t\tfor (var i in this._layers) {                                                                                     // 4321\n\t\t\tmethod.call(context, this._layers[i]);                                                                           // 4322\n\t\t}                                                                                                                 // 4323\n\t\treturn this;                                                                                                      // 4324\n\t},                                                                                                                 // 4325\n                                                                                                                    // 4326\n\tgetLayer: function (id) {                                                                                          // 4327\n\t\treturn this._layers[id];                                                                                          // 4328\n\t},                                                                                                                 // 4329\n                                                                                                                    // 4330\n\tgetLayers: function () {                                                                                           // 4331\n\t\tvar layers = [];                                                                                                  // 4332\n                                                                                                                    // 4333\n\t\tfor (var i in this._layers) {                                                                                     // 4334\n\t\t\tlayers.push(this._layers[i]);                                                                                    // 4335\n\t\t}                                                                                                                 // 4336\n\t\treturn layers;                                                                                                    // 4337\n\t},                                                                                                                 // 4338\n                                                                                                                    // 4339\n\tsetZIndex: function (zIndex) {                                                                                     // 4340\n\t\treturn this.invoke('setZIndex', zIndex);                                                                          // 4341\n\t},                                                                                                                 // 4342\n                                                                                                                    // 4343\n\tgetLayerId: function (layer) {                                                                                     // 4344\n\t\treturn L.stamp(layer);                                                                                            // 4345\n\t}                                                                                                                  // 4346\n});                                                                                                                 // 4347\n                                                                                                                    // 4348\nL.layerGroup = function (layers) {                                                                                  // 4349\n\treturn new L.LayerGroup(layers);                                                                                   // 4350\n};                                                                                                                  // 4351\n                                                                                                                    // 4352\n                                                                                                                    // 4353\n/*                                                                                                                  // 4354\n * L.FeatureGroup extends L.LayerGroup by introducing mouse events and additional methods                           // 4355\n * shared between a group of interactive layers (like vectors or markers).                                          // 4356\n */                                                                                                                 // 4357\n                                                                                                                    // 4358\nL.FeatureGroup = L.LayerGroup.extend({                                                                              // 4359\n\tincludes: L.Mixin.Events,                                                                                          // 4360\n                                                                                                                    // 4361\n\tstatics: {                                                                                                         // 4362\n\t\tEVENTS: 'click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose'                            // 4363\n\t},                                                                                                                 // 4364\n                                                                                                                    // 4365\n\taddLayer: function (layer) {                                                                                       // 4366\n\t\tif (this.hasLayer(layer)) {                                                                                       // 4367\n\t\t\treturn this;                                                                                                     // 4368\n\t\t}                                                                                                                 // 4369\n                                                                                                                    // 4370\n\t\tif ('on' in layer) {                                                                                              // 4371\n\t\t\tlayer.on(L.FeatureGroup.EVENTS, this._propagateEvent, this);                                                     // 4372\n\t\t}                                                                                                                 // 4373\n                                                                                                                    // 4374\n\t\tL.LayerGroup.prototype.addLayer.call(this, layer);                                                                // 4375\n                                                                                                                    // 4376\n\t\tif (this._popupContent && layer.bindPopup) {                                                                      // 4377\n\t\t\tlayer.bindPopup(this._popupContent, this._popupOptions);                                                         // 4378\n\t\t}                                                                                                                 // 4379\n                                                                                                                    // 4380\n\t\treturn this.fire('layeradd', {layer: layer});                                                                     // 4381\n\t},                                                                                                                 // 4382\n                                                                                                                    // 4383\n\tremoveLayer: function (layer) {                                                                                    // 4384\n\t\tif (!this.hasLayer(layer)) {                                                                                      // 4385\n\t\t\treturn this;                                                                                                     // 4386\n\t\t}                                                                                                                 // 4387\n\t\tif (layer in this._layers) {                                                                                      // 4388\n\t\t\tlayer = this._layers[layer];                                                                                     // 4389\n\t\t}                                                                                                                 // 4390\n                                                                                                                    // 4391\n\t\tif ('off' in layer) {                                                                                             // 4392\n\t\t\tlayer.off(L.FeatureGroup.EVENTS, this._propagateEvent, this);                                                    // 4393\n\t\t}                                                                                                                 // 4394\n                                                                                                                    // 4395\n\t\tL.LayerGroup.prototype.removeLayer.call(this, layer);                                                             // 4396\n                                                                                                                    // 4397\n\t\tif (this._popupContent) {                                                                                         // 4398\n\t\t\tthis.invoke('unbindPopup');                                                                                      // 4399\n\t\t}                                                                                                                 // 4400\n                                                                                                                    // 4401\n\t\treturn this.fire('layerremove', {layer: layer});                                                                  // 4402\n\t},                                                                                                                 // 4403\n                                                                                                                    // 4404\n\tbindPopup: function (content, options) {                                                                           // 4405\n\t\tthis._popupContent = content;                                                                                     // 4406\n\t\tthis._popupOptions = options;                                                                                     // 4407\n\t\treturn this.invoke('bindPopup', content, options);                                                                // 4408\n\t},                                                                                                                 // 4409\n                                                                                                                    // 4410\n\topenPopup: function (latlng) {                                                                                     // 4411\n\t\t// open popup on the first layer                                                                                  // 4412\n\t\tfor (var id in this._layers) {                                                                                    // 4413\n\t\t\tthis._layers[id].openPopup(latlng);                                                                              // 4414\n\t\t\tbreak;                                                                                                           // 4415\n\t\t}                                                                                                                 // 4416\n\t\treturn this;                                                                                                      // 4417\n\t},                                                                                                                 // 4418\n                                                                                                                    // 4419\n\tsetStyle: function (style) {                                                                                       // 4420\n\t\treturn this.invoke('setStyle', style);                                                                            // 4421\n\t},                                                                                                                 // 4422\n                                                                                                                    // 4423\n\tbringToFront: function () {                                                                                        // 4424\n\t\treturn this.invoke('bringToFront');                                                                               // 4425\n\t},                                                                                                                 // 4426\n                                                                                                                    // 4427\n\tbringToBack: function () {                                                                                         // 4428\n\t\treturn this.invoke('bringToBack');                                                                                // 4429\n\t},                                                                                                                 // 4430\n                                                                                                                    // 4431\n\tgetBounds: function () {                                                                                           // 4432\n\t\tvar bounds = new L.LatLngBounds();                                                                                // 4433\n                                                                                                                    // 4434\n\t\tthis.eachLayer(function (layer) {                                                                                 // 4435\n\t\t\tbounds.extend(layer instanceof L.Marker ? layer.getLatLng() : layer.getBounds());                                // 4436\n\t\t});                                                                                                               // 4437\n                                                                                                                    // 4438\n\t\treturn bounds;                                                                                                    // 4439\n\t},                                                                                                                 // 4440\n                                                                                                                    // 4441\n\t_propagateEvent: function (e) {                                                                                    // 4442\n\t\te = L.extend({                                                                                                    // 4443\n\t\t\tlayer: e.target,                                                                                                 // 4444\n\t\t\ttarget: this                                                                                                     // 4445\n\t\t}, e);                                                                                                            // 4446\n\t\tthis.fire(e.type, e);                                                                                             // 4447\n\t}                                                                                                                  // 4448\n});                                                                                                                 // 4449\n                                                                                                                    // 4450\nL.featureGroup = function (layers) {                                                                                // 4451\n\treturn new L.FeatureGroup(layers);                                                                                 // 4452\n};                                                                                                                  // 4453\n                                                                                                                    // 4454\n                                                                                                                    // 4455\n/*                                                                                                                  // 4456\n * L.Path is a base class for rendering vector paths on a map. Inherited by Polyline, Circle, etc.                  // 4457\n */                                                                                                                 // 4458\n                                                                                                                    // 4459\nL.Path = L.Class.extend({                                                                                           // 4460\n\tincludes: [L.Mixin.Events],                                                                                        // 4461\n                                                                                                                    // 4462\n\tstatics: {                                                                                                         // 4463\n\t\t// how much to extend the clip area around the map view                                                           // 4464\n\t\t// (relative to its size, e.g. 0.5 is half the screen in each direction)                                          // 4465\n\t\t// set it so that SVG element doesn't exceed 1280px (vectors flicker on dragend if it is)                         // 4466\n\t\tCLIP_PADDING: (function () {                                                                                      // 4467\n\t\t\tvar max = L.Browser.mobile ? 1280 : 2000,                                                                        // 4468\n\t\t\t    target = (max / Math.max(window.outerWidth, window.outerHeight) - 1) / 2;                                    // 4469\n\t\t\treturn Math.max(0, Math.min(0.5, target));                                                                       // 4470\n\t\t})()                                                                                                              // 4471\n\t},                                                                                                                 // 4472\n                                                                                                                    // 4473\n\toptions: {                                                                                                         // 4474\n\t\tstroke: true,                                                                                                     // 4475\n\t\tcolor: '#0033ff',                                                                                                 // 4476\n\t\tdashArray: null,                                                                                                  // 4477\n\t\tlineCap: null,                                                                                                    // 4478\n\t\tlineJoin: null,                                                                                                   // 4479\n\t\tweight: 5,                                                                                                        // 4480\n\t\topacity: 0.5,                                                                                                     // 4481\n                                                                                                                    // 4482\n\t\tfill: false,                                                                                                      // 4483\n\t\tfillColor: null, //same as color by default                                                                       // 4484\n\t\tfillOpacity: 0.2,                                                                                                 // 4485\n                                                                                                                    // 4486\n\t\tclickable: true                                                                                                   // 4487\n\t},                                                                                                                 // 4488\n                                                                                                                    // 4489\n\tinitialize: function (options) {                                                                                   // 4490\n\t\tL.setOptions(this, options);                                                                                      // 4491\n\t},                                                                                                                 // 4492\n                                                                                                                    // 4493\n\tonAdd: function (map) {                                                                                            // 4494\n\t\tthis._map = map;                                                                                                  // 4495\n                                                                                                                    // 4496\n\t\tif (!this._container) {                                                                                           // 4497\n\t\t\tthis._initElements();                                                                                            // 4498\n\t\t\tthis._initEvents();                                                                                              // 4499\n\t\t}                                                                                                                 // 4500\n                                                                                                                    // 4501\n\t\tthis.projectLatlngs();                                                                                            // 4502\n\t\tthis._updatePath();                                                                                               // 4503\n                                                                                                                    // 4504\n\t\tif (this._container) {                                                                                            // 4505\n\t\t\tthis._map._pathRoot.appendChild(this._container);                                                                // 4506\n\t\t}                                                                                                                 // 4507\n                                                                                                                    // 4508\n\t\tthis.fire('add');                                                                                                 // 4509\n                                                                                                                    // 4510\n\t\tmap.on({                                                                                                          // 4511\n\t\t\t'viewreset': this.projectLatlngs,                                                                                // 4512\n\t\t\t'moveend': this._updatePath                                                                                      // 4513\n\t\t}, this);                                                                                                         // 4514\n\t},                                                                                                                 // 4515\n                                                                                                                    // 4516\n\taddTo: function (map) {                                                                                            // 4517\n\t\tmap.addLayer(this);                                                                                               // 4518\n\t\treturn this;                                                                                                      // 4519\n\t},                                                                                                                 // 4520\n                                                                                                                    // 4521\n\tonRemove: function (map) {                                                                                         // 4522\n\t\tmap._pathRoot.removeChild(this._container);                                                                       // 4523\n                                                                                                                    // 4524\n\t\t// Need to fire remove event before we set _map to null as the event hooks might need the object                  // 4525\n\t\tthis.fire('remove');                                                                                              // 4526\n\t\tthis._map = null;                                                                                                 // 4527\n                                                                                                                    // 4528\n\t\tif (L.Browser.vml) {                                                                                              // 4529\n\t\t\tthis._container = null;                                                                                          // 4530\n\t\t\tthis._stroke = null;                                                                                             // 4531\n\t\t\tthis._fill = null;                                                                                               // 4532\n\t\t}                                                                                                                 // 4533\n                                                                                                                    // 4534\n\t\tmap.off({                                                                                                         // 4535\n\t\t\t'viewreset': this.projectLatlngs,                                                                                // 4536\n\t\t\t'moveend': this._updatePath                                                                                      // 4537\n\t\t}, this);                                                                                                         // 4538\n\t},                                                                                                                 // 4539\n                                                                                                                    // 4540\n\tprojectLatlngs: function () {                                                                                      // 4541\n\t\t// do all projection stuff here                                                                                   // 4542\n\t},                                                                                                                 // 4543\n                                                                                                                    // 4544\n\tsetStyle: function (style) {                                                                                       // 4545\n\t\tL.setOptions(this, style);                                                                                        // 4546\n                                                                                                                    // 4547\n\t\tif (this._container) {                                                                                            // 4548\n\t\t\tthis._updateStyle();                                                                                             // 4549\n\t\t}                                                                                                                 // 4550\n                                                                                                                    // 4551\n\t\treturn this;                                                                                                      // 4552\n\t},                                                                                                                 // 4553\n                                                                                                                    // 4554\n\tredraw: function () {                                                                                              // 4555\n\t\tif (this._map) {                                                                                                  // 4556\n\t\t\tthis.projectLatlngs();                                                                                           // 4557\n\t\t\tthis._updatePath();                                                                                              // 4558\n\t\t}                                                                                                                 // 4559\n\t\treturn this;                                                                                                      // 4560\n\t}                                                                                                                  // 4561\n});                                                                                                                 // 4562\n                                                                                                                    // 4563\nL.Map.include({                                                                                                     // 4564\n\t_updatePathViewport: function () {                                                                                 // 4565\n\t\tvar p = L.Path.CLIP_PADDING,                                                                                      // 4566\n\t\t    size = this.getSize(),                                                                                        // 4567\n\t\t    panePos = L.DomUtil.getPosition(this._mapPane),                                                               // 4568\n\t\t    min = panePos.multiplyBy(-1)._subtract(size.multiplyBy(p)._round()),                                          // 4569\n\t\t    max = min.add(size.multiplyBy(1 + p * 2)._round());                                                           // 4570\n                                                                                                                    // 4571\n\t\tthis._pathViewport = new L.Bounds(min, max);                                                                      // 4572\n\t}                                                                                                                  // 4573\n});                                                                                                                 // 4574\n                                                                                                                    // 4575\n                                                                                                                    // 4576\n/*                                                                                                                  // 4577\n * Extends L.Path with SVG-specific rendering code.                                                                 // 4578\n */                                                                                                                 // 4579\n                                                                                                                    // 4580\nL.Path.SVG_NS = 'http://www.w3.org/2000/svg';                                                                       // 4581\n                                                                                                                    // 4582\nL.Browser.svg = !!(document.createElementNS && document.createElementNS(L.Path.SVG_NS, 'svg').createSVGRect);       // 4583\n                                                                                                                    // 4584\nL.Path = L.Path.extend({                                                                                            // 4585\n\tstatics: {                                                                                                         // 4586\n\t\tSVG: L.Browser.svg                                                                                                // 4587\n\t},                                                                                                                 // 4588\n                                                                                                                    // 4589\n\tbringToFront: function () {                                                                                        // 4590\n\t\tvar root = this._map._pathRoot,                                                                                   // 4591\n\t\t    path = this._container;                                                                                       // 4592\n                                                                                                                    // 4593\n\t\tif (path && root.lastChild !== path) {                                                                            // 4594\n\t\t\troot.appendChild(path);                                                                                          // 4595\n\t\t}                                                                                                                 // 4596\n\t\treturn this;                                                                                                      // 4597\n\t},                                                                                                                 // 4598\n                                                                                                                    // 4599\n\tbringToBack: function () {                                                                                         // 4600\n\t\tvar root = this._map._pathRoot,                                                                                   // 4601\n\t\t    path = this._container,                                                                                       // 4602\n\t\t    first = root.firstChild;                                                                                      // 4603\n                                                                                                                    // 4604\n\t\tif (path && first !== path) {                                                                                     // 4605\n\t\t\troot.insertBefore(path, first);                                                                                  // 4606\n\t\t}                                                                                                                 // 4607\n\t\treturn this;                                                                                                      // 4608\n\t},                                                                                                                 // 4609\n                                                                                                                    // 4610\n\tgetPathString: function () {                                                                                       // 4611\n\t\t// form path string here                                                                                          // 4612\n\t},                                                                                                                 // 4613\n                                                                                                                    // 4614\n\t_createElement: function (name) {                                                                                  // 4615\n\t\treturn document.createElementNS(L.Path.SVG_NS, name);                                                             // 4616\n\t},                                                                                                                 // 4617\n                                                                                                                    // 4618\n\t_initElements: function () {                                                                                       // 4619\n\t\tthis._map._initPathRoot();                                                                                        // 4620\n\t\tthis._initPath();                                                                                                 // 4621\n\t\tthis._initStyle();                                                                                                // 4622\n\t},                                                                                                                 // 4623\n                                                                                                                    // 4624\n\t_initPath: function () {                                                                                           // 4625\n\t\tthis._container = this._createElement('g');                                                                       // 4626\n                                                                                                                    // 4627\n\t\tthis._path = this._createElement('path');                                                                         // 4628\n                                                                                                                    // 4629\n\t\tif (this.options.className) {                                                                                     // 4630\n\t\t\tL.DomUtil.addClass(this._path, this.options.className);                                                          // 4631\n\t\t}                                                                                                                 // 4632\n                                                                                                                    // 4633\n\t\tthis._container.appendChild(this._path);                                                                          // 4634\n\t},                                                                                                                 // 4635\n                                                                                                                    // 4636\n\t_initStyle: function () {                                                                                          // 4637\n\t\tif (this.options.stroke) {                                                                                        // 4638\n\t\t\tthis._path.setAttribute('stroke-linejoin', 'round');                                                             // 4639\n\t\t\tthis._path.setAttribute('stroke-linecap', 'round');                                                              // 4640\n\t\t}                                                                                                                 // 4641\n\t\tif (this.options.fill) {                                                                                          // 4642\n\t\t\tthis._path.setAttribute('fill-rule', 'evenodd');                                                                 // 4643\n\t\t}                                                                                                                 // 4644\n\t\tif (this.options.pointerEvents) {                                                                                 // 4645\n\t\t\tthis._path.setAttribute('pointer-events', this.options.pointerEvents);                                           // 4646\n\t\t}                                                                                                                 // 4647\n\t\tif (!this.options.clickable && !this.options.pointerEvents) {                                                     // 4648\n\t\t\tthis._path.setAttribute('pointer-events', 'none');                                                               // 4649\n\t\t}                                                                                                                 // 4650\n\t\tthis._updateStyle();                                                                                              // 4651\n\t},                                                                                                                 // 4652\n                                                                                                                    // 4653\n\t_updateStyle: function () {                                                                                        // 4654\n\t\tif (this.options.stroke) {                                                                                        // 4655\n\t\t\tthis._path.setAttribute('stroke', this.options.color);                                                           // 4656\n\t\t\tthis._path.setAttribute('stroke-opacity', this.options.opacity);                                                 // 4657\n\t\t\tthis._path.setAttribute('stroke-width', this.options.weight);                                                    // 4658\n\t\t\tif (this.options.dashArray) {                                                                                    // 4659\n\t\t\t\tthis._path.setAttribute('stroke-dasharray', this.options.dashArray);                                            // 4660\n\t\t\t} else {                                                                                                         // 4661\n\t\t\t\tthis._path.removeAttribute('stroke-dasharray');                                                                 // 4662\n\t\t\t}                                                                                                                // 4663\n\t\t\tif (this.options.lineCap) {                                                                                      // 4664\n\t\t\t\tthis._path.setAttribute('stroke-linecap', this.options.lineCap);                                                // 4665\n\t\t\t}                                                                                                                // 4666\n\t\t\tif (this.options.lineJoin) {                                                                                     // 4667\n\t\t\t\tthis._path.setAttribute('stroke-linejoin', this.options.lineJoin);                                              // 4668\n\t\t\t}                                                                                                                // 4669\n\t\t} else {                                                                                                          // 4670\n\t\t\tthis._path.setAttribute('stroke', 'none');                                                                       // 4671\n\t\t}                                                                                                                 // 4672\n\t\tif (this.options.fill) {                                                                                          // 4673\n\t\t\tthis._path.setAttribute('fill', this.options.fillColor || this.options.color);                                   // 4674\n\t\t\tthis._path.setAttribute('fill-opacity', this.options.fillOpacity);                                               // 4675\n\t\t} else {                                                                                                          // 4676\n\t\t\tthis._path.setAttribute('fill', 'none');                                                                         // 4677\n\t\t}                                                                                                                 // 4678\n\t},                                                                                                                 // 4679\n                                                                                                                    // 4680\n\t_updatePath: function () {                                                                                         // 4681\n\t\tvar str = this.getPathString();                                                                                   // 4682\n\t\tif (!str) {                                                                                                       // 4683\n\t\t\t// fix webkit empty string parsing bug                                                                           // 4684\n\t\t\tstr = 'M0 0';                                                                                                    // 4685\n\t\t}                                                                                                                 // 4686\n\t\tthis._path.setAttribute('d', str);                                                                                // 4687\n\t},                                                                                                                 // 4688\n                                                                                                                    // 4689\n\t// TODO remove duplication with L.Map                                                                              // 4690\n\t_initEvents: function () {                                                                                         // 4691\n\t\tif (this.options.clickable) {                                                                                     // 4692\n\t\t\tif (L.Browser.svg || !L.Browser.vml) {                                                                           // 4693\n\t\t\t\tL.DomUtil.addClass(this._path, 'leaflet-clickable');                                                            // 4694\n\t\t\t}                                                                                                                // 4695\n                                                                                                                    // 4696\n\t\t\tL.DomEvent.on(this._container, 'click', this._onMouseClick, this);                                               // 4697\n                                                                                                                    // 4698\n\t\t\tvar events = ['dblclick', 'mousedown', 'mouseover',                                                              // 4699\n\t\t\t              'mouseout', 'mousemove', 'contextmenu'];                                                           // 4700\n\t\t\tfor (var i = 0; i < events.length; i++) {                                                                        // 4701\n\t\t\t\tL.DomEvent.on(this._container, events[i], this._fireMouseEvent, this);                                          // 4702\n\t\t\t}                                                                                                                // 4703\n\t\t}                                                                                                                 // 4704\n\t},                                                                                                                 // 4705\n                                                                                                                    // 4706\n\t_onMouseClick: function (e) {                                                                                      // 4707\n\t\tif (this._map.dragging && this._map.dragging.moved()) { return; }                                                 // 4708\n                                                                                                                    // 4709\n\t\tthis._fireMouseEvent(e);                                                                                          // 4710\n\t},                                                                                                                 // 4711\n                                                                                                                    // 4712\n\t_fireMouseEvent: function (e) {                                                                                    // 4713\n\t\tif (!this._map || !this.hasEventListeners(e.type)) { return; }                                                    // 4714\n                                                                                                                    // 4715\n\t\tvar map = this._map,                                                                                              // 4716\n\t\t    containerPoint = map.mouseEventToContainerPoint(e),                                                           // 4717\n\t\t    layerPoint = map.containerPointToLayerPoint(containerPoint),                                                  // 4718\n\t\t    latlng = map.layerPointToLatLng(layerPoint);                                                                  // 4719\n                                                                                                                    // 4720\n\t\tthis.fire(e.type, {                                                                                               // 4721\n\t\t\tlatlng: latlng,                                                                                                  // 4722\n\t\t\tlayerPoint: layerPoint,                                                                                          // 4723\n\t\t\tcontainerPoint: containerPoint,                                                                                  // 4724\n\t\t\toriginalEvent: e                                                                                                 // 4725\n\t\t});                                                                                                               // 4726\n                                                                                                                    // 4727\n\t\tif (e.type === 'contextmenu') {                                                                                   // 4728\n\t\t\tL.DomEvent.preventDefault(e);                                                                                    // 4729\n\t\t}                                                                                                                 // 4730\n\t\tif (e.type !== 'mousemove') {                                                                                     // 4731\n\t\t\tL.DomEvent.stopPropagation(e);                                                                                   // 4732\n\t\t}                                                                                                                 // 4733\n\t}                                                                                                                  // 4734\n});                                                                                                                 // 4735\n                                                                                                                    // 4736\nL.Map.include({                                                                                                     // 4737\n\t_initPathRoot: function () {                                                                                       // 4738\n\t\tif (!this._pathRoot) {                                                                                            // 4739\n\t\t\tthis._pathRoot = L.Path.prototype._createElement('svg');                                                         // 4740\n\t\t\tthis._panes.overlayPane.appendChild(this._pathRoot);                                                             // 4741\n                                                                                                                    // 4742\n\t\t\tif (this.options.zoomAnimation && L.Browser.any3d) {                                                             // 4743\n\t\t\t\tL.DomUtil.addClass(this._pathRoot, 'leaflet-zoom-animated');                                                    // 4744\n                                                                                                                    // 4745\n\t\t\t\tthis.on({                                                                                                       // 4746\n\t\t\t\t\t'zoomanim': this._animatePathZoom,                                                                             // 4747\n\t\t\t\t\t'zoomend': this._endPathZoom                                                                                   // 4748\n\t\t\t\t});                                                                                                             // 4749\n\t\t\t} else {                                                                                                         // 4750\n\t\t\t\tL.DomUtil.addClass(this._pathRoot, 'leaflet-zoom-hide');                                                        // 4751\n\t\t\t}                                                                                                                // 4752\n                                                                                                                    // 4753\n\t\t\tthis.on('moveend', this._updateSvgViewport);                                                                     // 4754\n\t\t\tthis._updateSvgViewport();                                                                                       // 4755\n\t\t}                                                                                                                 // 4756\n\t},                                                                                                                 // 4757\n                                                                                                                    // 4758\n\t_animatePathZoom: function (e) {                                                                                   // 4759\n\t\tvar scale = this.getZoomScale(e.zoom),                                                                            // 4760\n\t\t    offset = this._getCenterOffset(e.center)._multiplyBy(-scale)._add(this._pathViewport.min);                    // 4761\n                                                                                                                    // 4762\n\t\tthis._pathRoot.style[L.DomUtil.TRANSFORM] =                                                                       // 4763\n\t\t        L.DomUtil.getTranslateString(offset) + ' scale(' + scale + ') ';                                          // 4764\n                                                                                                                    // 4765\n\t\tthis._pathZooming = true;                                                                                         // 4766\n\t},                                                                                                                 // 4767\n                                                                                                                    // 4768\n\t_endPathZoom: function () {                                                                                        // 4769\n\t\tthis._pathZooming = false;                                                                                        // 4770\n\t},                                                                                                                 // 4771\n                                                                                                                    // 4772\n\t_updateSvgViewport: function () {                                                                                  // 4773\n                                                                                                                    // 4774\n\t\tif (this._pathZooming) {                                                                                          // 4775\n\t\t\t// Do not update SVGs while a zoom animation is going on otherwise the animation will break.                     // 4776\n\t\t\t// When the zoom animation ends we will be updated again anyway                                                  // 4777\n\t\t\t// This fixes the case where you do a momentum move and zoom while the move is still ongoing.                    // 4778\n\t\t\treturn;                                                                                                          // 4779\n\t\t}                                                                                                                 // 4780\n                                                                                                                    // 4781\n\t\tthis._updatePathViewport();                                                                                       // 4782\n                                                                                                                    // 4783\n\t\tvar vp = this._pathViewport,                                                                                      // 4784\n\t\t    min = vp.min,                                                                                                 // 4785\n\t\t    max = vp.max,                                                                                                 // 4786\n\t\t    width = max.x - min.x,                                                                                        // 4787\n\t\t    height = max.y - min.y,                                                                                       // 4788\n\t\t    root = this._pathRoot,                                                                                        // 4789\n\t\t    pane = this._panes.overlayPane;                                                                               // 4790\n                                                                                                                    // 4791\n\t\t// Hack to make flicker on drag end on mobile webkit less irritating                                              // 4792\n\t\tif (L.Browser.mobileWebkit) {                                                                                     // 4793\n\t\t\tpane.removeChild(root);                                                                                          // 4794\n\t\t}                                                                                                                 // 4795\n                                                                                                                    // 4796\n\t\tL.DomUtil.setPosition(root, min);                                                                                 // 4797\n\t\troot.setAttribute('width', width);                                                                                // 4798\n\t\troot.setAttribute('height', height);                                                                              // 4799\n\t\troot.setAttribute('viewBox', [min.x, min.y, width, height].join(' '));                                            // 4800\n                                                                                                                    // 4801\n\t\tif (L.Browser.mobileWebkit) {                                                                                     // 4802\n\t\t\tpane.appendChild(root);                                                                                          // 4803\n\t\t}                                                                                                                 // 4804\n\t}                                                                                                                  // 4805\n});                                                                                                                 // 4806\n                                                                                                                    // 4807\n                                                                                                                    // 4808\n/*                                                                                                                  // 4809\n * Popup extension to L.Path (polylines, polygons, circles), adding popup-related methods.                          // 4810\n */                                                                                                                 // 4811\n                                                                                                                    // 4812\nL.Path.include({                                                                                                    // 4813\n                                                                                                                    // 4814\n\tbindPopup: function (content, options) {                                                                           // 4815\n                                                                                                                    // 4816\n\t\tif (content instanceof L.Popup) {                                                                                 // 4817\n\t\t\tthis._popup = content;                                                                                           // 4818\n\t\t} else {                                                                                                          // 4819\n\t\t\tif (!this._popup || options) {                                                                                   // 4820\n\t\t\t\tthis._popup = new L.Popup(options, this);                                                                       // 4821\n\t\t\t}                                                                                                                // 4822\n\t\t\tthis._popup.setContent(content);                                                                                 // 4823\n\t\t}                                                                                                                 // 4824\n                                                                                                                    // 4825\n\t\tif (!this._popupHandlersAdded) {                                                                                  // 4826\n\t\t\tthis                                                                                                             // 4827\n\t\t\t    .on('click', this._openPopup, this)                                                                          // 4828\n\t\t\t    .on('remove', this.closePopup, this);                                                                        // 4829\n                                                                                                                    // 4830\n\t\t\tthis._popupHandlersAdded = true;                                                                                 // 4831\n\t\t}                                                                                                                 // 4832\n                                                                                                                    // 4833\n\t\treturn this;                                                                                                      // 4834\n\t},                                                                                                                 // 4835\n                                                                                                                    // 4836\n\tunbindPopup: function () {                                                                                         // 4837\n\t\tif (this._popup) {                                                                                                // 4838\n\t\t\tthis._popup = null;                                                                                              // 4839\n\t\t\tthis                                                                                                             // 4840\n\t\t\t    .off('click', this._openPopup)                                                                               // 4841\n\t\t\t    .off('remove', this.closePopup);                                                                             // 4842\n                                                                                                                    // 4843\n\t\t\tthis._popupHandlersAdded = false;                                                                                // 4844\n\t\t}                                                                                                                 // 4845\n\t\treturn this;                                                                                                      // 4846\n\t},                                                                                                                 // 4847\n                                                                                                                    // 4848\n\topenPopup: function (latlng) {                                                                                     // 4849\n                                                                                                                    // 4850\n\t\tif (this._popup) {                                                                                                // 4851\n\t\t\t// open the popup from one of the path's points if not specified                                                 // 4852\n\t\t\tlatlng = latlng || this._latlng ||                                                                               // 4853\n\t\t\t         this._latlngs[Math.floor(this._latlngs.length / 2)];                                                    // 4854\n                                                                                                                    // 4855\n\t\t\tthis._openPopup({latlng: latlng});                                                                               // 4856\n\t\t}                                                                                                                 // 4857\n                                                                                                                    // 4858\n\t\treturn this;                                                                                                      // 4859\n\t},                                                                                                                 // 4860\n                                                                                                                    // 4861\n\tclosePopup: function () {                                                                                          // 4862\n\t\tif (this._popup) {                                                                                                // 4863\n\t\t\tthis._popup._close();                                                                                            // 4864\n\t\t}                                                                                                                 // 4865\n\t\treturn this;                                                                                                      // 4866\n\t},                                                                                                                 // 4867\n                                                                                                                    // 4868\n\t_openPopup: function (e) {                                                                                         // 4869\n\t\tthis._popup.setLatLng(e.latlng);                                                                                  // 4870\n\t\tthis._map.openPopup(this._popup);                                                                                 // 4871\n\t}                                                                                                                  // 4872\n});                                                                                                                 // 4873\n                                                                                                                    // 4874\n                                                                                                                    // 4875\n/*                                                                                                                  // 4876\n * Vector rendering for IE6-8 through VML.                                                                          // 4877\n * Thanks to Dmitry Baranovsky and his Raphael library for inspiration!                                             // 4878\n */                                                                                                                 // 4879\n                                                                                                                    // 4880\nL.Browser.vml = !L.Browser.svg && (function () {                                                                    // 4881\n\ttry {                                                                                                              // 4882\n\t\tvar div = document.createElement('div');                                                                          // 4883\n\t\tdiv.innerHTML = '<v:shape adj=\"1\"/>';                                                                             // 4884\n                                                                                                                    // 4885\n\t\tvar shape = div.firstChild;                                                                                       // 4886\n\t\tshape.style.behavior = 'url(#default#VML)';                                                                       // 4887\n                                                                                                                    // 4888\n\t\treturn shape && (typeof shape.adj === 'object');                                                                  // 4889\n                                                                                                                    // 4890\n\t} catch (e) {                                                                                                      // 4891\n\t\treturn false;                                                                                                     // 4892\n\t}                                                                                                                  // 4893\n}());                                                                                                               // 4894\n                                                                                                                    // 4895\nL.Path = L.Browser.svg || !L.Browser.vml ? L.Path : L.Path.extend({                                                 // 4896\n\tstatics: {                                                                                                         // 4897\n\t\tVML: true,                                                                                                        // 4898\n\t\tCLIP_PADDING: 0.02                                                                                                // 4899\n\t},                                                                                                                 // 4900\n                                                                                                                    // 4901\n\t_createElement: (function () {                                                                                     // 4902\n\t\ttry {                                                                                                             // 4903\n\t\t\tdocument.namespaces.add('lvml', 'urn:schemas-microsoft-com:vml');                                                // 4904\n\t\t\treturn function (name) {                                                                                         // 4905\n\t\t\t\treturn document.createElement('<lvml:' + name + ' class=\"lvml\">');                                              // 4906\n\t\t\t};                                                                                                               // 4907\n\t\t} catch (e) {                                                                                                     // 4908\n\t\t\treturn function (name) {                                                                                         // 4909\n\t\t\t\treturn document.createElement(                                                                                  // 4910\n\t\t\t\t        '<' + name + ' xmlns=\"urn:schemas-microsoft.com:vml\" class=\"lvml\">');                                   // 4911\n\t\t\t};                                                                                                               // 4912\n\t\t}                                                                                                                 // 4913\n\t}()),                                                                                                              // 4914\n                                                                                                                    // 4915\n\t_initPath: function () {                                                                                           // 4916\n\t\tvar container = this._container = this._createElement('shape');                                                   // 4917\n                                                                                                                    // 4918\n\t\tL.DomUtil.addClass(container, 'leaflet-vml-shape' +                                                               // 4919\n\t\t\t(this.options.className ? ' ' + this.options.className : ''));                                                   // 4920\n                                                                                                                    // 4921\n\t\tif (this.options.clickable) {                                                                                     // 4922\n\t\t\tL.DomUtil.addClass(container, 'leaflet-clickable');                                                              // 4923\n\t\t}                                                                                                                 // 4924\n                                                                                                                    // 4925\n\t\tcontainer.coordsize = '1 1';                                                                                      // 4926\n                                                                                                                    // 4927\n\t\tthis._path = this._createElement('path');                                                                         // 4928\n\t\tcontainer.appendChild(this._path);                                                                                // 4929\n                                                                                                                    // 4930\n\t\tthis._map._pathRoot.appendChild(container);                                                                       // 4931\n\t},                                                                                                                 // 4932\n                                                                                                                    // 4933\n\t_initStyle: function () {                                                                                          // 4934\n\t\tthis._updateStyle();                                                                                              // 4935\n\t},                                                                                                                 // 4936\n                                                                                                                    // 4937\n\t_updateStyle: function () {                                                                                        // 4938\n\t\tvar stroke = this._stroke,                                                                                        // 4939\n\t\t    fill = this._fill,                                                                                            // 4940\n\t\t    options = this.options,                                                                                       // 4941\n\t\t    container = this._container;                                                                                  // 4942\n                                                                                                                    // 4943\n\t\tcontainer.stroked = options.stroke;                                                                               // 4944\n\t\tcontainer.filled = options.fill;                                                                                  // 4945\n                                                                                                                    // 4946\n\t\tif (options.stroke) {                                                                                             // 4947\n\t\t\tif (!stroke) {                                                                                                   // 4948\n\t\t\t\tstroke = this._stroke = this._createElement('stroke');                                                          // 4949\n\t\t\t\tstroke.endcap = 'round';                                                                                        // 4950\n\t\t\t\tcontainer.appendChild(stroke);                                                                                  // 4951\n\t\t\t}                                                                                                                // 4952\n\t\t\tstroke.weight = options.weight + 'px';                                                                           // 4953\n\t\t\tstroke.color = options.color;                                                                                    // 4954\n\t\t\tstroke.opacity = options.opacity;                                                                                // 4955\n                                                                                                                    // 4956\n\t\t\tif (options.dashArray) {                                                                                         // 4957\n\t\t\t\tstroke.dashStyle = L.Util.isArray(options.dashArray) ?                                                          // 4958\n\t\t\t\t    options.dashArray.join(' ') :                                                                               // 4959\n\t\t\t\t    options.dashArray.replace(/( *, *)/g, ' ');                                                                 // 4960\n\t\t\t} else {                                                                                                         // 4961\n\t\t\t\tstroke.dashStyle = '';                                                                                          // 4962\n\t\t\t}                                                                                                                // 4963\n\t\t\tif (options.lineCap) {                                                                                           // 4964\n\t\t\t\tstroke.endcap = options.lineCap.replace('butt', 'flat');                                                        // 4965\n\t\t\t}                                                                                                                // 4966\n\t\t\tif (options.lineJoin) {                                                                                          // 4967\n\t\t\t\tstroke.joinstyle = options.lineJoin;                                                                            // 4968\n\t\t\t}                                                                                                                // 4969\n                                                                                                                    // 4970\n\t\t} else if (stroke) {                                                                                              // 4971\n\t\t\tcontainer.removeChild(stroke);                                                                                   // 4972\n\t\t\tthis._stroke = null;                                                                                             // 4973\n\t\t}                                                                                                                 // 4974\n                                                                                                                    // 4975\n\t\tif (options.fill) {                                                                                               // 4976\n\t\t\tif (!fill) {                                                                                                     // 4977\n\t\t\t\tfill = this._fill = this._createElement('fill');                                                                // 4978\n\t\t\t\tcontainer.appendChild(fill);                                                                                    // 4979\n\t\t\t}                                                                                                                // 4980\n\t\t\tfill.color = options.fillColor || options.color;                                                                 // 4981\n\t\t\tfill.opacity = options.fillOpacity;                                                                              // 4982\n                                                                                                                    // 4983\n\t\t} else if (fill) {                                                                                                // 4984\n\t\t\tcontainer.removeChild(fill);                                                                                     // 4985\n\t\t\tthis._fill = null;                                                                                               // 4986\n\t\t}                                                                                                                 // 4987\n\t},                                                                                                                 // 4988\n                                                                                                                    // 4989\n\t_updatePath: function () {                                                                                         // 4990\n\t\tvar style = this._container.style;                                                                                // 4991\n                                                                                                                    // 4992\n\t\tstyle.display = 'none';                                                                                           // 4993\n\t\tthis._path.v = this.getPathString() + ' '; // the space fixes IE empty path string bug                            // 4994\n\t\tstyle.display = '';                                                                                               // 4995\n\t}                                                                                                                  // 4996\n});                                                                                                                 // 4997\n                                                                                                                    // 4998\nL.Map.include(L.Browser.svg || !L.Browser.vml ? {} : {                                                              // 4999\n\t_initPathRoot: function () {                                                                                       // 5000\n\t\tif (this._pathRoot) { return; }                                                                                   // 5001\n                                                                                                                    // 5002\n\t\tvar root = this._pathRoot = document.createElement('div');                                                        // 5003\n\t\troot.className = 'leaflet-vml-container';                                                                         // 5004\n\t\tthis._panes.overlayPane.appendChild(root);                                                                        // 5005\n                                                                                                                    // 5006\n\t\tthis.on('moveend', this._updatePathViewport);                                                                     // 5007\n\t\tthis._updatePathViewport();                                                                                       // 5008\n\t}                                                                                                                  // 5009\n});                                                                                                                 // 5010\n                                                                                                                    // 5011\n                                                                                                                    // 5012\n/*                                                                                                                  // 5013\n * Vector rendering for all browsers that support canvas.                                                           // 5014\n */                                                                                                                 // 5015\n                                                                                                                    // 5016\nL.Browser.canvas = (function () {                                                                                   // 5017\n\treturn !!document.createElement('canvas').getContext;                                                              // 5018\n}());                                                                                                               // 5019\n                                                                                                                    // 5020\nL.Path = (L.Path.SVG && !window.L_PREFER_CANVAS) || !L.Browser.canvas ? L.Path : L.Path.extend({                    // 5021\n\tstatics: {                                                                                                         // 5022\n\t\t//CLIP_PADDING: 0.02, // not sure if there's a need to set it to a small value                                    // 5023\n\t\tCANVAS: true,                                                                                                     // 5024\n\t\tSVG: false                                                                                                        // 5025\n\t},                                                                                                                 // 5026\n                                                                                                                    // 5027\n\tredraw: function () {                                                                                              // 5028\n\t\tif (this._map) {                                                                                                  // 5029\n\t\t\tthis.projectLatlngs();                                                                                           // 5030\n\t\t\tthis._requestUpdate();                                                                                           // 5031\n\t\t}                                                                                                                 // 5032\n\t\treturn this;                                                                                                      // 5033\n\t},                                                                                                                 // 5034\n                                                                                                                    // 5035\n\tsetStyle: function (style) {                                                                                       // 5036\n\t\tL.setOptions(this, style);                                                                                        // 5037\n                                                                                                                    // 5038\n\t\tif (this._map) {                                                                                                  // 5039\n\t\t\tthis._updateStyle();                                                                                             // 5040\n\t\t\tthis._requestUpdate();                                                                                           // 5041\n\t\t}                                                                                                                 // 5042\n\t\treturn this;                                                                                                      // 5043\n\t},                                                                                                                 // 5044\n                                                                                                                    // 5045\n\tonRemove: function (map) {                                                                                         // 5046\n\t\tmap                                                                                                               // 5047\n\t\t    .off('viewreset', this.projectLatlngs, this)                                                                  // 5048\n\t\t    .off('moveend', this._updatePath, this);                                                                      // 5049\n                                                                                                                    // 5050\n\t\tif (this.options.clickable) {                                                                                     // 5051\n\t\t\tthis._map.off('click', this._onClick, this);                                                                     // 5052\n\t\t\tthis._map.off('mousemove', this._onMouseMove, this);                                                             // 5053\n\t\t}                                                                                                                 // 5054\n                                                                                                                    // 5055\n\t\tthis._requestUpdate();                                                                                            // 5056\n\t\t                                                                                                                  // 5057\n\t\tthis.fire('remove');                                                                                              // 5058\n\t\tthis._map = null;                                                                                                 // 5059\n\t},                                                                                                                 // 5060\n                                                                                                                    // 5061\n\t_requestUpdate: function () {                                                                                      // 5062\n\t\tif (this._map && !L.Path._updateRequest) {                                                                        // 5063\n\t\t\tL.Path._updateRequest = L.Util.requestAnimFrame(this._fireMapMoveEnd, this._map);                                // 5064\n\t\t}                                                                                                                 // 5065\n\t},                                                                                                                 // 5066\n                                                                                                                    // 5067\n\t_fireMapMoveEnd: function () {                                                                                     // 5068\n\t\tL.Path._updateRequest = null;                                                                                     // 5069\n\t\tthis.fire('moveend');                                                                                             // 5070\n\t},                                                                                                                 // 5071\n                                                                                                                    // 5072\n\t_initElements: function () {                                                                                       // 5073\n\t\tthis._map._initPathRoot();                                                                                        // 5074\n\t\tthis._ctx = this._map._canvasCtx;                                                                                 // 5075\n\t},                                                                                                                 // 5076\n                                                                                                                    // 5077\n\t_updateStyle: function () {                                                                                        // 5078\n\t\tvar options = this.options;                                                                                       // 5079\n                                                                                                                    // 5080\n\t\tif (options.stroke) {                                                                                             // 5081\n\t\t\tthis._ctx.lineWidth = options.weight;                                                                            // 5082\n\t\t\tthis._ctx.strokeStyle = options.color;                                                                           // 5083\n\t\t}                                                                                                                 // 5084\n\t\tif (options.fill) {                                                                                               // 5085\n\t\t\tthis._ctx.fillStyle = options.fillColor || options.color;                                                        // 5086\n\t\t}                                                                                                                 // 5087\n                                                                                                                    // 5088\n\t\tif (options.lineCap) {                                                                                            // 5089\n\t\t\tthis._ctx.lineCap = options.lineCap;                                                                             // 5090\n\t\t}                                                                                                                 // 5091\n\t\tif (options.lineJoin) {                                                                                           // 5092\n\t\t\tthis._ctx.lineJoin = options.lineJoin;                                                                           // 5093\n\t\t}                                                                                                                 // 5094\n\t},                                                                                                                 // 5095\n                                                                                                                    // 5096\n\t_drawPath: function () {                                                                                           // 5097\n\t\tvar i, j, len, len2, point, drawMethod;                                                                           // 5098\n                                                                                                                    // 5099\n\t\tthis._ctx.beginPath();                                                                                            // 5100\n                                                                                                                    // 5101\n\t\tfor (i = 0, len = this._parts.length; i < len; i++) {                                                             // 5102\n\t\t\tfor (j = 0, len2 = this._parts[i].length; j < len2; j++) {                                                       // 5103\n\t\t\t\tpoint = this._parts[i][j];                                                                                      // 5104\n\t\t\t\tdrawMethod = (j === 0 ? 'move' : 'line') + 'To';                                                                // 5105\n                                                                                                                    // 5106\n\t\t\t\tthis._ctx[drawMethod](point.x, point.y);                                                                        // 5107\n\t\t\t}                                                                                                                // 5108\n\t\t\t// TODO refactor ugly hack                                                                                       // 5109\n\t\t\tif (this instanceof L.Polygon) {                                                                                 // 5110\n\t\t\t\tthis._ctx.closePath();                                                                                          // 5111\n\t\t\t}                                                                                                                // 5112\n\t\t}                                                                                                                 // 5113\n\t},                                                                                                                 // 5114\n                                                                                                                    // 5115\n\t_checkIfEmpty: function () {                                                                                       // 5116\n\t\treturn !this._parts.length;                                                                                       // 5117\n\t},                                                                                                                 // 5118\n                                                                                                                    // 5119\n\t_updatePath: function () {                                                                                         // 5120\n\t\tif (this._checkIfEmpty()) { return; }                                                                             // 5121\n                                                                                                                    // 5122\n\t\tvar ctx = this._ctx,                                                                                              // 5123\n\t\t    options = this.options;                                                                                       // 5124\n                                                                                                                    // 5125\n\t\tthis._drawPath();                                                                                                 // 5126\n\t\tctx.save();                                                                                                       // 5127\n\t\tthis._updateStyle();                                                                                              // 5128\n                                                                                                                    // 5129\n\t\tif (options.fill) {                                                                                               // 5130\n\t\t\tctx.globalAlpha = options.fillOpacity;                                                                           // 5131\n\t\t\tctx.fill(options.fillRule || 'evenodd');                                                                         // 5132\n\t\t}                                                                                                                 // 5133\n                                                                                                                    // 5134\n\t\tif (options.stroke) {                                                                                             // 5135\n\t\t\tctx.globalAlpha = options.opacity;                                                                               // 5136\n\t\t\tctx.stroke();                                                                                                    // 5137\n\t\t}                                                                                                                 // 5138\n                                                                                                                    // 5139\n\t\tctx.restore();                                                                                                    // 5140\n                                                                                                                    // 5141\n\t\t// TODO optimization: 1 fill/stroke for all features with equal style instead of 1 for each feature               // 5142\n\t},                                                                                                                 // 5143\n                                                                                                                    // 5144\n\t_initEvents: function () {                                                                                         // 5145\n\t\tif (this.options.clickable) {                                                                                     // 5146\n\t\t\tthis._map.on('mousemove', this._onMouseMove, this);                                                              // 5147\n\t\t\tthis._map.on('click dblclick contextmenu', this._fireMouseEvent, this);                                          // 5148\n\t\t}                                                                                                                 // 5149\n\t},                                                                                                                 // 5150\n                                                                                                                    // 5151\n\t_fireMouseEvent: function (e) {                                                                                    // 5152\n\t\tif (this._containsPoint(e.layerPoint)) {                                                                          // 5153\n\t\t\tthis.fire(e.type, e);                                                                                            // 5154\n\t\t}                                                                                                                 // 5155\n\t},                                                                                                                 // 5156\n                                                                                                                    // 5157\n\t_onMouseMove: function (e) {                                                                                       // 5158\n\t\tif (!this._map || this._map._animatingZoom) { return; }                                                           // 5159\n                                                                                                                    // 5160\n\t\t// TODO don't do on each move                                                                                     // 5161\n\t\tif (this._containsPoint(e.layerPoint)) {                                                                          // 5162\n\t\t\tthis._ctx.canvas.style.cursor = 'pointer';                                                                       // 5163\n\t\t\tthis._mouseInside = true;                                                                                        // 5164\n\t\t\tthis.fire('mouseover', e);                                                                                       // 5165\n                                                                                                                    // 5166\n\t\t} else if (this._mouseInside) {                                                                                   // 5167\n\t\t\tthis._ctx.canvas.style.cursor = '';                                                                              // 5168\n\t\t\tthis._mouseInside = false;                                                                                       // 5169\n\t\t\tthis.fire('mouseout', e);                                                                                        // 5170\n\t\t}                                                                                                                 // 5171\n\t}                                                                                                                  // 5172\n});                                                                                                                 // 5173\n                                                                                                                    // 5174\nL.Map.include((L.Path.SVG && !window.L_PREFER_CANVAS) || !L.Browser.canvas ? {} : {                                 // 5175\n\t_initPathRoot: function () {                                                                                       // 5176\n\t\tvar root = this._pathRoot,                                                                                        // 5177\n\t\t    ctx;                                                                                                          // 5178\n                                                                                                                    // 5179\n\t\tif (!root) {                                                                                                      // 5180\n\t\t\troot = this._pathRoot = document.createElement('canvas');                                                        // 5181\n\t\t\troot.style.position = 'absolute';                                                                                // 5182\n\t\t\tctx = this._canvasCtx = root.getContext('2d');                                                                   // 5183\n                                                                                                                    // 5184\n\t\t\tctx.lineCap = 'round';                                                                                           // 5185\n\t\t\tctx.lineJoin = 'round';                                                                                          // 5186\n                                                                                                                    // 5187\n\t\t\tthis._panes.overlayPane.appendChild(root);                                                                       // 5188\n                                                                                                                    // 5189\n\t\t\tif (this.options.zoomAnimation) {                                                                                // 5190\n\t\t\t\tthis._pathRoot.className = 'leaflet-zoom-animated';                                                             // 5191\n\t\t\t\tthis.on('zoomanim', this._animatePathZoom);                                                                     // 5192\n\t\t\t\tthis.on('zoomend', this._endPathZoom);                                                                          // 5193\n\t\t\t}                                                                                                                // 5194\n\t\t\tthis.on('moveend', this._updateCanvasViewport);                                                                  // 5195\n\t\t\tthis._updateCanvasViewport();                                                                                    // 5196\n\t\t}                                                                                                                 // 5197\n\t},                                                                                                                 // 5198\n                                                                                                                    // 5199\n\t_updateCanvasViewport: function () {                                                                               // 5200\n\t\t// don't redraw while zooming. See _updateSvgViewport for more details                                            // 5201\n\t\tif (this._pathZooming) { return; }                                                                                // 5202\n\t\tthis._updatePathViewport();                                                                                       // 5203\n                                                                                                                    // 5204\n\t\tvar vp = this._pathViewport,                                                                                      // 5205\n\t\t    min = vp.min,                                                                                                 // 5206\n\t\t    size = vp.max.subtract(min),                                                                                  // 5207\n\t\t    root = this._pathRoot;                                                                                        // 5208\n                                                                                                                    // 5209\n\t\t//TODO check if this works properly on mobile webkit                                                              // 5210\n\t\tL.DomUtil.setPosition(root, min);                                                                                 // 5211\n\t\troot.width = size.x;                                                                                              // 5212\n\t\troot.height = size.y;                                                                                             // 5213\n\t\troot.getContext('2d').translate(-min.x, -min.y);                                                                  // 5214\n\t}                                                                                                                  // 5215\n});                                                                                                                 // 5216\n                                                                                                                    // 5217\n                                                                                                                    // 5218\n/*                                                                                                                  // 5219\n * L.LineUtil contains different utility functions for line segments                                                // 5220\n * and polylines (clipping, simplification, distances, etc.)                                                        // 5221\n */                                                                                                                 // 5222\n                                                                                                                    // 5223\n/*jshint bitwise:false */ // allow bitwise operations for this file                                                 // 5224\n                                                                                                                    // 5225\nL.LineUtil = {                                                                                                      // 5226\n                                                                                                                    // 5227\n\t// Simplify polyline with vertex reduction and Douglas-Peucker simplification.                                     // 5228\n\t// Improves rendering performance dramatically by lessening the number of points to draw.                          // 5229\n                                                                                                                    // 5230\n\tsimplify: function (/*Point[]*/ points, /*Number*/ tolerance) {                                                    // 5231\n\t\tif (!tolerance || !points.length) {                                                                               // 5232\n\t\t\treturn points.slice();                                                                                           // 5233\n\t\t}                                                                                                                 // 5234\n                                                                                                                    // 5235\n\t\tvar sqTolerance = tolerance * tolerance;                                                                          // 5236\n                                                                                                                    // 5237\n\t\t// stage 1: vertex reduction                                                                                      // 5238\n\t\tpoints = this._reducePoints(points, sqTolerance);                                                                 // 5239\n                                                                                                                    // 5240\n\t\t// stage 2: Douglas-Peucker simplification                                                                        // 5241\n\t\tpoints = this._simplifyDP(points, sqTolerance);                                                                   // 5242\n                                                                                                                    // 5243\n\t\treturn points;                                                                                                    // 5244\n\t},                                                                                                                 // 5245\n                                                                                                                    // 5246\n\t// distance from a point to a segment between two points                                                           // 5247\n\tpointToSegmentDistance:  function (/*Point*/ p, /*Point*/ p1, /*Point*/ p2) {                                      // 5248\n\t\treturn Math.sqrt(this._sqClosestPointOnSegment(p, p1, p2, true));                                                 // 5249\n\t},                                                                                                                 // 5250\n                                                                                                                    // 5251\n\tclosestPointOnSegment: function (/*Point*/ p, /*Point*/ p1, /*Point*/ p2) {                                        // 5252\n\t\treturn this._sqClosestPointOnSegment(p, p1, p2);                                                                  // 5253\n\t},                                                                                                                 // 5254\n                                                                                                                    // 5255\n\t// Douglas-Peucker simplification, see http://en.wikipedia.org/wiki/Douglas-Peucker_algorithm                      // 5256\n\t_simplifyDP: function (points, sqTolerance) {                                                                      // 5257\n                                                                                                                    // 5258\n\t\tvar len = points.length,                                                                                          // 5259\n\t\t    ArrayConstructor = typeof Uint8Array !== undefined + '' ? Uint8Array : Array,                                 // 5260\n\t\t    markers = new ArrayConstructor(len);                                                                          // 5261\n                                                                                                                    // 5262\n\t\tmarkers[0] = markers[len - 1] = 1;                                                                                // 5263\n                                                                                                                    // 5264\n\t\tthis._simplifyDPStep(points, markers, sqTolerance, 0, len - 1);                                                   // 5265\n                                                                                                                    // 5266\n\t\tvar i,                                                                                                            // 5267\n\t\t    newPoints = [];                                                                                               // 5268\n                                                                                                                    // 5269\n\t\tfor (i = 0; i < len; i++) {                                                                                       // 5270\n\t\t\tif (markers[i]) {                                                                                                // 5271\n\t\t\t\tnewPoints.push(points[i]);                                                                                      // 5272\n\t\t\t}                                                                                                                // 5273\n\t\t}                                                                                                                 // 5274\n                                                                                                                    // 5275\n\t\treturn newPoints;                                                                                                 // 5276\n\t},                                                                                                                 // 5277\n                                                                                                                    // 5278\n\t_simplifyDPStep: function (points, markers, sqTolerance, first, last) {                                            // 5279\n                                                                                                                    // 5280\n\t\tvar maxSqDist = 0,                                                                                                // 5281\n\t\t    index, i, sqDist;                                                                                             // 5282\n                                                                                                                    // 5283\n\t\tfor (i = first + 1; i <= last - 1; i++) {                                                                         // 5284\n\t\t\tsqDist = this._sqClosestPointOnSegment(points[i], points[first], points[last], true);                            // 5285\n                                                                                                                    // 5286\n\t\t\tif (sqDist > maxSqDist) {                                                                                        // 5287\n\t\t\t\tindex = i;                                                                                                      // 5288\n\t\t\t\tmaxSqDist = sqDist;                                                                                             // 5289\n\t\t\t}                                                                                                                // 5290\n\t\t}                                                                                                                 // 5291\n                                                                                                                    // 5292\n\t\tif (maxSqDist > sqTolerance) {                                                                                    // 5293\n\t\t\tmarkers[index] = 1;                                                                                              // 5294\n                                                                                                                    // 5295\n\t\t\tthis._simplifyDPStep(points, markers, sqTolerance, first, index);                                                // 5296\n\t\t\tthis._simplifyDPStep(points, markers, sqTolerance, index, last);                                                 // 5297\n\t\t}                                                                                                                 // 5298\n\t},                                                                                                                 // 5299\n                                                                                                                    // 5300\n\t// reduce points that are too close to each other to a single point                                                // 5301\n\t_reducePoints: function (points, sqTolerance) {                                                                    // 5302\n\t\tvar reducedPoints = [points[0]];                                                                                  // 5303\n                                                                                                                    // 5304\n\t\tfor (var i = 1, prev = 0, len = points.length; i < len; i++) {                                                    // 5305\n\t\t\tif (this._sqDist(points[i], points[prev]) > sqTolerance) {                                                       // 5306\n\t\t\t\treducedPoints.push(points[i]);                                                                                  // 5307\n\t\t\t\tprev = i;                                                                                                       // 5308\n\t\t\t}                                                                                                                // 5309\n\t\t}                                                                                                                 // 5310\n\t\tif (prev < len - 1) {                                                                                             // 5311\n\t\t\treducedPoints.push(points[len - 1]);                                                                             // 5312\n\t\t}                                                                                                                 // 5313\n\t\treturn reducedPoints;                                                                                             // 5314\n\t},                                                                                                                 // 5315\n                                                                                                                    // 5316\n\t// Cohen-Sutherland line clipping algorithm.                                                                       // 5317\n\t// Used to avoid rendering parts of a polyline that are not currently visible.                                     // 5318\n                                                                                                                    // 5319\n\tclipSegment: function (a, b, bounds, useLastCode) {                                                                // 5320\n\t\tvar codeA = useLastCode ? this._lastCode : this._getBitCode(a, bounds),                                           // 5321\n\t\t    codeB = this._getBitCode(b, bounds),                                                                          // 5322\n                                                                                                                    // 5323\n\t\t    codeOut, p, newCode;                                                                                          // 5324\n                                                                                                                    // 5325\n\t\t// save 2nd code to avoid calculating it on the next segment                                                      // 5326\n\t\tthis._lastCode = codeB;                                                                                           // 5327\n                                                                                                                    // 5328\n\t\twhile (true) {                                                                                                    // 5329\n\t\t\t// if a,b is inside the clip window (trivial accept)                                                             // 5330\n\t\t\tif (!(codeA | codeB)) {                                                                                          // 5331\n\t\t\t\treturn [a, b];                                                                                                  // 5332\n\t\t\t// if a,b is outside the clip window (trivial reject)                                                            // 5333\n\t\t\t} else if (codeA & codeB) {                                                                                      // 5334\n\t\t\t\treturn false;                                                                                                   // 5335\n\t\t\t// other cases                                                                                                   // 5336\n\t\t\t} else {                                                                                                         // 5337\n\t\t\t\tcodeOut = codeA || codeB;                                                                                       // 5338\n\t\t\t\tp = this._getEdgeIntersection(a, b, codeOut, bounds);                                                           // 5339\n\t\t\t\tnewCode = this._getBitCode(p, bounds);                                                                          // 5340\n                                                                                                                    // 5341\n\t\t\t\tif (codeOut === codeA) {                                                                                        // 5342\n\t\t\t\t\ta = p;                                                                                                         // 5343\n\t\t\t\t\tcodeA = newCode;                                                                                               // 5344\n\t\t\t\t} else {                                                                                                        // 5345\n\t\t\t\t\tb = p;                                                                                                         // 5346\n\t\t\t\t\tcodeB = newCode;                                                                                               // 5347\n\t\t\t\t}                                                                                                               // 5348\n\t\t\t}                                                                                                                // 5349\n\t\t}                                                                                                                 // 5350\n\t},                                                                                                                 // 5351\n                                                                                                                    // 5352\n\t_getEdgeIntersection: function (a, b, code, bounds) {                                                              // 5353\n\t\tvar dx = b.x - a.x,                                                                                               // 5354\n\t\t    dy = b.y - a.y,                                                                                               // 5355\n\t\t    min = bounds.min,                                                                                             // 5356\n\t\t    max = bounds.max;                                                                                             // 5357\n                                                                                                                    // 5358\n\t\tif (code & 8) { // top                                                                                            // 5359\n\t\t\treturn new L.Point(a.x + dx * (max.y - a.y) / dy, max.y);                                                        // 5360\n\t\t} else if (code & 4) { // bottom                                                                                  // 5361\n\t\t\treturn new L.Point(a.x + dx * (min.y - a.y) / dy, min.y);                                                        // 5362\n\t\t} else if (code & 2) { // right                                                                                   // 5363\n\t\t\treturn new L.Point(max.x, a.y + dy * (max.x - a.x) / dx);                                                        // 5364\n\t\t} else if (code & 1) { // left                                                                                    // 5365\n\t\t\treturn new L.Point(min.x, a.y + dy * (min.x - a.x) / dx);                                                        // 5366\n\t\t}                                                                                                                 // 5367\n\t},                                                                                                                 // 5368\n                                                                                                                    // 5369\n\t_getBitCode: function (/*Point*/ p, bounds) {                                                                      // 5370\n\t\tvar code = 0;                                                                                                     // 5371\n                                                                                                                    // 5372\n\t\tif (p.x < bounds.min.x) { // left                                                                                 // 5373\n\t\t\tcode |= 1;                                                                                                       // 5374\n\t\t} else if (p.x > bounds.max.x) { // right                                                                         // 5375\n\t\t\tcode |= 2;                                                                                                       // 5376\n\t\t}                                                                                                                 // 5377\n\t\tif (p.y < bounds.min.y) { // bottom                                                                               // 5378\n\t\t\tcode |= 4;                                                                                                       // 5379\n\t\t} else if (p.y > bounds.max.y) { // top                                                                           // 5380\n\t\t\tcode |= 8;                                                                                                       // 5381\n\t\t}                                                                                                                 // 5382\n                                                                                                                    // 5383\n\t\treturn code;                                                                                                      // 5384\n\t},                                                                                                                 // 5385\n                                                                                                                    // 5386\n\t// square distance (to avoid unnecessary Math.sqrt calls)                                                          // 5387\n\t_sqDist: function (p1, p2) {                                                                                       // 5388\n\t\tvar dx = p2.x - p1.x,                                                                                             // 5389\n\t\t    dy = p2.y - p1.y;                                                                                             // 5390\n\t\treturn dx * dx + dy * dy;                                                                                         // 5391\n\t},                                                                                                                 // 5392\n                                                                                                                    // 5393\n\t// return closest point on segment or distance to that point                                                       // 5394\n\t_sqClosestPointOnSegment: function (p, p1, p2, sqDist) {                                                           // 5395\n\t\tvar x = p1.x,                                                                                                     // 5396\n\t\t    y = p1.y,                                                                                                     // 5397\n\t\t    dx = p2.x - x,                                                                                                // 5398\n\t\t    dy = p2.y - y,                                                                                                // 5399\n\t\t    dot = dx * dx + dy * dy,                                                                                      // 5400\n\t\t    t;                                                                                                            // 5401\n                                                                                                                    // 5402\n\t\tif (dot > 0) {                                                                                                    // 5403\n\t\t\tt = ((p.x - x) * dx + (p.y - y) * dy) / dot;                                                                     // 5404\n                                                                                                                    // 5405\n\t\t\tif (t > 1) {                                                                                                     // 5406\n\t\t\t\tx = p2.x;                                                                                                       // 5407\n\t\t\t\ty = p2.y;                                                                                                       // 5408\n\t\t\t} else if (t > 0) {                                                                                              // 5409\n\t\t\t\tx += dx * t;                                                                                                    // 5410\n\t\t\t\ty += dy * t;                                                                                                    // 5411\n\t\t\t}                                                                                                                // 5412\n\t\t}                                                                                                                 // 5413\n                                                                                                                    // 5414\n\t\tdx = p.x - x;                                                                                                     // 5415\n\t\tdy = p.y - y;                                                                                                     // 5416\n                                                                                                                    // 5417\n\t\treturn sqDist ? dx * dx + dy * dy : new L.Point(x, y);                                                            // 5418\n\t}                                                                                                                  // 5419\n};                                                                                                                  // 5420\n                                                                                                                    // 5421\n                                                                                                                    // 5422\n/*                                                                                                                  // 5423\n * L.Polyline is used to display polylines on a map.                                                                // 5424\n */                                                                                                                 // 5425\n                                                                                                                    // 5426\nL.Polyline = L.Path.extend({                                                                                        // 5427\n\tinitialize: function (latlngs, options) {                                                                          // 5428\n\t\tL.Path.prototype.initialize.call(this, options);                                                                  // 5429\n                                                                                                                    // 5430\n\t\tthis._latlngs = this._convertLatLngs(latlngs);                                                                    // 5431\n\t},                                                                                                                 // 5432\n                                                                                                                    // 5433\n\toptions: {                                                                                                         // 5434\n\t\t// how much to simplify the polyline on each zoom level                                                           // 5435\n\t\t// more = better performance and smoother look, less = more accurate                                              // 5436\n\t\tsmoothFactor: 1.0,                                                                                                // 5437\n\t\tnoClip: false                                                                                                     // 5438\n\t},                                                                                                                 // 5439\n                                                                                                                    // 5440\n\tprojectLatlngs: function () {                                                                                      // 5441\n\t\tthis._originalPoints = [];                                                                                        // 5442\n                                                                                                                    // 5443\n\t\tfor (var i = 0, len = this._latlngs.length; i < len; i++) {                                                       // 5444\n\t\t\tthis._originalPoints[i] = this._map.latLngToLayerPoint(this._latlngs[i]);                                        // 5445\n\t\t}                                                                                                                 // 5446\n\t},                                                                                                                 // 5447\n                                                                                                                    // 5448\n\tgetPathString: function () {                                                                                       // 5449\n\t\tfor (var i = 0, len = this._parts.length, str = ''; i < len; i++) {                                               // 5450\n\t\t\tstr += this._getPathPartStr(this._parts[i]);                                                                     // 5451\n\t\t}                                                                                                                 // 5452\n\t\treturn str;                                                                                                       // 5453\n\t},                                                                                                                 // 5454\n                                                                                                                    // 5455\n\tgetLatLngs: function () {                                                                                          // 5456\n\t\treturn this._latlngs;                                                                                             // 5457\n\t},                                                                                                                 // 5458\n                                                                                                                    // 5459\n\tsetLatLngs: function (latlngs) {                                                                                   // 5460\n\t\tthis._latlngs = this._convertLatLngs(latlngs);                                                                    // 5461\n\t\treturn this.redraw();                                                                                             // 5462\n\t},                                                                                                                 // 5463\n                                                                                                                    // 5464\n\taddLatLng: function (latlng) {                                                                                     // 5465\n\t\tthis._latlngs.push(L.latLng(latlng));                                                                             // 5466\n\t\treturn this.redraw();                                                                                             // 5467\n\t},                                                                                                                 // 5468\n                                                                                                                    // 5469\n\tspliceLatLngs: function () { // (Number index, Number howMany)                                                     // 5470\n\t\tvar removed = [].splice.apply(this._latlngs, arguments);                                                          // 5471\n\t\tthis._convertLatLngs(this._latlngs, true);                                                                        // 5472\n\t\tthis.redraw();                                                                                                    // 5473\n\t\treturn removed;                                                                                                   // 5474\n\t},                                                                                                                 // 5475\n                                                                                                                    // 5476\n\tclosestLayerPoint: function (p) {                                                                                  // 5477\n\t\tvar minDistance = Infinity, parts = this._parts, p1, p2, minPoint = null;                                         // 5478\n                                                                                                                    // 5479\n\t\tfor (var j = 0, jLen = parts.length; j < jLen; j++) {                                                             // 5480\n\t\t\tvar points = parts[j];                                                                                           // 5481\n\t\t\tfor (var i = 1, len = points.length; i < len; i++) {                                                             // 5482\n\t\t\t\tp1 = points[i - 1];                                                                                             // 5483\n\t\t\t\tp2 = points[i];                                                                                                 // 5484\n\t\t\t\tvar sqDist = L.LineUtil._sqClosestPointOnSegment(p, p1, p2, true);                                              // 5485\n\t\t\t\tif (sqDist < minDistance) {                                                                                     // 5486\n\t\t\t\t\tminDistance = sqDist;                                                                                          // 5487\n\t\t\t\t\tminPoint = L.LineUtil._sqClosestPointOnSegment(p, p1, p2);                                                     // 5488\n\t\t\t\t}                                                                                                               // 5489\n\t\t\t}                                                                                                                // 5490\n\t\t}                                                                                                                 // 5491\n\t\tif (minPoint) {                                                                                                   // 5492\n\t\t\tminPoint.distance = Math.sqrt(minDistance);                                                                      // 5493\n\t\t}                                                                                                                 // 5494\n\t\treturn minPoint;                                                                                                  // 5495\n\t},                                                                                                                 // 5496\n                                                                                                                    // 5497\n\tgetBounds: function () {                                                                                           // 5498\n\t\treturn new L.LatLngBounds(this.getLatLngs());                                                                     // 5499\n\t},                                                                                                                 // 5500\n                                                                                                                    // 5501\n\t_convertLatLngs: function (latlngs, overwrite) {                                                                   // 5502\n\t\tvar i, len, target = overwrite ? latlngs : [];                                                                    // 5503\n                                                                                                                    // 5504\n\t\tfor (i = 0, len = latlngs.length; i < len; i++) {                                                                 // 5505\n\t\t\tif (L.Util.isArray(latlngs[i]) && typeof latlngs[i][0] !== 'number') {                                           // 5506\n\t\t\t\treturn;                                                                                                         // 5507\n\t\t\t}                                                                                                                // 5508\n\t\t\ttarget[i] = L.latLng(latlngs[i]);                                                                                // 5509\n\t\t}                                                                                                                 // 5510\n\t\treturn target;                                                                                                    // 5511\n\t},                                                                                                                 // 5512\n                                                                                                                    // 5513\n\t_initEvents: function () {                                                                                         // 5514\n\t\tL.Path.prototype._initEvents.call(this);                                                                          // 5515\n\t},                                                                                                                 // 5516\n                                                                                                                    // 5517\n\t_getPathPartStr: function (points) {                                                                               // 5518\n\t\tvar round = L.Path.VML;                                                                                           // 5519\n                                                                                                                    // 5520\n\t\tfor (var j = 0, len2 = points.length, str = '', p; j < len2; j++) {                                               // 5521\n\t\t\tp = points[j];                                                                                                   // 5522\n\t\t\tif (round) {                                                                                                     // 5523\n\t\t\t\tp._round();                                                                                                     // 5524\n\t\t\t}                                                                                                                // 5525\n\t\t\tstr += (j ? 'L' : 'M') + p.x + ' ' + p.y;                                                                        // 5526\n\t\t}                                                                                                                 // 5527\n\t\treturn str;                                                                                                       // 5528\n\t},                                                                                                                 // 5529\n                                                                                                                    // 5530\n\t_clipPoints: function () {                                                                                         // 5531\n\t\tvar points = this._originalPoints,                                                                                // 5532\n\t\t    len = points.length,                                                                                          // 5533\n\t\t    i, k, segment;                                                                                                // 5534\n                                                                                                                    // 5535\n\t\tif (this.options.noClip) {                                                                                        // 5536\n\t\t\tthis._parts = [points];                                                                                          // 5537\n\t\t\treturn;                                                                                                          // 5538\n\t\t}                                                                                                                 // 5539\n                                                                                                                    // 5540\n\t\tthis._parts = [];                                                                                                 // 5541\n                                                                                                                    // 5542\n\t\tvar parts = this._parts,                                                                                          // 5543\n\t\t    vp = this._map._pathViewport,                                                                                 // 5544\n\t\t    lu = L.LineUtil;                                                                                              // 5545\n                                                                                                                    // 5546\n\t\tfor (i = 0, k = 0; i < len - 1; i++) {                                                                            // 5547\n\t\t\tsegment = lu.clipSegment(points[i], points[i + 1], vp, i);                                                       // 5548\n\t\t\tif (!segment) {                                                                                                  // 5549\n\t\t\t\tcontinue;                                                                                                       // 5550\n\t\t\t}                                                                                                                // 5551\n                                                                                                                    // 5552\n\t\t\tparts[k] = parts[k] || [];                                                                                       // 5553\n\t\t\tparts[k].push(segment[0]);                                                                                       // 5554\n                                                                                                                    // 5555\n\t\t\t// if segment goes out of screen, or it's the last one, it's the end of the line part                            // 5556\n\t\t\tif ((segment[1] !== points[i + 1]) || (i === len - 2)) {                                                         // 5557\n\t\t\t\tparts[k].push(segment[1]);                                                                                      // 5558\n\t\t\t\tk++;                                                                                                            // 5559\n\t\t\t}                                                                                                                // 5560\n\t\t}                                                                                                                 // 5561\n\t},                                                                                                                 // 5562\n                                                                                                                    // 5563\n\t// simplify each clipped part of the polyline                                                                      // 5564\n\t_simplifyPoints: function () {                                                                                     // 5565\n\t\tvar parts = this._parts,                                                                                          // 5566\n\t\t    lu = L.LineUtil;                                                                                              // 5567\n                                                                                                                    // 5568\n\t\tfor (var i = 0, len = parts.length; i < len; i++) {                                                               // 5569\n\t\t\tparts[i] = lu.simplify(parts[i], this.options.smoothFactor);                                                     // 5570\n\t\t}                                                                                                                 // 5571\n\t},                                                                                                                 // 5572\n                                                                                                                    // 5573\n\t_updatePath: function () {                                                                                         // 5574\n\t\tif (!this._map) { return; }                                                                                       // 5575\n                                                                                                                    // 5576\n\t\tthis._clipPoints();                                                                                               // 5577\n\t\tthis._simplifyPoints();                                                                                           // 5578\n                                                                                                                    // 5579\n\t\tL.Path.prototype._updatePath.call(this);                                                                          // 5580\n\t}                                                                                                                  // 5581\n});                                                                                                                 // 5582\n                                                                                                                    // 5583\nL.polyline = function (latlngs, options) {                                                                          // 5584\n\treturn new L.Polyline(latlngs, options);                                                                           // 5585\n};                                                                                                                  // 5586\n                                                                                                                    // 5587\n                                                                                                                    // 5588\n/*                                                                                                                  // 5589\n * L.PolyUtil contains utility functions for polygons (clipping, etc.).                                             // 5590\n */                                                                                                                 // 5591\n                                                                                                                    // 5592\n/*jshint bitwise:false */ // allow bitwise operations here                                                          // 5593\n                                                                                                                    // 5594\nL.PolyUtil = {};                                                                                                    // 5595\n                                                                                                                    // 5596\n/*                                                                                                                  // 5597\n * Sutherland-Hodgeman polygon clipping algorithm.                                                                  // 5598\n * Used to avoid rendering parts of a polygon that are not currently visible.                                       // 5599\n */                                                                                                                 // 5600\nL.PolyUtil.clipPolygon = function (points, bounds) {                                                                // 5601\n\tvar clippedPoints,                                                                                                 // 5602\n\t    edges = [1, 4, 2, 8],                                                                                          // 5603\n\t    i, j, k,                                                                                                       // 5604\n\t    a, b,                                                                                                          // 5605\n\t    len, edge, p,                                                                                                  // 5606\n\t    lu = L.LineUtil;                                                                                               // 5607\n                                                                                                                    // 5608\n\tfor (i = 0, len = points.length; i < len; i++) {                                                                   // 5609\n\t\tpoints[i]._code = lu._getBitCode(points[i], bounds);                                                              // 5610\n\t}                                                                                                                  // 5611\n                                                                                                                    // 5612\n\t// for each edge (left, bottom, right, top)                                                                        // 5613\n\tfor (k = 0; k < 4; k++) {                                                                                          // 5614\n\t\tedge = edges[k];                                                                                                  // 5615\n\t\tclippedPoints = [];                                                                                               // 5616\n                                                                                                                    // 5617\n\t\tfor (i = 0, len = points.length, j = len - 1; i < len; j = i++) {                                                 // 5618\n\t\t\ta = points[i];                                                                                                   // 5619\n\t\t\tb = points[j];                                                                                                   // 5620\n                                                                                                                    // 5621\n\t\t\t// if a is inside the clip window                                                                                // 5622\n\t\t\tif (!(a._code & edge)) {                                                                                         // 5623\n\t\t\t\t// if b is outside the clip window (a->b goes out of screen)                                                    // 5624\n\t\t\t\tif (b._code & edge) {                                                                                           // 5625\n\t\t\t\t\tp = lu._getEdgeIntersection(b, a, edge, bounds);                                                               // 5626\n\t\t\t\t\tp._code = lu._getBitCode(p, bounds);                                                                           // 5627\n\t\t\t\t\tclippedPoints.push(p);                                                                                         // 5628\n\t\t\t\t}                                                                                                               // 5629\n\t\t\t\tclippedPoints.push(a);                                                                                          // 5630\n                                                                                                                    // 5631\n\t\t\t// else if b is inside the clip window (a->b enters the screen)                                                  // 5632\n\t\t\t} else if (!(b._code & edge)) {                                                                                  // 5633\n\t\t\t\tp = lu._getEdgeIntersection(b, a, edge, bounds);                                                                // 5634\n\t\t\t\tp._code = lu._getBitCode(p, bounds);                                                                            // 5635\n\t\t\t\tclippedPoints.push(p);                                                                                          // 5636\n\t\t\t}                                                                                                                // 5637\n\t\t}                                                                                                                 // 5638\n\t\tpoints = clippedPoints;                                                                                           // 5639\n\t}                                                                                                                  // 5640\n                                                                                                                    // 5641\n\treturn points;                                                                                                     // 5642\n};                                                                                                                  // 5643\n                                                                                                                    // 5644\n                                                                                                                    // 5645\n/*                                                                                                                  // 5646\n * L.Polygon is used to display polygons on a map.                                                                  // 5647\n */                                                                                                                 // 5648\n                                                                                                                    // 5649\nL.Polygon = L.Polyline.extend({                                                                                     // 5650\n\toptions: {                                                                                                         // 5651\n\t\tfill: true                                                                                                        // 5652\n\t},                                                                                                                 // 5653\n                                                                                                                    // 5654\n\tinitialize: function (latlngs, options) {                                                                          // 5655\n\t\tL.Polyline.prototype.initialize.call(this, latlngs, options);                                                     // 5656\n\t\tthis._initWithHoles(latlngs);                                                                                     // 5657\n\t},                                                                                                                 // 5658\n                                                                                                                    // 5659\n\t_initWithHoles: function (latlngs) {                                                                               // 5660\n\t\tvar i, len, hole;                                                                                                 // 5661\n\t\tif (latlngs && L.Util.isArray(latlngs[0]) && (typeof latlngs[0][0] !== 'number')) {                               // 5662\n\t\t\tthis._latlngs = this._convertLatLngs(latlngs[0]);                                                                // 5663\n\t\t\tthis._holes = latlngs.slice(1);                                                                                  // 5664\n                                                                                                                    // 5665\n\t\t\tfor (i = 0, len = this._holes.length; i < len; i++) {                                                            // 5666\n\t\t\t\thole = this._holes[i] = this._convertLatLngs(this._holes[i]);                                                   // 5667\n\t\t\t\tif (hole[0].equals(hole[hole.length - 1])) {                                                                    // 5668\n\t\t\t\t\thole.pop();                                                                                                    // 5669\n\t\t\t\t}                                                                                                               // 5670\n\t\t\t}                                                                                                                // 5671\n\t\t}                                                                                                                 // 5672\n                                                                                                                    // 5673\n\t\t// filter out last point if its equal to the first one                                                            // 5674\n\t\tlatlngs = this._latlngs;                                                                                          // 5675\n                                                                                                                    // 5676\n\t\tif (latlngs.length >= 2 && latlngs[0].equals(latlngs[latlngs.length - 1])) {                                      // 5677\n\t\t\tlatlngs.pop();                                                                                                   // 5678\n\t\t}                                                                                                                 // 5679\n\t},                                                                                                                 // 5680\n                                                                                                                    // 5681\n\tprojectLatlngs: function () {                                                                                      // 5682\n\t\tL.Polyline.prototype.projectLatlngs.call(this);                                                                   // 5683\n                                                                                                                    // 5684\n\t\t// project polygon holes points                                                                                   // 5685\n\t\t// TODO move this logic to Polyline to get rid of duplication                                                     // 5686\n\t\tthis._holePoints = [];                                                                                            // 5687\n                                                                                                                    // 5688\n\t\tif (!this._holes) { return; }                                                                                     // 5689\n                                                                                                                    // 5690\n\t\tvar i, j, len, len2;                                                                                              // 5691\n                                                                                                                    // 5692\n\t\tfor (i = 0, len = this._holes.length; i < len; i++) {                                                             // 5693\n\t\t\tthis._holePoints[i] = [];                                                                                        // 5694\n                                                                                                                    // 5695\n\t\t\tfor (j = 0, len2 = this._holes[i].length; j < len2; j++) {                                                       // 5696\n\t\t\t\tthis._holePoints[i][j] = this._map.latLngToLayerPoint(this._holes[i][j]);                                       // 5697\n\t\t\t}                                                                                                                // 5698\n\t\t}                                                                                                                 // 5699\n\t},                                                                                                                 // 5700\n                                                                                                                    // 5701\n\tsetLatLngs: function (latlngs) {                                                                                   // 5702\n\t\tif (latlngs && L.Util.isArray(latlngs[0]) && (typeof latlngs[0][0] !== 'number')) {                               // 5703\n\t\t\tthis._initWithHoles(latlngs);                                                                                    // 5704\n\t\t\treturn this.redraw();                                                                                            // 5705\n\t\t} else {                                                                                                          // 5706\n\t\t\treturn L.Polyline.prototype.setLatLngs.call(this, latlngs);                                                      // 5707\n\t\t}                                                                                                                 // 5708\n\t},                                                                                                                 // 5709\n                                                                                                                    // 5710\n\t_clipPoints: function () {                                                                                         // 5711\n\t\tvar points = this._originalPoints,                                                                                // 5712\n\t\t    newParts = [];                                                                                                // 5713\n                                                                                                                    // 5714\n\t\tthis._parts = [points].concat(this._holePoints);                                                                  // 5715\n                                                                                                                    // 5716\n\t\tif (this.options.noClip) { return; }                                                                              // 5717\n                                                                                                                    // 5718\n\t\tfor (var i = 0, len = this._parts.length; i < len; i++) {                                                         // 5719\n\t\t\tvar clipped = L.PolyUtil.clipPolygon(this._parts[i], this._map._pathViewport);                                   // 5720\n\t\t\tif (clipped.length) {                                                                                            // 5721\n\t\t\t\tnewParts.push(clipped);                                                                                         // 5722\n\t\t\t}                                                                                                                // 5723\n\t\t}                                                                                                                 // 5724\n                                                                                                                    // 5725\n\t\tthis._parts = newParts;                                                                                           // 5726\n\t},                                                                                                                 // 5727\n                                                                                                                    // 5728\n\t_getPathPartStr: function (points) {                                                                               // 5729\n\t\tvar str = L.Polyline.prototype._getPathPartStr.call(this, points);                                                // 5730\n\t\treturn str + (L.Browser.svg ? 'z' : 'x');                                                                         // 5731\n\t}                                                                                                                  // 5732\n});                                                                                                                 // 5733\n                                                                                                                    // 5734\nL.polygon = function (latlngs, options) {                                                                           // 5735\n\treturn new L.Polygon(latlngs, options);                                                                            // 5736\n};                                                                                                                  // 5737\n                                                                                                                    // 5738\n                                                                                                                    // 5739\n/*                                                                                                                  // 5740\n * Contains L.MultiPolyline and L.MultiPolygon layers.                                                              // 5741\n */                                                                                                                 // 5742\n                                                                                                                    // 5743\n(function () {                                                                                                      // 5744\n\tfunction createMulti(Klass) {                                                                                      // 5745\n                                                                                                                    // 5746\n\t\treturn L.FeatureGroup.extend({                                                                                    // 5747\n                                                                                                                    // 5748\n\t\t\tinitialize: function (latlngs, options) {                                                                        // 5749\n\t\t\t\tthis._layers = {};                                                                                              // 5750\n\t\t\t\tthis._options = options;                                                                                        // 5751\n\t\t\t\tthis.setLatLngs(latlngs);                                                                                       // 5752\n\t\t\t},                                                                                                               // 5753\n                                                                                                                    // 5754\n\t\t\tsetLatLngs: function (latlngs) {                                                                                 // 5755\n\t\t\t\tvar i = 0,                                                                                                      // 5756\n\t\t\t\t    len = latlngs.length;                                                                                       // 5757\n                                                                                                                    // 5758\n\t\t\t\tthis.eachLayer(function (layer) {                                                                               // 5759\n\t\t\t\t\tif (i < len) {                                                                                                 // 5760\n\t\t\t\t\t\tlayer.setLatLngs(latlngs[i++]);                                                                               // 5761\n\t\t\t\t\t} else {                                                                                                       // 5762\n\t\t\t\t\t\tthis.removeLayer(layer);                                                                                      // 5763\n\t\t\t\t\t}                                                                                                              // 5764\n\t\t\t\t}, this);                                                                                                       // 5765\n                                                                                                                    // 5766\n\t\t\t\twhile (i < len) {                                                                                               // 5767\n\t\t\t\t\tthis.addLayer(new Klass(latlngs[i++], this._options));                                                         // 5768\n\t\t\t\t}                                                                                                               // 5769\n                                                                                                                    // 5770\n\t\t\t\treturn this;                                                                                                    // 5771\n\t\t\t},                                                                                                               // 5772\n                                                                                                                    // 5773\n\t\t\tgetLatLngs: function () {                                                                                        // 5774\n\t\t\t\tvar latlngs = [];                                                                                               // 5775\n                                                                                                                    // 5776\n\t\t\t\tthis.eachLayer(function (layer) {                                                                               // 5777\n\t\t\t\t\tlatlngs.push(layer.getLatLngs());                                                                              // 5778\n\t\t\t\t});                                                                                                             // 5779\n                                                                                                                    // 5780\n\t\t\t\treturn latlngs;                                                                                                 // 5781\n\t\t\t}                                                                                                                // 5782\n\t\t});                                                                                                               // 5783\n\t}                                                                                                                  // 5784\n                                                                                                                    // 5785\n\tL.MultiPolyline = createMulti(L.Polyline);                                                                         // 5786\n\tL.MultiPolygon = createMulti(L.Polygon);                                                                           // 5787\n                                                                                                                    // 5788\n\tL.multiPolyline = function (latlngs, options) {                                                                    // 5789\n\t\treturn new L.MultiPolyline(latlngs, options);                                                                     // 5790\n\t};                                                                                                                 // 5791\n                                                                                                                    // 5792\n\tL.multiPolygon = function (latlngs, options) {                                                                     // 5793\n\t\treturn new L.MultiPolygon(latlngs, options);                                                                      // 5794\n\t};                                                                                                                 // 5795\n}());                                                                                                               // 5796\n                                                                                                                    // 5797\n                                                                                                                    // 5798\n/*                                                                                                                  // 5799\n * L.Rectangle extends Polygon and creates a rectangle when passed a LatLngBounds object.                           // 5800\n */                                                                                                                 // 5801\n                                                                                                                    // 5802\nL.Rectangle = L.Polygon.extend({                                                                                    // 5803\n\tinitialize: function (latLngBounds, options) {                                                                     // 5804\n\t\tL.Polygon.prototype.initialize.call(this, this._boundsToLatLngs(latLngBounds), options);                          // 5805\n\t},                                                                                                                 // 5806\n                                                                                                                    // 5807\n\tsetBounds: function (latLngBounds) {                                                                               // 5808\n\t\tthis.setLatLngs(this._boundsToLatLngs(latLngBounds));                                                             // 5809\n\t},                                                                                                                 // 5810\n                                                                                                                    // 5811\n\t_boundsToLatLngs: function (latLngBounds) {                                                                        // 5812\n\t\tlatLngBounds = L.latLngBounds(latLngBounds);                                                                      // 5813\n\t\treturn [                                                                                                          // 5814\n\t\t\tlatLngBounds.getSouthWest(),                                                                                     // 5815\n\t\t\tlatLngBounds.getNorthWest(),                                                                                     // 5816\n\t\t\tlatLngBounds.getNorthEast(),                                                                                     // 5817\n\t\t\tlatLngBounds.getSouthEast()                                                                                      // 5818\n\t\t];                                                                                                                // 5819\n\t}                                                                                                                  // 5820\n});                                                                                                                 // 5821\n                                                                                                                    // 5822\nL.rectangle = function (latLngBounds, options) {                                                                    // 5823\n\treturn new L.Rectangle(latLngBounds, options);                                                                     // 5824\n};                                                                                                                  // 5825\n                                                                                                                    // 5826\n                                                                                                                    // 5827\n/*                                                                                                                  // 5828\n * L.Circle is a circle overlay (with a certain radius in meters).                                                  // 5829\n */                                                                                                                 // 5830\n                                                                                                                    // 5831\nL.Circle = L.Path.extend({                                                                                          // 5832\n\tinitialize: function (latlng, radius, options) {                                                                   // 5833\n\t\tL.Path.prototype.initialize.call(this, options);                                                                  // 5834\n                                                                                                                    // 5835\n\t\tthis._latlng = L.latLng(latlng);                                                                                  // 5836\n\t\tthis._mRadius = radius;                                                                                           // 5837\n\t},                                                                                                                 // 5838\n                                                                                                                    // 5839\n\toptions: {                                                                                                         // 5840\n\t\tfill: true                                                                                                        // 5841\n\t},                                                                                                                 // 5842\n                                                                                                                    // 5843\n\tsetLatLng: function (latlng) {                                                                                     // 5844\n\t\tthis._latlng = L.latLng(latlng);                                                                                  // 5845\n\t\treturn this.redraw();                                                                                             // 5846\n\t},                                                                                                                 // 5847\n                                                                                                                    // 5848\n\tsetRadius: function (radius) {                                                                                     // 5849\n\t\tthis._mRadius = radius;                                                                                           // 5850\n\t\treturn this.redraw();                                                                                             // 5851\n\t},                                                                                                                 // 5852\n                                                                                                                    // 5853\n\tprojectLatlngs: function () {                                                                                      // 5854\n\t\tvar lngRadius = this._getLngRadius(),                                                                             // 5855\n\t\t    latlng = this._latlng,                                                                                        // 5856\n\t\t    pointLeft = this._map.latLngToLayerPoint([latlng.lat, latlng.lng - lngRadius]);                               // 5857\n                                                                                                                    // 5858\n\t\tthis._point = this._map.latLngToLayerPoint(latlng);                                                               // 5859\n\t\tthis._radius = Math.max(this._point.x - pointLeft.x, 1);                                                          // 5860\n\t},                                                                                                                 // 5861\n                                                                                                                    // 5862\n\tgetBounds: function () {                                                                                           // 5863\n\t\tvar lngRadius = this._getLngRadius(),                                                                             // 5864\n\t\t    latRadius = (this._mRadius / 40075017) * 360,                                                                 // 5865\n\t\t    latlng = this._latlng;                                                                                        // 5866\n                                                                                                                    // 5867\n\t\treturn new L.LatLngBounds(                                                                                        // 5868\n\t\t        [latlng.lat - latRadius, latlng.lng - lngRadius],                                                         // 5869\n\t\t        [latlng.lat + latRadius, latlng.lng + lngRadius]);                                                        // 5870\n\t},                                                                                                                 // 5871\n                                                                                                                    // 5872\n\tgetLatLng: function () {                                                                                           // 5873\n\t\treturn this._latlng;                                                                                              // 5874\n\t},                                                                                                                 // 5875\n                                                                                                                    // 5876\n\tgetPathString: function () {                                                                                       // 5877\n\t\tvar p = this._point,                                                                                              // 5878\n\t\t    r = this._radius;                                                                                             // 5879\n                                                                                                                    // 5880\n\t\tif (this._checkIfEmpty()) {                                                                                       // 5881\n\t\t\treturn '';                                                                                                       // 5882\n\t\t}                                                                                                                 // 5883\n                                                                                                                    // 5884\n\t\tif (L.Browser.svg) {                                                                                              // 5885\n\t\t\treturn 'M' + p.x + ',' + (p.y - r) +                                                                             // 5886\n\t\t\t       'A' + r + ',' + r + ',0,1,1,' +                                                                           // 5887\n\t\t\t       (p.x - 0.1) + ',' + (p.y - r) + ' z';                                                                     // 5888\n\t\t} else {                                                                                                          // 5889\n\t\t\tp._round();                                                                                                      // 5890\n\t\t\tr = Math.round(r);                                                                                               // 5891\n\t\t\treturn 'AL ' + p.x + ',' + p.y + ' ' + r + ',' + r + ' 0,' + (65535 * 360);                                      // 5892\n\t\t}                                                                                                                 // 5893\n\t},                                                                                                                 // 5894\n                                                                                                                    // 5895\n\tgetRadius: function () {                                                                                           // 5896\n\t\treturn this._mRadius;                                                                                             // 5897\n\t},                                                                                                                 // 5898\n                                                                                                                    // 5899\n\t// TODO Earth hardcoded, move into projection code!                                                                // 5900\n                                                                                                                    // 5901\n\t_getLatRadius: function () {                                                                                       // 5902\n\t\treturn (this._mRadius / 40075017) * 360;                                                                          // 5903\n\t},                                                                                                                 // 5904\n                                                                                                                    // 5905\n\t_getLngRadius: function () {                                                                                       // 5906\n\t\treturn this._getLatRadius() / Math.cos(L.LatLng.DEG_TO_RAD * this._latlng.lat);                                   // 5907\n\t},                                                                                                                 // 5908\n                                                                                                                    // 5909\n\t_checkIfEmpty: function () {                                                                                       // 5910\n\t\tif (!this._map) {                                                                                                 // 5911\n\t\t\treturn false;                                                                                                    // 5912\n\t\t}                                                                                                                 // 5913\n\t\tvar vp = this._map._pathViewport,                                                                                 // 5914\n\t\t    r = this._radius,                                                                                             // 5915\n\t\t    p = this._point;                                                                                              // 5916\n                                                                                                                    // 5917\n\t\treturn p.x - r > vp.max.x || p.y - r > vp.max.y ||                                                                // 5918\n\t\t       p.x + r < vp.min.x || p.y + r < vp.min.y;                                                                  // 5919\n\t}                                                                                                                  // 5920\n});                                                                                                                 // 5921\n                                                                                                                    // 5922\nL.circle = function (latlng, radius, options) {                                                                     // 5923\n\treturn new L.Circle(latlng, radius, options);                                                                      // 5924\n};                                                                                                                  // 5925\n                                                                                                                    // 5926\n                                                                                                                    // 5927\n/*                                                                                                                  // 5928\n * L.CircleMarker is a circle overlay with a permanent pixel radius.                                                // 5929\n */                                                                                                                 // 5930\n                                                                                                                    // 5931\nL.CircleMarker = L.Circle.extend({                                                                                  // 5932\n\toptions: {                                                                                                         // 5933\n\t\tradius: 10,                                                                                                       // 5934\n\t\tweight: 2                                                                                                         // 5935\n\t},                                                                                                                 // 5936\n                                                                                                                    // 5937\n\tinitialize: function (latlng, options) {                                                                           // 5938\n\t\tL.Circle.prototype.initialize.call(this, latlng, null, options);                                                  // 5939\n\t\tthis._radius = this.options.radius;                                                                               // 5940\n\t},                                                                                                                 // 5941\n                                                                                                                    // 5942\n\tprojectLatlngs: function () {                                                                                      // 5943\n\t\tthis._point = this._map.latLngToLayerPoint(this._latlng);                                                         // 5944\n\t},                                                                                                                 // 5945\n                                                                                                                    // 5946\n\t_updateStyle : function () {                                                                                       // 5947\n\t\tL.Circle.prototype._updateStyle.call(this);                                                                       // 5948\n\t\tthis.setRadius(this.options.radius);                                                                              // 5949\n\t},                                                                                                                 // 5950\n                                                                                                                    // 5951\n\tsetLatLng: function (latlng) {                                                                                     // 5952\n\t\tL.Circle.prototype.setLatLng.call(this, latlng);                                                                  // 5953\n\t\tif (this._popup && this._popup._isOpen) {                                                                         // 5954\n\t\t\tthis._popup.setLatLng(latlng);                                                                                   // 5955\n\t\t}                                                                                                                 // 5956\n\t\treturn this;                                                                                                      // 5957\n\t},                                                                                                                 // 5958\n                                                                                                                    // 5959\n\tsetRadius: function (radius) {                                                                                     // 5960\n\t\tthis.options.radius = this._radius = radius;                                                                      // 5961\n\t\treturn this.redraw();                                                                                             // 5962\n\t},                                                                                                                 // 5963\n                                                                                                                    // 5964\n\tgetRadius: function () {                                                                                           // 5965\n\t\treturn this._radius;                                                                                              // 5966\n\t}                                                                                                                  // 5967\n});                                                                                                                 // 5968\n                                                                                                                    // 5969\nL.circleMarker = function (latlng, options) {                                                                       // 5970\n\treturn new L.CircleMarker(latlng, options);                                                                        // 5971\n};                                                                                                                  // 5972\n                                                                                                                    // 5973\n                                                                                                                    // 5974\n/*                                                                                                                  // 5975\n * Extends L.Polyline to be able to manually detect clicks on Canvas-rendered polylines.                            // 5976\n */                                                                                                                 // 5977\n                                                                                                                    // 5978\nL.Polyline.include(!L.Path.CANVAS ? {} : {                                                                          // 5979\n\t_containsPoint: function (p, closed) {                                                                             // 5980\n\t\tvar i, j, k, len, len2, dist, part,                                                                               // 5981\n\t\t    w = this.options.weight / 2;                                                                                  // 5982\n                                                                                                                    // 5983\n\t\tif (L.Browser.touch) {                                                                                            // 5984\n\t\t\tw += 10; // polyline click tolerance on touch devices                                                            // 5985\n\t\t}                                                                                                                 // 5986\n                                                                                                                    // 5987\n\t\tfor (i = 0, len = this._parts.length; i < len; i++) {                                                             // 5988\n\t\t\tpart = this._parts[i];                                                                                           // 5989\n\t\t\tfor (j = 0, len2 = part.length, k = len2 - 1; j < len2; k = j++) {                                               // 5990\n\t\t\t\tif (!closed && (j === 0)) {                                                                                     // 5991\n\t\t\t\t\tcontinue;                                                                                                      // 5992\n\t\t\t\t}                                                                                                               // 5993\n                                                                                                                    // 5994\n\t\t\t\tdist = L.LineUtil.pointToSegmentDistance(p, part[k], part[j]);                                                  // 5995\n                                                                                                                    // 5996\n\t\t\t\tif (dist <= w) {                                                                                                // 5997\n\t\t\t\t\treturn true;                                                                                                   // 5998\n\t\t\t\t}                                                                                                               // 5999\n\t\t\t}                                                                                                                // 6000\n\t\t}                                                                                                                 // 6001\n\t\treturn false;                                                                                                     // 6002\n\t}                                                                                                                  // 6003\n});                                                                                                                 // 6004\n                                                                                                                    // 6005\n                                                                                                                    // 6006\n/*                                                                                                                  // 6007\n * Extends L.Polygon to be able to manually detect clicks on Canvas-rendered polygons.                              // 6008\n */                                                                                                                 // 6009\n                                                                                                                    // 6010\nL.Polygon.include(!L.Path.CANVAS ? {} : {                                                                           // 6011\n\t_containsPoint: function (p) {                                                                                     // 6012\n\t\tvar inside = false,                                                                                               // 6013\n\t\t    part, p1, p2,                                                                                                 // 6014\n\t\t    i, j, k,                                                                                                      // 6015\n\t\t    len, len2;                                                                                                    // 6016\n                                                                                                                    // 6017\n\t\t// TODO optimization: check if within bounds first                                                                // 6018\n                                                                                                                    // 6019\n\t\tif (L.Polyline.prototype._containsPoint.call(this, p, true)) {                                                    // 6020\n\t\t\t// click on polygon border                                                                                       // 6021\n\t\t\treturn true;                                                                                                     // 6022\n\t\t}                                                                                                                 // 6023\n                                                                                                                    // 6024\n\t\t// ray casting algorithm for detecting if point is in polygon                                                     // 6025\n                                                                                                                    // 6026\n\t\tfor (i = 0, len = this._parts.length; i < len; i++) {                                                             // 6027\n\t\t\tpart = this._parts[i];                                                                                           // 6028\n                                                                                                                    // 6029\n\t\t\tfor (j = 0, len2 = part.length, k = len2 - 1; j < len2; k = j++) {                                               // 6030\n\t\t\t\tp1 = part[j];                                                                                                   // 6031\n\t\t\t\tp2 = part[k];                                                                                                   // 6032\n                                                                                                                    // 6033\n\t\t\t\tif (((p1.y > p.y) !== (p2.y > p.y)) &&                                                                          // 6034\n\t\t\t\t\t\t(p.x < (p2.x - p1.x) * (p.y - p1.y) / (p2.y - p1.y) + p1.x)) {                                                // 6035\n\t\t\t\t\tinside = !inside;                                                                                              // 6036\n\t\t\t\t}                                                                                                               // 6037\n\t\t\t}                                                                                                                // 6038\n\t\t}                                                                                                                 // 6039\n                                                                                                                    // 6040\n\t\treturn inside;                                                                                                    // 6041\n\t}                                                                                                                  // 6042\n});                                                                                                                 // 6043\n                                                                                                                    // 6044\n                                                                                                                    // 6045\n/*                                                                                                                  // 6046\n * Extends L.Circle with Canvas-specific code.                                                                      // 6047\n */                                                                                                                 // 6048\n                                                                                                                    // 6049\nL.Circle.include(!L.Path.CANVAS ? {} : {                                                                            // 6050\n\t_drawPath: function () {                                                                                           // 6051\n\t\tvar p = this._point;                                                                                              // 6052\n\t\tthis._ctx.beginPath();                                                                                            // 6053\n\t\tthis._ctx.arc(p.x, p.y, this._radius, 0, Math.PI * 2, false);                                                     // 6054\n\t},                                                                                                                 // 6055\n                                                                                                                    // 6056\n\t_containsPoint: function (p) {                                                                                     // 6057\n\t\tvar center = this._point,                                                                                         // 6058\n\t\t    w2 = this.options.stroke ? this.options.weight / 2 : 0;                                                       // 6059\n                                                                                                                    // 6060\n\t\treturn (p.distanceTo(center) <= this._radius + w2);                                                               // 6061\n\t}                                                                                                                  // 6062\n});                                                                                                                 // 6063\n                                                                                                                    // 6064\n                                                                                                                    // 6065\n/*                                                                                                                  // 6066\n * CircleMarker canvas specific drawing parts.                                                                      // 6067\n */                                                                                                                 // 6068\n                                                                                                                    // 6069\nL.CircleMarker.include(!L.Path.CANVAS ? {} : {                                                                      // 6070\n\t_updateStyle: function () {                                                                                        // 6071\n\t\tL.Path.prototype._updateStyle.call(this);                                                                         // 6072\n\t}                                                                                                                  // 6073\n});                                                                                                                 // 6074\n                                                                                                                    // 6075\n                                                                                                                    // 6076\n/*                                                                                                                  // 6077\n * L.GeoJSON turns any GeoJSON data into a Leaflet layer.                                                           // 6078\n */                                                                                                                 // 6079\n                                                                                                                    // 6080\nL.GeoJSON = L.FeatureGroup.extend({                                                                                 // 6081\n                                                                                                                    // 6082\n\tinitialize: function (geojson, options) {                                                                          // 6083\n\t\tL.setOptions(this, options);                                                                                      // 6084\n                                                                                                                    // 6085\n\t\tthis._layers = {};                                                                                                // 6086\n                                                                                                                    // 6087\n\t\tif (geojson) {                                                                                                    // 6088\n\t\t\tthis.addData(geojson);                                                                                           // 6089\n\t\t}                                                                                                                 // 6090\n\t},                                                                                                                 // 6091\n                                                                                                                    // 6092\n\taddData: function (geojson) {                                                                                      // 6093\n\t\tvar features = L.Util.isArray(geojson) ? geojson : geojson.features,                                              // 6094\n\t\t    i, len, feature;                                                                                              // 6095\n                                                                                                                    // 6096\n\t\tif (features) {                                                                                                   // 6097\n\t\t\tfor (i = 0, len = features.length; i < len; i++) {                                                               // 6098\n\t\t\t\t// Only add this if geometry or geometries are set and not null                                                 // 6099\n\t\t\t\tfeature = features[i];                                                                                          // 6100\n\t\t\t\tif (feature.geometries || feature.geometry || feature.features || feature.coordinates) {                        // 6101\n\t\t\t\t\tthis.addData(features[i]);                                                                                     // 6102\n\t\t\t\t}                                                                                                               // 6103\n\t\t\t}                                                                                                                // 6104\n\t\t\treturn this;                                                                                                     // 6105\n\t\t}                                                                                                                 // 6106\n                                                                                                                    // 6107\n\t\tvar options = this.options;                                                                                       // 6108\n                                                                                                                    // 6109\n\t\tif (options.filter && !options.filter(geojson)) { return; }                                                       // 6110\n                                                                                                                    // 6111\n\t\tvar layer = L.GeoJSON.geometryToLayer(geojson, options.pointToLayer, options.coordsToLatLng, options);            // 6112\n\t\tlayer.feature = L.GeoJSON.asFeature(geojson);                                                                     // 6113\n                                                                                                                    // 6114\n\t\tlayer.defaultOptions = layer.options;                                                                             // 6115\n\t\tthis.resetStyle(layer);                                                                                           // 6116\n                                                                                                                    // 6117\n\t\tif (options.onEachFeature) {                                                                                      // 6118\n\t\t\toptions.onEachFeature(geojson, layer);                                                                           // 6119\n\t\t}                                                                                                                 // 6120\n                                                                                                                    // 6121\n\t\treturn this.addLayer(layer);                                                                                      // 6122\n\t},                                                                                                                 // 6123\n                                                                                                                    // 6124\n\tresetStyle: function (layer) {                                                                                     // 6125\n\t\tvar style = this.options.style;                                                                                   // 6126\n\t\tif (style) {                                                                                                      // 6127\n\t\t\t// reset any custom styles                                                                                       // 6128\n\t\t\tL.Util.extend(layer.options, layer.defaultOptions);                                                              // 6129\n                                                                                                                    // 6130\n\t\t\tthis._setLayerStyle(layer, style);                                                                               // 6131\n\t\t}                                                                                                                 // 6132\n\t},                                                                                                                 // 6133\n                                                                                                                    // 6134\n\tsetStyle: function (style) {                                                                                       // 6135\n\t\tthis.eachLayer(function (layer) {                                                                                 // 6136\n\t\t\tthis._setLayerStyle(layer, style);                                                                               // 6137\n\t\t}, this);                                                                                                         // 6138\n\t},                                                                                                                 // 6139\n                                                                                                                    // 6140\n\t_setLayerStyle: function (layer, style) {                                                                          // 6141\n\t\tif (typeof style === 'function') {                                                                                // 6142\n\t\t\tstyle = style(layer.feature);                                                                                    // 6143\n\t\t}                                                                                                                 // 6144\n\t\tif (layer.setStyle) {                                                                                             // 6145\n\t\t\tlayer.setStyle(style);                                                                                           // 6146\n\t\t}                                                                                                                 // 6147\n\t}                                                                                                                  // 6148\n});                                                                                                                 // 6149\n                                                                                                                    // 6150\nL.extend(L.GeoJSON, {                                                                                               // 6151\n\tgeometryToLayer: function (geojson, pointToLayer, coordsToLatLng, vectorOptions) {                                 // 6152\n\t\tvar geometry = geojson.type === 'Feature' ? geojson.geometry : geojson,                                           // 6153\n\t\t    coords = geometry.coordinates,                                                                                // 6154\n\t\t    layers = [],                                                                                                  // 6155\n\t\t    latlng, latlngs, i, len;                                                                                      // 6156\n                                                                                                                    // 6157\n\t\tcoordsToLatLng = coordsToLatLng || this.coordsToLatLng;                                                           // 6158\n                                                                                                                    // 6159\n\t\tswitch (geometry.type) {                                                                                          // 6160\n\t\tcase 'Point':                                                                                                     // 6161\n\t\t\tlatlng = coordsToLatLng(coords);                                                                                 // 6162\n\t\t\treturn pointToLayer ? pointToLayer(geojson, latlng) : new L.Marker(latlng);                                      // 6163\n                                                                                                                    // 6164\n\t\tcase 'MultiPoint':                                                                                                // 6165\n\t\t\tfor (i = 0, len = coords.length; i < len; i++) {                                                                 // 6166\n\t\t\t\tlatlng = coordsToLatLng(coords[i]);                                                                             // 6167\n\t\t\t\tlayers.push(pointToLayer ? pointToLayer(geojson, latlng) : new L.Marker(latlng));                               // 6168\n\t\t\t}                                                                                                                // 6169\n\t\t\treturn new L.FeatureGroup(layers);                                                                               // 6170\n                                                                                                                    // 6171\n\t\tcase 'LineString':                                                                                                // 6172\n\t\t\tlatlngs = this.coordsToLatLngs(coords, 0, coordsToLatLng);                                                       // 6173\n\t\t\treturn new L.Polyline(latlngs, vectorOptions);                                                                   // 6174\n                                                                                                                    // 6175\n\t\tcase 'Polygon':                                                                                                   // 6176\n\t\t\tif (coords.length === 2 && !coords[1].length) {                                                                  // 6177\n\t\t\t\tthrow new Error('Invalid GeoJSON object.');                                                                     // 6178\n\t\t\t}                                                                                                                // 6179\n\t\t\tlatlngs = this.coordsToLatLngs(coords, 1, coordsToLatLng);                                                       // 6180\n\t\t\treturn new L.Polygon(latlngs, vectorOptions);                                                                    // 6181\n                                                                                                                    // 6182\n\t\tcase 'MultiLineString':                                                                                           // 6183\n\t\t\tlatlngs = this.coordsToLatLngs(coords, 1, coordsToLatLng);                                                       // 6184\n\t\t\treturn new L.MultiPolyline(latlngs, vectorOptions);                                                              // 6185\n                                                                                                                    // 6186\n\t\tcase 'MultiPolygon':                                                                                              // 6187\n\t\t\tlatlngs = this.coordsToLatLngs(coords, 2, coordsToLatLng);                                                       // 6188\n\t\t\treturn new L.MultiPolygon(latlngs, vectorOptions);                                                               // 6189\n                                                                                                                    // 6190\n\t\tcase 'GeometryCollection':                                                                                        // 6191\n\t\t\tfor (i = 0, len = geometry.geometries.length; i < len; i++) {                                                    // 6192\n                                                                                                                    // 6193\n\t\t\t\tlayers.push(this.geometryToLayer({                                                                              // 6194\n\t\t\t\t\tgeometry: geometry.geometries[i],                                                                              // 6195\n\t\t\t\t\ttype: 'Feature',                                                                                               // 6196\n\t\t\t\t\tproperties: geojson.properties                                                                                 // 6197\n\t\t\t\t}, pointToLayer, coordsToLatLng, vectorOptions));                                                               // 6198\n\t\t\t}                                                                                                                // 6199\n\t\t\treturn new L.FeatureGroup(layers);                                                                               // 6200\n                                                                                                                    // 6201\n\t\tdefault:                                                                                                          // 6202\n\t\t\tthrow new Error('Invalid GeoJSON object.');                                                                      // 6203\n\t\t}                                                                                                                 // 6204\n\t},                                                                                                                 // 6205\n                                                                                                                    // 6206\n\tcoordsToLatLng: function (coords) { // (Array[, Boolean]) -> LatLng                                                // 6207\n\t\treturn new L.LatLng(coords[1], coords[0], coords[2]);                                                             // 6208\n\t},                                                                                                                 // 6209\n                                                                                                                    // 6210\n\tcoordsToLatLngs: function (coords, levelsDeep, coordsToLatLng) { // (Array[, Number, Function]) -> Array           // 6211\n\t\tvar latlng, i, len,                                                                                               // 6212\n\t\t    latlngs = [];                                                                                                 // 6213\n                                                                                                                    // 6214\n\t\tfor (i = 0, len = coords.length; i < len; i++) {                                                                  // 6215\n\t\t\tlatlng = levelsDeep ?                                                                                            // 6216\n\t\t\t        this.coordsToLatLngs(coords[i], levelsDeep - 1, coordsToLatLng) :                                        // 6217\n\t\t\t        (coordsToLatLng || this.coordsToLatLng)(coords[i]);                                                      // 6218\n                                                                                                                    // 6219\n\t\t\tlatlngs.push(latlng);                                                                                            // 6220\n\t\t}                                                                                                                 // 6221\n                                                                                                                    // 6222\n\t\treturn latlngs;                                                                                                   // 6223\n\t},                                                                                                                 // 6224\n                                                                                                                    // 6225\n\tlatLngToCoords: function (latlng) {                                                                                // 6226\n\t\tvar coords = [latlng.lng, latlng.lat];                                                                            // 6227\n                                                                                                                    // 6228\n\t\tif (latlng.alt !== undefined) {                                                                                   // 6229\n\t\t\tcoords.push(latlng.alt);                                                                                         // 6230\n\t\t}                                                                                                                 // 6231\n\t\treturn coords;                                                                                                    // 6232\n\t},                                                                                                                 // 6233\n                                                                                                                    // 6234\n\tlatLngsToCoords: function (latLngs) {                                                                              // 6235\n\t\tvar coords = [];                                                                                                  // 6236\n                                                                                                                    // 6237\n\t\tfor (var i = 0, len = latLngs.length; i < len; i++) {                                                             // 6238\n\t\t\tcoords.push(L.GeoJSON.latLngToCoords(latLngs[i]));                                                               // 6239\n\t\t}                                                                                                                 // 6240\n                                                                                                                    // 6241\n\t\treturn coords;                                                                                                    // 6242\n\t},                                                                                                                 // 6243\n                                                                                                                    // 6244\n\tgetFeature: function (layer, newGeometry) {                                                                        // 6245\n\t\treturn layer.feature ? L.extend({}, layer.feature, {geometry: newGeometry}) : L.GeoJSON.asFeature(newGeometry);   // 6246\n\t},                                                                                                                 // 6247\n                                                                                                                    // 6248\n\tasFeature: function (geoJSON) {                                                                                    // 6249\n\t\tif (geoJSON.type === 'Feature') {                                                                                 // 6250\n\t\t\treturn geoJSON;                                                                                                  // 6251\n\t\t}                                                                                                                 // 6252\n                                                                                                                    // 6253\n\t\treturn {                                                                                                          // 6254\n\t\t\ttype: 'Feature',                                                                                                 // 6255\n\t\t\tproperties: {},                                                                                                  // 6256\n\t\t\tgeometry: geoJSON                                                                                                // 6257\n\t\t};                                                                                                                // 6258\n\t}                                                                                                                  // 6259\n});                                                                                                                 // 6260\n                                                                                                                    // 6261\nvar PointToGeoJSON = {                                                                                              // 6262\n\ttoGeoJSON: function () {                                                                                           // 6263\n\t\treturn L.GeoJSON.getFeature(this, {                                                                               // 6264\n\t\t\ttype: 'Point',                                                                                                   // 6265\n\t\t\tcoordinates: L.GeoJSON.latLngToCoords(this.getLatLng())                                                          // 6266\n\t\t});                                                                                                               // 6267\n\t}                                                                                                                  // 6268\n};                                                                                                                  // 6269\n                                                                                                                    // 6270\nL.Marker.include(PointToGeoJSON);                                                                                   // 6271\nL.Circle.include(PointToGeoJSON);                                                                                   // 6272\nL.CircleMarker.include(PointToGeoJSON);                                                                             // 6273\n                                                                                                                    // 6274\nL.Polyline.include({                                                                                                // 6275\n\ttoGeoJSON: function () {                                                                                           // 6276\n\t\treturn L.GeoJSON.getFeature(this, {                                                                               // 6277\n\t\t\ttype: 'LineString',                                                                                              // 6278\n\t\t\tcoordinates: L.GeoJSON.latLngsToCoords(this.getLatLngs())                                                        // 6279\n\t\t});                                                                                                               // 6280\n\t}                                                                                                                  // 6281\n});                                                                                                                 // 6282\n                                                                                                                    // 6283\nL.Polygon.include({                                                                                                 // 6284\n\ttoGeoJSON: function () {                                                                                           // 6285\n\t\tvar coords = [L.GeoJSON.latLngsToCoords(this.getLatLngs())],                                                      // 6286\n\t\t    i, len, hole;                                                                                                 // 6287\n                                                                                                                    // 6288\n\t\tcoords[0].push(coords[0][0]);                                                                                     // 6289\n                                                                                                                    // 6290\n\t\tif (this._holes) {                                                                                                // 6291\n\t\t\tfor (i = 0, len = this._holes.length; i < len; i++) {                                                            // 6292\n\t\t\t\thole = L.GeoJSON.latLngsToCoords(this._holes[i]);                                                               // 6293\n\t\t\t\thole.push(hole[0]);                                                                                             // 6294\n\t\t\t\tcoords.push(hole);                                                                                              // 6295\n\t\t\t}                                                                                                                // 6296\n\t\t}                                                                                                                 // 6297\n                                                                                                                    // 6298\n\t\treturn L.GeoJSON.getFeature(this, {                                                                               // 6299\n\t\t\ttype: 'Polygon',                                                                                                 // 6300\n\t\t\tcoordinates: coords                                                                                              // 6301\n\t\t});                                                                                                               // 6302\n\t}                                                                                                                  // 6303\n});                                                                                                                 // 6304\n                                                                                                                    // 6305\n(function () {                                                                                                      // 6306\n\tfunction multiToGeoJSON(type) {                                                                                    // 6307\n\t\treturn function () {                                                                                              // 6308\n\t\t\tvar coords = [];                                                                                                 // 6309\n                                                                                                                    // 6310\n\t\t\tthis.eachLayer(function (layer) {                                                                                // 6311\n\t\t\t\tcoords.push(layer.toGeoJSON().geometry.coordinates);                                                            // 6312\n\t\t\t});                                                                                                              // 6313\n                                                                                                                    // 6314\n\t\t\treturn L.GeoJSON.getFeature(this, {                                                                              // 6315\n\t\t\t\ttype: type,                                                                                                     // 6316\n\t\t\t\tcoordinates: coords                                                                                             // 6317\n\t\t\t});                                                                                                              // 6318\n\t\t};                                                                                                                // 6319\n\t}                                                                                                                  // 6320\n                                                                                                                    // 6321\n\tL.MultiPolyline.include({toGeoJSON: multiToGeoJSON('MultiLineString')});                                           // 6322\n\tL.MultiPolygon.include({toGeoJSON: multiToGeoJSON('MultiPolygon')});                                               // 6323\n                                                                                                                    // 6324\n\tL.LayerGroup.include({                                                                                             // 6325\n\t\ttoGeoJSON: function () {                                                                                          // 6326\n                                                                                                                    // 6327\n\t\t\tvar geometry = this.feature && this.feature.geometry,                                                            // 6328\n\t\t\t\tjsons = [],                                                                                                     // 6329\n\t\t\t\tjson;                                                                                                           // 6330\n                                                                                                                    // 6331\n\t\t\tif (geometry && geometry.type === 'MultiPoint') {                                                                // 6332\n\t\t\t\treturn multiToGeoJSON('MultiPoint').call(this);                                                                 // 6333\n\t\t\t}                                                                                                                // 6334\n                                                                                                                    // 6335\n\t\t\tvar isGeometryCollection = geometry && geometry.type === 'GeometryCollection';                                   // 6336\n                                                                                                                    // 6337\n\t\t\tthis.eachLayer(function (layer) {                                                                                // 6338\n\t\t\t\tif (layer.toGeoJSON) {                                                                                          // 6339\n\t\t\t\t\tjson = layer.toGeoJSON();                                                                                      // 6340\n\t\t\t\t\tjsons.push(isGeometryCollection ? json.geometry : L.GeoJSON.asFeature(json));                                  // 6341\n\t\t\t\t}                                                                                                               // 6342\n\t\t\t});                                                                                                              // 6343\n                                                                                                                    // 6344\n\t\t\tif (isGeometryCollection) {                                                                                      // 6345\n\t\t\t\treturn L.GeoJSON.getFeature(this, {                                                                             // 6346\n\t\t\t\t\tgeometries: jsons,                                                                                             // 6347\n\t\t\t\t\ttype: 'GeometryCollection'                                                                                     // 6348\n\t\t\t\t});                                                                                                             // 6349\n\t\t\t}                                                                                                                // 6350\n                                                                                                                    // 6351\n\t\t\treturn {                                                                                                         // 6352\n\t\t\t\ttype: 'FeatureCollection',                                                                                      // 6353\n\t\t\t\tfeatures: jsons                                                                                                 // 6354\n\t\t\t};                                                                                                               // 6355\n\t\t}                                                                                                                 // 6356\n\t});                                                                                                                // 6357\n}());                                                                                                               // 6358\n                                                                                                                    // 6359\nL.geoJson = function (geojson, options) {                                                                           // 6360\n\treturn new L.GeoJSON(geojson, options);                                                                            // 6361\n};                                                                                                                  // 6362\n                                                                                                                    // 6363\n                                                                                                                    // 6364\n/*                                                                                                                  // 6365\n * L.DomEvent contains functions for working with DOM events.                                                       // 6366\n */                                                                                                                 // 6367\n                                                                                                                    // 6368\nL.DomEvent = {                                                                                                      // 6369\n\t/* inspired by John Resig, Dean Edwards and YUI addEvent implementations */                                        // 6370\n\taddListener: function (obj, type, fn, context) { // (HTMLElement, String, Function[, Object])                      // 6371\n                                                                                                                    // 6372\n\t\tvar id = L.stamp(fn),                                                                                             // 6373\n\t\t    key = '_leaflet_' + type + id,                                                                                // 6374\n\t\t    handler, originalHandler, newType;                                                                            // 6375\n                                                                                                                    // 6376\n\t\tif (obj[key]) { return this; }                                                                                    // 6377\n                                                                                                                    // 6378\n\t\thandler = function (e) {                                                                                          // 6379\n\t\t\treturn fn.call(context || obj, e || L.DomEvent._getEvent());                                                     // 6380\n\t\t};                                                                                                                // 6381\n                                                                                                                    // 6382\n\t\tif (L.Browser.pointer && type.indexOf('touch') === 0) {                                                           // 6383\n\t\t\treturn this.addPointerListener(obj, type, handler, id);                                                          // 6384\n\t\t}                                                                                                                 // 6385\n\t\tif (L.Browser.touch && (type === 'dblclick') && this.addDoubleTapListener) {                                      // 6386\n\t\t\tthis.addDoubleTapListener(obj, handler, id);                                                                     // 6387\n\t\t}                                                                                                                 // 6388\n                                                                                                                    // 6389\n\t\tif ('addEventListener' in obj) {                                                                                  // 6390\n                                                                                                                    // 6391\n\t\t\tif (type === 'mousewheel') {                                                                                     // 6392\n\t\t\t\tobj.addEventListener('DOMMouseScroll', handler, false);                                                         // 6393\n\t\t\t\tobj.addEventListener(type, handler, false);                                                                     // 6394\n                                                                                                                    // 6395\n\t\t\t} else if ((type === 'mouseenter') || (type === 'mouseleave')) {                                                 // 6396\n                                                                                                                    // 6397\n\t\t\t\toriginalHandler = handler;                                                                                      // 6398\n\t\t\t\tnewType = (type === 'mouseenter' ? 'mouseover' : 'mouseout');                                                   // 6399\n                                                                                                                    // 6400\n\t\t\t\thandler = function (e) {                                                                                        // 6401\n\t\t\t\t\tif (!L.DomEvent._checkMouse(obj, e)) { return; }                                                               // 6402\n\t\t\t\t\treturn originalHandler(e);                                                                                     // 6403\n\t\t\t\t};                                                                                                              // 6404\n                                                                                                                    // 6405\n\t\t\t\tobj.addEventListener(newType, handler, false);                                                                  // 6406\n                                                                                                                    // 6407\n\t\t\t} else if (type === 'click' && L.Browser.android) {                                                              // 6408\n\t\t\t\toriginalHandler = handler;                                                                                      // 6409\n\t\t\t\thandler = function (e) {                                                                                        // 6410\n\t\t\t\t\treturn L.DomEvent._filterClick(e, originalHandler);                                                            // 6411\n\t\t\t\t};                                                                                                              // 6412\n                                                                                                                    // 6413\n\t\t\t\tobj.addEventListener(type, handler, false);                                                                     // 6414\n\t\t\t} else {                                                                                                         // 6415\n\t\t\t\tobj.addEventListener(type, handler, false);                                                                     // 6416\n\t\t\t}                                                                                                                // 6417\n                                                                                                                    // 6418\n\t\t} else if ('attachEvent' in obj) {                                                                                // 6419\n\t\t\tobj.attachEvent('on' + type, handler);                                                                           // 6420\n\t\t}                                                                                                                 // 6421\n                                                                                                                    // 6422\n\t\tobj[key] = handler;                                                                                               // 6423\n                                                                                                                    // 6424\n\t\treturn this;                                                                                                      // 6425\n\t},                                                                                                                 // 6426\n                                                                                                                    // 6427\n\tremoveListener: function (obj, type, fn) {  // (HTMLElement, String, Function)                                     // 6428\n                                                                                                                    // 6429\n\t\tvar id = L.stamp(fn),                                                                                             // 6430\n\t\t    key = '_leaflet_' + type + id,                                                                                // 6431\n\t\t    handler = obj[key];                                                                                           // 6432\n                                                                                                                    // 6433\n\t\tif (!handler) { return this; }                                                                                    // 6434\n                                                                                                                    // 6435\n\t\tif (L.Browser.pointer && type.indexOf('touch') === 0) {                                                           // 6436\n\t\t\tthis.removePointerListener(obj, type, id);                                                                       // 6437\n\t\t} else if (L.Browser.touch && (type === 'dblclick') && this.removeDoubleTapListener) {                            // 6438\n\t\t\tthis.removeDoubleTapListener(obj, id);                                                                           // 6439\n                                                                                                                    // 6440\n\t\t} else if ('removeEventListener' in obj) {                                                                        // 6441\n                                                                                                                    // 6442\n\t\t\tif (type === 'mousewheel') {                                                                                     // 6443\n\t\t\t\tobj.removeEventListener('DOMMouseScroll', handler, false);                                                      // 6444\n\t\t\t\tobj.removeEventListener(type, handler, false);                                                                  // 6445\n                                                                                                                    // 6446\n\t\t\t} else if ((type === 'mouseenter') || (type === 'mouseleave')) {                                                 // 6447\n\t\t\t\tobj.removeEventListener((type === 'mouseenter' ? 'mouseover' : 'mouseout'), handler, false);                    // 6448\n\t\t\t} else {                                                                                                         // 6449\n\t\t\t\tobj.removeEventListener(type, handler, false);                                                                  // 6450\n\t\t\t}                                                                                                                // 6451\n\t\t} else if ('detachEvent' in obj) {                                                                                // 6452\n\t\t\tobj.detachEvent('on' + type, handler);                                                                           // 6453\n\t\t}                                                                                                                 // 6454\n                                                                                                                    // 6455\n\t\tobj[key] = null;                                                                                                  // 6456\n                                                                                                                    // 6457\n\t\treturn this;                                                                                                      // 6458\n\t},                                                                                                                 // 6459\n                                                                                                                    // 6460\n\tstopPropagation: function (e) {                                                                                    // 6461\n                                                                                                                    // 6462\n\t\tif (e.stopPropagation) {                                                                                          // 6463\n\t\t\te.stopPropagation();                                                                                             // 6464\n\t\t} else {                                                                                                          // 6465\n\t\t\te.cancelBubble = true;                                                                                           // 6466\n\t\t}                                                                                                                 // 6467\n\t\tL.DomEvent._skipped(e);                                                                                           // 6468\n                                                                                                                    // 6469\n\t\treturn this;                                                                                                      // 6470\n\t},                                                                                                                 // 6471\n                                                                                                                    // 6472\n\tdisableScrollPropagation: function (el) {                                                                          // 6473\n\t\tvar stop = L.DomEvent.stopPropagation;                                                                            // 6474\n                                                                                                                    // 6475\n\t\treturn L.DomEvent                                                                                                 // 6476\n\t\t\t.on(el, 'mousewheel', stop)                                                                                      // 6477\n\t\t\t.on(el, 'MozMousePixelScroll', stop);                                                                            // 6478\n\t},                                                                                                                 // 6479\n                                                                                                                    // 6480\n\tdisableClickPropagation: function (el) {                                                                           // 6481\n\t\tvar stop = L.DomEvent.stopPropagation;                                                                            // 6482\n                                                                                                                    // 6483\n\t\tfor (var i = L.Draggable.START.length - 1; i >= 0; i--) {                                                         // 6484\n\t\t\tL.DomEvent.on(el, L.Draggable.START[i], stop);                                                                   // 6485\n\t\t}                                                                                                                 // 6486\n                                                                                                                    // 6487\n\t\treturn L.DomEvent                                                                                                 // 6488\n\t\t\t.on(el, 'click', L.DomEvent._fakeStop)                                                                           // 6489\n\t\t\t.on(el, 'dblclick', stop);                                                                                       // 6490\n\t},                                                                                                                 // 6491\n                                                                                                                    // 6492\n\tpreventDefault: function (e) {                                                                                     // 6493\n                                                                                                                    // 6494\n\t\tif (e.preventDefault) {                                                                                           // 6495\n\t\t\te.preventDefault();                                                                                              // 6496\n\t\t} else {                                                                                                          // 6497\n\t\t\te.returnValue = false;                                                                                           // 6498\n\t\t}                                                                                                                 // 6499\n\t\treturn this;                                                                                                      // 6500\n\t},                                                                                                                 // 6501\n                                                                                                                    // 6502\n\tstop: function (e) {                                                                                               // 6503\n\t\treturn L.DomEvent                                                                                                 // 6504\n\t\t\t.preventDefault(e)                                                                                               // 6505\n\t\t\t.stopPropagation(e);                                                                                             // 6506\n\t},                                                                                                                 // 6507\n                                                                                                                    // 6508\n\tgetMousePosition: function (e, container) {                                                                        // 6509\n\t\tif (!container) {                                                                                                 // 6510\n\t\t\treturn new L.Point(e.clientX, e.clientY);                                                                        // 6511\n\t\t}                                                                                                                 // 6512\n                                                                                                                    // 6513\n\t\tvar rect = container.getBoundingClientRect();                                                                     // 6514\n                                                                                                                    // 6515\n\t\treturn new L.Point(                                                                                               // 6516\n\t\t\te.clientX - rect.left - container.clientLeft,                                                                    // 6517\n\t\t\te.clientY - rect.top - container.clientTop);                                                                     // 6518\n\t},                                                                                                                 // 6519\n                                                                                                                    // 6520\n\tgetWheelDelta: function (e) {                                                                                      // 6521\n                                                                                                                    // 6522\n\t\tvar delta = 0;                                                                                                    // 6523\n                                                                                                                    // 6524\n\t\tif (e.wheelDelta) {                                                                                               // 6525\n\t\t\tdelta = e.wheelDelta / 120;                                                                                      // 6526\n\t\t}                                                                                                                 // 6527\n\t\tif (e.detail) {                                                                                                   // 6528\n\t\t\tdelta = -e.detail / 3;                                                                                           // 6529\n\t\t}                                                                                                                 // 6530\n\t\treturn delta;                                                                                                     // 6531\n\t},                                                                                                                 // 6532\n                                                                                                                    // 6533\n\t_skipEvents: {},                                                                                                   // 6534\n                                                                                                                    // 6535\n\t_fakeStop: function (e) {                                                                                          // 6536\n\t\t// fakes stopPropagation by setting a special event flag, checked/reset with L.DomEvent._skipped(e)               // 6537\n\t\tL.DomEvent._skipEvents[e.type] = true;                                                                            // 6538\n\t},                                                                                                                 // 6539\n                                                                                                                    // 6540\n\t_skipped: function (e) {                                                                                           // 6541\n\t\tvar skipped = this._skipEvents[e.type];                                                                           // 6542\n\t\t// reset when checking, as it's only used in map container and propagates outside of the map                      // 6543\n\t\tthis._skipEvents[e.type] = false;                                                                                 // 6544\n\t\treturn skipped;                                                                                                   // 6545\n\t},                                                                                                                 // 6546\n                                                                                                                    // 6547\n\t// check if element really left/entered the event target (for mouseenter/mouseleave)                               // 6548\n\t_checkMouse: function (el, e) {                                                                                    // 6549\n                                                                                                                    // 6550\n\t\tvar related = e.relatedTarget;                                                                                    // 6551\n                                                                                                                    // 6552\n\t\tif (!related) { return true; }                                                                                    // 6553\n                                                                                                                    // 6554\n\t\ttry {                                                                                                             // 6555\n\t\t\twhile (related && (related !== el)) {                                                                            // 6556\n\t\t\t\trelated = related.parentNode;                                                                                   // 6557\n\t\t\t}                                                                                                                // 6558\n\t\t} catch (err) {                                                                                                   // 6559\n\t\t\treturn false;                                                                                                    // 6560\n\t\t}                                                                                                                 // 6561\n\t\treturn (related !== el);                                                                                          // 6562\n\t},                                                                                                                 // 6563\n                                                                                                                    // 6564\n\t_getEvent: function () { // evil magic for IE                                                                      // 6565\n\t\t/*jshint noarg:false */                                                                                           // 6566\n\t\tvar e = window.event;                                                                                             // 6567\n\t\tif (!e) {                                                                                                         // 6568\n\t\t\tvar caller = arguments.callee.caller;                                                                            // 6569\n\t\t\twhile (caller) {                                                                                                 // 6570\n\t\t\t\te = caller['arguments'][0];                                                                                     // 6571\n\t\t\t\tif (e && window.Event === e.constructor) {                                                                      // 6572\n\t\t\t\t\tbreak;                                                                                                         // 6573\n\t\t\t\t}                                                                                                               // 6574\n\t\t\t\tcaller = caller.caller;                                                                                         // 6575\n\t\t\t}                                                                                                                // 6576\n\t\t}                                                                                                                 // 6577\n\t\treturn e;                                                                                                         // 6578\n\t},                                                                                                                 // 6579\n                                                                                                                    // 6580\n\t// this is a horrible workaround for a bug in Android where a single touch triggers two click events               // 6581\n\t_filterClick: function (e, handler) {                                                                              // 6582\n\t\tvar timeStamp = (e.timeStamp || e.originalEvent.timeStamp),                                                       // 6583\n\t\t\telapsed = L.DomEvent._lastClick && (timeStamp - L.DomEvent._lastClick);                                          // 6584\n                                                                                                                    // 6585\n\t\t// are they closer together than 500ms yet more than 100ms?                                                       // 6586\n\t\t// Android typically triggers them ~300ms apart while multiple listeners                                          // 6587\n\t\t// on the same event should be triggered far faster;                                                              // 6588\n\t\t// or check if click is simulated on the element, and if it is, reject any non-simulated events                   // 6589\n                                                                                                                    // 6590\n\t\tif ((elapsed && elapsed > 100 && elapsed < 500) || (e.target._simulatedClick && !e._simulated)) {                 // 6591\n\t\t\tL.DomEvent.stop(e);                                                                                              // 6592\n\t\t\treturn;                                                                                                          // 6593\n\t\t}                                                                                                                 // 6594\n\t\tL.DomEvent._lastClick = timeStamp;                                                                                // 6595\n                                                                                                                    // 6596\n\t\treturn handler(e);                                                                                                // 6597\n\t}                                                                                                                  // 6598\n};                                                                                                                  // 6599\n                                                                                                                    // 6600\nL.DomEvent.on = L.DomEvent.addListener;                                                                             // 6601\nL.DomEvent.off = L.DomEvent.removeListener;                                                                         // 6602\n                                                                                                                    // 6603\n                                                                                                                    // 6604\n/*                                                                                                                  // 6605\n * L.Draggable allows you to add dragging capabilities to any element. Supports mobile devices too.                 // 6606\n */                                                                                                                 // 6607\n                                                                                                                    // 6608\nL.Draggable = L.Class.extend({                                                                                      // 6609\n\tincludes: L.Mixin.Events,                                                                                          // 6610\n                                                                                                                    // 6611\n\tstatics: {                                                                                                         // 6612\n\t\tSTART: L.Browser.touch ? ['touchstart', 'mousedown'] : ['mousedown'],                                             // 6613\n\t\tEND: {                                                                                                            // 6614\n\t\t\tmousedown: 'mouseup',                                                                                            // 6615\n\t\t\ttouchstart: 'touchend',                                                                                          // 6616\n\t\t\tpointerdown: 'touchend',                                                                                         // 6617\n\t\t\tMSPointerDown: 'touchend'                                                                                        // 6618\n\t\t},                                                                                                                // 6619\n\t\tMOVE: {                                                                                                           // 6620\n\t\t\tmousedown: 'mousemove',                                                                                          // 6621\n\t\t\ttouchstart: 'touchmove',                                                                                         // 6622\n\t\t\tpointerdown: 'touchmove',                                                                                        // 6623\n\t\t\tMSPointerDown: 'touchmove'                                                                                       // 6624\n\t\t}                                                                                                                 // 6625\n\t},                                                                                                                 // 6626\n                                                                                                                    // 6627\n\tinitialize: function (element, dragStartTarget) {                                                                  // 6628\n\t\tthis._element = element;                                                                                          // 6629\n\t\tthis._dragStartTarget = dragStartTarget || element;                                                               // 6630\n\t},                                                                                                                 // 6631\n                                                                                                                    // 6632\n\tenable: function () {                                                                                              // 6633\n\t\tif (this._enabled) { return; }                                                                                    // 6634\n                                                                                                                    // 6635\n\t\tfor (var i = L.Draggable.START.length - 1; i >= 0; i--) {                                                         // 6636\n\t\t\tL.DomEvent.on(this._dragStartTarget, L.Draggable.START[i], this._onDown, this);                                  // 6637\n\t\t}                                                                                                                 // 6638\n                                                                                                                    // 6639\n\t\tthis._enabled = true;                                                                                             // 6640\n\t},                                                                                                                 // 6641\n                                                                                                                    // 6642\n\tdisable: function () {                                                                                             // 6643\n\t\tif (!this._enabled) { return; }                                                                                   // 6644\n                                                                                                                    // 6645\n\t\tfor (var i = L.Draggable.START.length - 1; i >= 0; i--) {                                                         // 6646\n\t\t\tL.DomEvent.off(this._dragStartTarget, L.Draggable.START[i], this._onDown, this);                                 // 6647\n\t\t}                                                                                                                 // 6648\n                                                                                                                    // 6649\n\t\tthis._enabled = false;                                                                                            // 6650\n\t\tthis._moved = false;                                                                                              // 6651\n\t},                                                                                                                 // 6652\n                                                                                                                    // 6653\n\t_onDown: function (e) {                                                                                            // 6654\n\t\tthis._moved = false;                                                                                              // 6655\n                                                                                                                    // 6656\n\t\tif (e.shiftKey || ((e.which !== 1) && (e.button !== 1) && !e.touches)) { return; }                                // 6657\n                                                                                                                    // 6658\n\t\tL.DomEvent.stopPropagation(e);                                                                                    // 6659\n                                                                                                                    // 6660\n\t\tif (L.Draggable._disabled) { return; }                                                                            // 6661\n                                                                                                                    // 6662\n\t\tL.DomUtil.disableImageDrag();                                                                                     // 6663\n\t\tL.DomUtil.disableTextSelection();                                                                                 // 6664\n                                                                                                                    // 6665\n\t\tif (this._moving) { return; }                                                                                     // 6666\n                                                                                                                    // 6667\n\t\tvar first = e.touches ? e.touches[0] : e;                                                                         // 6668\n                                                                                                                    // 6669\n\t\tthis._startPoint = new L.Point(first.clientX, first.clientY);                                                     // 6670\n\t\tthis._startPos = this._newPos = L.DomUtil.getPosition(this._element);                                             // 6671\n                                                                                                                    // 6672\n\t\tL.DomEvent                                                                                                        // 6673\n\t\t    .on(document, L.Draggable.MOVE[e.type], this._onMove, this)                                                   // 6674\n\t\t    .on(document, L.Draggable.END[e.type], this._onUp, this);                                                     // 6675\n\t},                                                                                                                 // 6676\n                                                                                                                    // 6677\n\t_onMove: function (e) {                                                                                            // 6678\n\t\tif (e.touches && e.touches.length > 1) {                                                                          // 6679\n\t\t\tthis._moved = true;                                                                                              // 6680\n\t\t\treturn;                                                                                                          // 6681\n\t\t}                                                                                                                 // 6682\n                                                                                                                    // 6683\n\t\tvar first = (e.touches && e.touches.length === 1 ? e.touches[0] : e),                                             // 6684\n\t\t    newPoint = new L.Point(first.clientX, first.clientY),                                                         // 6685\n\t\t    offset = newPoint.subtract(this._startPoint);                                                                 // 6686\n                                                                                                                    // 6687\n\t\tif (!offset.x && !offset.y) { return; }                                                                           // 6688\n\t\tif (L.Browser.touch && Math.abs(offset.x) + Math.abs(offset.y) < 3) { return; }                                   // 6689\n                                                                                                                    // 6690\n\t\tL.DomEvent.preventDefault(e);                                                                                     // 6691\n                                                                                                                    // 6692\n\t\tif (!this._moved) {                                                                                               // 6693\n\t\t\tthis.fire('dragstart');                                                                                          // 6694\n                                                                                                                    // 6695\n\t\t\tthis._moved = true;                                                                                              // 6696\n\t\t\tthis._startPos = L.DomUtil.getPosition(this._element).subtract(offset);                                          // 6697\n                                                                                                                    // 6698\n\t\t\tL.DomUtil.addClass(document.body, 'leaflet-dragging');                                                           // 6699\n\t\t\tthis._lastTarget = e.target || e.srcElement;                                                                     // 6700\n\t\t\tL.DomUtil.addClass(this._lastTarget, 'leaflet-drag-target');                                                     // 6701\n\t\t}                                                                                                                 // 6702\n                                                                                                                    // 6703\n\t\tthis._newPos = this._startPos.add(offset);                                                                        // 6704\n\t\tthis._moving = true;                                                                                              // 6705\n                                                                                                                    // 6706\n\t\tL.Util.cancelAnimFrame(this._animRequest);                                                                        // 6707\n\t\tthis._animRequest = L.Util.requestAnimFrame(this._updatePosition, this, true, this._dragStartTarget);             // 6708\n\t},                                                                                                                 // 6709\n                                                                                                                    // 6710\n\t_updatePosition: function () {                                                                                     // 6711\n\t\tthis.fire('predrag');                                                                                             // 6712\n\t\tL.DomUtil.setPosition(this._element, this._newPos);                                                               // 6713\n\t\tthis.fire('drag');                                                                                                // 6714\n\t},                                                                                                                 // 6715\n                                                                                                                    // 6716\n\t_onUp: function () {                                                                                               // 6717\n\t\tL.DomUtil.removeClass(document.body, 'leaflet-dragging');                                                         // 6718\n                                                                                                                    // 6719\n\t\tif (this._lastTarget) {                                                                                           // 6720\n\t\t\tL.DomUtil.removeClass(this._lastTarget, 'leaflet-drag-target');                                                  // 6721\n\t\t\tthis._lastTarget = null;                                                                                         // 6722\n\t\t}                                                                                                                 // 6723\n                                                                                                                    // 6724\n\t\tfor (var i in L.Draggable.MOVE) {                                                                                 // 6725\n\t\t\tL.DomEvent                                                                                                       // 6726\n\t\t\t    .off(document, L.Draggable.MOVE[i], this._onMove)                                                            // 6727\n\t\t\t    .off(document, L.Draggable.END[i], this._onUp);                                                              // 6728\n\t\t}                                                                                                                 // 6729\n                                                                                                                    // 6730\n\t\tL.DomUtil.enableImageDrag();                                                                                      // 6731\n\t\tL.DomUtil.enableTextSelection();                                                                                  // 6732\n                                                                                                                    // 6733\n\t\tif (this._moved && this._moving) {                                                                                // 6734\n\t\t\t// ensure drag is not fired after dragend                                                                        // 6735\n\t\t\tL.Util.cancelAnimFrame(this._animRequest);                                                                       // 6736\n                                                                                                                    // 6737\n\t\t\tthis.fire('dragend', {                                                                                           // 6738\n\t\t\t\tdistance: this._newPos.distanceTo(this._startPos)                                                               // 6739\n\t\t\t});                                                                                                              // 6740\n\t\t}                                                                                                                 // 6741\n                                                                                                                    // 6742\n\t\tthis._moving = false;                                                                                             // 6743\n\t}                                                                                                                  // 6744\n});                                                                                                                 // 6745\n                                                                                                                    // 6746\n                                                                                                                    // 6747\n/*                                                                                                                  // 6748\n\tL.Handler is a base class for handler classes that are used internally to inject                                   // 6749\n\tinteraction features like dragging to classes like Map and Marker.                                                 // 6750\n*/                                                                                                                  // 6751\n                                                                                                                    // 6752\nL.Handler = L.Class.extend({                                                                                        // 6753\n\tinitialize: function (map) {                                                                                       // 6754\n\t\tthis._map = map;                                                                                                  // 6755\n\t},                                                                                                                 // 6756\n                                                                                                                    // 6757\n\tenable: function () {                                                                                              // 6758\n\t\tif (this._enabled) { return; }                                                                                    // 6759\n                                                                                                                    // 6760\n\t\tthis._enabled = true;                                                                                             // 6761\n\t\tthis.addHooks();                                                                                                  // 6762\n\t},                                                                                                                 // 6763\n                                                                                                                    // 6764\n\tdisable: function () {                                                                                             // 6765\n\t\tif (!this._enabled) { return; }                                                                                   // 6766\n                                                                                                                    // 6767\n\t\tthis._enabled = false;                                                                                            // 6768\n\t\tthis.removeHooks();                                                                                               // 6769\n\t},                                                                                                                 // 6770\n                                                                                                                    // 6771\n\tenabled: function () {                                                                                             // 6772\n\t\treturn !!this._enabled;                                                                                           // 6773\n\t}                                                                                                                  // 6774\n});                                                                                                                 // 6775\n                                                                                                                    // 6776\n                                                                                                                    // 6777\n/*                                                                                                                  // 6778\n * L.Handler.MapDrag is used to make the map draggable (with panning inertia), enabled by default.                  // 6779\n */                                                                                                                 // 6780\n                                                                                                                    // 6781\nL.Map.mergeOptions({                                                                                                // 6782\n\tdragging: true,                                                                                                    // 6783\n                                                                                                                    // 6784\n\tinertia: !L.Browser.android23,                                                                                     // 6785\n\tinertiaDeceleration: 3400, // px/s^2                                                                               // 6786\n\tinertiaMaxSpeed: Infinity, // px/s                                                                                 // 6787\n\tinertiaThreshold: L.Browser.touch ? 32 : 18, // ms                                                                 // 6788\n\teaseLinearity: 0.25,                                                                                               // 6789\n                                                                                                                    // 6790\n\t// TODO refactor, move to CRS                                                                                      // 6791\n\tworldCopyJump: false                                                                                               // 6792\n});                                                                                                                 // 6793\n                                                                                                                    // 6794\nL.Map.Drag = L.Handler.extend({                                                                                     // 6795\n\taddHooks: function () {                                                                                            // 6796\n\t\tif (!this._draggable) {                                                                                           // 6797\n\t\t\tvar map = this._map;                                                                                             // 6798\n                                                                                                                    // 6799\n\t\t\tthis._draggable = new L.Draggable(map._mapPane, map._container);                                                 // 6800\n                                                                                                                    // 6801\n\t\t\tthis._draggable.on({                                                                                             // 6802\n\t\t\t\t'dragstart': this._onDragStart,                                                                                 // 6803\n\t\t\t\t'drag': this._onDrag,                                                                                           // 6804\n\t\t\t\t'dragend': this._onDragEnd                                                                                      // 6805\n\t\t\t}, this);                                                                                                        // 6806\n                                                                                                                    // 6807\n\t\t\tif (map.options.worldCopyJump) {                                                                                 // 6808\n\t\t\t\tthis._draggable.on('predrag', this._onPreDrag, this);                                                           // 6809\n\t\t\t\tmap.on('viewreset', this._onViewReset, this);                                                                   // 6810\n                                                                                                                    // 6811\n\t\t\t\tmap.whenReady(this._onViewReset, this);                                                                         // 6812\n\t\t\t}                                                                                                                // 6813\n\t\t}                                                                                                                 // 6814\n\t\tthis._draggable.enable();                                                                                         // 6815\n\t},                                                                                                                 // 6816\n                                                                                                                    // 6817\n\tremoveHooks: function () {                                                                                         // 6818\n\t\tthis._draggable.disable();                                                                                        // 6819\n\t},                                                                                                                 // 6820\n                                                                                                                    // 6821\n\tmoved: function () {                                                                                               // 6822\n\t\treturn this._draggable && this._draggable._moved;                                                                 // 6823\n\t},                                                                                                                 // 6824\n                                                                                                                    // 6825\n\t_onDragStart: function () {                                                                                        // 6826\n\t\tvar map = this._map;                                                                                              // 6827\n                                                                                                                    // 6828\n\t\tif (map._panAnim) {                                                                                               // 6829\n\t\t\tmap._panAnim.stop();                                                                                             // 6830\n\t\t}                                                                                                                 // 6831\n                                                                                                                    // 6832\n\t\tmap                                                                                                               // 6833\n\t\t    .fire('movestart')                                                                                            // 6834\n\t\t    .fire('dragstart');                                                                                           // 6835\n                                                                                                                    // 6836\n\t\tif (map.options.inertia) {                                                                                        // 6837\n\t\t\tthis._positions = [];                                                                                            // 6838\n\t\t\tthis._times = [];                                                                                                // 6839\n\t\t}                                                                                                                 // 6840\n\t},                                                                                                                 // 6841\n                                                                                                                    // 6842\n\t_onDrag: function () {                                                                                             // 6843\n\t\tif (this._map.options.inertia) {                                                                                  // 6844\n\t\t\tvar time = this._lastTime = +new Date(),                                                                         // 6845\n\t\t\t    pos = this._lastPos = this._draggable._newPos;                                                               // 6846\n                                                                                                                    // 6847\n\t\t\tthis._positions.push(pos);                                                                                       // 6848\n\t\t\tthis._times.push(time);                                                                                          // 6849\n                                                                                                                    // 6850\n\t\t\tif (time - this._times[0] > 200) {                                                                               // 6851\n\t\t\t\tthis._positions.shift();                                                                                        // 6852\n\t\t\t\tthis._times.shift();                                                                                            // 6853\n\t\t\t}                                                                                                                // 6854\n\t\t}                                                                                                                 // 6855\n                                                                                                                    // 6856\n\t\tthis._map                                                                                                         // 6857\n\t\t    .fire('move')                                                                                                 // 6858\n\t\t    .fire('drag');                                                                                                // 6859\n\t},                                                                                                                 // 6860\n                                                                                                                    // 6861\n\t_onViewReset: function () {                                                                                        // 6862\n\t\t// TODO fix hardcoded Earth values                                                                                // 6863\n\t\tvar pxCenter = this._map.getSize()._divideBy(2),                                                                  // 6864\n\t\t    pxWorldCenter = this._map.latLngToLayerPoint([0, 0]);                                                         // 6865\n                                                                                                                    // 6866\n\t\tthis._initialWorldOffset = pxWorldCenter.subtract(pxCenter).x;                                                    // 6867\n\t\tthis._worldWidth = this._map.project([0, 180]).x;                                                                 // 6868\n\t},                                                                                                                 // 6869\n                                                                                                                    // 6870\n\t_onPreDrag: function () {                                                                                          // 6871\n\t\t// TODO refactor to be able to adjust map pane position after zoom                                                // 6872\n\t\tvar worldWidth = this._worldWidth,                                                                                // 6873\n\t\t    halfWidth = Math.round(worldWidth / 2),                                                                       // 6874\n\t\t    dx = this._initialWorldOffset,                                                                                // 6875\n\t\t    x = this._draggable._newPos.x,                                                                                // 6876\n\t\t    newX1 = (x - halfWidth + dx) % worldWidth + halfWidth - dx,                                                   // 6877\n\t\t    newX2 = (x + halfWidth + dx) % worldWidth - halfWidth - dx,                                                   // 6878\n\t\t    newX = Math.abs(newX1 + dx) < Math.abs(newX2 + dx) ? newX1 : newX2;                                           // 6879\n                                                                                                                    // 6880\n\t\tthis._draggable._newPos.x = newX;                                                                                 // 6881\n\t},                                                                                                                 // 6882\n                                                                                                                    // 6883\n\t_onDragEnd: function (e) {                                                                                         // 6884\n\t\tvar map = this._map,                                                                                              // 6885\n\t\t    options = map.options,                                                                                        // 6886\n\t\t    delay = +new Date() - this._lastTime,                                                                         // 6887\n                                                                                                                    // 6888\n\t\t    noInertia = !options.inertia || delay > options.inertiaThreshold || !this._positions[0];                      // 6889\n                                                                                                                    // 6890\n\t\tmap.fire('dragend', e);                                                                                           // 6891\n                                                                                                                    // 6892\n\t\tif (noInertia) {                                                                                                  // 6893\n\t\t\tmap.fire('moveend');                                                                                             // 6894\n                                                                                                                    // 6895\n\t\t} else {                                                                                                          // 6896\n                                                                                                                    // 6897\n\t\t\tvar direction = this._lastPos.subtract(this._positions[0]),                                                      // 6898\n\t\t\t    duration = (this._lastTime + delay - this._times[0]) / 1000,                                                 // 6899\n\t\t\t    ease = options.easeLinearity,                                                                                // 6900\n                                                                                                                    // 6901\n\t\t\t    speedVector = direction.multiplyBy(ease / duration),                                                         // 6902\n\t\t\t    speed = speedVector.distanceTo([0, 0]),                                                                      // 6903\n                                                                                                                    // 6904\n\t\t\t    limitedSpeed = Math.min(options.inertiaMaxSpeed, speed),                                                     // 6905\n\t\t\t    limitedSpeedVector = speedVector.multiplyBy(limitedSpeed / speed),                                           // 6906\n                                                                                                                    // 6907\n\t\t\t    decelerationDuration = limitedSpeed / (options.inertiaDeceleration * ease),                                  // 6908\n\t\t\t    offset = limitedSpeedVector.multiplyBy(-decelerationDuration / 2).round();                                   // 6909\n                                                                                                                    // 6910\n\t\t\tif (!offset.x || !offset.y) {                                                                                    // 6911\n\t\t\t\tmap.fire('moveend');                                                                                            // 6912\n                                                                                                                    // 6913\n\t\t\t} else {                                                                                                         // 6914\n\t\t\t\toffset = map._limitOffset(offset, map.options.maxBounds);                                                       // 6915\n                                                                                                                    // 6916\n\t\t\t\tL.Util.requestAnimFrame(function () {                                                                           // 6917\n\t\t\t\t\tmap.panBy(offset, {                                                                                            // 6918\n\t\t\t\t\t\tduration: decelerationDuration,                                                                               // 6919\n\t\t\t\t\t\teaseLinearity: ease,                                                                                          // 6920\n\t\t\t\t\t\tnoMoveStart: true                                                                                             // 6921\n\t\t\t\t\t});                                                                                                            // 6922\n\t\t\t\t});                                                                                                             // 6923\n\t\t\t}                                                                                                                // 6924\n\t\t}                                                                                                                 // 6925\n\t}                                                                                                                  // 6926\n});                                                                                                                 // 6927\n                                                                                                                    // 6928\nL.Map.addInitHook('addHandler', 'dragging', L.Map.Drag);                                                            // 6929\n                                                                                                                    // 6930\n                                                                                                                    // 6931\n/*                                                                                                                  // 6932\n * L.Handler.DoubleClickZoom is used to handle double-click zoom on the map, enabled by default.                    // 6933\n */                                                                                                                 // 6934\n                                                                                                                    // 6935\nL.Map.mergeOptions({                                                                                                // 6936\n\tdoubleClickZoom: true                                                                                              // 6937\n});                                                                                                                 // 6938\n                                                                                                                    // 6939\nL.Map.DoubleClickZoom = L.Handler.extend({                                                                          // 6940\n\taddHooks: function () {                                                                                            // 6941\n\t\tthis._map.on('dblclick', this._onDoubleClick, this);                                                              // 6942\n\t},                                                                                                                 // 6943\n                                                                                                                    // 6944\n\tremoveHooks: function () {                                                                                         // 6945\n\t\tthis._map.off('dblclick', this._onDoubleClick, this);                                                             // 6946\n\t},                                                                                                                 // 6947\n                                                                                                                    // 6948\n\t_onDoubleClick: function (e) {                                                                                     // 6949\n\t\tvar map = this._map,                                                                                              // 6950\n\t\t    zoom = map.getZoom() + (e.originalEvent.shiftKey ? -1 : 1);                                                   // 6951\n                                                                                                                    // 6952\n\t\tif (map.options.doubleClickZoom === 'center') {                                                                   // 6953\n\t\t\tmap.setZoom(zoom);                                                                                               // 6954\n\t\t} else {                                                                                                          // 6955\n\t\t\tmap.setZoomAround(e.containerPoint, zoom);                                                                       // 6956\n\t\t}                                                                                                                 // 6957\n\t}                                                                                                                  // 6958\n});                                                                                                                 // 6959\n                                                                                                                    // 6960\nL.Map.addInitHook('addHandler', 'doubleClickZoom', L.Map.DoubleClickZoom);                                          // 6961\n                                                                                                                    // 6962\n                                                                                                                    // 6963\n/*                                                                                                                  // 6964\n * L.Handler.ScrollWheelZoom is used by L.Map to enable mouse scroll wheel zoom on the map.                         // 6965\n */                                                                                                                 // 6966\n                                                                                                                    // 6967\nL.Map.mergeOptions({                                                                                                // 6968\n\tscrollWheelZoom: true                                                                                              // 6969\n});                                                                                                                 // 6970\n                                                                                                                    // 6971\nL.Map.ScrollWheelZoom = L.Handler.extend({                                                                          // 6972\n\taddHooks: function () {                                                                                            // 6973\n\t\tL.DomEvent.on(this._map._container, 'mousewheel', this._onWheelScroll, this);                                     // 6974\n\t\tL.DomEvent.on(this._map._container, 'MozMousePixelScroll', L.DomEvent.preventDefault);                            // 6975\n\t\tthis._delta = 0;                                                                                                  // 6976\n\t},                                                                                                                 // 6977\n                                                                                                                    // 6978\n\tremoveHooks: function () {                                                                                         // 6979\n\t\tL.DomEvent.off(this._map._container, 'mousewheel', this._onWheelScroll);                                          // 6980\n\t\tL.DomEvent.off(this._map._container, 'MozMousePixelScroll', L.DomEvent.preventDefault);                           // 6981\n\t},                                                                                                                 // 6982\n                                                                                                                    // 6983\n\t_onWheelScroll: function (e) {                                                                                     // 6984\n\t\tvar delta = L.DomEvent.getWheelDelta(e);                                                                          // 6985\n                                                                                                                    // 6986\n\t\tthis._delta += delta;                                                                                             // 6987\n\t\tthis._lastMousePos = this._map.mouseEventToContainerPoint(e);                                                     // 6988\n                                                                                                                    // 6989\n\t\tif (!this._startTime) {                                                                                           // 6990\n\t\t\tthis._startTime = +new Date();                                                                                   // 6991\n\t\t}                                                                                                                 // 6992\n                                                                                                                    // 6993\n\t\tvar left = Math.max(40 - (+new Date() - this._startTime), 0);                                                     // 6994\n                                                                                                                    // 6995\n\t\tclearTimeout(this._timer);                                                                                        // 6996\n\t\tthis._timer = setTimeout(L.bind(this._performZoom, this), left);                                                  // 6997\n                                                                                                                    // 6998\n\t\tL.DomEvent.preventDefault(e);                                                                                     // 6999\n\t\tL.DomEvent.stopPropagation(e);                                                                                    // 7000\n\t},                                                                                                                 // 7001\n                                                                                                                    // 7002\n\t_performZoom: function () {                                                                                        // 7003\n\t\tvar map = this._map,                                                                                              // 7004\n\t\t    delta = this._delta,                                                                                          // 7005\n\t\t    zoom = map.getZoom();                                                                                         // 7006\n                                                                                                                    // 7007\n\t\tdelta = delta > 0 ? Math.ceil(delta) : Math.floor(delta);                                                         // 7008\n\t\tdelta = Math.max(Math.min(delta, 4), -4);                                                                         // 7009\n\t\tdelta = map._limitZoom(zoom + delta) - zoom;                                                                      // 7010\n                                                                                                                    // 7011\n\t\tthis._delta = 0;                                                                                                  // 7012\n\t\tthis._startTime = null;                                                                                           // 7013\n                                                                                                                    // 7014\n\t\tif (!delta) { return; }                                                                                           // 7015\n                                                                                                                    // 7016\n\t\tif (map.options.scrollWheelZoom === 'center') {                                                                   // 7017\n\t\t\tmap.setZoom(zoom + delta);                                                                                       // 7018\n\t\t} else {                                                                                                          // 7019\n\t\t\tmap.setZoomAround(this._lastMousePos, zoom + delta);                                                             // 7020\n\t\t}                                                                                                                 // 7021\n\t}                                                                                                                  // 7022\n});                                                                                                                 // 7023\n                                                                                                                    // 7024\nL.Map.addInitHook('addHandler', 'scrollWheelZoom', L.Map.ScrollWheelZoom);                                          // 7025\n                                                                                                                    // 7026\n                                                                                                                    // 7027\n/*                                                                                                                  // 7028\n * Extends the event handling code with double tap support for mobile browsers.                                     // 7029\n */                                                                                                                 // 7030\n                                                                                                                    // 7031\nL.extend(L.DomEvent, {                                                                                              // 7032\n                                                                                                                    // 7033\n\t_touchstart: L.Browser.msPointer ? 'MSPointerDown' : L.Browser.pointer ? 'pointerdown' : 'touchstart',             // 7034\n\t_touchend: L.Browser.msPointer ? 'MSPointerUp' : L.Browser.pointer ? 'pointerup' : 'touchend',                     // 7035\n                                                                                                                    // 7036\n\t// inspired by Zepto touch code by Thomas Fuchs                                                                    // 7037\n\taddDoubleTapListener: function (obj, handler, id) {                                                                // 7038\n\t\tvar last,                                                                                                         // 7039\n\t\t    doubleTap = false,                                                                                            // 7040\n\t\t    delay = 250,                                                                                                  // 7041\n\t\t    touch,                                                                                                        // 7042\n\t\t    pre = '_leaflet_',                                                                                            // 7043\n\t\t    touchstart = this._touchstart,                                                                                // 7044\n\t\t    touchend = this._touchend,                                                                                    // 7045\n\t\t    trackedTouches = [];                                                                                          // 7046\n                                                                                                                    // 7047\n\t\tfunction onTouchStart(e) {                                                                                        // 7048\n\t\t\tvar count;                                                                                                       // 7049\n                                                                                                                    // 7050\n\t\t\tif (L.Browser.pointer) {                                                                                         // 7051\n\t\t\t\ttrackedTouches.push(e.pointerId);                                                                               // 7052\n\t\t\t\tcount = trackedTouches.length;                                                                                  // 7053\n\t\t\t} else {                                                                                                         // 7054\n\t\t\t\tcount = e.touches.length;                                                                                       // 7055\n\t\t\t}                                                                                                                // 7056\n\t\t\tif (count > 1) {                                                                                                 // 7057\n\t\t\t\treturn;                                                                                                         // 7058\n\t\t\t}                                                                                                                // 7059\n                                                                                                                    // 7060\n\t\t\tvar now = Date.now(),                                                                                            // 7061\n\t\t\t\tdelta = now - (last || now);                                                                                    // 7062\n                                                                                                                    // 7063\n\t\t\ttouch = e.touches ? e.touches[0] : e;                                                                            // 7064\n\t\t\tdoubleTap = (delta > 0 && delta <= delay);                                                                       // 7065\n\t\t\tlast = now;                                                                                                      // 7066\n\t\t}                                                                                                                 // 7067\n                                                                                                                    // 7068\n\t\tfunction onTouchEnd(e) {                                                                                          // 7069\n\t\t\tif (L.Browser.pointer) {                                                                                         // 7070\n\t\t\t\tvar idx = trackedTouches.indexOf(e.pointerId);                                                                  // 7071\n\t\t\t\tif (idx === -1) {                                                                                               // 7072\n\t\t\t\t\treturn;                                                                                                        // 7073\n\t\t\t\t}                                                                                                               // 7074\n\t\t\t\ttrackedTouches.splice(idx, 1);                                                                                  // 7075\n\t\t\t}                                                                                                                // 7076\n                                                                                                                    // 7077\n\t\t\tif (doubleTap) {                                                                                                 // 7078\n\t\t\t\tif (L.Browser.pointer) {                                                                                        // 7079\n\t\t\t\t\t// work around .type being readonly with MSPointer* events                                                     // 7080\n\t\t\t\t\tvar newTouch = { },                                                                                            // 7081\n\t\t\t\t\t\tprop;                                                                                                         // 7082\n                                                                                                                    // 7083\n\t\t\t\t\t// jshint forin:false                                                                                          // 7084\n\t\t\t\t\tfor (var i in touch) {                                                                                         // 7085\n\t\t\t\t\t\tprop = touch[i];                                                                                              // 7086\n\t\t\t\t\t\tif (typeof prop === 'function') {                                                                             // 7087\n\t\t\t\t\t\t\tnewTouch[i] = prop.bind(touch);                                                                              // 7088\n\t\t\t\t\t\t} else {                                                                                                      // 7089\n\t\t\t\t\t\t\tnewTouch[i] = prop;                                                                                          // 7090\n\t\t\t\t\t\t}                                                                                                             // 7091\n\t\t\t\t\t}                                                                                                              // 7092\n\t\t\t\t\ttouch = newTouch;                                                                                              // 7093\n\t\t\t\t}                                                                                                               // 7094\n\t\t\t\ttouch.type = 'dblclick';                                                                                        // 7095\n\t\t\t\thandler(touch);                                                                                                 // 7096\n\t\t\t\tlast = null;                                                                                                    // 7097\n\t\t\t}                                                                                                                // 7098\n\t\t}                                                                                                                 // 7099\n\t\tobj[pre + touchstart + id] = onTouchStart;                                                                        // 7100\n\t\tobj[pre + touchend + id] = onTouchEnd;                                                                            // 7101\n                                                                                                                    // 7102\n\t\t// on pointer we need to listen on the document, otherwise a drag starting on the map and moving off screen       // 7103\n\t\t// will not come through to us, so we will lose track of how many touches are ongoing                             // 7104\n\t\tvar endElement = L.Browser.pointer ? document.documentElement : obj;                                              // 7105\n                                                                                                                    // 7106\n\t\tobj.addEventListener(touchstart, onTouchStart, false);                                                            // 7107\n\t\tendElement.addEventListener(touchend, onTouchEnd, false);                                                         // 7108\n                                                                                                                    // 7109\n\t\tif (L.Browser.pointer) {                                                                                          // 7110\n\t\t\tendElement.addEventListener(L.DomEvent.POINTER_CANCEL, onTouchEnd, false);                                       // 7111\n\t\t}                                                                                                                 // 7112\n                                                                                                                    // 7113\n\t\treturn this;                                                                                                      // 7114\n\t},                                                                                                                 // 7115\n                                                                                                                    // 7116\n\tremoveDoubleTapListener: function (obj, id) {                                                                      // 7117\n\t\tvar pre = '_leaflet_';                                                                                            // 7118\n                                                                                                                    // 7119\n\t\tobj.removeEventListener(this._touchstart, obj[pre + this._touchstart + id], false);                               // 7120\n\t\t(L.Browser.pointer ? document.documentElement : obj).removeEventListener(                                         // 7121\n\t\t        this._touchend, obj[pre + this._touchend + id], false);                                                   // 7122\n                                                                                                                    // 7123\n\t\tif (L.Browser.pointer) {                                                                                          // 7124\n\t\t\tdocument.documentElement.removeEventListener(L.DomEvent.POINTER_CANCEL, obj[pre + this._touchend + id],          // 7125\n\t\t\t\tfalse);                                                                                                         // 7126\n\t\t}                                                                                                                 // 7127\n                                                                                                                    // 7128\n\t\treturn this;                                                                                                      // 7129\n\t}                                                                                                                  // 7130\n});                                                                                                                 // 7131\n                                                                                                                    // 7132\n                                                                                                                    // 7133\n/*                                                                                                                  // 7134\n * Extends L.DomEvent to provide touch support for Internet Explorer and Windows-based devices.                     // 7135\n */                                                                                                                 // 7136\n                                                                                                                    // 7137\nL.extend(L.DomEvent, {                                                                                              // 7138\n                                                                                                                    // 7139\n\t//static                                                                                                           // 7140\n\tPOINTER_DOWN: L.Browser.msPointer ? 'MSPointerDown' : 'pointerdown',                                               // 7141\n\tPOINTER_MOVE: L.Browser.msPointer ? 'MSPointerMove' : 'pointermove',                                               // 7142\n\tPOINTER_UP: L.Browser.msPointer ? 'MSPointerUp' : 'pointerup',                                                     // 7143\n\tPOINTER_CANCEL: L.Browser.msPointer ? 'MSPointerCancel' : 'pointercancel',                                         // 7144\n                                                                                                                    // 7145\n\t_pointers: [],                                                                                                     // 7146\n\t_pointerDocumentListener: false,                                                                                   // 7147\n                                                                                                                    // 7148\n\t// Provides a touch events wrapper for (ms)pointer events.                                                         // 7149\n\t// Based on changes by veproza https://github.com/CloudMade/Leaflet/pull/1019                                      // 7150\n\t//ref http://www.w3.org/TR/pointerevents/ https://www.w3.org/Bugs/Public/show_bug.cgi?id=22890                     // 7151\n                                                                                                                    // 7152\n\taddPointerListener: function (obj, type, handler, id) {                                                            // 7153\n                                                                                                                    // 7154\n\t\tswitch (type) {                                                                                                   // 7155\n\t\tcase 'touchstart':                                                                                                // 7156\n\t\t\treturn this.addPointerListenerStart(obj, type, handler, id);                                                     // 7157\n\t\tcase 'touchend':                                                                                                  // 7158\n\t\t\treturn this.addPointerListenerEnd(obj, type, handler, id);                                                       // 7159\n\t\tcase 'touchmove':                                                                                                 // 7160\n\t\t\treturn this.addPointerListenerMove(obj, type, handler, id);                                                      // 7161\n\t\tdefault:                                                                                                          // 7162\n\t\t\tthrow 'Unknown touch event type';                                                                                // 7163\n\t\t}                                                                                                                 // 7164\n\t},                                                                                                                 // 7165\n                                                                                                                    // 7166\n\taddPointerListenerStart: function (obj, type, handler, id) {                                                       // 7167\n\t\tvar pre = '_leaflet_',                                                                                            // 7168\n\t\t    pointers = this._pointers;                                                                                    // 7169\n                                                                                                                    // 7170\n\t\tvar cb = function (e) {                                                                                           // 7171\n\t\t\tif (e.pointerType !== 'mouse' && e.pointerType !== e.MSPOINTER_TYPE_MOUSE) {                                     // 7172\n\t\t\t\tL.DomEvent.preventDefault(e);                                                                                   // 7173\n\t\t\t}                                                                                                                // 7174\n                                                                                                                    // 7175\n\t\t\tvar alreadyInArray = false;                                                                                      // 7176\n\t\t\tfor (var i = 0; i < pointers.length; i++) {                                                                      // 7177\n\t\t\t\tif (pointers[i].pointerId === e.pointerId) {                                                                    // 7178\n\t\t\t\t\talreadyInArray = true;                                                                                         // 7179\n\t\t\t\t\tbreak;                                                                                                         // 7180\n\t\t\t\t}                                                                                                               // 7181\n\t\t\t}                                                                                                                // 7182\n\t\t\tif (!alreadyInArray) {                                                                                           // 7183\n\t\t\t\tpointers.push(e);                                                                                               // 7184\n\t\t\t}                                                                                                                // 7185\n                                                                                                                    // 7186\n\t\t\te.touches = pointers.slice();                                                                                    // 7187\n\t\t\te.changedTouches = [e];                                                                                          // 7188\n                                                                                                                    // 7189\n\t\t\thandler(e);                                                                                                      // 7190\n\t\t};                                                                                                                // 7191\n                                                                                                                    // 7192\n\t\tobj[pre + 'touchstart' + id] = cb;                                                                                // 7193\n\t\tobj.addEventListener(this.POINTER_DOWN, cb, false);                                                               // 7194\n                                                                                                                    // 7195\n\t\t// need to also listen for end events to keep the _pointers list accurate                                         // 7196\n\t\t// this needs to be on the body and never go away                                                                 // 7197\n\t\tif (!this._pointerDocumentListener) {                                                                             // 7198\n\t\t\tvar internalCb = function (e) {                                                                                  // 7199\n\t\t\t\tfor (var i = 0; i < pointers.length; i++) {                                                                     // 7200\n\t\t\t\t\tif (pointers[i].pointerId === e.pointerId) {                                                                   // 7201\n\t\t\t\t\t\tpointers.splice(i, 1);                                                                                        // 7202\n\t\t\t\t\t\tbreak;                                                                                                        // 7203\n\t\t\t\t\t}                                                                                                              // 7204\n\t\t\t\t}                                                                                                               // 7205\n\t\t\t};                                                                                                               // 7206\n\t\t\t//We listen on the documentElement as any drags that end by moving the touch off the screen get fired there      // 7207\n\t\t\tdocument.documentElement.addEventListener(this.POINTER_UP, internalCb, false);                                   // 7208\n\t\t\tdocument.documentElement.addEventListener(this.POINTER_CANCEL, internalCb, false);                               // 7209\n                                                                                                                    // 7210\n\t\t\tthis._pointerDocumentListener = true;                                                                            // 7211\n\t\t}                                                                                                                 // 7212\n                                                                                                                    // 7213\n\t\treturn this;                                                                                                      // 7214\n\t},                                                                                                                 // 7215\n                                                                                                                    // 7216\n\taddPointerListenerMove: function (obj, type, handler, id) {                                                        // 7217\n\t\tvar pre = '_leaflet_',                                                                                            // 7218\n\t\t    touches = this._pointers;                                                                                     // 7219\n                                                                                                                    // 7220\n\t\tfunction cb(e) {                                                                                                  // 7221\n                                                                                                                    // 7222\n\t\t\t// don't fire touch moves when mouse isn't down                                                                  // 7223\n\t\t\tif ((e.pointerType === e.MSPOINTER_TYPE_MOUSE || e.pointerType === 'mouse') && e.buttons === 0) { return; }      // 7224\n                                                                                                                    // 7225\n\t\t\tfor (var i = 0; i < touches.length; i++) {                                                                       // 7226\n\t\t\t\tif (touches[i].pointerId === e.pointerId) {                                                                     // 7227\n\t\t\t\t\ttouches[i] = e;                                                                                                // 7228\n\t\t\t\t\tbreak;                                                                                                         // 7229\n\t\t\t\t}                                                                                                               // 7230\n\t\t\t}                                                                                                                // 7231\n                                                                                                                    // 7232\n\t\t\te.touches = touches.slice();                                                                                     // 7233\n\t\t\te.changedTouches = [e];                                                                                          // 7234\n                                                                                                                    // 7235\n\t\t\thandler(e);                                                                                                      // 7236\n\t\t}                                                                                                                 // 7237\n                                                                                                                    // 7238\n\t\tobj[pre + 'touchmove' + id] = cb;                                                                                 // 7239\n\t\tobj.addEventListener(this.POINTER_MOVE, cb, false);                                                               // 7240\n                                                                                                                    // 7241\n\t\treturn this;                                                                                                      // 7242\n\t},                                                                                                                 // 7243\n                                                                                                                    // 7244\n\taddPointerListenerEnd: function (obj, type, handler, id) {                                                         // 7245\n\t\tvar pre = '_leaflet_',                                                                                            // 7246\n\t\t    touches = this._pointers;                                                                                     // 7247\n                                                                                                                    // 7248\n\t\tvar cb = function (e) {                                                                                           // 7249\n\t\t\tfor (var i = 0; i < touches.length; i++) {                                                                       // 7250\n\t\t\t\tif (touches[i].pointerId === e.pointerId) {                                                                     // 7251\n\t\t\t\t\ttouches.splice(i, 1);                                                                                          // 7252\n\t\t\t\t\tbreak;                                                                                                         // 7253\n\t\t\t\t}                                                                                                               // 7254\n\t\t\t}                                                                                                                // 7255\n                                                                                                                    // 7256\n\t\t\te.touches = touches.slice();                                                                                     // 7257\n\t\t\te.changedTouches = [e];                                                                                          // 7258\n                                                                                                                    // 7259\n\t\t\thandler(e);                                                                                                      // 7260\n\t\t};                                                                                                                // 7261\n                                                                                                                    // 7262\n\t\tobj[pre + 'touchend' + id] = cb;                                                                                  // 7263\n\t\tobj.addEventListener(this.POINTER_UP, cb, false);                                                                 // 7264\n\t\tobj.addEventListener(this.POINTER_CANCEL, cb, false);                                                             // 7265\n                                                                                                                    // 7266\n\t\treturn this;                                                                                                      // 7267\n\t},                                                                                                                 // 7268\n                                                                                                                    // 7269\n\tremovePointerListener: function (obj, type, id) {                                                                  // 7270\n\t\tvar pre = '_leaflet_',                                                                                            // 7271\n\t\t    cb = obj[pre + type + id];                                                                                    // 7272\n                                                                                                                    // 7273\n\t\tswitch (type) {                                                                                                   // 7274\n\t\tcase 'touchstart':                                                                                                // 7275\n\t\t\tobj.removeEventListener(this.POINTER_DOWN, cb, false);                                                           // 7276\n\t\t\tbreak;                                                                                                           // 7277\n\t\tcase 'touchmove':                                                                                                 // 7278\n\t\t\tobj.removeEventListener(this.POINTER_MOVE, cb, false);                                                           // 7279\n\t\t\tbreak;                                                                                                           // 7280\n\t\tcase 'touchend':                                                                                                  // 7281\n\t\t\tobj.removeEventListener(this.POINTER_UP, cb, false);                                                             // 7282\n\t\t\tobj.removeEventListener(this.POINTER_CANCEL, cb, false);                                                         // 7283\n\t\t\tbreak;                                                                                                           // 7284\n\t\t}                                                                                                                 // 7285\n                                                                                                                    // 7286\n\t\treturn this;                                                                                                      // 7287\n\t}                                                                                                                  // 7288\n});                                                                                                                 // 7289\n                                                                                                                    // 7290\n                                                                                                                    // 7291\n/*                                                                                                                  // 7292\n * L.Handler.TouchZoom is used by L.Map to add pinch zoom on supported mobile browsers.                             // 7293\n */                                                                                                                 // 7294\n                                                                                                                    // 7295\nL.Map.mergeOptions({                                                                                                // 7296\n\ttouchZoom: L.Browser.touch && !L.Browser.android23,                                                                // 7297\n\tbounceAtZoomLimits: true                                                                                           // 7298\n});                                                                                                                 // 7299\n                                                                                                                    // 7300\nL.Map.TouchZoom = L.Handler.extend({                                                                                // 7301\n\taddHooks: function () {                                                                                            // 7302\n\t\tL.DomEvent.on(this._map._container, 'touchstart', this._onTouchStart, this);                                      // 7303\n\t},                                                                                                                 // 7304\n                                                                                                                    // 7305\n\tremoveHooks: function () {                                                                                         // 7306\n\t\tL.DomEvent.off(this._map._container, 'touchstart', this._onTouchStart, this);                                     // 7307\n\t},                                                                                                                 // 7308\n                                                                                                                    // 7309\n\t_onTouchStart: function (e) {                                                                                      // 7310\n\t\tvar map = this._map;                                                                                              // 7311\n                                                                                                                    // 7312\n\t\tif (!e.touches || e.touches.length !== 2 || map._animatingZoom || this._zooming) { return; }                      // 7313\n                                                                                                                    // 7314\n\t\tvar p1 = map.mouseEventToLayerPoint(e.touches[0]),                                                                // 7315\n\t\t    p2 = map.mouseEventToLayerPoint(e.touches[1]),                                                                // 7316\n\t\t    viewCenter = map._getCenterLayerPoint();                                                                      // 7317\n                                                                                                                    // 7318\n\t\tthis._startCenter = p1.add(p2)._divideBy(2);                                                                      // 7319\n\t\tthis._startDist = p1.distanceTo(p2);                                                                              // 7320\n                                                                                                                    // 7321\n\t\tthis._moved = false;                                                                                              // 7322\n\t\tthis._zooming = true;                                                                                             // 7323\n                                                                                                                    // 7324\n\t\tthis._centerOffset = viewCenter.subtract(this._startCenter);                                                      // 7325\n                                                                                                                    // 7326\n\t\tif (map._panAnim) {                                                                                               // 7327\n\t\t\tmap._panAnim.stop();                                                                                             // 7328\n\t\t}                                                                                                                 // 7329\n                                                                                                                    // 7330\n\t\tL.DomEvent                                                                                                        // 7331\n\t\t    .on(document, 'touchmove', this._onTouchMove, this)                                                           // 7332\n\t\t    .on(document, 'touchend', this._onTouchEnd, this);                                                            // 7333\n                                                                                                                    // 7334\n\t\tL.DomEvent.preventDefault(e);                                                                                     // 7335\n\t},                                                                                                                 // 7336\n                                                                                                                    // 7337\n\t_onTouchMove: function (e) {                                                                                       // 7338\n\t\tvar map = this._map;                                                                                              // 7339\n                                                                                                                    // 7340\n\t\tif (!e.touches || e.touches.length !== 2 || !this._zooming) { return; }                                           // 7341\n                                                                                                                    // 7342\n\t\tvar p1 = map.mouseEventToLayerPoint(e.touches[0]),                                                                // 7343\n\t\t    p2 = map.mouseEventToLayerPoint(e.touches[1]);                                                                // 7344\n                                                                                                                    // 7345\n\t\tthis._scale = p1.distanceTo(p2) / this._startDist;                                                                // 7346\n\t\tthis._delta = p1._add(p2)._divideBy(2)._subtract(this._startCenter);                                              // 7347\n                                                                                                                    // 7348\n\t\tif (this._scale === 1) { return; }                                                                                // 7349\n                                                                                                                    // 7350\n\t\tif (!map.options.bounceAtZoomLimits) {                                                                            // 7351\n\t\t\tif ((map.getZoom() === map.getMinZoom() && this._scale < 1) ||                                                   // 7352\n\t\t\t    (map.getZoom() === map.getMaxZoom() && this._scale > 1)) { return; }                                         // 7353\n\t\t}                                                                                                                 // 7354\n                                                                                                                    // 7355\n\t\tif (!this._moved) {                                                                                               // 7356\n\t\t\tL.DomUtil.addClass(map._mapPane, 'leaflet-touching');                                                            // 7357\n                                                                                                                    // 7358\n\t\t\tmap                                                                                                              // 7359\n\t\t\t    .fire('movestart')                                                                                           // 7360\n\t\t\t    .fire('zoomstart');                                                                                          // 7361\n                                                                                                                    // 7362\n\t\t\tthis._moved = true;                                                                                              // 7363\n\t\t}                                                                                                                 // 7364\n                                                                                                                    // 7365\n\t\tL.Util.cancelAnimFrame(this._animRequest);                                                                        // 7366\n\t\tthis._animRequest = L.Util.requestAnimFrame(                                                                      // 7367\n\t\t        this._updateOnMove, this, true, this._map._container);                                                    // 7368\n                                                                                                                    // 7369\n\t\tL.DomEvent.preventDefault(e);                                                                                     // 7370\n\t},                                                                                                                 // 7371\n                                                                                                                    // 7372\n\t_updateOnMove: function () {                                                                                       // 7373\n\t\tvar map = this._map,                                                                                              // 7374\n\t\t    origin = this._getScaleOrigin(),                                                                              // 7375\n\t\t    center = map.layerPointToLatLng(origin),                                                                      // 7376\n\t\t    zoom = map.getScaleZoom(this._scale);                                                                         // 7377\n                                                                                                                    // 7378\n\t\tmap._animateZoom(center, zoom, this._startCenter, this._scale, this._delta, false, true);                         // 7379\n\t},                                                                                                                 // 7380\n                                                                                                                    // 7381\n\t_onTouchEnd: function () {                                                                                         // 7382\n\t\tif (!this._moved || !this._zooming) {                                                                             // 7383\n\t\t\tthis._zooming = false;                                                                                           // 7384\n\t\t\treturn;                                                                                                          // 7385\n\t\t}                                                                                                                 // 7386\n                                                                                                                    // 7387\n\t\tvar map = this._map;                                                                                              // 7388\n                                                                                                                    // 7389\n\t\tthis._zooming = false;                                                                                            // 7390\n\t\tL.DomUtil.removeClass(map._mapPane, 'leaflet-touching');                                                          // 7391\n\t\tL.Util.cancelAnimFrame(this._animRequest);                                                                        // 7392\n                                                                                                                    // 7393\n\t\tL.DomEvent                                                                                                        // 7394\n\t\t    .off(document, 'touchmove', this._onTouchMove)                                                                // 7395\n\t\t    .off(document, 'touchend', this._onTouchEnd);                                                                 // 7396\n                                                                                                                    // 7397\n\t\tvar origin = this._getScaleOrigin(),                                                                              // 7398\n\t\t    center = map.layerPointToLatLng(origin),                                                                      // 7399\n                                                                                                                    // 7400\n\t\t    oldZoom = map.getZoom(),                                                                                      // 7401\n\t\t    floatZoomDelta = map.getScaleZoom(this._scale) - oldZoom,                                                     // 7402\n\t\t    roundZoomDelta = (floatZoomDelta > 0 ?                                                                        // 7403\n\t\t            Math.ceil(floatZoomDelta) : Math.floor(floatZoomDelta)),                                              // 7404\n                                                                                                                    // 7405\n\t\t    zoom = map._limitZoom(oldZoom + roundZoomDelta),                                                              // 7406\n\t\t    scale = map.getZoomScale(zoom) / this._scale;                                                                 // 7407\n                                                                                                                    // 7408\n\t\tmap._animateZoom(center, zoom, origin, scale);                                                                    // 7409\n\t},                                                                                                                 // 7410\n                                                                                                                    // 7411\n\t_getScaleOrigin: function () {                                                                                     // 7412\n\t\tvar centerOffset = this._centerOffset.subtract(this._delta).divideBy(this._scale);                                // 7413\n\t\treturn this._startCenter.add(centerOffset);                                                                       // 7414\n\t}                                                                                                                  // 7415\n});                                                                                                                 // 7416\n                                                                                                                    // 7417\nL.Map.addInitHook('addHandler', 'touchZoom', L.Map.TouchZoom);                                                      // 7418\n                                                                                                                    // 7419\n                                                                                                                    // 7420\n/*                                                                                                                  // 7421\n * L.Map.Tap is used to enable mobile hacks like quick taps and long hold.                                          // 7422\n */                                                                                                                 // 7423\n                                                                                                                    // 7424\nL.Map.mergeOptions({                                                                                                // 7425\n\ttap: true,                                                                                                         // 7426\n\ttapTolerance: 15                                                                                                   // 7427\n});                                                                                                                 // 7428\n                                                                                                                    // 7429\nL.Map.Tap = L.Handler.extend({                                                                                      // 7430\n\taddHooks: function () {                                                                                            // 7431\n\t\tL.DomEvent.on(this._map._container, 'touchstart', this._onDown, this);                                            // 7432\n\t},                                                                                                                 // 7433\n                                                                                                                    // 7434\n\tremoveHooks: function () {                                                                                         // 7435\n\t\tL.DomEvent.off(this._map._container, 'touchstart', this._onDown, this);                                           // 7436\n\t},                                                                                                                 // 7437\n                                                                                                                    // 7438\n\t_onDown: function (e) {                                                                                            // 7439\n\t\tif (!e.touches) { return; }                                                                                       // 7440\n                                                                                                                    // 7441\n\t\tL.DomEvent.preventDefault(e);                                                                                     // 7442\n                                                                                                                    // 7443\n\t\tthis._fireClick = true;                                                                                           // 7444\n                                                                                                                    // 7445\n\t\t// don't simulate click or track longpress if more than 1 touch                                                   // 7446\n\t\tif (e.touches.length > 1) {                                                                                       // 7447\n\t\t\tthis._fireClick = false;                                                                                         // 7448\n\t\t\tclearTimeout(this._holdTimeout);                                                                                 // 7449\n\t\t\treturn;                                                                                                          // 7450\n\t\t}                                                                                                                 // 7451\n                                                                                                                    // 7452\n\t\tvar first = e.touches[0],                                                                                         // 7453\n\t\t    el = first.target;                                                                                            // 7454\n                                                                                                                    // 7455\n\t\tthis._startPos = this._newPos = new L.Point(first.clientX, first.clientY);                                        // 7456\n                                                                                                                    // 7457\n\t\t// if touching a link, highlight it                                                                               // 7458\n\t\tif (el.tagName && el.tagName.toLowerCase() === 'a') {                                                             // 7459\n\t\t\tL.DomUtil.addClass(el, 'leaflet-active');                                                                        // 7460\n\t\t}                                                                                                                 // 7461\n                                                                                                                    // 7462\n\t\t// simulate long hold but setting a timeout                                                                       // 7463\n\t\tthis._holdTimeout = setTimeout(L.bind(function () {                                                               // 7464\n\t\t\tif (this._isTapValid()) {                                                                                        // 7465\n\t\t\t\tthis._fireClick = false;                                                                                        // 7466\n\t\t\t\tthis._onUp();                                                                                                   // 7467\n\t\t\t\tthis._simulateEvent('contextmenu', first);                                                                      // 7468\n\t\t\t}                                                                                                                // 7469\n\t\t}, this), 1000);                                                                                                  // 7470\n                                                                                                                    // 7471\n\t\tL.DomEvent                                                                                                        // 7472\n\t\t\t.on(document, 'touchmove', this._onMove, this)                                                                   // 7473\n\t\t\t.on(document, 'touchend', this._onUp, this);                                                                     // 7474\n\t},                                                                                                                 // 7475\n                                                                                                                    // 7476\n\t_onUp: function (e) {                                                                                              // 7477\n\t\tclearTimeout(this._holdTimeout);                                                                                  // 7478\n                                                                                                                    // 7479\n\t\tL.DomEvent                                                                                                        // 7480\n\t\t\t.off(document, 'touchmove', this._onMove, this)                                                                  // 7481\n\t\t\t.off(document, 'touchend', this._onUp, this);                                                                    // 7482\n                                                                                                                    // 7483\n\t\tif (this._fireClick && e && e.changedTouches) {                                                                   // 7484\n                                                                                                                    // 7485\n\t\t\tvar first = e.changedTouches[0],                                                                                 // 7486\n\t\t\t    el = first.target;                                                                                           // 7487\n                                                                                                                    // 7488\n\t\t\tif (el && el.tagName && el.tagName.toLowerCase() === 'a') {                                                      // 7489\n\t\t\t\tL.DomUtil.removeClass(el, 'leaflet-active');                                                                    // 7490\n\t\t\t}                                                                                                                // 7491\n                                                                                                                    // 7492\n\t\t\t// simulate click if the touch didn't move too much                                                              // 7493\n\t\t\tif (this._isTapValid()) {                                                                                        // 7494\n\t\t\t\tthis._simulateEvent('click', first);                                                                            // 7495\n\t\t\t}                                                                                                                // 7496\n\t\t}                                                                                                                 // 7497\n\t},                                                                                                                 // 7498\n                                                                                                                    // 7499\n\t_isTapValid: function () {                                                                                         // 7500\n\t\treturn this._newPos.distanceTo(this._startPos) <= this._map.options.tapTolerance;                                 // 7501\n\t},                                                                                                                 // 7502\n                                                                                                                    // 7503\n\t_onMove: function (e) {                                                                                            // 7504\n\t\tvar first = e.touches[0];                                                                                         // 7505\n\t\tthis._newPos = new L.Point(first.clientX, first.clientY);                                                         // 7506\n\t},                                                                                                                 // 7507\n                                                                                                                    // 7508\n\t_simulateEvent: function (type, e) {                                                                               // 7509\n\t\tvar simulatedEvent = document.createEvent('MouseEvents');                                                         // 7510\n                                                                                                                    // 7511\n\t\tsimulatedEvent._simulated = true;                                                                                 // 7512\n\t\te.target._simulatedClick = true;                                                                                  // 7513\n                                                                                                                    // 7514\n\t\tsimulatedEvent.initMouseEvent(                                                                                    // 7515\n\t\t        type, true, true, window, 1,                                                                              // 7516\n\t\t        e.screenX, e.screenY,                                                                                     // 7517\n\t\t        e.clientX, e.clientY,                                                                                     // 7518\n\t\t        false, false, false, false, 0, null);                                                                     // 7519\n                                                                                                                    // 7520\n\t\te.target.dispatchEvent(simulatedEvent);                                                                           // 7521\n\t}                                                                                                                  // 7522\n});                                                                                                                 // 7523\n                                                                                                                    // 7524\nif (L.Browser.touch && !L.Browser.pointer) {                                                                        // 7525\n\tL.Map.addInitHook('addHandler', 'tap', L.Map.Tap);                                                                 // 7526\n}                                                                                                                   // 7527\n                                                                                                                    // 7528\n                                                                                                                    // 7529\n/*                                                                                                                  // 7530\n * L.Handler.ShiftDragZoom is used to add shift-drag zoom interaction to the map                                    // 7531\n  * (zoom to a selected bounding box), enabled by default.                                                          // 7532\n */                                                                                                                 // 7533\n                                                                                                                    // 7534\nL.Map.mergeOptions({                                                                                                // 7535\n\tboxZoom: true                                                                                                      // 7536\n});                                                                                                                 // 7537\n                                                                                                                    // 7538\nL.Map.BoxZoom = L.Handler.extend({                                                                                  // 7539\n\tinitialize: function (map) {                                                                                       // 7540\n\t\tthis._map = map;                                                                                                  // 7541\n\t\tthis._container = map._container;                                                                                 // 7542\n\t\tthis._pane = map._panes.overlayPane;                                                                              // 7543\n\t\tthis._moved = false;                                                                                              // 7544\n\t},                                                                                                                 // 7545\n                                                                                                                    // 7546\n\taddHooks: function () {                                                                                            // 7547\n\t\tL.DomEvent.on(this._container, 'mousedown', this._onMouseDown, this);                                             // 7548\n\t},                                                                                                                 // 7549\n                                                                                                                    // 7550\n\tremoveHooks: function () {                                                                                         // 7551\n\t\tL.DomEvent.off(this._container, 'mousedown', this._onMouseDown);                                                  // 7552\n\t\tthis._moved = false;                                                                                              // 7553\n\t},                                                                                                                 // 7554\n                                                                                                                    // 7555\n\tmoved: function () {                                                                                               // 7556\n\t\treturn this._moved;                                                                                               // 7557\n\t},                                                                                                                 // 7558\n                                                                                                                    // 7559\n\t_onMouseDown: function (e) {                                                                                       // 7560\n\t\tthis._moved = false;                                                                                              // 7561\n                                                                                                                    // 7562\n\t\tif (!e.shiftKey || ((e.which !== 1) && (e.button !== 1))) { return false; }                                       // 7563\n                                                                                                                    // 7564\n\t\tL.DomUtil.disableTextSelection();                                                                                 // 7565\n\t\tL.DomUtil.disableImageDrag();                                                                                     // 7566\n                                                                                                                    // 7567\n\t\tthis._startLayerPoint = this._map.mouseEventToLayerPoint(e);                                                      // 7568\n                                                                                                                    // 7569\n\t\tL.DomEvent                                                                                                        // 7570\n\t\t    .on(document, 'mousemove', this._onMouseMove, this)                                                           // 7571\n\t\t    .on(document, 'mouseup', this._onMouseUp, this)                                                               // 7572\n\t\t    .on(document, 'keydown', this._onKeyDown, this);                                                              // 7573\n\t},                                                                                                                 // 7574\n                                                                                                                    // 7575\n\t_onMouseMove: function (e) {                                                                                       // 7576\n\t\tif (!this._moved) {                                                                                               // 7577\n\t\t\tthis._box = L.DomUtil.create('div', 'leaflet-zoom-box', this._pane);                                             // 7578\n\t\t\tL.DomUtil.setPosition(this._box, this._startLayerPoint);                                                         // 7579\n                                                                                                                    // 7580\n\t\t\t//TODO refactor: move cursor to styles                                                                           // 7581\n\t\t\tthis._container.style.cursor = 'crosshair';                                                                      // 7582\n\t\t\tthis._map.fire('boxzoomstart');                                                                                  // 7583\n\t\t}                                                                                                                 // 7584\n                                                                                                                    // 7585\n\t\tvar startPoint = this._startLayerPoint,                                                                           // 7586\n\t\t    box = this._box,                                                                                              // 7587\n                                                                                                                    // 7588\n\t\t    layerPoint = this._map.mouseEventToLayerPoint(e),                                                             // 7589\n\t\t    offset = layerPoint.subtract(startPoint),                                                                     // 7590\n                                                                                                                    // 7591\n\t\t    newPos = new L.Point(                                                                                         // 7592\n\t\t        Math.min(layerPoint.x, startPoint.x),                                                                     // 7593\n\t\t        Math.min(layerPoint.y, startPoint.y));                                                                    // 7594\n                                                                                                                    // 7595\n\t\tL.DomUtil.setPosition(box, newPos);                                                                               // 7596\n                                                                                                                    // 7597\n\t\tthis._moved = true;                                                                                               // 7598\n                                                                                                                    // 7599\n\t\t// TODO refactor: remove hardcoded 4 pixels                                                                       // 7600\n\t\tbox.style.width  = (Math.max(0, Math.abs(offset.x) - 4)) + 'px';                                                  // 7601\n\t\tbox.style.height = (Math.max(0, Math.abs(offset.y) - 4)) + 'px';                                                  // 7602\n\t},                                                                                                                 // 7603\n                                                                                                                    // 7604\n\t_finish: function () {                                                                                             // 7605\n\t\tif (this._moved) {                                                                                                // 7606\n\t\t\tthis._pane.removeChild(this._box);                                                                               // 7607\n\t\t\tthis._container.style.cursor = '';                                                                               // 7608\n\t\t}                                                                                                                 // 7609\n                                                                                                                    // 7610\n\t\tL.DomUtil.enableTextSelection();                                                                                  // 7611\n\t\tL.DomUtil.enableImageDrag();                                                                                      // 7612\n                                                                                                                    // 7613\n\t\tL.DomEvent                                                                                                        // 7614\n\t\t    .off(document, 'mousemove', this._onMouseMove)                                                                // 7615\n\t\t    .off(document, 'mouseup', this._onMouseUp)                                                                    // 7616\n\t\t    .off(document, 'keydown', this._onKeyDown);                                                                   // 7617\n\t},                                                                                                                 // 7618\n                                                                                                                    // 7619\n\t_onMouseUp: function (e) {                                                                                         // 7620\n                                                                                                                    // 7621\n\t\tthis._finish();                                                                                                   // 7622\n                                                                                                                    // 7623\n\t\tvar map = this._map,                                                                                              // 7624\n\t\t    layerPoint = map.mouseEventToLayerPoint(e);                                                                   // 7625\n                                                                                                                    // 7626\n\t\tif (this._startLayerPoint.equals(layerPoint)) { return; }                                                         // 7627\n                                                                                                                    // 7628\n\t\tvar bounds = new L.LatLngBounds(                                                                                  // 7629\n\t\t        map.layerPointToLatLng(this._startLayerPoint),                                                            // 7630\n\t\t        map.layerPointToLatLng(layerPoint));                                                                      // 7631\n                                                                                                                    // 7632\n\t\tmap.fitBounds(bounds);                                                                                            // 7633\n                                                                                                                    // 7634\n\t\tmap.fire('boxzoomend', {                                                                                          // 7635\n\t\t\tboxZoomBounds: bounds                                                                                            // 7636\n\t\t});                                                                                                               // 7637\n\t},                                                                                                                 // 7638\n                                                                                                                    // 7639\n\t_onKeyDown: function (e) {                                                                                         // 7640\n\t\tif (e.keyCode === 27) {                                                                                           // 7641\n\t\t\tthis._finish();                                                                                                  // 7642\n\t\t}                                                                                                                 // 7643\n\t}                                                                                                                  // 7644\n});                                                                                                                 // 7645\n                                                                                                                    // 7646\nL.Map.addInitHook('addHandler', 'boxZoom', L.Map.BoxZoom);                                                          // 7647\n                                                                                                                    // 7648\n                                                                                                                    // 7649\n/*                                                                                                                  // 7650\n * L.Map.Keyboard is handling keyboard interaction with the map, enabled by default.                                // 7651\n */                                                                                                                 // 7652\n                                                                                                                    // 7653\nL.Map.mergeOptions({                                                                                                // 7654\n\tkeyboard: true,                                                                                                    // 7655\n\tkeyboardPanOffset: 80,                                                                                             // 7656\n\tkeyboardZoomOffset: 1                                                                                              // 7657\n});                                                                                                                 // 7658\n                                                                                                                    // 7659\nL.Map.Keyboard = L.Handler.extend({                                                                                 // 7660\n                                                                                                                    // 7661\n\tkeyCodes: {                                                                                                        // 7662\n\t\tleft:    [37],                                                                                                    // 7663\n\t\tright:   [39],                                                                                                    // 7664\n\t\tdown:    [40],                                                                                                    // 7665\n\t\tup:      [38],                                                                                                    // 7666\n\t\tzoomIn:  [187, 107, 61, 171],                                                                                     // 7667\n\t\tzoomOut: [189, 109, 173]                                                                                          // 7668\n\t},                                                                                                                 // 7669\n                                                                                                                    // 7670\n\tinitialize: function (map) {                                                                                       // 7671\n\t\tthis._map = map;                                                                                                  // 7672\n                                                                                                                    // 7673\n\t\tthis._setPanOffset(map.options.keyboardPanOffset);                                                                // 7674\n\t\tthis._setZoomOffset(map.options.keyboardZoomOffset);                                                              // 7675\n\t},                                                                                                                 // 7676\n                                                                                                                    // 7677\n\taddHooks: function () {                                                                                            // 7678\n\t\tvar container = this._map._container;                                                                             // 7679\n                                                                                                                    // 7680\n\t\t// make the container focusable by tabbing                                                                        // 7681\n\t\tif (container.tabIndex === -1) {                                                                                  // 7682\n\t\t\tcontainer.tabIndex = '0';                                                                                        // 7683\n\t\t}                                                                                                                 // 7684\n                                                                                                                    // 7685\n\t\tL.DomEvent                                                                                                        // 7686\n\t\t    .on(container, 'focus', this._onFocus, this)                                                                  // 7687\n\t\t    .on(container, 'blur', this._onBlur, this)                                                                    // 7688\n\t\t    .on(container, 'mousedown', this._onMouseDown, this);                                                         // 7689\n                                                                                                                    // 7690\n\t\tthis._map                                                                                                         // 7691\n\t\t    .on('focus', this._addHooks, this)                                                                            // 7692\n\t\t    .on('blur', this._removeHooks, this);                                                                         // 7693\n\t},                                                                                                                 // 7694\n                                                                                                                    // 7695\n\tremoveHooks: function () {                                                                                         // 7696\n\t\tthis._removeHooks();                                                                                              // 7697\n                                                                                                                    // 7698\n\t\tvar container = this._map._container;                                                                             // 7699\n                                                                                                                    // 7700\n\t\tL.DomEvent                                                                                                        // 7701\n\t\t    .off(container, 'focus', this._onFocus, this)                                                                 // 7702\n\t\t    .off(container, 'blur', this._onBlur, this)                                                                   // 7703\n\t\t    .off(container, 'mousedown', this._onMouseDown, this);                                                        // 7704\n                                                                                                                    // 7705\n\t\tthis._map                                                                                                         // 7706\n\t\t    .off('focus', this._addHooks, this)                                                                           // 7707\n\t\t    .off('blur', this._removeHooks, this);                                                                        // 7708\n\t},                                                                                                                 // 7709\n                                                                                                                    // 7710\n\t_onMouseDown: function () {                                                                                        // 7711\n\t\tif (this._focused) { return; }                                                                                    // 7712\n                                                                                                                    // 7713\n\t\tvar body = document.body,                                                                                         // 7714\n\t\t    docEl = document.documentElement,                                                                             // 7715\n\t\t    top = body.scrollTop || docEl.scrollTop,                                                                      // 7716\n\t\t    left = body.scrollLeft || docEl.scrollLeft;                                                                   // 7717\n                                                                                                                    // 7718\n\t\tthis._map._container.focus();                                                                                     // 7719\n                                                                                                                    // 7720\n\t\twindow.scrollTo(left, top);                                                                                       // 7721\n\t},                                                                                                                 // 7722\n                                                                                                                    // 7723\n\t_onFocus: function () {                                                                                            // 7724\n\t\tthis._focused = true;                                                                                             // 7725\n\t\tthis._map.fire('focus');                                                                                          // 7726\n\t},                                                                                                                 // 7727\n                                                                                                                    // 7728\n\t_onBlur: function () {                                                                                             // 7729\n\t\tthis._focused = false;                                                                                            // 7730\n\t\tthis._map.fire('blur');                                                                                           // 7731\n\t},                                                                                                                 // 7732\n                                                                                                                    // 7733\n\t_setPanOffset: function (pan) {                                                                                    // 7734\n\t\tvar keys = this._panKeys = {},                                                                                    // 7735\n\t\t    codes = this.keyCodes,                                                                                        // 7736\n\t\t    i, len;                                                                                                       // 7737\n                                                                                                                    // 7738\n\t\tfor (i = 0, len = codes.left.length; i < len; i++) {                                                              // 7739\n\t\t\tkeys[codes.left[i]] = [-1 * pan, 0];                                                                             // 7740\n\t\t}                                                                                                                 // 7741\n\t\tfor (i = 0, len = codes.right.length; i < len; i++) {                                                             // 7742\n\t\t\tkeys[codes.right[i]] = [pan, 0];                                                                                 // 7743\n\t\t}                                                                                                                 // 7744\n\t\tfor (i = 0, len = codes.down.length; i < len; i++) {                                                              // 7745\n\t\t\tkeys[codes.down[i]] = [0, pan];                                                                                  // 7746\n\t\t}                                                                                                                 // 7747\n\t\tfor (i = 0, len = codes.up.length; i < len; i++) {                                                                // 7748\n\t\t\tkeys[codes.up[i]] = [0, -1 * pan];                                                                               // 7749\n\t\t}                                                                                                                 // 7750\n\t},                                                                                                                 // 7751\n                                                                                                                    // 7752\n\t_setZoomOffset: function (zoom) {                                                                                  // 7753\n\t\tvar keys = this._zoomKeys = {},                                                                                   // 7754\n\t\t    codes = this.keyCodes,                                                                                        // 7755\n\t\t    i, len;                                                                                                       // 7756\n                                                                                                                    // 7757\n\t\tfor (i = 0, len = codes.zoomIn.length; i < len; i++) {                                                            // 7758\n\t\t\tkeys[codes.zoomIn[i]] = zoom;                                                                                    // 7759\n\t\t}                                                                                                                 // 7760\n\t\tfor (i = 0, len = codes.zoomOut.length; i < len; i++) {                                                           // 7761\n\t\t\tkeys[codes.zoomOut[i]] = -zoom;                                                                                  // 7762\n\t\t}                                                                                                                 // 7763\n\t},                                                                                                                 // 7764\n                                                                                                                    // 7765\n\t_addHooks: function () {                                                                                           // 7766\n\t\tL.DomEvent.on(document, 'keydown', this._onKeyDown, this);                                                        // 7767\n\t},                                                                                                                 // 7768\n                                                                                                                    // 7769\n\t_removeHooks: function () {                                                                                        // 7770\n\t\tL.DomEvent.off(document, 'keydown', this._onKeyDown, this);                                                       // 7771\n\t},                                                                                                                 // 7772\n                                                                                                                    // 7773\n\t_onKeyDown: function (e) {                                                                                         // 7774\n\t\tvar key = e.keyCode,                                                                                              // 7775\n\t\t    map = this._map;                                                                                              // 7776\n                                                                                                                    // 7777\n\t\tif (key in this._panKeys) {                                                                                       // 7778\n                                                                                                                    // 7779\n\t\t\tif (map._panAnim && map._panAnim._inProgress) { return; }                                                        // 7780\n                                                                                                                    // 7781\n\t\t\tmap.panBy(this._panKeys[key]);                                                                                   // 7782\n                                                                                                                    // 7783\n\t\t\tif (map.options.maxBounds) {                                                                                     // 7784\n\t\t\t\tmap.panInsideBounds(map.options.maxBounds);                                                                     // 7785\n\t\t\t}                                                                                                                // 7786\n                                                                                                                    // 7787\n\t\t} else if (key in this._zoomKeys) {                                                                               // 7788\n\t\t\tmap.setZoom(map.getZoom() + this._zoomKeys[key]);                                                                // 7789\n                                                                                                                    // 7790\n\t\t} else {                                                                                                          // 7791\n\t\t\treturn;                                                                                                          // 7792\n\t\t}                                                                                                                 // 7793\n                                                                                                                    // 7794\n\t\tL.DomEvent.stop(e);                                                                                               // 7795\n\t}                                                                                                                  // 7796\n});                                                                                                                 // 7797\n                                                                                                                    // 7798\nL.Map.addInitHook('addHandler', 'keyboard', L.Map.Keyboard);                                                        // 7799\n                                                                                                                    // 7800\n                                                                                                                    // 7801\n/*                                                                                                                  // 7802\n * L.Handler.MarkerDrag is used internally by L.Marker to make the markers draggable.                               // 7803\n */                                                                                                                 // 7804\n                                                                                                                    // 7805\nL.Handler.MarkerDrag = L.Handler.extend({                                                                           // 7806\n\tinitialize: function (marker) {                                                                                    // 7807\n\t\tthis._marker = marker;                                                                                            // 7808\n\t},                                                                                                                 // 7809\n                                                                                                                    // 7810\n\taddHooks: function () {                                                                                            // 7811\n\t\tvar icon = this._marker._icon;                                                                                    // 7812\n\t\tif (!this._draggable) {                                                                                           // 7813\n\t\t\tthis._draggable = new L.Draggable(icon, icon);                                                                   // 7814\n\t\t}                                                                                                                 // 7815\n                                                                                                                    // 7816\n\t\tthis._draggable                                                                                                   // 7817\n\t\t\t.on('dragstart', this._onDragStart, this)                                                                        // 7818\n\t\t\t.on('drag', this._onDrag, this)                                                                                  // 7819\n\t\t\t.on('dragend', this._onDragEnd, this);                                                                           // 7820\n\t\tthis._draggable.enable();                                                                                         // 7821\n\t\tL.DomUtil.addClass(this._marker._icon, 'leaflet-marker-draggable');                                               // 7822\n\t},                                                                                                                 // 7823\n                                                                                                                    // 7824\n\tremoveHooks: function () {                                                                                         // 7825\n\t\tthis._draggable                                                                                                   // 7826\n\t\t\t.off('dragstart', this._onDragStart, this)                                                                       // 7827\n\t\t\t.off('drag', this._onDrag, this)                                                                                 // 7828\n\t\t\t.off('dragend', this._onDragEnd, this);                                                                          // 7829\n                                                                                                                    // 7830\n\t\tthis._draggable.disable();                                                                                        // 7831\n\t\tL.DomUtil.removeClass(this._marker._icon, 'leaflet-marker-draggable');                                            // 7832\n\t},                                                                                                                 // 7833\n                                                                                                                    // 7834\n\tmoved: function () {                                                                                               // 7835\n\t\treturn this._draggable && this._draggable._moved;                                                                 // 7836\n\t},                                                                                                                 // 7837\n                                                                                                                    // 7838\n\t_onDragStart: function () {                                                                                        // 7839\n\t\tthis._marker                                                                                                      // 7840\n\t\t    .closePopup()                                                                                                 // 7841\n\t\t    .fire('movestart')                                                                                            // 7842\n\t\t    .fire('dragstart');                                                                                           // 7843\n\t},                                                                                                                 // 7844\n                                                                                                                    // 7845\n\t_onDrag: function () {                                                                                             // 7846\n\t\tvar marker = this._marker,                                                                                        // 7847\n\t\t    shadow = marker._shadow,                                                                                      // 7848\n\t\t    iconPos = L.DomUtil.getPosition(marker._icon),                                                                // 7849\n\t\t    latlng = marker._map.layerPointToLatLng(iconPos);                                                             // 7850\n                                                                                                                    // 7851\n\t\t// update shadow position                                                                                         // 7852\n\t\tif (shadow) {                                                                                                     // 7853\n\t\t\tL.DomUtil.setPosition(shadow, iconPos);                                                                          // 7854\n\t\t}                                                                                                                 // 7855\n                                                                                                                    // 7856\n\t\tmarker._latlng = latlng;                                                                                          // 7857\n                                                                                                                    // 7858\n\t\tmarker                                                                                                            // 7859\n\t\t    .fire('move', {latlng: latlng})                                                                               // 7860\n\t\t    .fire('drag');                                                                                                // 7861\n\t},                                                                                                                 // 7862\n                                                                                                                    // 7863\n\t_onDragEnd: function (e) {                                                                                         // 7864\n\t\tthis._marker                                                                                                      // 7865\n\t\t    .fire('moveend')                                                                                              // 7866\n\t\t    .fire('dragend', e);                                                                                          // 7867\n\t}                                                                                                                  // 7868\n});                                                                                                                 // 7869\n                                                                                                                    // 7870\n                                                                                                                    // 7871\n/*                                                                                                                  // 7872\n * L.Control is a base class for implementing map controls. Handles positioning.                                    // 7873\n * All other controls extend from this class.                                                                       // 7874\n */                                                                                                                 // 7875\n                                                                                                                    // 7876\nL.Control = L.Class.extend({                                                                                        // 7877\n\toptions: {                                                                                                         // 7878\n\t\tposition: 'topright'                                                                                              // 7879\n\t},                                                                                                                 // 7880\n                                                                                                                    // 7881\n\tinitialize: function (options) {                                                                                   // 7882\n\t\tL.setOptions(this, options);                                                                                      // 7883\n\t},                                                                                                                 // 7884\n                                                                                                                    // 7885\n\tgetPosition: function () {                                                                                         // 7886\n\t\treturn this.options.position;                                                                                     // 7887\n\t},                                                                                                                 // 7888\n                                                                                                                    // 7889\n\tsetPosition: function (position) {                                                                                 // 7890\n\t\tvar map = this._map;                                                                                              // 7891\n                                                                                                                    // 7892\n\t\tif (map) {                                                                                                        // 7893\n\t\t\tmap.removeControl(this);                                                                                         // 7894\n\t\t}                                                                                                                 // 7895\n                                                                                                                    // 7896\n\t\tthis.options.position = position;                                                                                 // 7897\n                                                                                                                    // 7898\n\t\tif (map) {                                                                                                        // 7899\n\t\t\tmap.addControl(this);                                                                                            // 7900\n\t\t}                                                                                                                 // 7901\n                                                                                                                    // 7902\n\t\treturn this;                                                                                                      // 7903\n\t},                                                                                                                 // 7904\n                                                                                                                    // 7905\n\tgetContainer: function () {                                                                                        // 7906\n\t\treturn this._container;                                                                                           // 7907\n\t},                                                                                                                 // 7908\n                                                                                                                    // 7909\n\taddTo: function (map) {                                                                                            // 7910\n\t\tthis._map = map;                                                                                                  // 7911\n                                                                                                                    // 7912\n\t\tvar container = this._container = this.onAdd(map),                                                                // 7913\n\t\t    pos = this.getPosition(),                                                                                     // 7914\n\t\t    corner = map._controlCorners[pos];                                                                            // 7915\n                                                                                                                    // 7916\n\t\tL.DomUtil.addClass(container, 'leaflet-control');                                                                 // 7917\n                                                                                                                    // 7918\n\t\tif (pos.indexOf('bottom') !== -1) {                                                                               // 7919\n\t\t\tcorner.insertBefore(container, corner.firstChild);                                                               // 7920\n\t\t} else {                                                                                                          // 7921\n\t\t\tcorner.appendChild(container);                                                                                   // 7922\n\t\t}                                                                                                                 // 7923\n                                                                                                                    // 7924\n\t\treturn this;                                                                                                      // 7925\n\t},                                                                                                                 // 7926\n                                                                                                                    // 7927\n\tremoveFrom: function (map) {                                                                                       // 7928\n\t\tvar pos = this.getPosition(),                                                                                     // 7929\n\t\t    corner = map._controlCorners[pos];                                                                            // 7930\n                                                                                                                    // 7931\n\t\tcorner.removeChild(this._container);                                                                              // 7932\n\t\tthis._map = null;                                                                                                 // 7933\n                                                                                                                    // 7934\n\t\tif (this.onRemove) {                                                                                              // 7935\n\t\t\tthis.onRemove(map);                                                                                              // 7936\n\t\t}                                                                                                                 // 7937\n                                                                                                                    // 7938\n\t\treturn this;                                                                                                      // 7939\n\t},                                                                                                                 // 7940\n                                                                                                                    // 7941\n\t_refocusOnMap: function () {                                                                                       // 7942\n\t\tif (this._map) {                                                                                                  // 7943\n\t\t\tthis._map.getContainer().focus();                                                                                // 7944\n\t\t}                                                                                                                 // 7945\n\t}                                                                                                                  // 7946\n});                                                                                                                 // 7947\n                                                                                                                    // 7948\nL.control = function (options) {                                                                                    // 7949\n\treturn new L.Control(options);                                                                                     // 7950\n};                                                                                                                  // 7951\n                                                                                                                    // 7952\n                                                                                                                    // 7953\n// adds control-related methods to L.Map                                                                            // 7954\n                                                                                                                    // 7955\nL.Map.include({                                                                                                     // 7956\n\taddControl: function (control) {                                                                                   // 7957\n\t\tcontrol.addTo(this);                                                                                              // 7958\n\t\treturn this;                                                                                                      // 7959\n\t},                                                                                                                 // 7960\n                                                                                                                    // 7961\n\tremoveControl: function (control) {                                                                                // 7962\n\t\tcontrol.removeFrom(this);                                                                                         // 7963\n\t\treturn this;                                                                                                      // 7964\n\t},                                                                                                                 // 7965\n                                                                                                                    // 7966\n\t_initControlPos: function () {                                                                                     // 7967\n\t\tvar corners = this._controlCorners = {},                                                                          // 7968\n\t\t    l = 'leaflet-',                                                                                               // 7969\n\t\t    container = this._controlContainer =                                                                          // 7970\n\t\t            L.DomUtil.create('div', l + 'control-container', this._container);                                    // 7971\n                                                                                                                    // 7972\n\t\tfunction createCorner(vSide, hSide) {                                                                             // 7973\n\t\t\tvar className = l + vSide + ' ' + l + hSide;                                                                     // 7974\n                                                                                                                    // 7975\n\t\t\tcorners[vSide + hSide] = L.DomUtil.create('div', className, container);                                          // 7976\n\t\t}                                                                                                                 // 7977\n                                                                                                                    // 7978\n\t\tcreateCorner('top', 'left');                                                                                      // 7979\n\t\tcreateCorner('top', 'right');                                                                                     // 7980\n\t\tcreateCorner('bottom', 'left');                                                                                   // 7981\n\t\tcreateCorner('bottom', 'right');                                                                                  // 7982\n\t},                                                                                                                 // 7983\n                                                                                                                    // 7984\n\t_clearControlPos: function () {                                                                                    // 7985\n\t\tthis._container.removeChild(this._controlContainer);                                                              // 7986\n\t}                                                                                                                  // 7987\n});                                                                                                                 // 7988\n                                                                                                                    // 7989\n                                                                                                                    // 7990\n/*                                                                                                                  // 7991\n * L.Control.Zoom is used for the default zoom buttons on the map.                                                  // 7992\n */                                                                                                                 // 7993\n                                                                                                                    // 7994\nL.Control.Zoom = L.Control.extend({                                                                                 // 7995\n\toptions: {                                                                                                         // 7996\n\t\tposition: 'topleft',                                                                                              // 7997\n\t\tzoomInText: '+',                                                                                                  // 7998\n\t\tzoomInTitle: 'Zoom in',                                                                                           // 7999\n\t\tzoomOutText: '-',                                                                                                 // 8000\n\t\tzoomOutTitle: 'Zoom out'                                                                                          // 8001\n\t},                                                                                                                 // 8002\n                                                                                                                    // 8003\n\tonAdd: function (map) {                                                                                            // 8004\n\t\tvar zoomName = 'leaflet-control-zoom',                                                                            // 8005\n\t\t    container = L.DomUtil.create('div', zoomName + ' leaflet-bar');                                               // 8006\n                                                                                                                    // 8007\n\t\tthis._map = map;                                                                                                  // 8008\n                                                                                                                    // 8009\n\t\tthis._zoomInButton  = this._createButton(                                                                         // 8010\n\t\t        this.options.zoomInText, this.options.zoomInTitle,                                                        // 8011\n\t\t        zoomName + '-in',  container, this._zoomIn,  this);                                                       // 8012\n\t\tthis._zoomOutButton = this._createButton(                                                                         // 8013\n\t\t        this.options.zoomOutText, this.options.zoomOutTitle,                                                      // 8014\n\t\t        zoomName + '-out', container, this._zoomOut, this);                                                       // 8015\n                                                                                                                    // 8016\n\t\tthis._updateDisabled();                                                                                           // 8017\n\t\tmap.on('zoomend zoomlevelschange', this._updateDisabled, this);                                                   // 8018\n                                                                                                                    // 8019\n\t\treturn container;                                                                                                 // 8020\n\t},                                                                                                                 // 8021\n                                                                                                                    // 8022\n\tonRemove: function (map) {                                                                                         // 8023\n\t\tmap.off('zoomend zoomlevelschange', this._updateDisabled, this);                                                  // 8024\n\t},                                                                                                                 // 8025\n                                                                                                                    // 8026\n\t_zoomIn: function (e) {                                                                                            // 8027\n\t\tthis._map.zoomIn(e.shiftKey ? 3 : 1);                                                                             // 8028\n\t},                                                                                                                 // 8029\n                                                                                                                    // 8030\n\t_zoomOut: function (e) {                                                                                           // 8031\n\t\tthis._map.zoomOut(e.shiftKey ? 3 : 1);                                                                            // 8032\n\t},                                                                                                                 // 8033\n                                                                                                                    // 8034\n\t_createButton: function (html, title, className, container, fn, context) {                                         // 8035\n\t\tvar link = L.DomUtil.create('a', className, container);                                                           // 8036\n\t\tlink.innerHTML = html;                                                                                            // 8037\n\t\tlink.href = '#';                                                                                                  // 8038\n\t\tlink.title = title;                                                                                               // 8039\n                                                                                                                    // 8040\n\t\tvar stop = L.DomEvent.stopPropagation;                                                                            // 8041\n                                                                                                                    // 8042\n\t\tL.DomEvent                                                                                                        // 8043\n\t\t    .on(link, 'click', stop)                                                                                      // 8044\n\t\t    .on(link, 'mousedown', stop)                                                                                  // 8045\n\t\t    .on(link, 'dblclick', stop)                                                                                   // 8046\n\t\t    .on(link, 'click', L.DomEvent.preventDefault)                                                                 // 8047\n\t\t    .on(link, 'click', fn, context)                                                                               // 8048\n\t\t    .on(link, 'click', this._refocusOnMap, context);                                                              // 8049\n                                                                                                                    // 8050\n\t\treturn link;                                                                                                      // 8051\n\t},                                                                                                                 // 8052\n                                                                                                                    // 8053\n\t_updateDisabled: function () {                                                                                     // 8054\n\t\tvar map = this._map,                                                                                              // 8055\n\t\t\tclassName = 'leaflet-disabled';                                                                                  // 8056\n                                                                                                                    // 8057\n\t\tL.DomUtil.removeClass(this._zoomInButton, className);                                                             // 8058\n\t\tL.DomUtil.removeClass(this._zoomOutButton, className);                                                            // 8059\n                                                                                                                    // 8060\n\t\tif (map._zoom === map.getMinZoom()) {                                                                             // 8061\n\t\t\tL.DomUtil.addClass(this._zoomOutButton, className);                                                              // 8062\n\t\t}                                                                                                                 // 8063\n\t\tif (map._zoom === map.getMaxZoom()) {                                                                             // 8064\n\t\t\tL.DomUtil.addClass(this._zoomInButton, className);                                                               // 8065\n\t\t}                                                                                                                 // 8066\n\t}                                                                                                                  // 8067\n});                                                                                                                 // 8068\n                                                                                                                    // 8069\nL.Map.mergeOptions({                                                                                                // 8070\n\tzoomControl: true                                                                                                  // 8071\n});                                                                                                                 // 8072\n                                                                                                                    // 8073\nL.Map.addInitHook(function () {                                                                                     // 8074\n\tif (this.options.zoomControl) {                                                                                    // 8075\n\t\tthis.zoomControl = new L.Control.Zoom();                                                                          // 8076\n\t\tthis.addControl(this.zoomControl);                                                                                // 8077\n\t}                                                                                                                  // 8078\n});                                                                                                                 // 8079\n                                                                                                                    // 8080\nL.control.zoom = function (options) {                                                                               // 8081\n\treturn new L.Control.Zoom(options);                                                                                // 8082\n};                                                                                                                  // 8083\n                                                                                                                    // 8084\n                                                                                                                    // 8085\n                                                                                                                    // 8086\n/*                                                                                                                  // 8087\n * L.Control.Attribution is used for displaying attribution on the map (added by default).                          // 8088\n */                                                                                                                 // 8089\n                                                                                                                    // 8090\nL.Control.Attribution = L.Control.extend({                                                                          // 8091\n\toptions: {                                                                                                         // 8092\n\t\tposition: 'bottomright',                                                                                          // 8093\n\t\tprefix: '<a href=\"http://leafletjs.com\" title=\"A JS library for interactive maps\">Leaflet</a>'                    // 8094\n\t},                                                                                                                 // 8095\n                                                                                                                    // 8096\n\tinitialize: function (options) {                                                                                   // 8097\n\t\tL.setOptions(this, options);                                                                                      // 8098\n                                                                                                                    // 8099\n\t\tthis._attributions = {};                                                                                          // 8100\n\t},                                                                                                                 // 8101\n                                                                                                                    // 8102\n\tonAdd: function (map) {                                                                                            // 8103\n\t\tthis._container = L.DomUtil.create('div', 'leaflet-control-attribution');                                         // 8104\n\t\tL.DomEvent.disableClickPropagation(this._container);                                                              // 8105\n                                                                                                                    // 8106\n\t\tfor (var i in map._layers) {                                                                                      // 8107\n\t\t\tif (map._layers[i].getAttribution) {                                                                             // 8108\n\t\t\t\tthis.addAttribution(map._layers[i].getAttribution());                                                           // 8109\n\t\t\t}                                                                                                                // 8110\n\t\t}                                                                                                                 // 8111\n\t\t                                                                                                                  // 8112\n\t\tmap                                                                                                               // 8113\n\t\t    .on('layeradd', this._onLayerAdd, this)                                                                       // 8114\n\t\t    .on('layerremove', this._onLayerRemove, this);                                                                // 8115\n                                                                                                                    // 8116\n\t\tthis._update();                                                                                                   // 8117\n                                                                                                                    // 8118\n\t\treturn this._container;                                                                                           // 8119\n\t},                                                                                                                 // 8120\n                                                                                                                    // 8121\n\tonRemove: function (map) {                                                                                         // 8122\n\t\tmap                                                                                                               // 8123\n\t\t    .off('layeradd', this._onLayerAdd)                                                                            // 8124\n\t\t    .off('layerremove', this._onLayerRemove);                                                                     // 8125\n                                                                                                                    // 8126\n\t},                                                                                                                 // 8127\n                                                                                                                    // 8128\n\tsetPrefix: function (prefix) {                                                                                     // 8129\n\t\tthis.options.prefix = prefix;                                                                                     // 8130\n\t\tthis._update();                                                                                                   // 8131\n\t\treturn this;                                                                                                      // 8132\n\t},                                                                                                                 // 8133\n                                                                                                                    // 8134\n\taddAttribution: function (text) {                                                                                  // 8135\n\t\tif (!text) { return; }                                                                                            // 8136\n                                                                                                                    // 8137\n\t\tif (!this._attributions[text]) {                                                                                  // 8138\n\t\t\tthis._attributions[text] = 0;                                                                                    // 8139\n\t\t}                                                                                                                 // 8140\n\t\tthis._attributions[text]++;                                                                                       // 8141\n                                                                                                                    // 8142\n\t\tthis._update();                                                                                                   // 8143\n                                                                                                                    // 8144\n\t\treturn this;                                                                                                      // 8145\n\t},                                                                                                                 // 8146\n                                                                                                                    // 8147\n\tremoveAttribution: function (text) {                                                                               // 8148\n\t\tif (!text) { return; }                                                                                            // 8149\n                                                                                                                    // 8150\n\t\tif (this._attributions[text]) {                                                                                   // 8151\n\t\t\tthis._attributions[text]--;                                                                                      // 8152\n\t\t\tthis._update();                                                                                                  // 8153\n\t\t}                                                                                                                 // 8154\n                                                                                                                    // 8155\n\t\treturn this;                                                                                                      // 8156\n\t},                                                                                                                 // 8157\n                                                                                                                    // 8158\n\t_update: function () {                                                                                             // 8159\n\t\tif (!this._map) { return; }                                                                                       // 8160\n                                                                                                                    // 8161\n\t\tvar attribs = [];                                                                                                 // 8162\n                                                                                                                    // 8163\n\t\tfor (var i in this._attributions) {                                                                               // 8164\n\t\t\tif (this._attributions[i]) {                                                                                     // 8165\n\t\t\t\tattribs.push(i);                                                                                                // 8166\n\t\t\t}                                                                                                                // 8167\n\t\t}                                                                                                                 // 8168\n                                                                                                                    // 8169\n\t\tvar prefixAndAttribs = [];                                                                                        // 8170\n                                                                                                                    // 8171\n\t\tif (this.options.prefix) {                                                                                        // 8172\n\t\t\tprefixAndAttribs.push(this.options.prefix);                                                                      // 8173\n\t\t}                                                                                                                 // 8174\n\t\tif (attribs.length) {                                                                                             // 8175\n\t\t\tprefixAndAttribs.push(attribs.join(', '));                                                                       // 8176\n\t\t}                                                                                                                 // 8177\n                                                                                                                    // 8178\n\t\tthis._container.innerHTML = prefixAndAttribs.join(' | ');                                                         // 8179\n\t},                                                                                                                 // 8180\n                                                                                                                    // 8181\n\t_onLayerAdd: function (e) {                                                                                        // 8182\n\t\tif (e.layer.getAttribution) {                                                                                     // 8183\n\t\t\tthis.addAttribution(e.layer.getAttribution());                                                                   // 8184\n\t\t}                                                                                                                 // 8185\n\t},                                                                                                                 // 8186\n                                                                                                                    // 8187\n\t_onLayerRemove: function (e) {                                                                                     // 8188\n\t\tif (e.layer.getAttribution) {                                                                                     // 8189\n\t\t\tthis.removeAttribution(e.layer.getAttribution());                                                                // 8190\n\t\t}                                                                                                                 // 8191\n\t}                                                                                                                  // 8192\n});                                                                                                                 // 8193\n                                                                                                                    // 8194\nL.Map.mergeOptions({                                                                                                // 8195\n\tattributionControl: true                                                                                           // 8196\n});                                                                                                                 // 8197\n                                                                                                                    // 8198\nL.Map.addInitHook(function () {                                                                                     // 8199\n\tif (this.options.attributionControl) {                                                                             // 8200\n\t\tthis.attributionControl = (new L.Control.Attribution()).addTo(this);                                              // 8201\n\t}                                                                                                                  // 8202\n});                                                                                                                 // 8203\n                                                                                                                    // 8204\nL.control.attribution = function (options) {                                                                        // 8205\n\treturn new L.Control.Attribution(options);                                                                         // 8206\n};                                                                                                                  // 8207\n                                                                                                                    // 8208\n                                                                                                                    // 8209\n/*                                                                                                                  // 8210\n * L.Control.Scale is used for displaying metric/imperial scale on the map.                                         // 8211\n */                                                                                                                 // 8212\n                                                                                                                    // 8213\nL.Control.Scale = L.Control.extend({                                                                                // 8214\n\toptions: {                                                                                                         // 8215\n\t\tposition: 'bottomleft',                                                                                           // 8216\n\t\tmaxWidth: 100,                                                                                                    // 8217\n\t\tmetric: true,                                                                                                     // 8218\n\t\timperial: true,                                                                                                   // 8219\n\t\tupdateWhenIdle: false                                                                                             // 8220\n\t},                                                                                                                 // 8221\n                                                                                                                    // 8222\n\tonAdd: function (map) {                                                                                            // 8223\n\t\tthis._map = map;                                                                                                  // 8224\n                                                                                                                    // 8225\n\t\tvar className = 'leaflet-control-scale',                                                                          // 8226\n\t\t    container = L.DomUtil.create('div', className),                                                               // 8227\n\t\t    options = this.options;                                                                                       // 8228\n                                                                                                                    // 8229\n\t\tthis._addScales(options, className, container);                                                                   // 8230\n                                                                                                                    // 8231\n\t\tmap.on(options.updateWhenIdle ? 'moveend' : 'move', this._update, this);                                          // 8232\n\t\tmap.whenReady(this._update, this);                                                                                // 8233\n                                                                                                                    // 8234\n\t\treturn container;                                                                                                 // 8235\n\t},                                                                                                                 // 8236\n                                                                                                                    // 8237\n\tonRemove: function (map) {                                                                                         // 8238\n\t\tmap.off(this.options.updateWhenIdle ? 'moveend' : 'move', this._update, this);                                    // 8239\n\t},                                                                                                                 // 8240\n                                                                                                                    // 8241\n\t_addScales: function (options, className, container) {                                                             // 8242\n\t\tif (options.metric) {                                                                                             // 8243\n\t\t\tthis._mScale = L.DomUtil.create('div', className + '-line', container);                                          // 8244\n\t\t}                                                                                                                 // 8245\n\t\tif (options.imperial) {                                                                                           // 8246\n\t\t\tthis._iScale = L.DomUtil.create('div', className + '-line', container);                                          // 8247\n\t\t}                                                                                                                 // 8248\n\t},                                                                                                                 // 8249\n                                                                                                                    // 8250\n\t_update: function () {                                                                                             // 8251\n\t\tvar bounds = this._map.getBounds(),                                                                               // 8252\n\t\t    centerLat = bounds.getCenter().lat,                                                                           // 8253\n\t\t    halfWorldMeters = 6378137 * Math.PI * Math.cos(centerLat * Math.PI / 180),                                    // 8254\n\t\t    dist = halfWorldMeters * (bounds.getNorthEast().lng - bounds.getSouthWest().lng) / 180,                       // 8255\n                                                                                                                    // 8256\n\t\t    size = this._map.getSize(),                                                                                   // 8257\n\t\t    options = this.options,                                                                                       // 8258\n\t\t    maxMeters = 0;                                                                                                // 8259\n                                                                                                                    // 8260\n\t\tif (size.x > 0) {                                                                                                 // 8261\n\t\t\tmaxMeters = dist * (options.maxWidth / size.x);                                                                  // 8262\n\t\t}                                                                                                                 // 8263\n                                                                                                                    // 8264\n\t\tthis._updateScales(options, maxMeters);                                                                           // 8265\n\t},                                                                                                                 // 8266\n                                                                                                                    // 8267\n\t_updateScales: function (options, maxMeters) {                                                                     // 8268\n\t\tif (options.metric && maxMeters) {                                                                                // 8269\n\t\t\tthis._updateMetric(maxMeters);                                                                                   // 8270\n\t\t}                                                                                                                 // 8271\n                                                                                                                    // 8272\n\t\tif (options.imperial && maxMeters) {                                                                              // 8273\n\t\t\tthis._updateImperial(maxMeters);                                                                                 // 8274\n\t\t}                                                                                                                 // 8275\n\t},                                                                                                                 // 8276\n                                                                                                                    // 8277\n\t_updateMetric: function (maxMeters) {                                                                              // 8278\n\t\tvar meters = this._getRoundNum(maxMeters);                                                                        // 8279\n                                                                                                                    // 8280\n\t\tthis._mScale.style.width = this._getScaleWidth(meters / maxMeters) + 'px';                                        // 8281\n\t\tthis._mScale.innerHTML = meters < 1000 ? meters + ' m' : (meters / 1000) + ' km';                                 // 8282\n\t},                                                                                                                 // 8283\n                                                                                                                    // 8284\n\t_updateImperial: function (maxMeters) {                                                                            // 8285\n\t\tvar maxFeet = maxMeters * 3.2808399,                                                                              // 8286\n\t\t    scale = this._iScale,                                                                                         // 8287\n\t\t    maxMiles, miles, feet;                                                                                        // 8288\n                                                                                                                    // 8289\n\t\tif (maxFeet > 5280) {                                                                                             // 8290\n\t\t\tmaxMiles = maxFeet / 5280;                                                                                       // 8291\n\t\t\tmiles = this._getRoundNum(maxMiles);                                                                             // 8292\n                                                                                                                    // 8293\n\t\t\tscale.style.width = this._getScaleWidth(miles / maxMiles) + 'px';                                                // 8294\n\t\t\tscale.innerHTML = miles + ' mi';                                                                                 // 8295\n                                                                                                                    // 8296\n\t\t} else {                                                                                                          // 8297\n\t\t\tfeet = this._getRoundNum(maxFeet);                                                                               // 8298\n                                                                                                                    // 8299\n\t\t\tscale.style.width = this._getScaleWidth(feet / maxFeet) + 'px';                                                  // 8300\n\t\t\tscale.innerHTML = feet + ' ft';                                                                                  // 8301\n\t\t}                                                                                                                 // 8302\n\t},                                                                                                                 // 8303\n                                                                                                                    // 8304\n\t_getScaleWidth: function (ratio) {                                                                                 // 8305\n\t\treturn Math.round(this.options.maxWidth * ratio) - 10;                                                            // 8306\n\t},                                                                                                                 // 8307\n                                                                                                                    // 8308\n\t_getRoundNum: function (num) {                                                                                     // 8309\n\t\tvar pow10 = Math.pow(10, (Math.floor(num) + '').length - 1),                                                      // 8310\n\t\t    d = num / pow10;                                                                                              // 8311\n                                                                                                                    // 8312\n\t\td = d >= 10 ? 10 : d >= 5 ? 5 : d >= 3 ? 3 : d >= 2 ? 2 : 1;                                                      // 8313\n                                                                                                                    // 8314\n\t\treturn pow10 * d;                                                                                                 // 8315\n\t}                                                                                                                  // 8316\n});                                                                                                                 // 8317\n                                                                                                                    // 8318\nL.control.scale = function (options) {                                                                              // 8319\n\treturn new L.Control.Scale(options);                                                                               // 8320\n};                                                                                                                  // 8321\n                                                                                                                    // 8322\n                                                                                                                    // 8323\n/*                                                                                                                  // 8324\n * L.Control.Layers is a control to allow users to switch between different layers on the map.                      // 8325\n */                                                                                                                 // 8326\n                                                                                                                    // 8327\nL.Control.Layers = L.Control.extend({                                                                               // 8328\n\toptions: {                                                                                                         // 8329\n\t\tcollapsed: true,                                                                                                  // 8330\n\t\tposition: 'topright',                                                                                             // 8331\n\t\tautoZIndex: true                                                                                                  // 8332\n\t},                                                                                                                 // 8333\n                                                                                                                    // 8334\n\tinitialize: function (baseLayers, overlays, options) {                                                             // 8335\n\t\tL.setOptions(this, options);                                                                                      // 8336\n                                                                                                                    // 8337\n\t\tthis._layers = {};                                                                                                // 8338\n\t\tthis._lastZIndex = 0;                                                                                             // 8339\n\t\tthis._handlingClick = false;                                                                                      // 8340\n                                                                                                                    // 8341\n\t\tfor (var i in baseLayers) {                                                                                       // 8342\n\t\t\tthis._addLayer(baseLayers[i], i);                                                                                // 8343\n\t\t}                                                                                                                 // 8344\n                                                                                                                    // 8345\n\t\tfor (i in overlays) {                                                                                             // 8346\n\t\t\tthis._addLayer(overlays[i], i, true);                                                                            // 8347\n\t\t}                                                                                                                 // 8348\n\t},                                                                                                                 // 8349\n                                                                                                                    // 8350\n\tonAdd: function (map) {                                                                                            // 8351\n\t\tthis._initLayout();                                                                                               // 8352\n\t\tthis._update();                                                                                                   // 8353\n                                                                                                                    // 8354\n\t\tmap                                                                                                               // 8355\n\t\t    .on('layeradd', this._onLayerChange, this)                                                                    // 8356\n\t\t    .on('layerremove', this._onLayerChange, this);                                                                // 8357\n                                                                                                                    // 8358\n\t\treturn this._container;                                                                                           // 8359\n\t},                                                                                                                 // 8360\n                                                                                                                    // 8361\n\tonRemove: function (map) {                                                                                         // 8362\n\t\tmap                                                                                                               // 8363\n\t\t    .off('layeradd', this._onLayerChange, this)                                                                   // 8364\n\t\t    .off('layerremove', this._onLayerChange, this);                                                               // 8365\n\t},                                                                                                                 // 8366\n                                                                                                                    // 8367\n\taddBaseLayer: function (layer, name) {                                                                             // 8368\n\t\tthis._addLayer(layer, name);                                                                                      // 8369\n\t\tthis._update();                                                                                                   // 8370\n\t\treturn this;                                                                                                      // 8371\n\t},                                                                                                                 // 8372\n                                                                                                                    // 8373\n\taddOverlay: function (layer, name) {                                                                               // 8374\n\t\tthis._addLayer(layer, name, true);                                                                                // 8375\n\t\tthis._update();                                                                                                   // 8376\n\t\treturn this;                                                                                                      // 8377\n\t},                                                                                                                 // 8378\n                                                                                                                    // 8379\n\tremoveLayer: function (layer) {                                                                                    // 8380\n\t\tvar id = L.stamp(layer);                                                                                          // 8381\n\t\tdelete this._layers[id];                                                                                          // 8382\n\t\tthis._update();                                                                                                   // 8383\n\t\treturn this;                                                                                                      // 8384\n\t},                                                                                                                 // 8385\n                                                                                                                    // 8386\n\t_initLayout: function () {                                                                                         // 8387\n\t\tvar className = 'leaflet-control-layers',                                                                         // 8388\n\t\t    container = this._container = L.DomUtil.create('div', className);                                             // 8389\n                                                                                                                    // 8390\n\t\t//Makes this work on IE10 Touch devices by stopping it from firing a mouseout event when the touch is released    // 8391\n\t\tcontainer.setAttribute('aria-haspopup', true);                                                                    // 8392\n                                                                                                                    // 8393\n\t\tif (!L.Browser.touch) {                                                                                           // 8394\n\t\t\tL.DomEvent                                                                                                       // 8395\n\t\t\t\t.disableClickPropagation(container)                                                                             // 8396\n\t\t\t\t.disableScrollPropagation(container);                                                                           // 8397\n\t\t} else {                                                                                                          // 8398\n\t\t\tL.DomEvent.on(container, 'click', L.DomEvent.stopPropagation);                                                   // 8399\n\t\t}                                                                                                                 // 8400\n                                                                                                                    // 8401\n\t\tvar form = this._form = L.DomUtil.create('form', className + '-list');                                            // 8402\n                                                                                                                    // 8403\n\t\tif (this.options.collapsed) {                                                                                     // 8404\n\t\t\tif (!L.Browser.android) {                                                                                        // 8405\n\t\t\t\tL.DomEvent                                                                                                      // 8406\n\t\t\t\t    .on(container, 'mouseover', this._expand, this)                                                             // 8407\n\t\t\t\t    .on(container, 'mouseout', this._collapse, this);                                                           // 8408\n\t\t\t}                                                                                                                // 8409\n\t\t\tvar link = this._layersLink = L.DomUtil.create('a', className + '-toggle', container);                           // 8410\n\t\t\tlink.href = '#';                                                                                                 // 8411\n\t\t\tlink.title = 'Layers';                                                                                           // 8412\n                                                                                                                    // 8413\n\t\t\tif (L.Browser.touch) {                                                                                           // 8414\n\t\t\t\tL.DomEvent                                                                                                      // 8415\n\t\t\t\t    .on(link, 'click', L.DomEvent.stop)                                                                         // 8416\n\t\t\t\t    .on(link, 'click', this._expand, this);                                                                     // 8417\n\t\t\t}                                                                                                                // 8418\n\t\t\telse {                                                                                                           // 8419\n\t\t\t\tL.DomEvent.on(link, 'focus', this._expand, this);                                                               // 8420\n\t\t\t}                                                                                                                // 8421\n\t\t\t//Work around for Firefox android issue https://github.com/Leaflet/Leaflet/issues/2033                           // 8422\n\t\t\tL.DomEvent.on(form, 'click', function () {                                                                       // 8423\n\t\t\t\tsetTimeout(L.bind(this._onInputClick, this), 0);                                                                // 8424\n\t\t\t}, this);                                                                                                        // 8425\n                                                                                                                    // 8426\n\t\t\tthis._map.on('click', this._collapse, this);                                                                     // 8427\n\t\t\t// TODO keyboard accessibility                                                                                   // 8428\n\t\t} else {                                                                                                          // 8429\n\t\t\tthis._expand();                                                                                                  // 8430\n\t\t}                                                                                                                 // 8431\n                                                                                                                    // 8432\n\t\tthis._baseLayersList = L.DomUtil.create('div', className + '-base', form);                                        // 8433\n\t\tthis._separator = L.DomUtil.create('div', className + '-separator', form);                                        // 8434\n\t\tthis._overlaysList = L.DomUtil.create('div', className + '-overlays', form);                                      // 8435\n                                                                                                                    // 8436\n\t\tcontainer.appendChild(form);                                                                                      // 8437\n\t},                                                                                                                 // 8438\n                                                                                                                    // 8439\n\t_addLayer: function (layer, name, overlay) {                                                                       // 8440\n\t\tvar id = L.stamp(layer);                                                                                          // 8441\n                                                                                                                    // 8442\n\t\tthis._layers[id] = {                                                                                              // 8443\n\t\t\tlayer: layer,                                                                                                    // 8444\n\t\t\tname: name,                                                                                                      // 8445\n\t\t\toverlay: overlay                                                                                                 // 8446\n\t\t};                                                                                                                // 8447\n                                                                                                                    // 8448\n\t\tif (this.options.autoZIndex && layer.setZIndex) {                                                                 // 8449\n\t\t\tthis._lastZIndex++;                                                                                              // 8450\n\t\t\tlayer.setZIndex(this._lastZIndex);                                                                               // 8451\n\t\t}                                                                                                                 // 8452\n\t},                                                                                                                 // 8453\n                                                                                                                    // 8454\n\t_update: function () {                                                                                             // 8455\n\t\tif (!this._container) {                                                                                           // 8456\n\t\t\treturn;                                                                                                          // 8457\n\t\t}                                                                                                                 // 8458\n                                                                                                                    // 8459\n\t\tthis._baseLayersList.innerHTML = '';                                                                              // 8460\n\t\tthis._overlaysList.innerHTML = '';                                                                                // 8461\n                                                                                                                    // 8462\n\t\tvar baseLayersPresent = false,                                                                                    // 8463\n\t\t    overlaysPresent = false,                                                                                      // 8464\n\t\t    i, obj;                                                                                                       // 8465\n                                                                                                                    // 8466\n\t\tfor (i in this._layers) {                                                                                         // 8467\n\t\t\tobj = this._layers[i];                                                                                           // 8468\n\t\t\tthis._addItem(obj);                                                                                              // 8469\n\t\t\toverlaysPresent = overlaysPresent || obj.overlay;                                                                // 8470\n\t\t\tbaseLayersPresent = baseLayersPresent || !obj.overlay;                                                           // 8471\n\t\t}                                                                                                                 // 8472\n                                                                                                                    // 8473\n\t\tthis._separator.style.display = overlaysPresent && baseLayersPresent ? '' : 'none';                               // 8474\n\t},                                                                                                                 // 8475\n                                                                                                                    // 8476\n\t_onLayerChange: function (e) {                                                                                     // 8477\n\t\tvar obj = this._layers[L.stamp(e.layer)];                                                                         // 8478\n                                                                                                                    // 8479\n\t\tif (!obj) { return; }                                                                                             // 8480\n                                                                                                                    // 8481\n\t\tif (!this._handlingClick) {                                                                                       // 8482\n\t\t\tthis._update();                                                                                                  // 8483\n\t\t}                                                                                                                 // 8484\n                                                                                                                    // 8485\n\t\tvar type = obj.overlay ?                                                                                          // 8486\n\t\t\t(e.type === 'layeradd' ? 'overlayadd' : 'overlayremove') :                                                       // 8487\n\t\t\t(e.type === 'layeradd' ? 'baselayerchange' : null);                                                              // 8488\n                                                                                                                    // 8489\n\t\tif (type) {                                                                                                       // 8490\n\t\t\tthis._map.fire(type, obj);                                                                                       // 8491\n\t\t}                                                                                                                 // 8492\n\t},                                                                                                                 // 8493\n                                                                                                                    // 8494\n\t// IE7 bugs out if you create a radio dynamically, so you have to do it this hacky way (see http://bit.ly/PqYLBe)  // 8495\n\t_createRadioElement: function (name, checked) {                                                                    // 8496\n                                                                                                                    // 8497\n\t\tvar radioHtml = '<input type=\"radio\" class=\"leaflet-control-layers-selector\" name=\"' + name + '\"';                // 8498\n\t\tif (checked) {                                                                                                    // 8499\n\t\t\tradioHtml += ' checked=\"checked\"';                                                                               // 8500\n\t\t}                                                                                                                 // 8501\n\t\tradioHtml += '/>';                                                                                                // 8502\n                                                                                                                    // 8503\n\t\tvar radioFragment = document.createElement('div');                                                                // 8504\n\t\tradioFragment.innerHTML = radioHtml;                                                                              // 8505\n                                                                                                                    // 8506\n\t\treturn radioFragment.firstChild;                                                                                  // 8507\n\t},                                                                                                                 // 8508\n                                                                                                                    // 8509\n\t_addItem: function (obj) {                                                                                         // 8510\n\t\tvar label = document.createElement('label'),                                                                      // 8511\n\t\t    input,                                                                                                        // 8512\n\t\t    checked = this._map.hasLayer(obj.layer);                                                                      // 8513\n                                                                                                                    // 8514\n\t\tif (obj.overlay) {                                                                                                // 8515\n\t\t\tinput = document.createElement('input');                                                                         // 8516\n\t\t\tinput.type = 'checkbox';                                                                                         // 8517\n\t\t\tinput.className = 'leaflet-control-layers-selector';                                                             // 8518\n\t\t\tinput.defaultChecked = checked;                                                                                  // 8519\n\t\t} else {                                                                                                          // 8520\n\t\t\tinput = this._createRadioElement('leaflet-base-layers', checked);                                                // 8521\n\t\t}                                                                                                                 // 8522\n                                                                                                                    // 8523\n\t\tinput.layerId = L.stamp(obj.layer);                                                                               // 8524\n                                                                                                                    // 8525\n\t\tL.DomEvent.on(input, 'click', this._onInputClick, this);                                                          // 8526\n                                                                                                                    // 8527\n\t\tvar name = document.createElement('span');                                                                        // 8528\n\t\tname.innerHTML = ' ' + obj.name;                                                                                  // 8529\n                                                                                                                    // 8530\n\t\tlabel.appendChild(input);                                                                                         // 8531\n\t\tlabel.appendChild(name);                                                                                          // 8532\n                                                                                                                    // 8533\n\t\tvar container = obj.overlay ? this._overlaysList : this._baseLayersList;                                          // 8534\n\t\tcontainer.appendChild(label);                                                                                     // 8535\n                                                                                                                    // 8536\n\t\treturn label;                                                                                                     // 8537\n\t},                                                                                                                 // 8538\n                                                                                                                    // 8539\n\t_onInputClick: function () {                                                                                       // 8540\n\t\tvar i, input, obj,                                                                                                // 8541\n\t\t    inputs = this._form.getElementsByTagName('input'),                                                            // 8542\n\t\t    inputsLen = inputs.length;                                                                                    // 8543\n                                                                                                                    // 8544\n\t\tthis._handlingClick = true;                                                                                       // 8545\n                                                                                                                    // 8546\n\t\tfor (i = 0; i < inputsLen; i++) {                                                                                 // 8547\n\t\t\tinput = inputs[i];                                                                                               // 8548\n\t\t\tobj = this._layers[input.layerId];                                                                               // 8549\n                                                                                                                    // 8550\n\t\t\tif (input.checked && !this._map.hasLayer(obj.layer)) {                                                           // 8551\n\t\t\t\tthis._map.addLayer(obj.layer);                                                                                  // 8552\n                                                                                                                    // 8553\n\t\t\t} else if (!input.checked && this._map.hasLayer(obj.layer)) {                                                    // 8554\n\t\t\t\tthis._map.removeLayer(obj.layer);                                                                               // 8555\n\t\t\t}                                                                                                                // 8556\n\t\t}                                                                                                                 // 8557\n                                                                                                                    // 8558\n\t\tthis._handlingClick = false;                                                                                      // 8559\n                                                                                                                    // 8560\n\t\tthis._refocusOnMap();                                                                                             // 8561\n\t},                                                                                                                 // 8562\n                                                                                                                    // 8563\n\t_expand: function () {                                                                                             // 8564\n\t\tL.DomUtil.addClass(this._container, 'leaflet-control-layers-expanded');                                           // 8565\n\t},                                                                                                                 // 8566\n                                                                                                                    // 8567\n\t_collapse: function () {                                                                                           // 8568\n\t\tthis._container.className = this._container.className.replace(' leaflet-control-layers-expanded', '');            // 8569\n\t}                                                                                                                  // 8570\n});                                                                                                                 // 8571\n                                                                                                                    // 8572\nL.control.layers = function (baseLayers, overlays, options) {                                                       // 8573\n\treturn new L.Control.Layers(baseLayers, overlays, options);                                                        // 8574\n};                                                                                                                  // 8575\n                                                                                                                    // 8576\n                                                                                                                    // 8577\n/*                                                                                                                  // 8578\n * L.PosAnimation is used by Leaflet internally for pan animations.                                                 // 8579\n */                                                                                                                 // 8580\n                                                                                                                    // 8581\nL.PosAnimation = L.Class.extend({                                                                                   // 8582\n\tincludes: L.Mixin.Events,                                                                                          // 8583\n                                                                                                                    // 8584\n\trun: function (el, newPos, duration, easeLinearity) { // (HTMLElement, Point[, Number, Number])                    // 8585\n\t\tthis.stop();                                                                                                      // 8586\n                                                                                                                    // 8587\n\t\tthis._el = el;                                                                                                    // 8588\n\t\tthis._inProgress = true;                                                                                          // 8589\n\t\tthis._newPos = newPos;                                                                                            // 8590\n                                                                                                                    // 8591\n\t\tthis.fire('start');                                                                                               // 8592\n                                                                                                                    // 8593\n\t\tel.style[L.DomUtil.TRANSITION] = 'all ' + (duration || 0.25) +                                                    // 8594\n\t\t        's cubic-bezier(0,0,' + (easeLinearity || 0.5) + ',1)';                                                   // 8595\n                                                                                                                    // 8596\n\t\tL.DomEvent.on(el, L.DomUtil.TRANSITION_END, this._onTransitionEnd, this);                                         // 8597\n\t\tL.DomUtil.setPosition(el, newPos);                                                                                // 8598\n                                                                                                                    // 8599\n\t\t// toggle reflow, Chrome flickers for some reason if you don't do this                                            // 8600\n\t\tL.Util.falseFn(el.offsetWidth);                                                                                   // 8601\n                                                                                                                    // 8602\n\t\t// there's no native way to track value updates of transitioned properties, so we imitate this                    // 8603\n\t\tthis._stepTimer = setInterval(L.bind(this._onStep, this), 50);                                                    // 8604\n\t},                                                                                                                 // 8605\n                                                                                                                    // 8606\n\tstop: function () {                                                                                                // 8607\n\t\tif (!this._inProgress) { return; }                                                                                // 8608\n                                                                                                                    // 8609\n\t\t// if we just removed the transition property, the element would jump to its final position,                      // 8610\n\t\t// so we need to make it stay at the current position                                                             // 8611\n                                                                                                                    // 8612\n\t\tL.DomUtil.setPosition(this._el, this._getPos());                                                                  // 8613\n\t\tthis._onTransitionEnd();                                                                                          // 8614\n\t\tL.Util.falseFn(this._el.offsetWidth); // force reflow in case we are about to start a new animation               // 8615\n\t},                                                                                                                 // 8616\n                                                                                                                    // 8617\n\t_onStep: function () {                                                                                             // 8618\n\t\tvar stepPos = this._getPos();                                                                                     // 8619\n\t\tif (!stepPos) {                                                                                                   // 8620\n\t\t\tthis._onTransitionEnd();                                                                                         // 8621\n\t\t\treturn;                                                                                                          // 8622\n\t\t}                                                                                                                 // 8623\n\t\t// jshint camelcase: false                                                                                        // 8624\n\t\t// make L.DomUtil.getPosition return intermediate position value during animation                                 // 8625\n\t\tthis._el._leaflet_pos = stepPos;                                                                                  // 8626\n                                                                                                                    // 8627\n\t\tthis.fire('step');                                                                                                // 8628\n\t},                                                                                                                 // 8629\n                                                                                                                    // 8630\n\t// you can't easily get intermediate values of properties animated with CSS3 Transitions,                          // 8631\n\t// we need to parse computed style (in case of transform it returns matrix string)                                 // 8632\n                                                                                                                    // 8633\n\t_transformRe: /([-+]?(?:\\d*\\.)?\\d+)\\D*, ([-+]?(?:\\d*\\.)?\\d+)\\D*\\)/,                                                // 8634\n                                                                                                                    // 8635\n\t_getPos: function () {                                                                                             // 8636\n\t\tvar left, top, matches,                                                                                           // 8637\n\t\t    el = this._el,                                                                                                // 8638\n\t\t    style = window.getComputedStyle(el);                                                                          // 8639\n                                                                                                                    // 8640\n\t\tif (L.Browser.any3d) {                                                                                            // 8641\n\t\t\tmatches = style[L.DomUtil.TRANSFORM].match(this._transformRe);                                                   // 8642\n\t\t\tif (!matches) { return; }                                                                                        // 8643\n\t\t\tleft = parseFloat(matches[1]);                                                                                   // 8644\n\t\t\ttop  = parseFloat(matches[2]);                                                                                   // 8645\n\t\t} else {                                                                                                          // 8646\n\t\t\tleft = parseFloat(style.left);                                                                                   // 8647\n\t\t\ttop  = parseFloat(style.top);                                                                                    // 8648\n\t\t}                                                                                                                 // 8649\n                                                                                                                    // 8650\n\t\treturn new L.Point(left, top, true);                                                                              // 8651\n\t},                                                                                                                 // 8652\n                                                                                                                    // 8653\n\t_onTransitionEnd: function () {                                                                                    // 8654\n\t\tL.DomEvent.off(this._el, L.DomUtil.TRANSITION_END, this._onTransitionEnd, this);                                  // 8655\n                                                                                                                    // 8656\n\t\tif (!this._inProgress) { return; }                                                                                // 8657\n\t\tthis._inProgress = false;                                                                                         // 8658\n                                                                                                                    // 8659\n\t\tthis._el.style[L.DomUtil.TRANSITION] = '';                                                                        // 8660\n                                                                                                                    // 8661\n\t\t// jshint camelcase: false                                                                                        // 8662\n\t\t// make sure L.DomUtil.getPosition returns the final position value after animation                               // 8663\n\t\tthis._el._leaflet_pos = this._newPos;                                                                             // 8664\n                                                                                                                    // 8665\n\t\tclearInterval(this._stepTimer);                                                                                   // 8666\n                                                                                                                    // 8667\n\t\tthis.fire('step').fire('end');                                                                                    // 8668\n\t}                                                                                                                  // 8669\n                                                                                                                    // 8670\n});                                                                                                                 // 8671\n                                                                                                                    // 8672\n                                                                                                                    // 8673\n/*                                                                                                                  // 8674\n * Extends L.Map to handle panning animations.                                                                      // 8675\n */                                                                                                                 // 8676\n                                                                                                                    // 8677\nL.Map.include({                                                                                                     // 8678\n                                                                                                                    // 8679\n\tsetView: function (center, zoom, options) {                                                                        // 8680\n                                                                                                                    // 8681\n\t\tzoom = zoom === undefined ? this._zoom : this._limitZoom(zoom);                                                   // 8682\n\t\tcenter = this._limitCenter(L.latLng(center), zoom, this.options.maxBounds);                                       // 8683\n\t\toptions = options || {};                                                                                          // 8684\n                                                                                                                    // 8685\n\t\tif (this._panAnim) {                                                                                              // 8686\n\t\t\tthis._panAnim.stop();                                                                                            // 8687\n\t\t}                                                                                                                 // 8688\n                                                                                                                    // 8689\n\t\tif (this._loaded && !options.reset && options !== true) {                                                         // 8690\n                                                                                                                    // 8691\n\t\t\tif (options.animate !== undefined) {                                                                             // 8692\n\t\t\t\toptions.zoom = L.extend({animate: options.animate}, options.zoom);                                              // 8693\n\t\t\t\toptions.pan = L.extend({animate: options.animate}, options.pan);                                                // 8694\n\t\t\t}                                                                                                                // 8695\n                                                                                                                    // 8696\n\t\t\t// try animating pan or zoom                                                                                     // 8697\n\t\t\tvar animated = (this._zoom !== zoom) ?                                                                           // 8698\n\t\t\t\tthis._tryAnimatedZoom && this._tryAnimatedZoom(center, zoom, options.zoom) :                                    // 8699\n\t\t\t\tthis._tryAnimatedPan(center, options.pan);                                                                      // 8700\n                                                                                                                    // 8701\n\t\t\tif (animated) {                                                                                                  // 8702\n\t\t\t\t// prevent resize handler call, the view will refresh after animation anyway                                    // 8703\n\t\t\t\tclearTimeout(this._sizeTimer);                                                                                  // 8704\n\t\t\t\treturn this;                                                                                                    // 8705\n\t\t\t}                                                                                                                // 8706\n\t\t}                                                                                                                 // 8707\n                                                                                                                    // 8708\n\t\t// animation didn't start, just reset the map view                                                                // 8709\n\t\tthis._resetView(center, zoom);                                                                                    // 8710\n                                                                                                                    // 8711\n\t\treturn this;                                                                                                      // 8712\n\t},                                                                                                                 // 8713\n                                                                                                                    // 8714\n\tpanBy: function (offset, options) {                                                                                // 8715\n\t\toffset = L.point(offset).round();                                                                                 // 8716\n\t\toptions = options || {};                                                                                          // 8717\n                                                                                                                    // 8718\n\t\tif (!offset.x && !offset.y) {                                                                                     // 8719\n\t\t\treturn this;                                                                                                     // 8720\n\t\t}                                                                                                                 // 8721\n                                                                                                                    // 8722\n\t\tif (!this._panAnim) {                                                                                             // 8723\n\t\t\tthis._panAnim = new L.PosAnimation();                                                                            // 8724\n                                                                                                                    // 8725\n\t\t\tthis._panAnim.on({                                                                                               // 8726\n\t\t\t\t'step': this._onPanTransitionStep,                                                                              // 8727\n\t\t\t\t'end': this._onPanTransitionEnd                                                                                 // 8728\n\t\t\t}, this);                                                                                                        // 8729\n\t\t}                                                                                                                 // 8730\n                                                                                                                    // 8731\n\t\t// don't fire movestart if animating inertia                                                                      // 8732\n\t\tif (!options.noMoveStart) {                                                                                       // 8733\n\t\t\tthis.fire('movestart');                                                                                          // 8734\n\t\t}                                                                                                                 // 8735\n                                                                                                                    // 8736\n\t\t// animate pan unless animate: false specified                                                                    // 8737\n\t\tif (options.animate !== false) {                                                                                  // 8738\n\t\t\tL.DomUtil.addClass(this._mapPane, 'leaflet-pan-anim');                                                           // 8739\n                                                                                                                    // 8740\n\t\t\tvar newPos = this._getMapPanePos().subtract(offset);                                                             // 8741\n\t\t\tthis._panAnim.run(this._mapPane, newPos, options.duration || 0.25, options.easeLinearity);                       // 8742\n\t\t} else {                                                                                                          // 8743\n\t\t\tthis._rawPanBy(offset);                                                                                          // 8744\n\t\t\tthis.fire('move').fire('moveend');                                                                               // 8745\n\t\t}                                                                                                                 // 8746\n                                                                                                                    // 8747\n\t\treturn this;                                                                                                      // 8748\n\t},                                                                                                                 // 8749\n                                                                                                                    // 8750\n\t_onPanTransitionStep: function () {                                                                                // 8751\n\t\tthis.fire('move');                                                                                                // 8752\n\t},                                                                                                                 // 8753\n                                                                                                                    // 8754\n\t_onPanTransitionEnd: function () {                                                                                 // 8755\n\t\tL.DomUtil.removeClass(this._mapPane, 'leaflet-pan-anim');                                                         // 8756\n\t\tthis.fire('moveend');                                                                                             // 8757\n\t},                                                                                                                 // 8758\n                                                                                                                    // 8759\n\t_tryAnimatedPan: function (center, options) {                                                                      // 8760\n\t\t// difference between the new and current centers in pixels                                                       // 8761\n\t\tvar offset = this._getCenterOffset(center)._floor();                                                              // 8762\n                                                                                                                    // 8763\n\t\t// don't animate too far unless animate: true specified in options                                                // 8764\n\t\tif ((options && options.animate) !== true && !this.getSize().contains(offset)) { return false; }                  // 8765\n                                                                                                                    // 8766\n\t\tthis.panBy(offset, options);                                                                                      // 8767\n                                                                                                                    // 8768\n\t\treturn true;                                                                                                      // 8769\n\t}                                                                                                                  // 8770\n});                                                                                                                 // 8771\n                                                                                                                    // 8772\n                                                                                                                    // 8773\n/*                                                                                                                  // 8774\n * L.PosAnimation fallback implementation that powers Leaflet pan animations                                        // 8775\n * in browsers that don't support CSS3 Transitions.                                                                 // 8776\n */                                                                                                                 // 8777\n                                                                                                                    // 8778\nL.PosAnimation = L.DomUtil.TRANSITION ? L.PosAnimation : L.PosAnimation.extend({                                    // 8779\n                                                                                                                    // 8780\n\trun: function (el, newPos, duration, easeLinearity) { // (HTMLElement, Point[, Number, Number])                    // 8781\n\t\tthis.stop();                                                                                                      // 8782\n                                                                                                                    // 8783\n\t\tthis._el = el;                                                                                                    // 8784\n\t\tthis._inProgress = true;                                                                                          // 8785\n\t\tthis._duration = duration || 0.25;                                                                                // 8786\n\t\tthis._easeOutPower = 1 / Math.max(easeLinearity || 0.5, 0.2);                                                     // 8787\n                                                                                                                    // 8788\n\t\tthis._startPos = L.DomUtil.getPosition(el);                                                                       // 8789\n\t\tthis._offset = newPos.subtract(this._startPos);                                                                   // 8790\n\t\tthis._startTime = +new Date();                                                                                    // 8791\n                                                                                                                    // 8792\n\t\tthis.fire('start');                                                                                               // 8793\n                                                                                                                    // 8794\n\t\tthis._animate();                                                                                                  // 8795\n\t},                                                                                                                 // 8796\n                                                                                                                    // 8797\n\tstop: function () {                                                                                                // 8798\n\t\tif (!this._inProgress) { return; }                                                                                // 8799\n                                                                                                                    // 8800\n\t\tthis._step();                                                                                                     // 8801\n\t\tthis._complete();                                                                                                 // 8802\n\t},                                                                                                                 // 8803\n                                                                                                                    // 8804\n\t_animate: function () {                                                                                            // 8805\n\t\t// animation loop                                                                                                 // 8806\n\t\tthis._animId = L.Util.requestAnimFrame(this._animate, this);                                                      // 8807\n\t\tthis._step();                                                                                                     // 8808\n\t},                                                                                                                 // 8809\n                                                                                                                    // 8810\n\t_step: function () {                                                                                               // 8811\n\t\tvar elapsed = (+new Date()) - this._startTime,                                                                    // 8812\n\t\t    duration = this._duration * 1000;                                                                             // 8813\n                                                                                                                    // 8814\n\t\tif (elapsed < duration) {                                                                                         // 8815\n\t\t\tthis._runFrame(this._easeOut(elapsed / duration));                                                               // 8816\n\t\t} else {                                                                                                          // 8817\n\t\t\tthis._runFrame(1);                                                                                               // 8818\n\t\t\tthis._complete();                                                                                                // 8819\n\t\t}                                                                                                                 // 8820\n\t},                                                                                                                 // 8821\n                                                                                                                    // 8822\n\t_runFrame: function (progress) {                                                                                   // 8823\n\t\tvar pos = this._startPos.add(this._offset.multiplyBy(progress));                                                  // 8824\n\t\tL.DomUtil.setPosition(this._el, pos);                                                                             // 8825\n                                                                                                                    // 8826\n\t\tthis.fire('step');                                                                                                // 8827\n\t},                                                                                                                 // 8828\n                                                                                                                    // 8829\n\t_complete: function () {                                                                                           // 8830\n\t\tL.Util.cancelAnimFrame(this._animId);                                                                             // 8831\n                                                                                                                    // 8832\n\t\tthis._inProgress = false;                                                                                         // 8833\n\t\tthis.fire('end');                                                                                                 // 8834\n\t},                                                                                                                 // 8835\n                                                                                                                    // 8836\n\t_easeOut: function (t) {                                                                                           // 8837\n\t\treturn 1 - Math.pow(1 - t, this._easeOutPower);                                                                   // 8838\n\t}                                                                                                                  // 8839\n});                                                                                                                 // 8840\n                                                                                                                    // 8841\n                                                                                                                    // 8842\n/*                                                                                                                  // 8843\n * Extends L.Map to handle zoom animations.                                                                         // 8844\n */                                                                                                                 // 8845\n                                                                                                                    // 8846\nL.Map.mergeOptions({                                                                                                // 8847\n\tzoomAnimation: true,                                                                                               // 8848\n\tzoomAnimationThreshold: 4                                                                                          // 8849\n});                                                                                                                 // 8850\n                                                                                                                    // 8851\nif (L.DomUtil.TRANSITION) {                                                                                         // 8852\n                                                                                                                    // 8853\n\tL.Map.addInitHook(function () {                                                                                    // 8854\n\t\t// don't animate on browsers without hardware-accelerated transitions or old Android/Opera                        // 8855\n\t\tthis._zoomAnimated = this.options.zoomAnimation && L.DomUtil.TRANSITION &&                                        // 8856\n\t\t\t\tL.Browser.any3d && !L.Browser.android23 && !L.Browser.mobileOpera;                                              // 8857\n                                                                                                                    // 8858\n\t\t// zoom transitions run with the same duration for all layers, so if one of transitionend events                  // 8859\n\t\t// happens after starting zoom animation (propagating to the map pane), we know that it ended globally            // 8860\n\t\tif (this._zoomAnimated) {                                                                                         // 8861\n\t\t\tL.DomEvent.on(this._mapPane, L.DomUtil.TRANSITION_END, this._catchTransitionEnd, this);                          // 8862\n\t\t}                                                                                                                 // 8863\n\t});                                                                                                                // 8864\n}                                                                                                                   // 8865\n                                                                                                                    // 8866\nL.Map.include(!L.DomUtil.TRANSITION ? {} : {                                                                        // 8867\n                                                                                                                    // 8868\n\t_catchTransitionEnd: function (e) {                                                                                // 8869\n\t\tif (this._animatingZoom && e.propertyName.indexOf('transform') >= 0) {                                            // 8870\n\t\t\tthis._onZoomTransitionEnd();                                                                                     // 8871\n\t\t}                                                                                                                 // 8872\n\t},                                                                                                                 // 8873\n                                                                                                                    // 8874\n\t_nothingToAnimate: function () {                                                                                   // 8875\n\t\treturn !this._container.getElementsByClassName('leaflet-zoom-animated').length;                                   // 8876\n\t},                                                                                                                 // 8877\n                                                                                                                    // 8878\n\t_tryAnimatedZoom: function (center, zoom, options) {                                                               // 8879\n                                                                                                                    // 8880\n\t\tif (this._animatingZoom) { return true; }                                                                         // 8881\n                                                                                                                    // 8882\n\t\toptions = options || {};                                                                                          // 8883\n                                                                                                                    // 8884\n\t\t// don't animate if disabled, not supported or zoom difference is too large                                       // 8885\n\t\tif (!this._zoomAnimated || options.animate === false || this._nothingToAnimate() ||                               // 8886\n\t\t        Math.abs(zoom - this._zoom) > this.options.zoomAnimationThreshold) { return false; }                      // 8887\n                                                                                                                    // 8888\n\t\t// offset is the pixel coords of the zoom origin relative to the current center                                   // 8889\n\t\tvar scale = this.getZoomScale(zoom),                                                                              // 8890\n\t\t    offset = this._getCenterOffset(center)._divideBy(1 - 1 / scale),                                              // 8891\n\t\t\torigin = this._getCenterLayerPoint()._add(offset);                                                               // 8892\n                                                                                                                    // 8893\n\t\t// don't animate if the zoom origin isn't within one screen from the current center, unless forced                // 8894\n\t\tif (options.animate !== true && !this.getSize().contains(offset)) { return false; }                               // 8895\n                                                                                                                    // 8896\n\t\tthis                                                                                                              // 8897\n\t\t    .fire('movestart')                                                                                            // 8898\n\t\t    .fire('zoomstart');                                                                                           // 8899\n                                                                                                                    // 8900\n\t\tthis._animateZoom(center, zoom, origin, scale, null, true);                                                       // 8901\n                                                                                                                    // 8902\n\t\treturn true;                                                                                                      // 8903\n\t},                                                                                                                 // 8904\n                                                                                                                    // 8905\n\t_animateZoom: function (center, zoom, origin, scale, delta, backwards, forTouchZoom) {                             // 8906\n                                                                                                                    // 8907\n\t\tif (!forTouchZoom) {                                                                                              // 8908\n\t\t\tthis._animatingZoom = true;                                                                                      // 8909\n\t\t}                                                                                                                 // 8910\n                                                                                                                    // 8911\n\t\t// put transform transition on all layers with leaflet-zoom-animated class                                        // 8912\n\t\tL.DomUtil.addClass(this._mapPane, 'leaflet-zoom-anim');                                                           // 8913\n                                                                                                                    // 8914\n\t\t// remember what center/zoom to set after animation                                                               // 8915\n\t\tthis._animateToCenter = center;                                                                                   // 8916\n\t\tthis._animateToZoom = zoom;                                                                                       // 8917\n                                                                                                                    // 8918\n\t\t// disable any dragging during animation                                                                          // 8919\n\t\tif (L.Draggable) {                                                                                                // 8920\n\t\t\tL.Draggable._disabled = true;                                                                                    // 8921\n\t\t}                                                                                                                 // 8922\n                                                                                                                    // 8923\n\t\tL.Util.requestAnimFrame(function () {                                                                             // 8924\n\t\t\tthis.fire('zoomanim', {                                                                                          // 8925\n\t\t\t\tcenter: center,                                                                                                 // 8926\n\t\t\t\tzoom: zoom,                                                                                                     // 8927\n\t\t\t\torigin: origin,                                                                                                 // 8928\n\t\t\t\tscale: scale,                                                                                                   // 8929\n\t\t\t\tdelta: delta,                                                                                                   // 8930\n\t\t\t\tbackwards: backwards                                                                                            // 8931\n\t\t\t});                                                                                                              // 8932\n\t\t\t// horrible hack to work around a Chrome bug https://github.com/Leaflet/Leaflet/issues/3689                      // 8933\n\t\t\tsetTimeout(L.bind(this._onZoomTransitionEnd, this), 250);                                                        // 8934\n\t\t}, this);                                                                                                         // 8935\n\t},                                                                                                                 // 8936\n                                                                                                                    // 8937\n\t_onZoomTransitionEnd: function () {                                                                                // 8938\n\t\tif (!this._animatingZoom) { return; }                                                                             // 8939\n                                                                                                                    // 8940\n\t\tthis._animatingZoom = false;                                                                                      // 8941\n                                                                                                                    // 8942\n\t\tL.DomUtil.removeClass(this._mapPane, 'leaflet-zoom-anim');                                                        // 8943\n                                                                                                                    // 8944\n\t\tL.Util.requestAnimFrame(function () {                                                                             // 8945\n\t\t\tthis._resetView(this._animateToCenter, this._animateToZoom, true, true);                                         // 8946\n                                                                                                                    // 8947\n\t\t\tif (L.Draggable) {                                                                                               // 8948\n\t\t\t\tL.Draggable._disabled = false;                                                                                  // 8949\n\t\t\t}                                                                                                                // 8950\n\t\t}, this);                                                                                                         // 8951\n\t}                                                                                                                  // 8952\n});                                                                                                                 // 8953\n                                                                                                                    // 8954\n                                                                                                                    // 8955\n/*                                                                                                                  // 8956\n\tZoom animation logic for L.TileLayer.                                                                              // 8957\n*/                                                                                                                  // 8958\n                                                                                                                    // 8959\nL.TileLayer.include({                                                                                               // 8960\n\t_animateZoom: function (e) {                                                                                       // 8961\n\t\tif (!this._animating) {                                                                                           // 8962\n\t\t\tthis._animating = true;                                                                                          // 8963\n\t\t\tthis._prepareBgBuffer();                                                                                         // 8964\n\t\t}                                                                                                                 // 8965\n                                                                                                                    // 8966\n\t\tvar bg = this._bgBuffer,                                                                                          // 8967\n\t\t    transform = L.DomUtil.TRANSFORM,                                                                              // 8968\n\t\t    initialTransform = e.delta ? L.DomUtil.getTranslateString(e.delta) : bg.style[transform],                     // 8969\n\t\t    scaleStr = L.DomUtil.getScaleString(e.scale, e.origin);                                                       // 8970\n                                                                                                                    // 8971\n\t\tbg.style[transform] = e.backwards ?                                                                               // 8972\n\t\t\t\tscaleStr + ' ' + initialTransform :                                                                             // 8973\n\t\t\t\tinitialTransform + ' ' + scaleStr;                                                                              // 8974\n\t},                                                                                                                 // 8975\n                                                                                                                    // 8976\n\t_endZoomAnim: function () {                                                                                        // 8977\n\t\tvar front = this._tileContainer,                                                                                  // 8978\n\t\t    bg = this._bgBuffer;                                                                                          // 8979\n                                                                                                                    // 8980\n\t\tfront.style.visibility = '';                                                                                      // 8981\n\t\tfront.parentNode.appendChild(front); // Bring to fore                                                             // 8982\n                                                                                                                    // 8983\n\t\t// force reflow                                                                                                   // 8984\n\t\tL.Util.falseFn(bg.offsetWidth);                                                                                   // 8985\n                                                                                                                    // 8986\n\t\tvar zoom = this._map.getZoom();                                                                                   // 8987\n\t\tif (zoom > this.options.maxZoom || zoom < this.options.minZoom) {                                                 // 8988\n\t\t\tthis._clearBgBuffer();                                                                                           // 8989\n\t\t}                                                                                                                 // 8990\n                                                                                                                    // 8991\n\t\tthis._animating = false;                                                                                          // 8992\n\t},                                                                                                                 // 8993\n                                                                                                                    // 8994\n\t_clearBgBuffer: function () {                                                                                      // 8995\n\t\tvar map = this._map;                                                                                              // 8996\n                                                                                                                    // 8997\n\t\tif (map && !map._animatingZoom && !map.touchZoom._zooming) {                                                      // 8998\n\t\t\tthis._bgBuffer.innerHTML = '';                                                                                   // 8999\n\t\t\tthis._bgBuffer.style[L.DomUtil.TRANSFORM] = '';                                                                  // 9000\n\t\t}                                                                                                                 // 9001\n\t},                                                                                                                 // 9002\n                                                                                                                    // 9003\n\t_prepareBgBuffer: function () {                                                                                    // 9004\n                                                                                                                    // 9005\n\t\tvar front = this._tileContainer,                                                                                  // 9006\n\t\t    bg = this._bgBuffer;                                                                                          // 9007\n                                                                                                                    // 9008\n\t\t// if foreground layer doesn't have many tiles but bg layer does,                                                 // 9009\n\t\t// keep the existing bg layer and just zoom it some more                                                          // 9010\n                                                                                                                    // 9011\n\t\tvar bgLoaded = this._getLoadedTilesPercentage(bg),                                                                // 9012\n\t\t    frontLoaded = this._getLoadedTilesPercentage(front);                                                          // 9013\n                                                                                                                    // 9014\n\t\tif (bg && bgLoaded > 0.5 && frontLoaded < 0.5) {                                                                  // 9015\n                                                                                                                    // 9016\n\t\t\tfront.style.visibility = 'hidden';                                                                               // 9017\n\t\t\tthis._stopLoadingImages(front);                                                                                  // 9018\n\t\t\treturn;                                                                                                          // 9019\n\t\t}                                                                                                                 // 9020\n                                                                                                                    // 9021\n\t\t// prepare the buffer to become the front tile pane                                                               // 9022\n\t\tbg.style.visibility = 'hidden';                                                                                   // 9023\n\t\tbg.style[L.DomUtil.TRANSFORM] = '';                                                                               // 9024\n                                                                                                                    // 9025\n\t\t// switch out the current layer to be the new bg layer (and vice-versa)                                           // 9026\n\t\tthis._tileContainer = bg;                                                                                         // 9027\n\t\tbg = this._bgBuffer = front;                                                                                      // 9028\n                                                                                                                    // 9029\n\t\tthis._stopLoadingImages(bg);                                                                                      // 9030\n                                                                                                                    // 9031\n\t\t//prevent bg buffer from clearing right after zoom                                                                // 9032\n\t\tclearTimeout(this._clearBgBufferTimer);                                                                           // 9033\n\t},                                                                                                                 // 9034\n                                                                                                                    // 9035\n\t_getLoadedTilesPercentage: function (container) {                                                                  // 9036\n\t\tvar tiles = container.getElementsByTagName('img'),                                                                // 9037\n\t\t    i, len, count = 0;                                                                                            // 9038\n                                                                                                                    // 9039\n\t\tfor (i = 0, len = tiles.length; i < len; i++) {                                                                   // 9040\n\t\t\tif (tiles[i].complete) {                                                                                         // 9041\n\t\t\t\tcount++;                                                                                                        // 9042\n\t\t\t}                                                                                                                // 9043\n\t\t}                                                                                                                 // 9044\n\t\treturn count / len;                                                                                               // 9045\n\t},                                                                                                                 // 9046\n                                                                                                                    // 9047\n\t// stops loading all tiles in the background layer                                                                 // 9048\n\t_stopLoadingImages: function (container) {                                                                         // 9049\n\t\tvar tiles = Array.prototype.slice.call(container.getElementsByTagName('img')),                                    // 9050\n\t\t    i, len, tile;                                                                                                 // 9051\n                                                                                                                    // 9052\n\t\tfor (i = 0, len = tiles.length; i < len; i++) {                                                                   // 9053\n\t\t\ttile = tiles[i];                                                                                                 // 9054\n                                                                                                                    // 9055\n\t\t\tif (!tile.complete) {                                                                                            // 9056\n\t\t\t\ttile.onload = L.Util.falseFn;                                                                                   // 9057\n\t\t\t\ttile.onerror = L.Util.falseFn;                                                                                  // 9058\n\t\t\t\ttile.src = L.Util.emptyImageUrl;                                                                                // 9059\n                                                                                                                    // 9060\n\t\t\t\ttile.parentNode.removeChild(tile);                                                                              // 9061\n\t\t\t}                                                                                                                // 9062\n\t\t}                                                                                                                 // 9063\n\t}                                                                                                                  // 9064\n});                                                                                                                 // 9065\n                                                                                                                    // 9066\n                                                                                                                    // 9067\n/*                                                                                                                  // 9068\n * Provides L.Map with convenient shortcuts for using browser geolocation features.                                 // 9069\n */                                                                                                                 // 9070\n                                                                                                                    // 9071\nL.Map.include({                                                                                                     // 9072\n\t_defaultLocateOptions: {                                                                                           // 9073\n\t\twatch: false,                                                                                                     // 9074\n\t\tsetView: false,                                                                                                   // 9075\n\t\tmaxZoom: Infinity,                                                                                                // 9076\n\t\ttimeout: 10000,                                                                                                   // 9077\n\t\tmaximumAge: 0,                                                                                                    // 9078\n\t\tenableHighAccuracy: false                                                                                         // 9079\n\t},                                                                                                                 // 9080\n                                                                                                                    // 9081\n\tlocate: function (/*Object*/ options) {                                                                            // 9082\n                                                                                                                    // 9083\n\t\toptions = this._locateOptions = L.extend(this._defaultLocateOptions, options);                                    // 9084\n                                                                                                                    // 9085\n\t\tif (!navigator.geolocation) {                                                                                     // 9086\n\t\t\tthis._handleGeolocationError({                                                                                   // 9087\n\t\t\t\tcode: 0,                                                                                                        // 9088\n\t\t\t\tmessage: 'Geolocation not supported.'                                                                           // 9089\n\t\t\t});                                                                                                              // 9090\n\t\t\treturn this;                                                                                                     // 9091\n\t\t}                                                                                                                 // 9092\n                                                                                                                    // 9093\n\t\tvar onResponse = L.bind(this._handleGeolocationResponse, this),                                                   // 9094\n\t\t\tonError = L.bind(this._handleGeolocationError, this);                                                            // 9095\n                                                                                                                    // 9096\n\t\tif (options.watch) {                                                                                              // 9097\n\t\t\tthis._locationWatchId =                                                                                          // 9098\n\t\t\t        navigator.geolocation.watchPosition(onResponse, onError, options);                                       // 9099\n\t\t} else {                                                                                                          // 9100\n\t\t\tnavigator.geolocation.getCurrentPosition(onResponse, onError, options);                                          // 9101\n\t\t}                                                                                                                 // 9102\n\t\treturn this;                                                                                                      // 9103\n\t},                                                                                                                 // 9104\n                                                                                                                    // 9105\n\tstopLocate: function () {                                                                                          // 9106\n\t\tif (navigator.geolocation) {                                                                                      // 9107\n\t\t\tnavigator.geolocation.clearWatch(this._locationWatchId);                                                         // 9108\n\t\t}                                                                                                                 // 9109\n\t\tif (this._locateOptions) {                                                                                        // 9110\n\t\t\tthis._locateOptions.setView = false;                                                                             // 9111\n\t\t}                                                                                                                 // 9112\n\t\treturn this;                                                                                                      // 9113\n\t},                                                                                                                 // 9114\n                                                                                                                    // 9115\n\t_handleGeolocationError: function (error) {                                                                        // 9116\n\t\tvar c = error.code,                                                                                               // 9117\n\t\t    message = error.message ||                                                                                    // 9118\n\t\t            (c === 1 ? 'permission denied' :                                                                      // 9119\n\t\t            (c === 2 ? 'position unavailable' : 'timeout'));                                                      // 9120\n                                                                                                                    // 9121\n\t\tif (this._locateOptions.setView && !this._loaded) {                                                               // 9122\n\t\t\tthis.fitWorld();                                                                                                 // 9123\n\t\t}                                                                                                                 // 9124\n                                                                                                                    // 9125\n\t\tthis.fire('locationerror', {                                                                                      // 9126\n\t\t\tcode: c,                                                                                                         // 9127\n\t\t\tmessage: 'Geolocation error: ' + message + '.'                                                                   // 9128\n\t\t});                                                                                                               // 9129\n\t},                                                                                                                 // 9130\n                                                                                                                    // 9131\n\t_handleGeolocationResponse: function (pos) {                                                                       // 9132\n\t\tvar lat = pos.coords.latitude,                                                                                    // 9133\n\t\t    lng = pos.coords.longitude,                                                                                   // 9134\n\t\t    latlng = new L.LatLng(lat, lng),                                                                              // 9135\n                                                                                                                    // 9136\n\t\t    latAccuracy = 180 * pos.coords.accuracy / 40075017,                                                           // 9137\n\t\t    lngAccuracy = latAccuracy / Math.cos(L.LatLng.DEG_TO_RAD * lat),                                              // 9138\n                                                                                                                    // 9139\n\t\t    bounds = L.latLngBounds(                                                                                      // 9140\n\t\t            [lat - latAccuracy, lng - lngAccuracy],                                                               // 9141\n\t\t            [lat + latAccuracy, lng + lngAccuracy]),                                                              // 9142\n                                                                                                                    // 9143\n\t\t    options = this._locateOptions;                                                                                // 9144\n                                                                                                                    // 9145\n\t\tif (options.setView) {                                                                                            // 9146\n\t\t\tvar zoom = Math.min(this.getBoundsZoom(bounds), options.maxZoom);                                                // 9147\n\t\t\tthis.setView(latlng, zoom);                                                                                      // 9148\n\t\t}                                                                                                                 // 9149\n                                                                                                                    // 9150\n\t\tvar data = {                                                                                                      // 9151\n\t\t\tlatlng: latlng,                                                                                                  // 9152\n\t\t\tbounds: bounds,                                                                                                  // 9153\n\t\t\ttimestamp: pos.timestamp                                                                                         // 9154\n\t\t};                                                                                                                // 9155\n                                                                                                                    // 9156\n\t\tfor (var i in pos.coords) {                                                                                       // 9157\n\t\t\tif (typeof pos.coords[i] === 'number') {                                                                         // 9158\n\t\t\t\tdata[i] = pos.coords[i];                                                                                        // 9159\n\t\t\t}                                                                                                                // 9160\n\t\t}                                                                                                                 // 9161\n                                                                                                                    // 9162\n\t\tthis.fire('locationfound', data);                                                                                 // 9163\n\t}                                                                                                                  // 9164\n});                                                                                                                 // 9165\n                                                                                                                    // 9166\n                                                                                                                    // 9167\n}(window, document));                                                                                               // 9168\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function(){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// packages/bevanhunt_leaflet/.npm/package/node_modules/leaflet-providers/leaflet-providers.js                      //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\n(function (root, factory) {                                                                                         // 1\n\tif (typeof define === 'function' && define.amd) {                                                                  // 2\n\t\t// AMD. Register as an anonymous module.                                                                          // 3\n\t\tdefine(['leaflet'], factory);                                                                                     // 4\n\t} else if (typeof modules === 'object' && module.exports) {                                                        // 5\n\t\t// define a Common JS module that relies on 'leaflet'                                                             // 6\n\t\tmodule.exports = factory(require('leaflet'));                                                                     // 7\n\t} else {                                                                                                           // 8\n\t\t// Assume Leaflet is loaded into global object L already                                                          // 9\n\t\tfactory(L);                                                                                                       // 10\n\t}                                                                                                                  // 11\n}(this, function (L) {                                                                                              // 12\n\t'use strict';                                                                                                      // 13\n                                                                                                                    // 14\n\tL.TileLayer.Provider = L.TileLayer.extend({                                                                        // 15\n\t\tinitialize: function (arg, options) {                                                                             // 16\n\t\t\tvar providers = L.TileLayer.Provider.providers;                                                                  // 17\n                                                                                                                    // 18\n\t\t\tvar parts = arg.split('.');                                                                                      // 19\n                                                                                                                    // 20\n\t\t\tvar providerName = parts[0];                                                                                     // 21\n\t\t\tvar variantName = parts[1];                                                                                      // 22\n                                                                                                                    // 23\n\t\t\tif (!providers[providerName]) {                                                                                  // 24\n\t\t\t\tthrow 'No such provider (' + providerName + ')';                                                                // 25\n\t\t\t}                                                                                                                // 26\n                                                                                                                    // 27\n\t\t\tvar provider = {                                                                                                 // 28\n\t\t\t\turl: providers[providerName].url,                                                                               // 29\n\t\t\t\toptions: providers[providerName].options                                                                        // 30\n\t\t\t};                                                                                                               // 31\n                                                                                                                    // 32\n\t\t\t// overwrite values in provider from variant.                                                                    // 33\n\t\t\tif (variantName && 'variants' in providers[providerName]) {                                                      // 34\n\t\t\t\tif (!(variantName in providers[providerName].variants)) {                                                       // 35\n\t\t\t\t\tthrow 'No such variant of ' + providerName + ' (' + variantName + ')';                                         // 36\n\t\t\t\t}                                                                                                               // 37\n\t\t\t\tvar variant = providers[providerName].variants[variantName];                                                    // 38\n\t\t\t\tvar variantOptions;                                                                                             // 39\n\t\t\t\tif (typeof variant === 'string') {                                                                              // 40\n\t\t\t\t\tvariantOptions = {                                                                                             // 41\n\t\t\t\t\t\tvariant: variant                                                                                              // 42\n\t\t\t\t\t};                                                                                                             // 43\n\t\t\t\t} else {                                                                                                        // 44\n\t\t\t\t\tvariantOptions = variant.options;                                                                              // 45\n\t\t\t\t}                                                                                                               // 46\n\t\t\t\tprovider = {                                                                                                    // 47\n\t\t\t\t\turl: variant.url || provider.url,                                                                              // 48\n\t\t\t\t\toptions: L.Util.extend({}, provider.options, variantOptions)                                                   // 49\n\t\t\t\t};                                                                                                              // 50\n\t\t\t} else if (typeof provider.url === 'function') {                                                                 // 51\n\t\t\t\tprovider.url = provider.url(parts.splice(1, parts.length - 1).join('.'));                                       // 52\n\t\t\t}                                                                                                                // 53\n                                                                                                                    // 54\n\t\t\tvar forceHTTP = window.location.protocol === 'file:' || provider.options.forceHTTP;                              // 55\n\t\t\tif (provider.url.indexOf('//') === 0 && forceHTTP) {                                                             // 56\n\t\t\t\tprovider.url = 'http:' + provider.url;                                                                          // 57\n\t\t\t}                                                                                                                // 58\n                                                                                                                    // 59\n\t\t\t// If retina option is set                                                                                       // 60\n\t\t\tif (provider.options.retina) {                                                                                   // 61\n\t\t\t\t// Check retina screen                                                                                          // 62\n\t\t\t\tif (options.detectRetina && L.Browser.retina) {                                                                 // 63\n\t\t\t\t\t// The retina option will be active now                                                                        // 64\n\t\t\t\t\t// But we need to prevent Leaflet retina mode                                                                  // 65\n\t\t\t\t\toptions.detectRetina = false;                                                                                  // 66\n\t\t\t\t} else {                                                                                                        // 67\n\t\t\t\t\t// No retina, remove option                                                                                    // 68\n\t\t\t\t\tprovider.options.retina = '';                                                                                  // 69\n\t\t\t\t}                                                                                                               // 70\n\t\t\t}                                                                                                                // 71\n                                                                                                                    // 72\n\t\t\t// replace attribution placeholders with their values from toplevel provider attribution,                        // 73\n\t\t\t// recursively                                                                                                   // 74\n\t\t\tvar attributionReplacer = function (attr) {                                                                      // 75\n\t\t\t\tif (attr.indexOf('{attribution.') === -1) {                                                                     // 76\n\t\t\t\t\treturn attr;                                                                                                   // 77\n\t\t\t\t}                                                                                                               // 78\n\t\t\t\treturn attr.replace(/\\{attribution.(\\w*)\\}/,                                                                    // 79\n\t\t\t\t\tfunction (match, attributionName) {                                                                            // 80\n\t\t\t\t\t\treturn attributionReplacer(providers[attributionName].options.attribution);                                   // 81\n\t\t\t\t\t}                                                                                                              // 82\n\t\t\t\t);                                                                                                              // 83\n\t\t\t};                                                                                                               // 84\n\t\t\tprovider.options.attribution = attributionReplacer(provider.options.attribution);                                // 85\n                                                                                                                    // 86\n\t\t\t// Compute final options combining provider options with any user overrides                                      // 87\n\t\t\tvar layerOpts = L.Util.extend({}, provider.options, options);                                                    // 88\n\t\t\tL.TileLayer.prototype.initialize.call(this, provider.url, layerOpts);                                            // 89\n\t\t}                                                                                                                 // 90\n\t});                                                                                                                // 91\n                                                                                                                    // 92\n\t/**                                                                                                                // 93\n\t * Definition of providers.                                                                                        // 94\n\t * see http://leafletjs.com/reference.html#tilelayer for options in the options map.                               // 95\n\t */                                                                                                                // 96\n                                                                                                                    // 97\n\tL.TileLayer.Provider.providers = {                                                                                 // 98\n\t\tOpenStreetMap: {                                                                                                  // 99\n\t\t\turl: '//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',                                                             // 100\n\t\t\toptions: {                                                                                                       // 101\n\t\t\t\tmaxZoom: 19,                                                                                                    // 102\n\t\t\t\tattribution:                                                                                                    // 103\n\t\t\t\t\t'&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>'                                    // 104\n\t\t\t},                                                                                                               // 105\n\t\t\tvariants: {                                                                                                      // 106\n\t\t\t\tMapnik: {},                                                                                                     // 107\n\t\t\t\tBlackAndWhite: {                                                                                                // 108\n\t\t\t\t\turl: 'http://{s}.tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png',                                                 // 109\n\t\t\t\t\toptions: {                                                                                                     // 110\n\t\t\t\t\t\tmaxZoom: 18                                                                                                   // 111\n\t\t\t\t\t}                                                                                                              // 112\n\t\t\t\t},                                                                                                              // 113\n\t\t\t\tDE: {                                                                                                           // 114\n\t\t\t\t\turl: 'http://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png',                                           // 115\n\t\t\t\t\toptions: {                                                                                                     // 116\n\t\t\t\t\t\tmaxZoom: 18                                                                                                   // 117\n\t\t\t\t\t}                                                                                                              // 118\n\t\t\t\t},                                                                                                              // 119\n\t\t\t\tFrance: {                                                                                                       // 120\n\t\t\t\t\turl: 'http://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png',                                                 // 121\n\t\t\t\t\toptions: {                                                                                                     // 122\n\t\t\t\t\t\tattribution: '&copy; Openstreetmap France | {attribution.OpenStreetMap}'                                      // 123\n\t\t\t\t\t}                                                                                                              // 124\n\t\t\t\t},                                                                                                              // 125\n\t\t\t\tHOT: {                                                                                                          // 126\n\t\t\t\t\turl: 'http://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png',                                                   // 127\n\t\t\t\t\toptions: {                                                                                                     // 128\n\t\t\t\t\t\tattribution: '{attribution.OpenStreetMap}, Tiles courtesy of <a href=\"http://hot.openstreetmap.org/\" target=\"_blank\">Humanitarian OpenStreetMap Team</a>'\n\t\t\t\t\t}                                                                                                              // 130\n\t\t\t\t}                                                                                                               // 131\n\t\t\t}                                                                                                                // 132\n\t\t},                                                                                                                // 133\n\t\tOpenSeaMap: {                                                                                                     // 134\n\t\t\turl: 'http://tiles.openseamap.org/seamark/{z}/{x}/{y}.png',                                                      // 135\n\t\t\toptions: {                                                                                                       // 136\n\t\t\t\tattribution: 'Map data: &copy; <a href=\"http://www.openseamap.org\">OpenSeaMap</a> contributors'                 // 137\n\t\t\t}                                                                                                                // 138\n\t\t},                                                                                                                // 139\n\t\tOpenTopoMap: {                                                                                                    // 140\n\t\t\turl: '//{s}.tile.opentopomap.org/{z}/{x}/{y}.png',                                                               // 141\n\t\t\toptions: {                                                                                                       // 142\n\t\t\t\tmaxZoom: 16,                                                                                                    // 143\n\t\t\t\tattribution: 'Map data: {attribution.OpenStreetMap}, <a href=\"http://viewfinderpanoramas.org\">SRTM</a> | Map style: &copy; <a href=\"https://opentopomap.org\">OpenTopoMap</a> (<a href=\"https://creativecommons.org/licenses/by-sa/3.0/\">CC-BY-SA</a>)'\n\t\t\t}                                                                                                                // 145\n\t\t},                                                                                                                // 146\n\t\tThunderforest: {                                                                                                  // 147\n\t\t\turl: '//{s}.tile.thunderforest.com/{variant}/{z}/{x}/{y}.png',                                                   // 148\n\t\t\toptions: {                                                                                                       // 149\n\t\t\t\tattribution:                                                                                                    // 150\n\t\t\t\t\t'&copy; <a href=\"http://www.opencyclemap.org\">OpenCycleMap</a>, {attribution.OpenStreetMap}',                  // 151\n\t\t\t\tvariant: 'cycle'                                                                                                // 152\n\t\t\t},                                                                                                               // 153\n\t\t\tvariants: {                                                                                                      // 154\n\t\t\t\tOpenCycleMap: 'cycle',                                                                                          // 155\n\t\t\t\tTransport: {                                                                                                    // 156\n\t\t\t\t\toptions: {                                                                                                     // 157\n\t\t\t\t\t\tvariant: 'transport',                                                                                         // 158\n\t\t\t\t\t\tmaxZoom: 19                                                                                                   // 159\n\t\t\t\t\t}                                                                                                              // 160\n\t\t\t\t},                                                                                                              // 161\n\t\t\t\tTransportDark: {                                                                                                // 162\n\t\t\t\t\toptions: {                                                                                                     // 163\n\t\t\t\t\t\tvariant: 'transport-dark',                                                                                    // 164\n\t\t\t\t\t\tmaxZoom: 19                                                                                                   // 165\n\t\t\t\t\t}                                                                                                              // 166\n\t\t\t\t},                                                                                                              // 167\n\t\t\t\tLandscape: 'landscape',                                                                                         // 168\n\t\t\t\tOutdoors: 'outdoors'                                                                                            // 169\n\t\t\t}                                                                                                                // 170\n\t\t},                                                                                                                // 171\n\t\tOpenMapSurfer: {                                                                                                  // 172\n\t\t\turl: 'http://korona.geog.uni-heidelberg.de/tiles/{variant}/x={x}&y={y}&z={z}',                                   // 173\n\t\t\toptions: {                                                                                                       // 174\n\t\t\t\tmaxZoom: 20,                                                                                                    // 175\n\t\t\t\tvariant: 'roads',                                                                                               // 176\n\t\t\t\tattribution: 'Imagery from <a href=\"http://giscience.uni-hd.de/\">GIScience Research Group @ University of Heidelberg</a> &mdash; Map data {attribution.OpenStreetMap}'\n\t\t\t},                                                                                                               // 178\n\t\t\tvariants: {                                                                                                      // 179\n\t\t\t\tRoads: 'roads',                                                                                                 // 180\n\t\t\t\tAdminBounds: {                                                                                                  // 181\n\t\t\t\t\toptions: {                                                                                                     // 182\n\t\t\t\t\t\tvariant: 'adminb',                                                                                            // 183\n\t\t\t\t\t\tmaxZoom: 19                                                                                                   // 184\n\t\t\t\t\t}                                                                                                              // 185\n\t\t\t\t},                                                                                                              // 186\n\t\t\t\tGrayscale: {                                                                                                    // 187\n\t\t\t\t\toptions: {                                                                                                     // 188\n\t\t\t\t\t\tvariant: 'roadsg',                                                                                            // 189\n\t\t\t\t\t\tmaxZoom: 19                                                                                                   // 190\n\t\t\t\t\t}                                                                                                              // 191\n\t\t\t\t}                                                                                                               // 192\n\t\t\t}                                                                                                                // 193\n\t\t},                                                                                                                // 194\n\t\tHydda: {                                                                                                          // 195\n\t\t\turl: 'http://{s}.tile.openstreetmap.se/hydda/{variant}/{z}/{x}/{y}.png',                                         // 196\n\t\t\toptions: {                                                                                                       // 197\n\t\t\t\tvariant: 'full',                                                                                                // 198\n\t\t\t\tattribution: 'Tiles courtesy of <a href=\"http://openstreetmap.se/\" target=\"_blank\">OpenStreetMap Sweden</a> &mdash; Map data {attribution.OpenStreetMap}'\n\t\t\t},                                                                                                               // 200\n\t\t\tvariants: {                                                                                                      // 201\n\t\t\t\tFull: 'full',                                                                                                   // 202\n\t\t\t\tBase: 'base',                                                                                                   // 203\n\t\t\t\tRoadsAndLabels: 'roads_and_labels'                                                                              // 204\n\t\t\t}                                                                                                                // 205\n\t\t},                                                                                                                // 206\n\t\tMapQuestOpen: {                                                                                                   // 207\n\t\t\t/* Mapquest does support https, but with a different subdomain:                                                  // 208\n\t\t\t * https://otile{s}-s.mqcdn.com/tiles/1.0.0/{type}/{z}/{x}/{y}.{ext}                                             // 209\n\t\t\t * which makes implementing protocol relativity impossible.                                                      // 210\n\t\t\t */                                                                                                              // 211\n\t\t\turl: 'http://otile{s}.mqcdn.com/tiles/1.0.0/{type}/{z}/{x}/{y}.{ext}',                                           // 212\n\t\t\toptions: {                                                                                                       // 213\n\t\t\t\ttype: 'map',                                                                                                    // 214\n\t\t\t\text: 'jpg',                                                                                                     // 215\n\t\t\t\tattribution:                                                                                                    // 216\n\t\t\t\t\t'Tiles Courtesy of <a href=\"http://www.mapquest.com/\">MapQuest</a> &mdash; ' +                                 // 217\n\t\t\t\t\t'Map data {attribution.OpenStreetMap}',                                                                        // 218\n\t\t\t\tsubdomains: '1234'                                                                                              // 219\n\t\t\t},                                                                                                               // 220\n\t\t\tvariants: {                                                                                                      // 221\n\t\t\t\tOSM: {},                                                                                                        // 222\n\t\t\t\tAerial: {                                                                                                       // 223\n\t\t\t\t\toptions: {                                                                                                     // 224\n\t\t\t\t\t\ttype: 'sat',                                                                                                  // 225\n\t\t\t\t\t\tattribution:                                                                                                  // 226\n\t\t\t\t\t\t\t'Tiles Courtesy of <a href=\"http://www.mapquest.com/\">MapQuest</a> &mdash; ' +                               // 227\n\t\t\t\t\t\t\t'Portions Courtesy NASA/JPL-Caltech and U.S. Depart. of Agriculture, Farm Service Agency'                    // 228\n\t\t\t\t\t}                                                                                                              // 229\n\t\t\t\t},                                                                                                              // 230\n\t\t\t\tHybridOverlay: {                                                                                                // 231\n\t\t\t\t\toptions: {                                                                                                     // 232\n\t\t\t\t\t\ttype: 'hyb',                                                                                                  // 233\n\t\t\t\t\t\text: 'png',                                                                                                   // 234\n\t\t\t\t\t\topacity: 0.9                                                                                                  // 235\n\t\t\t\t\t}                                                                                                              // 236\n\t\t\t\t}                                                                                                               // 237\n\t\t\t}                                                                                                                // 238\n\t\t},                                                                                                                // 239\n\t\tMapBox: {                                                                                                         // 240\n\t\t\turl: '//api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}',                                // 241\n\t\t\toptions: {                                                                                                       // 242\n\t\t\t\tattribution:                                                                                                    // 243\n\t\t\t\t\t'Imagery from <a href=\"http://mapbox.com/about/maps/\">MapBox</a> &mdash; ' +                                   // 244\n\t\t\t\t\t'Map data {attribution.OpenStreetMap}',                                                                        // 245\n\t\t\t\tsubdomains: 'abcd'                                                                                              // 246\n\t\t\t}                                                                                                                // 247\n\t\t},                                                                                                                // 248\n\t\tStamen: {                                                                                                         // 249\n\t\t\turl: '//stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}.{ext}',                                          // 250\n\t\t\toptions: {                                                                                                       // 251\n\t\t\t\tattribution:                                                                                                    // 252\n\t\t\t\t\t'Map tiles by <a href=\"http://stamen.com\">Stamen Design</a>, ' +                                               // 253\n\t\t\t\t\t'<a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a> &mdash; ' +                                // 254\n\t\t\t\t\t'Map data {attribution.OpenStreetMap}',                                                                        // 255\n\t\t\t\tsubdomains: 'abcd',                                                                                             // 256\n\t\t\t\tminZoom: 0,                                                                                                     // 257\n\t\t\t\tmaxZoom: 20,                                                                                                    // 258\n\t\t\t\tvariant: 'toner',                                                                                               // 259\n\t\t\t\text: 'png'                                                                                                      // 260\n\t\t\t},                                                                                                               // 261\n\t\t\tvariants: {                                                                                                      // 262\n\t\t\t\tToner: 'toner',                                                                                                 // 263\n\t\t\t\tTonerBackground: 'toner-background',                                                                            // 264\n\t\t\t\tTonerHybrid: 'toner-hybrid',                                                                                    // 265\n\t\t\t\tTonerLines: 'toner-lines',                                                                                      // 266\n\t\t\t\tTonerLabels: 'toner-labels',                                                                                    // 267\n\t\t\t\tTonerLite: 'toner-lite',                                                                                        // 268\n\t\t\t\tWatercolor: {                                                                                                   // 269\n\t\t\t\t\toptions: {                                                                                                     // 270\n\t\t\t\t\t\tvariant: 'watercolor',                                                                                        // 271\n\t\t\t\t\t\tminZoom: 1,                                                                                                   // 272\n\t\t\t\t\t\tmaxZoom: 16                                                                                                   // 273\n\t\t\t\t\t}                                                                                                              // 274\n\t\t\t\t},                                                                                                              // 275\n\t\t\t\tTerrain: {                                                                                                      // 276\n\t\t\t\t\toptions: {                                                                                                     // 277\n\t\t\t\t\t\tvariant: 'terrain',                                                                                           // 278\n\t\t\t\t\t\tminZoom: 4,                                                                                                   // 279\n\t\t\t\t\t\tmaxZoom: 18,                                                                                                  // 280\n\t\t\t\t\t\tbounds: [[22, -132], [70, -56]]                                                                               // 281\n\t\t\t\t\t}                                                                                                              // 282\n\t\t\t\t},                                                                                                              // 283\n\t\t\t\tTerrainBackground: {                                                                                            // 284\n\t\t\t\t\toptions: {                                                                                                     // 285\n\t\t\t\t\t\tvariant: 'terrain-background',                                                                                // 286\n\t\t\t\t\t\tminZoom: 4,                                                                                                   // 287\n\t\t\t\t\t\tmaxZoom: 18,                                                                                                  // 288\n\t\t\t\t\t\tbounds: [[22, -132], [70, -56]]                                                                               // 289\n\t\t\t\t\t}                                                                                                              // 290\n\t\t\t\t},                                                                                                              // 291\n\t\t\t\tTopOSMRelief: {                                                                                                 // 292\n\t\t\t\t\toptions: {                                                                                                     // 293\n\t\t\t\t\t\tvariant: 'toposm-color-relief',                                                                               // 294\n\t\t\t\t\t\text: 'jpg',                                                                                                   // 295\n\t\t\t\t\t\tbounds: [[22, -132], [51, -56]]                                                                               // 296\n\t\t\t\t\t}                                                                                                              // 297\n\t\t\t\t},                                                                                                              // 298\n\t\t\t\tTopOSMFeatures: {                                                                                               // 299\n\t\t\t\t\toptions: {                                                                                                     // 300\n\t\t\t\t\t\tvariant: 'toposm-features',                                                                                   // 301\n\t\t\t\t\t\tbounds: [[22, -132], [51, -56]],                                                                              // 302\n\t\t\t\t\t\topacity: 0.9                                                                                                  // 303\n\t\t\t\t\t}                                                                                                              // 304\n\t\t\t\t}                                                                                                               // 305\n\t\t\t}                                                                                                                // 306\n\t\t},                                                                                                                // 307\n\t\tEsri: {                                                                                                           // 308\n\t\t\turl: '//server.arcgisonline.com/ArcGIS/rest/services/{variant}/MapServer/tile/{z}/{y}/{x}',                      // 309\n\t\t\toptions: {                                                                                                       // 310\n\t\t\t\tvariant: 'World_Street_Map',                                                                                    // 311\n\t\t\t\tattribution: 'Tiles &copy; Esri'                                                                                // 312\n\t\t\t},                                                                                                               // 313\n\t\t\tvariants: {                                                                                                      // 314\n\t\t\t\tWorldStreetMap: {                                                                                               // 315\n\t\t\t\t\toptions: {                                                                                                     // 316\n\t\t\t\t\t\tattribution:                                                                                                  // 317\n\t\t\t\t\t\t\t'{attribution.Esri} &mdash; ' +                                                                              // 318\n\t\t\t\t\t\t\t'Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012'\n\t\t\t\t\t}                                                                                                              // 320\n\t\t\t\t},                                                                                                              // 321\n\t\t\t\tDeLorme: {                                                                                                      // 322\n\t\t\t\t\toptions: {                                                                                                     // 323\n\t\t\t\t\t\tvariant: 'Specialty/DeLorme_World_Base_Map',                                                                  // 324\n\t\t\t\t\t\tminZoom: 1,                                                                                                   // 325\n\t\t\t\t\t\tmaxZoom: 11,                                                                                                  // 326\n\t\t\t\t\t\tattribution: '{attribution.Esri} &mdash; Copyright: &copy;2012 DeLorme'                                       // 327\n\t\t\t\t\t}                                                                                                              // 328\n\t\t\t\t},                                                                                                              // 329\n\t\t\t\tWorldTopoMap: {                                                                                                 // 330\n\t\t\t\t\toptions: {                                                                                                     // 331\n\t\t\t\t\t\tvariant: 'World_Topo_Map',                                                                                    // 332\n\t\t\t\t\t\tattribution:                                                                                                  // 333\n\t\t\t\t\t\t\t'{attribution.Esri} &mdash; ' +                                                                              // 334\n\t\t\t\t\t\t\t'Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community'\n\t\t\t\t\t}                                                                                                              // 336\n\t\t\t\t},                                                                                                              // 337\n\t\t\t\tWorldImagery: {                                                                                                 // 338\n\t\t\t\t\toptions: {                                                                                                     // 339\n\t\t\t\t\t\tvariant: 'World_Imagery',                                                                                     // 340\n\t\t\t\t\t\tattribution:                                                                                                  // 341\n\t\t\t\t\t\t\t'{attribution.Esri} &mdash; ' +                                                                              // 342\n\t\t\t\t\t\t\t'Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'\n\t\t\t\t\t}                                                                                                              // 344\n\t\t\t\t},                                                                                                              // 345\n\t\t\t\tWorldTerrain: {                                                                                                 // 346\n\t\t\t\t\toptions: {                                                                                                     // 347\n\t\t\t\t\t\tvariant: 'World_Terrain_Base',                                                                                // 348\n\t\t\t\t\t\tmaxZoom: 13,                                                                                                  // 349\n\t\t\t\t\t\tattribution:                                                                                                  // 350\n\t\t\t\t\t\t\t'{attribution.Esri} &mdash; ' +                                                                              // 351\n\t\t\t\t\t\t\t'Source: USGS, Esri, TANA, DeLorme, and NPS'                                                                 // 352\n\t\t\t\t\t}                                                                                                              // 353\n\t\t\t\t},                                                                                                              // 354\n\t\t\t\tWorldShadedRelief: {                                                                                            // 355\n\t\t\t\t\toptions: {                                                                                                     // 356\n\t\t\t\t\t\tvariant: 'World_Shaded_Relief',                                                                               // 357\n\t\t\t\t\t\tmaxZoom: 13,                                                                                                  // 358\n\t\t\t\t\t\tattribution: '{attribution.Esri} &mdash; Source: Esri'                                                        // 359\n\t\t\t\t\t}                                                                                                              // 360\n\t\t\t\t},                                                                                                              // 361\n\t\t\t\tWorldPhysical: {                                                                                                // 362\n\t\t\t\t\toptions: {                                                                                                     // 363\n\t\t\t\t\t\tvariant: 'World_Physical_Map',                                                                                // 364\n\t\t\t\t\t\tmaxZoom: 8,                                                                                                   // 365\n\t\t\t\t\t\tattribution: '{attribution.Esri} &mdash; Source: US National Park Service'                                    // 366\n\t\t\t\t\t}                                                                                                              // 367\n\t\t\t\t},                                                                                                              // 368\n\t\t\t\tOceanBasemap: {                                                                                                 // 369\n\t\t\t\t\toptions: {                                                                                                     // 370\n\t\t\t\t\t\tvariant: 'Ocean_Basemap',                                                                                     // 371\n\t\t\t\t\t\tmaxZoom: 13,                                                                                                  // 372\n\t\t\t\t\t\tattribution: '{attribution.Esri} &mdash; Sources: GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri'\n\t\t\t\t\t}                                                                                                              // 374\n\t\t\t\t},                                                                                                              // 375\n\t\t\t\tNatGeoWorldMap: {                                                                                               // 376\n\t\t\t\t\toptions: {                                                                                                     // 377\n\t\t\t\t\t\tvariant: 'NatGeo_World_Map',                                                                                  // 378\n\t\t\t\t\t\tmaxZoom: 16,                                                                                                  // 379\n\t\t\t\t\t\tattribution: '{attribution.Esri} &mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC'\n\t\t\t\t\t}                                                                                                              // 381\n\t\t\t\t},                                                                                                              // 382\n\t\t\t\tWorldGrayCanvas: {                                                                                              // 383\n\t\t\t\t\toptions: {                                                                                                     // 384\n\t\t\t\t\t\tvariant: 'Canvas/World_Light_Gray_Base',                                                                      // 385\n\t\t\t\t\t\tmaxZoom: 16,                                                                                                  // 386\n\t\t\t\t\t\tattribution: '{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ'                                               // 387\n\t\t\t\t\t}                                                                                                              // 388\n\t\t\t\t}                                                                                                               // 389\n\t\t\t}                                                                                                                // 390\n\t\t},                                                                                                                // 391\n\t\tOpenWeatherMap: {                                                                                                 // 392\n\t\t\turl: 'http://{s}.tile.openweathermap.org/map/{variant}/{z}/{x}/{y}.png',                                         // 393\n\t\t\toptions: {                                                                                                       // 394\n\t\t\t\tmaxZoom: 19,                                                                                                    // 395\n\t\t\t\tattribution: 'Map data &copy; <a href=\"http://openweathermap.org\">OpenWeatherMap</a>',                          // 396\n\t\t\t\topacity: 0.5                                                                                                    // 397\n\t\t\t},                                                                                                               // 398\n\t\t\tvariants: {                                                                                                      // 399\n\t\t\t\tClouds: 'clouds',                                                                                               // 400\n\t\t\t\tCloudsClassic: 'clouds_cls',                                                                                    // 401\n\t\t\t\tPrecipitation: 'precipitation',                                                                                 // 402\n\t\t\t\tPrecipitationClassic: 'precipitation_cls',                                                                      // 403\n\t\t\t\tRain: 'rain',                                                                                                   // 404\n\t\t\t\tRainClassic: 'rain_cls',                                                                                        // 405\n\t\t\t\tPressure: 'pressure',                                                                                           // 406\n\t\t\t\tPressureContour: 'pressure_cntr',                                                                               // 407\n\t\t\t\tWind: 'wind',                                                                                                   // 408\n\t\t\t\tTemperature: 'temp',                                                                                            // 409\n\t\t\t\tSnow: 'snow'                                                                                                    // 410\n\t\t\t}                                                                                                                // 411\n\t\t},                                                                                                                // 412\n\t\tHERE: {                                                                                                           // 413\n\t\t\t/*                                                                                                               // 414\n\t\t\t * HERE maps, formerly Nokia maps.                                                                               // 415\n\t\t\t * These basemaps are free, but you need an API key. Please sign up at                                           // 416\n\t\t\t * http://developer.here.com/getting-started                                                                     // 417\n\t\t\t *                                                                                                               // 418\n\t\t\t * Note that the base urls contain '.cit' whichs is HERE's                                                       // 419\n\t\t\t * 'Customer Integration Testing' environment. Please remove for production                                      // 420\n\t\t\t * envirionments.                                                                                                // 421\n\t\t\t */                                                                                                              // 422\n\t\t\turl:                                                                                                             // 423\n\t\t\t\t'//{s}.{base}.maps.cit.api.here.com/maptile/2.1/' +                                                             // 424\n\t\t\t\t'{type}/{mapID}/{variant}/{z}/{x}/{y}/{size}/{format}?' +                                                       // 425\n\t\t\t\t'app_id={app_id}&app_code={app_code}&lg={language}',                                                            // 426\n\t\t\toptions: {                                                                                                       // 427\n\t\t\t\tattribution:                                                                                                    // 428\n\t\t\t\t\t'Map &copy; 1987-2014 <a href=\"http://developer.here.com\">HERE</a>',                                           // 429\n\t\t\t\tsubdomains: '1234',                                                                                             // 430\n\t\t\t\tmapID: 'newest',                                                                                                // 431\n\t\t\t\t'app_id': '<insert your app_id here>',                                                                          // 432\n\t\t\t\t'app_code': '<insert your app_code here>',                                                                      // 433\n\t\t\t\tbase: 'base',                                                                                                   // 434\n\t\t\t\tvariant: 'normal.day',                                                                                          // 435\n\t\t\t\tmaxZoom: 20,                                                                                                    // 436\n\t\t\t\ttype: 'maptile',                                                                                                // 437\n\t\t\t\tlanguage: 'eng',                                                                                                // 438\n\t\t\t\tformat: 'png8',                                                                                                 // 439\n\t\t\t\tsize: '256'                                                                                                     // 440\n\t\t\t},                                                                                                               // 441\n\t\t\tvariants: {                                                                                                      // 442\n\t\t\t\tnormalDay: 'normal.day',                                                                                        // 443\n\t\t\t\tnormalDayCustom: 'normal.day.custom',                                                                           // 444\n\t\t\t\tnormalDayGrey: 'normal.day.grey',                                                                               // 445\n\t\t\t\tnormalDayMobile: 'normal.day.mobile',                                                                           // 446\n\t\t\t\tnormalDayGreyMobile: 'normal.day.grey.mobile',                                                                  // 447\n\t\t\t\tnormalDayTransit: 'normal.day.transit',                                                                         // 448\n\t\t\t\tnormalDayTransitMobile: 'normal.day.transit.mobile',                                                            // 449\n\t\t\t\tnormalNight: 'normal.night',                                                                                    // 450\n\t\t\t\tnormalNightMobile: 'normal.night.mobile',                                                                       // 451\n\t\t\t\tnormalNightGrey: 'normal.night.grey',                                                                           // 452\n\t\t\t\tnormalNightGreyMobile: 'normal.night.grey.mobile',                                                              // 453\n                                                                                                                    // 454\n\t\t\t\tbasicMap: {                                                                                                     // 455\n\t\t\t\t\toptions: {                                                                                                     // 456\n\t\t\t\t\t\ttype: 'basetile'                                                                                              // 457\n\t\t\t\t\t}                                                                                                              // 458\n\t\t\t\t},                                                                                                              // 459\n\t\t\t\tmapLabels: {                                                                                                    // 460\n\t\t\t\t\toptions: {                                                                                                     // 461\n\t\t\t\t\t\ttype: 'labeltile',                                                                                            // 462\n\t\t\t\t\t\tformat: 'png'                                                                                                 // 463\n\t\t\t\t\t}                                                                                                              // 464\n\t\t\t\t},                                                                                                              // 465\n\t\t\t\ttrafficFlow: {                                                                                                  // 466\n\t\t\t\t\toptions: {                                                                                                     // 467\n\t\t\t\t\t\tbase: 'traffic',                                                                                              // 468\n\t\t\t\t\t\ttype: 'flowtile'                                                                                              // 469\n\t\t\t\t\t}                                                                                                              // 470\n\t\t\t\t},                                                                                                              // 471\n\t\t\t\tcarnavDayGrey: 'carnav.day.grey',                                                                               // 472\n\t\t\t\thybridDay: {                                                                                                    // 473\n\t\t\t\t\toptions: {                                                                                                     // 474\n\t\t\t\t\t\tbase: 'aerial',                                                                                               // 475\n\t\t\t\t\t\tvariant: 'hybrid.day'                                                                                         // 476\n\t\t\t\t\t}                                                                                                              // 477\n\t\t\t\t},                                                                                                              // 478\n\t\t\t\thybridDayMobile: {                                                                                              // 479\n\t\t\t\t\toptions: {                                                                                                     // 480\n\t\t\t\t\t\tbase: 'aerial',                                                                                               // 481\n\t\t\t\t\t\tvariant: 'hybrid.day.mobile'                                                                                  // 482\n\t\t\t\t\t}                                                                                                              // 483\n\t\t\t\t},                                                                                                              // 484\n\t\t\t\tpedestrianDay: 'pedestrian.day',                                                                                // 485\n\t\t\t\tpedestrianNight: 'pedestrian.night',                                                                            // 486\n\t\t\t\tsatelliteDay: {                                                                                                 // 487\n\t\t\t\t\toptions: {                                                                                                     // 488\n\t\t\t\t\t\tbase: 'aerial',                                                                                               // 489\n\t\t\t\t\t\tvariant: 'satellite.day'                                                                                      // 490\n\t\t\t\t\t}                                                                                                              // 491\n\t\t\t\t},                                                                                                              // 492\n\t\t\t\tterrainDay: {                                                                                                   // 493\n\t\t\t\t\toptions: {                                                                                                     // 494\n\t\t\t\t\t\tbase: 'aerial',                                                                                               // 495\n\t\t\t\t\t\tvariant: 'terrain.day'                                                                                        // 496\n\t\t\t\t\t}                                                                                                              // 497\n\t\t\t\t},                                                                                                              // 498\n\t\t\t\tterrainDayMobile: {                                                                                             // 499\n\t\t\t\t\toptions: {                                                                                                     // 500\n\t\t\t\t\t\tbase: 'aerial',                                                                                               // 501\n\t\t\t\t\t\tvariant: 'terrain.day.mobile'                                                                                 // 502\n\t\t\t\t\t}                                                                                                              // 503\n\t\t\t\t}                                                                                                               // 504\n\t\t\t}                                                                                                                // 505\n\t\t},                                                                                                                // 506\n\t\tFreeMapSK: {                                                                                                      // 507\n\t\t\turl: 'http://t{s}.freemap.sk/T/{z}/{x}/{y}.jpeg',                                                                // 508\n\t\t\toptions: {                                                                                                       // 509\n\t\t\t\tminZoom: 8,                                                                                                     // 510\n\t\t\t\tmaxZoom: 16,                                                                                                    // 511\n\t\t\t\tsubdomains: '1234',                                                                                             // 512\n\t\t\t\tbounds: [[47.204642, 15.996093], [49.830896, 22.576904]],                                                       // 513\n\t\t\t\tattribution:                                                                                                    // 514\n\t\t\t\t\t'{attribution.OpenStreetMap}, vizualization CC-By-SA 2.0 <a href=\"http://freemap.sk\">Freemap.sk</a>'           // 515\n\t\t\t}                                                                                                                // 516\n\t\t},                                                                                                                // 517\n\t\tMtbMap: {                                                                                                         // 518\n\t\t\turl: 'http://tile.mtbmap.cz/mtbmap_tiles/{z}/{x}/{y}.png',                                                       // 519\n\t\t\toptions: {                                                                                                       // 520\n\t\t\t\tattribution:                                                                                                    // 521\n\t\t\t\t\t'{attribution.OpenStreetMap} &amp; USGS'                                                                       // 522\n\t\t\t}                                                                                                                // 523\n\t\t},                                                                                                                // 524\n\t\tCartoDB: {                                                                                                        // 525\n\t\t\turl: 'http://{s}.basemaps.cartocdn.com/{variant}/{z}/{x}/{y}.png',                                               // 526\n\t\t\toptions: {                                                                                                       // 527\n\t\t\t\tattribution: '{attribution.OpenStreetMap} &copy; <a href=\"http://cartodb.com/attributions\">CartoDB</a>',        // 528\n\t\t\t\tsubdomains: 'abcd',                                                                                             // 529\n\t\t\t\tmaxZoom: 19,                                                                                                    // 530\n\t\t\t\tvariant: 'light_all'                                                                                            // 531\n\t\t\t},                                                                                                               // 532\n\t\t\tvariants: {                                                                                                      // 533\n\t\t\t\tPositron: 'light_all',                                                                                          // 534\n\t\t\t\tPositronNoLabels: 'light_nolabels',                                                                             // 535\n\t\t\t\tPositronOnlyLabels: 'light_only_labels',                                                                        // 536\n\t\t\t\tDarkMatter: 'dark_all',                                                                                         // 537\n\t\t\t\tDarkMatterNoLabels: 'dark_nolabels',                                                                            // 538\n\t\t\t\tDarkMatterOnlyLabels: 'dark_only_labels'                                                                        // 539\n\t\t\t}                                                                                                                // 540\n\t\t},                                                                                                                // 541\n\t\tHikeBike: {                                                                                                       // 542\n\t\t\turl: 'http://{s}.tiles.wmflabs.org/{variant}/{z}/{x}/{y}.png',                                                   // 543\n\t\t\toptions: {                                                                                                       // 544\n\t\t\t\tmaxZoom: 19,                                                                                                    // 545\n\t\t\t\tattribution: '{attribution.OpenStreetMap}',                                                                     // 546\n\t\t\t\tvariant: 'hikebike'                                                                                             // 547\n\t\t\t},                                                                                                               // 548\n\t\t\tvariants: {                                                                                                      // 549\n\t\t\t\tHikeBike: {},                                                                                                   // 550\n\t\t\t\tHillShading: {                                                                                                  // 551\n\t\t\t\t\toptions: {                                                                                                     // 552\n\t\t\t\t\t\tmaxZoom: 15,                                                                                                  // 553\n\t\t\t\t\t\tvariant: 'hillshading'                                                                                        // 554\n\t\t\t\t\t}                                                                                                              // 555\n\t\t\t\t}                                                                                                               // 556\n\t\t\t}                                                                                                                // 557\n\t\t},                                                                                                                // 558\n\t\tBasemapAT: {                                                                                                      // 559\n\t\t\turl: '//maps{s}.wien.gv.at/basemap/{variant}/normal/google3857/{z}/{y}/{x}.{format}',                            // 560\n\t\t\toptions: {                                                                                                       // 561\n\t\t\t\tmaxZoom: 19,                                                                                                    // 562\n\t\t\t\tattribution: 'Datenquelle: <a href=\"www.basemap.at\">basemap.at</a>',                                            // 563\n\t\t\t\tsubdomains: ['', '1', '2', '3', '4'],                                                                           // 564\n\t\t\t\tformat: 'png',                                                                                                  // 565\n\t\t\t\tbounds: [[46.358770, 8.782379], [49.037872, 17.189532]],                                                        // 566\n\t\t\t\tvariant: 'geolandbasemap'                                                                                       // 567\n\t\t\t},                                                                                                               // 568\n\t\t\tvariants: {                                                                                                      // 569\n\t\t\t\tbasemap: 'geolandbasemap',                                                                                      // 570\n\t\t\t\tgrau: 'bmapgrau',                                                                                               // 571\n\t\t\t\toverlay: 'bmapoverlay',                                                                                         // 572\n\t\t\t\thighdpi: {                                                                                                      // 573\n\t\t\t\t\toptions: {                                                                                                     // 574\n\t\t\t\t\t\tvariant: 'bmaphidpi',                                                                                         // 575\n\t\t\t\t\t\tformat: 'jpeg'                                                                                                // 576\n\t\t\t\t\t}                                                                                                              // 577\n\t\t\t\t},                                                                                                              // 578\n\t\t\t\torthofoto: {                                                                                                    // 579\n\t\t\t\t\toptions: {                                                                                                     // 580\n\t\t\t\t\t\tvariant: 'bmaporthofoto30cm',                                                                                 // 581\n\t\t\t\t\t\tformat: 'jpeg'                                                                                                // 582\n\t\t\t\t\t}                                                                                                              // 583\n\t\t\t\t}                                                                                                               // 584\n\t\t\t}                                                                                                                // 585\n\t\t},                                                                                                                // 586\n\t\tNASAGIBS: {                                                                                                       // 587\n\t\t\turl: '//map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}{maxZoom}/{z}/{y}/{x}.{format}',\n\t\t\toptions: {                                                                                                       // 589\n\t\t\t\tattribution:                                                                                                    // 590\n\t\t\t\t\t'Imagery provided by services from the Global Imagery Browse Services (GIBS), operated by the NASA/GSFC/Earth Science Data and Information System ' +\n\t\t\t\t\t'(<a href=\"https://earthdata.nasa.gov\">ESDIS</a>) with funding provided by NASA/HQ.',                          // 592\n\t\t\t\tbounds: [[-85.0511287776, -179.999999975], [85.0511287776, 179.999999975]],                                     // 593\n\t\t\t\tminZoom: 1,                                                                                                     // 594\n\t\t\t\tmaxZoom: 9,                                                                                                     // 595\n\t\t\t\tformat: 'jpg',                                                                                                  // 596\n\t\t\t\ttime: '',                                                                                                       // 597\n\t\t\t\ttilematrixset: 'GoogleMapsCompatible_Level'                                                                     // 598\n\t\t\t},                                                                                                               // 599\n\t\t\tvariants: {                                                                                                      // 600\n\t\t\t\tModisTerraTrueColorCR: 'MODIS_Terra_CorrectedReflectance_TrueColor',                                            // 601\n\t\t\t\tModisTerraBands367CR: 'MODIS_Terra_CorrectedReflectance_Bands367',                                              // 602\n\t\t\t\tViirsEarthAtNight2012: {                                                                                        // 603\n\t\t\t\t\toptions: {                                                                                                     // 604\n\t\t\t\t\t\tvariant: 'VIIRS_CityLights_2012',                                                                             // 605\n\t\t\t\t\t\tmaxZoom: 8                                                                                                    // 606\n\t\t\t\t\t}                                                                                                              // 607\n\t\t\t\t},                                                                                                              // 608\n\t\t\t\tModisTerraLSTDay: {                                                                                             // 609\n\t\t\t\t\toptions: {                                                                                                     // 610\n\t\t\t\t\t\tvariant: 'MODIS_Terra_Land_Surface_Temp_Day',                                                                 // 611\n\t\t\t\t\t\tformat: 'png',                                                                                                // 612\n\t\t\t\t\t\tmaxZoom: 7,                                                                                                   // 613\n\t\t\t\t\t\topacity: 0.75                                                                                                 // 614\n\t\t\t\t\t}                                                                                                              // 615\n\t\t\t\t},                                                                                                              // 616\n\t\t\t\tModisTerraSnowCover: {                                                                                          // 617\n\t\t\t\t\toptions: {                                                                                                     // 618\n\t\t\t\t\t\tvariant: 'MODIS_Terra_Snow_Cover',                                                                            // 619\n\t\t\t\t\t\tformat: 'png',                                                                                                // 620\n\t\t\t\t\t\tmaxZoom: 8,                                                                                                   // 621\n\t\t\t\t\t\topacity: 0.75                                                                                                 // 622\n\t\t\t\t\t}                                                                                                              // 623\n\t\t\t\t},                                                                                                              // 624\n\t\t\t\tModisTerraAOD: {                                                                                                // 625\n\t\t\t\t\toptions: {                                                                                                     // 626\n\t\t\t\t\t\tvariant: 'MODIS_Terra_Aerosol',                                                                               // 627\n\t\t\t\t\t\tformat: 'png',                                                                                                // 628\n\t\t\t\t\t\tmaxZoom: 6,                                                                                                   // 629\n\t\t\t\t\t\topacity: 0.75                                                                                                 // 630\n\t\t\t\t\t}                                                                                                              // 631\n\t\t\t\t},                                                                                                              // 632\n\t\t\t\tModisTerraChlorophyll: {                                                                                        // 633\n\t\t\t\t\toptions: {                                                                                                     // 634\n\t\t\t\t\t\tvariant: 'MODIS_Terra_Chlorophyll_A',                                                                         // 635\n\t\t\t\t\t\tformat: 'png',                                                                                                // 636\n\t\t\t\t\t\tmaxZoom: 7,                                                                                                   // 637\n\t\t\t\t\t\topacity: 0.75                                                                                                 // 638\n\t\t\t\t\t}                                                                                                              // 639\n\t\t\t\t}                                                                                                               // 640\n\t\t\t}                                                                                                                // 641\n\t\t},                                                                                                                // 642\n\t\tNLS: {                                                                                                            // 643\n\t\t\t// NLS maps are copyright National library of Scotland.                                                          // 644\n\t\t\t// http://maps.nls.uk/projects/api/index.html                                                                    // 645\n\t\t\t// Please contact NLS for anything other than non-commercial low volume usage                                    // 646\n\t\t\t//                                                                                                               // 647\n\t\t\t// Map sources: Ordnance Survey 1:1m to 1:63K, 1920s-1940s                                                       // 648\n\t\t\t//   z0-9  - 1:1m                                                                                                // 649\n\t\t\t//  z10-11 - quarter inch (1:253440)                                                                             // 650\n\t\t\t//  z12-18 - one inch (1:63360)                                                                                  // 651\n\t\t\turl: '//nls-{s}.tileserver.com/nls/{z}/{x}/{y}.jpg',                                                             // 652\n\t\t\toptions: {                                                                                                       // 653\n\t\t\t\tattribution: '<a href=\"http://geo.nls.uk/maps/\">National Library of Scotland Historic Maps</a>',                // 654\n\t\t\t\tbounds: [[49.6, -12], [61.7, 3]],                                                                               // 655\n\t\t\t\tminZoom: 1,                                                                                                     // 656\n\t\t\t\tmaxZoom: 18,                                                                                                    // 657\n\t\t\t\tsubdomains: '0123',                                                                                             // 658\n\t\t\t}                                                                                                                // 659\n\t\t}                                                                                                                 // 660\n\t};                                                                                                                 // 661\n                                                                                                                    // 662\n\tL.tileLayer.provider = function (provider, options) {                                                              // 663\n\t\treturn new L.TileLayer.Provider(provider, options);                                                               // 664\n\t};                                                                                                                 // 665\n                                                                                                                    // 666\n\treturn L;                                                                                                          // 667\n}));                                                                                                                // 668\n                                                                                                                    // 669\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function(){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// packages/bevanhunt_leaflet/.npm/package/node_modules/spin.js/spin.js                                             //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\n/**                                                                                                                 // 1\n * Copyright (c) 2011-2014 Felix Gnass                                                                              // 2\n * Licensed under the MIT license                                                                                   // 3\n * http://spin.js.org/                                                                                              // 4\n *                                                                                                                  // 5\n * Example:                                                                                                         // 6\n    var opts = {                                                                                                    // 7\n      lines: 12             // The number of lines to draw                                                          // 8\n    , length: 7             // The length of each line                                                              // 9\n    , width: 5              // The line thickness                                                                   // 10\n    , radius: 10            // The radius of the inner circle                                                       // 11\n    , scale: 1.0            // Scales overall size of the spinner                                                   // 12\n    , corners: 1            // Roundness (0..1)                                                                     // 13\n    , color: '#000'         // #rgb or #rrggbb                                                                      // 14\n    , opacity: 1/4          // Opacity of the lines                                                                 // 15\n    , rotate: 0             // Rotation offset                                                                      // 16\n    , direction: 1          // 1: clockwise, -1: counterclockwise                                                   // 17\n    , speed: 1              // Rounds per second                                                                    // 18\n    , trail: 100            // Afterglow percentage                                                                 // 19\n    , fps: 20               // Frames per second when using setTimeout()                                            // 20\n    , zIndex: 2e9           // Use a high z-index by default                                                        // 21\n    , className: 'spinner'  // CSS class to assign to the element                                                   // 22\n    , top: '50%'            // center vertically                                                                    // 23\n    , left: '50%'           // center horizontally                                                                  // 24\n    , shadow: false         // Whether to render a shadow                                                           // 25\n    , hwaccel: false        // Whether to use hardware acceleration (might be buggy)                                // 26\n    , position: 'absolute'  // Element positioning                                                                  // 27\n    }                                                                                                               // 28\n    var target = document.getElementById('foo')                                                                     // 29\n    var spinner = new Spinner(opts).spin(target)                                                                    // 30\n */                                                                                                                 // 31\n;(function (root, factory) {                                                                                        // 32\n                                                                                                                    // 33\n  /* CommonJS */                                                                                                    // 34\n  if (typeof module == 'object' && module.exports) module.exports = factory()                                       // 35\n                                                                                                                    // 36\n  /* AMD module */                                                                                                  // 37\n  else if (typeof define == 'function' && define.amd) define(factory)                                               // 38\n                                                                                                                    // 39\n  /* Browser global */                                                                                              // 40\n  else root.Spinner = factory()                                                                                     // 41\n}(this, function () {                                                                                               // 42\n  \"use strict\"                                                                                                      // 43\n                                                                                                                    // 44\n  var prefixes = ['webkit', 'Moz', 'ms', 'O'] /* Vendor prefixes */                                                 // 45\n    , animations = {} /* Animation rules keyed by their name */                                                     // 46\n    , useCssAnimations /* Whether to use CSS animations or setTimeout */                                            // 47\n    , sheet /* A stylesheet to hold the @keyframe or VML rules. */                                                  // 48\n                                                                                                                    // 49\n  /**                                                                                                               // 50\n   * Utility function to create elements. If no tag name is given,                                                  // 51\n   * a DIV is created. Optionally properties can be passed.                                                         // 52\n   */                                                                                                               // 53\n  function createEl (tag, prop) {                                                                                   // 54\n    var el = document.createElement(tag || 'div')                                                                   // 55\n      , n                                                                                                           // 56\n                                                                                                                    // 57\n    for (n in prop) el[n] = prop[n]                                                                                 // 58\n    return el                                                                                                       // 59\n  }                                                                                                                 // 60\n                                                                                                                    // 61\n  /**                                                                                                               // 62\n   * Appends children and returns the parent.                                                                       // 63\n   */                                                                                                               // 64\n  function ins (parent /* child1, child2, ...*/) {                                                                  // 65\n    for (var i = 1, n = arguments.length; i < n; i++) {                                                             // 66\n      parent.appendChild(arguments[i])                                                                              // 67\n    }                                                                                                               // 68\n                                                                                                                    // 69\n    return parent                                                                                                   // 70\n  }                                                                                                                 // 71\n                                                                                                                    // 72\n  /**                                                                                                               // 73\n   * Creates an opacity keyframe animation rule and returns its name.                                               // 74\n   * Since most mobile Webkits have timing issues with animation-delay,                                             // 75\n   * we create separate rules for each line/segment.                                                                // 76\n   */                                                                                                               // 77\n  function addAnimation (alpha, trail, i, lines) {                                                                  // 78\n    var name = ['opacity', trail, ~~(alpha * 100), i, lines].join('-')                                              // 79\n      , start = 0.01 + i/lines * 100                                                                                // 80\n      , z = Math.max(1 - (1-alpha) / trail * (100-start), alpha)                                                    // 81\n      , prefix = useCssAnimations.substring(0, useCssAnimations.indexOf('Animation')).toLowerCase()                 // 82\n      , pre = prefix && '-' + prefix + '-' || ''                                                                    // 83\n                                                                                                                    // 84\n    if (!animations[name]) {                                                                                        // 85\n      sheet.insertRule(                                                                                             // 86\n        '@' + pre + 'keyframes ' + name + '{' +                                                                     // 87\n        '0%{opacity:' + z + '}' +                                                                                   // 88\n        start + '%{opacity:' + alpha + '}' +                                                                        // 89\n        (start+0.01) + '%{opacity:1}' +                                                                             // 90\n        (start+trail) % 100 + '%{opacity:' + alpha + '}' +                                                          // 91\n        '100%{opacity:' + z + '}' +                                                                                 // 92\n        '}', sheet.cssRules.length)                                                                                 // 93\n                                                                                                                    // 94\n      animations[name] = 1                                                                                          // 95\n    }                                                                                                               // 96\n                                                                                                                    // 97\n    return name                                                                                                     // 98\n  }                                                                                                                 // 99\n                                                                                                                    // 100\n  /**                                                                                                               // 101\n   * Tries various vendor prefixes and returns the first supported property.                                        // 102\n   */                                                                                                               // 103\n  function vendor (el, prop) {                                                                                      // 104\n    var s = el.style                                                                                                // 105\n      , pp                                                                                                          // 106\n      , i                                                                                                           // 107\n                                                                                                                    // 108\n    prop = prop.charAt(0).toUpperCase() + prop.slice(1)                                                             // 109\n    if (s[prop] !== undefined) return prop                                                                          // 110\n    for (i = 0; i < prefixes.length; i++) {                                                                         // 111\n      pp = prefixes[i]+prop                                                                                         // 112\n      if (s[pp] !== undefined) return pp                                                                            // 113\n    }                                                                                                               // 114\n  }                                                                                                                 // 115\n                                                                                                                    // 116\n  /**                                                                                                               // 117\n   * Sets multiple style properties at once.                                                                        // 118\n   */                                                                                                               // 119\n  function css (el, prop) {                                                                                         // 120\n    for (var n in prop) {                                                                                           // 121\n      el.style[vendor(el, n) || n] = prop[n]                                                                        // 122\n    }                                                                                                               // 123\n                                                                                                                    // 124\n    return el                                                                                                       // 125\n  }                                                                                                                 // 126\n                                                                                                                    // 127\n  /**                                                                                                               // 128\n   * Fills in default values.                                                                                       // 129\n   */                                                                                                               // 130\n  function merge (obj) {                                                                                            // 131\n    for (var i = 1; i < arguments.length; i++) {                                                                    // 132\n      var def = arguments[i]                                                                                        // 133\n      for (var n in def) {                                                                                          // 134\n        if (obj[n] === undefined) obj[n] = def[n]                                                                   // 135\n      }                                                                                                             // 136\n    }                                                                                                               // 137\n    return obj                                                                                                      // 138\n  }                                                                                                                 // 139\n                                                                                                                    // 140\n  /**                                                                                                               // 141\n   * Returns the line color from the given string or array.                                                         // 142\n   */                                                                                                               // 143\n  function getColor (color, idx) {                                                                                  // 144\n    return typeof color == 'string' ? color : color[idx % color.length]                                             // 145\n  }                                                                                                                 // 146\n                                                                                                                    // 147\n  // Built-in defaults                                                                                              // 148\n                                                                                                                    // 149\n  var defaults = {                                                                                                  // 150\n    lines: 12             // The number of lines to draw                                                            // 151\n  , length: 7             // The length of each line                                                                // 152\n  , width: 5              // The line thickness                                                                     // 153\n  , radius: 10            // The radius of the inner circle                                                         // 154\n  , scale: 1.0            // Scales overall size of the spinner                                                     // 155\n  , corners: 1            // Roundness (0..1)                                                                       // 156\n  , color: '#000'         // #rgb or #rrggbb                                                                        // 157\n  , opacity: 1/4          // Opacity of the lines                                                                   // 158\n  , rotate: 0             // Rotation offset                                                                        // 159\n  , direction: 1          // 1: clockwise, -1: counterclockwise                                                     // 160\n  , speed: 1              // Rounds per second                                                                      // 161\n  , trail: 100            // Afterglow percentage                                                                   // 162\n  , fps: 20               // Frames per second when using setTimeout()                                              // 163\n  , zIndex: 2e9           // Use a high z-index by default                                                          // 164\n  , className: 'spinner'  // CSS class to assign to the element                                                     // 165\n  , top: '50%'            // center vertically                                                                      // 166\n  , left: '50%'           // center horizontally                                                                    // 167\n  , shadow: false         // Whether to render a shadow                                                             // 168\n  , hwaccel: false        // Whether to use hardware acceleration (might be buggy)                                  // 169\n  , position: 'absolute'  // Element positioning                                                                    // 170\n  }                                                                                                                 // 171\n                                                                                                                    // 172\n  /** The constructor */                                                                                            // 173\n  function Spinner (o) {                                                                                            // 174\n    this.opts = merge(o || {}, Spinner.defaults, defaults)                                                          // 175\n  }                                                                                                                 // 176\n                                                                                                                    // 177\n  // Global defaults that override the built-ins:                                                                   // 178\n  Spinner.defaults = {}                                                                                             // 179\n                                                                                                                    // 180\n  merge(Spinner.prototype, {                                                                                        // 181\n    /**                                                                                                             // 182\n     * Adds the spinner to the given target element. If this instance is already                                    // 183\n     * spinning, it is automatically removed from its previous target b calling                                     // 184\n     * stop() internally.                                                                                           // 185\n     */                                                                                                             // 186\n    spin: function (target) {                                                                                       // 187\n      this.stop()                                                                                                   // 188\n                                                                                                                    // 189\n      var self = this                                                                                               // 190\n        , o = self.opts                                                                                             // 191\n        , el = self.el = createEl(null, {className: o.className})                                                   // 192\n                                                                                                                    // 193\n      css(el, {                                                                                                     // 194\n        position: o.position                                                                                        // 195\n      , width: 0                                                                                                    // 196\n      , zIndex: o.zIndex                                                                                            // 197\n      , left: o.left                                                                                                // 198\n      , top: o.top                                                                                                  // 199\n      })                                                                                                            // 200\n                                                                                                                    // 201\n      if (target) {                                                                                                 // 202\n        target.insertBefore(el, target.firstChild || null)                                                          // 203\n      }                                                                                                             // 204\n                                                                                                                    // 205\n      el.setAttribute('role', 'progressbar')                                                                        // 206\n      self.lines(el, self.opts)                                                                                     // 207\n                                                                                                                    // 208\n      if (!useCssAnimations) {                                                                                      // 209\n        // No CSS animation support, use setTimeout() instead                                                       // 210\n        var i = 0                                                                                                   // 211\n          , start = (o.lines - 1) * (1 - o.direction) / 2                                                           // 212\n          , alpha                                                                                                   // 213\n          , fps = o.fps                                                                                             // 214\n          , f = fps / o.speed                                                                                       // 215\n          , ostep = (1 - o.opacity) / (f * o.trail / 100)                                                           // 216\n          , astep = f / o.lines                                                                                     // 217\n                                                                                                                    // 218\n        ;(function anim () {                                                                                        // 219\n          i++                                                                                                       // 220\n          for (var j = 0; j < o.lines; j++) {                                                                       // 221\n            alpha = Math.max(1 - (i + (o.lines - j) * astep) % f * ostep, o.opacity)                                // 222\n                                                                                                                    // 223\n            self.opacity(el, j * o.direction + start, alpha, o)                                                     // 224\n          }                                                                                                         // 225\n          self.timeout = self.el && setTimeout(anim, ~~(1000 / fps))                                                // 226\n        })()                                                                                                        // 227\n      }                                                                                                             // 228\n      return self                                                                                                   // 229\n    }                                                                                                               // 230\n                                                                                                                    // 231\n    /**                                                                                                             // 232\n     * Stops and removes the Spinner.                                                                               // 233\n     */                                                                                                             // 234\n  , stop: function () {                                                                                             // 235\n      var el = this.el                                                                                              // 236\n      if (el) {                                                                                                     // 237\n        clearTimeout(this.timeout)                                                                                  // 238\n        if (el.parentNode) el.parentNode.removeChild(el)                                                            // 239\n        this.el = undefined                                                                                         // 240\n      }                                                                                                             // 241\n      return this                                                                                                   // 242\n    }                                                                                                               // 243\n                                                                                                                    // 244\n    /**                                                                                                             // 245\n     * Internal method that draws the individual lines. Will be overwritten                                         // 246\n     * in VML fallback mode below.                                                                                  // 247\n     */                                                                                                             // 248\n  , lines: function (el, o) {                                                                                       // 249\n      var i = 0                                                                                                     // 250\n        , start = (o.lines - 1) * (1 - o.direction) / 2                                                             // 251\n        , seg                                                                                                       // 252\n                                                                                                                    // 253\n      function fill (color, shadow) {                                                                               // 254\n        return css(createEl(), {                                                                                    // 255\n          position: 'absolute'                                                                                      // 256\n        , width: o.scale * (o.length + o.width) + 'px'                                                              // 257\n        , height: o.scale * o.width + 'px'                                                                          // 258\n        , background: color                                                                                         // 259\n        , boxShadow: shadow                                                                                         // 260\n        , transformOrigin: 'left'                                                                                   // 261\n        , transform: 'rotate(' + ~~(360/o.lines*i + o.rotate) + 'deg) translate(' + o.scale*o.radius + 'px' + ',0)'\n        , borderRadius: (o.corners * o.scale * o.width >> 1) + 'px'                                                 // 263\n        })                                                                                                          // 264\n      }                                                                                                             // 265\n                                                                                                                    // 266\n      for (; i < o.lines; i++) {                                                                                    // 267\n        seg = css(createEl(), {                                                                                     // 268\n          position: 'absolute'                                                                                      // 269\n        , top: 1 + ~(o.scale * o.width / 2) + 'px'                                                                  // 270\n        , transform: o.hwaccel ? 'translate3d(0,0,0)' : ''                                                          // 271\n        , opacity: o.opacity                                                                                        // 272\n        , animation: useCssAnimations && addAnimation(o.opacity, o.trail, start + i * o.direction, o.lines) + ' ' + 1 / o.speed + 's linear infinite'\n        })                                                                                                          // 274\n                                                                                                                    // 275\n        if (o.shadow) ins(seg, css(fill('#000', '0 0 4px #000'), {top: '2px'}))                                     // 276\n        ins(el, ins(seg, fill(getColor(o.color, i), '0 0 1px rgba(0,0,0,.1)')))                                     // 277\n      }                                                                                                             // 278\n      return el                                                                                                     // 279\n    }                                                                                                               // 280\n                                                                                                                    // 281\n    /**                                                                                                             // 282\n     * Internal method that adjusts the opacity of a single line.                                                   // 283\n     * Will be overwritten in VML fallback mode below.                                                              // 284\n     */                                                                                                             // 285\n  , opacity: function (el, i, val) {                                                                                // 286\n      if (i < el.childNodes.length) el.childNodes[i].style.opacity = val                                            // 287\n    }                                                                                                               // 288\n                                                                                                                    // 289\n  })                                                                                                                // 290\n                                                                                                                    // 291\n                                                                                                                    // 292\n  function initVML () {                                                                                             // 293\n                                                                                                                    // 294\n    /* Utility function to create a VML tag */                                                                      // 295\n    function vml (tag, attr) {                                                                                      // 296\n      return createEl('<' + tag + ' xmlns=\"urn:schemas-microsoft.com:vml\" class=\"spin-vml\">', attr)                 // 297\n    }                                                                                                               // 298\n                                                                                                                    // 299\n    // No CSS transforms but VML support, add a CSS rule for VML elements:                                          // 300\n    sheet.addRule('.spin-vml', 'behavior:url(#default#VML)')                                                        // 301\n                                                                                                                    // 302\n    Spinner.prototype.lines = function (el, o) {                                                                    // 303\n      var r = o.scale * (o.length + o.width)                                                                        // 304\n        , s = o.scale * 2 * r                                                                                       // 305\n                                                                                                                    // 306\n      function grp () {                                                                                             // 307\n        return css(                                                                                                 // 308\n          vml('group', {                                                                                            // 309\n            coordsize: s + ' ' + s                                                                                  // 310\n          , coordorigin: -r + ' ' + -r                                                                              // 311\n          })                                                                                                        // 312\n        , { width: s, height: s }                                                                                   // 313\n        )                                                                                                           // 314\n      }                                                                                                             // 315\n                                                                                                                    // 316\n      var margin = -(o.width + o.length) * o.scale * 2 + 'px'                                                       // 317\n        , g = css(grp(), {position: 'absolute', top: margin, left: margin})                                         // 318\n        , i                                                                                                         // 319\n                                                                                                                    // 320\n      function seg (i, dx, filter) {                                                                                // 321\n        ins(                                                                                                        // 322\n          g                                                                                                         // 323\n        , ins(                                                                                                      // 324\n            css(grp(), {rotation: 360 / o.lines * i + 'deg', left: ~~dx})                                           // 325\n          , ins(                                                                                                    // 326\n              css(                                                                                                  // 327\n                vml('roundrect', {arcsize: o.corners})                                                              // 328\n              , { width: r                                                                                          // 329\n                , height: o.scale * o.width                                                                         // 330\n                , left: o.scale * o.radius                                                                          // 331\n                , top: -o.scale * o.width >> 1                                                                      // 332\n                , filter: filter                                                                                    // 333\n                }                                                                                                   // 334\n              )                                                                                                     // 335\n            , vml('fill', {color: getColor(o.color, i), opacity: o.opacity})                                        // 336\n            , vml('stroke', {opacity: 0}) // transparent stroke to fix color bleeding upon opacity change           // 337\n            )                                                                                                       // 338\n          )                                                                                                         // 339\n        )                                                                                                           // 340\n      }                                                                                                             // 341\n                                                                                                                    // 342\n      if (o.shadow)                                                                                                 // 343\n        for (i = 1; i <= o.lines; i++) {                                                                            // 344\n          seg(i, -2, 'progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)')         // 345\n        }                                                                                                           // 346\n                                                                                                                    // 347\n      for (i = 1; i <= o.lines; i++) seg(i)                                                                         // 348\n      return ins(el, g)                                                                                             // 349\n    }                                                                                                               // 350\n                                                                                                                    // 351\n    Spinner.prototype.opacity = function (el, i, val, o) {                                                          // 352\n      var c = el.firstChild                                                                                         // 353\n      o = o.shadow && o.lines || 0                                                                                  // 354\n      if (c && i + o < c.childNodes.length) {                                                                       // 355\n        c = c.childNodes[i + o]; c = c && c.firstChild; c = c && c.firstChild                                       // 356\n        if (c) c.opacity = val                                                                                      // 357\n      }                                                                                                             // 358\n    }                                                                                                               // 359\n  }                                                                                                                 // 360\n                                                                                                                    // 361\n  if (typeof document !== 'undefined') {                                                                            // 362\n    sheet = (function () {                                                                                          // 363\n      var el = createEl('style', {type : 'text/css'})                                                               // 364\n      ins(document.getElementsByTagName('head')[0], el)                                                             // 365\n      return el.sheet || el.styleSheet                                                                              // 366\n    }())                                                                                                            // 367\n                                                                                                                    // 368\n    var probe = css(createEl('group'), {behavior: 'url(#default#VML)'})                                             // 369\n                                                                                                                    // 370\n    if (!vendor(probe, 'transform') && probe.adj) initVML()                                                         // 371\n    else useCssAnimations = vendor(probe, 'animation')                                                              // 372\n  }                                                                                                                 // 373\n                                                                                                                    // 374\n  return Spinner                                                                                                    // 375\n                                                                                                                    // 376\n}));                                                                                                                // 377\n                                                                                                                    // 378\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function(){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// packages/bevanhunt_leaflet/lib/leaflet_spin.js                                                                   //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nL.SpinMapMixin = {                                                                                                  // 1\n    spin: function (state, options) {                                                                               // 2\n        if (!!state) {                                                                                              // 3\n            // start spinning !                                                                                     // 4\n            if (!this._spinner) {                                                                                   // 5\n                this._spinner = new Spinner(options).spin(this._container);                                         // 6\n                this._spinning = 0;                                                                                 // 7\n            }                                                                                                       // 8\n            this._spinning++;                                                                                       // 9\n        }                                                                                                           // 10\n        else {                                                                                                      // 11\n            this._spinning--;                                                                                       // 12\n            if (this._spinning <= 0) {                                                                              // 13\n                // end spinning !                                                                                   // 14\n                if (this._spinner) {                                                                                // 15\n                    this._spinner.stop();                                                                           // 16\n                    this._spinner = null;                                                                           // 17\n                }                                                                                                   // 18\n            }                                                                                                       // 19\n        }                                                                                                           // 20\n    }                                                                                                               // 21\n};                                                                                                                  // 22\n                                                                                                                    // 23\nL.Map.include(L.SpinMapMixin);                                                                                      // 24\n                                                                                                                    // 25\nL.Map.addInitHook(function () {                                                                                     // 26\n    this.on('layeradd', function (e) {                                                                              // 27\n        // If added layer is currently loading, spin !                                                              // 28\n        if (e.layer.loading) this.spin(true);                                                                       // 29\n        if (typeof e.layer.on != 'function') return;                                                                // 30\n        e.layer.on('data:loading', function () { this.spin(true); }, this);                                         // 31\n        e.layer.on('data:loaded',  function () { this.spin(false); }, this);                                        // 32\n    }, this);                                                                                                       // 33\n    this.on('layerremove', function (e) {                                                                           // 34\n        // Clean-up                                                                                                 // 35\n        if (e.layer.loading) this.spin(false);                                                                      // 36\n        if (typeof e.layer.on != 'function') return;                                                                // 37\n        e.layer.off('data:loaded');                                                                                 // 38\n        e.layer.off('data:loading');                                                                                // 39\n    }, this);                                                                                                       // 40\n});                                                                                                                 // 41\n                                                                                                                    // 42\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n/* Exports */\nif (typeof Package === 'undefined') Package = {};\nPackage['bevanhunt:leaflet'] = {};\n\n})();\n","servePath":"/packages/bevanhunt_leaflet.js","sourceMap":{"version":3,"sources":["/packages/bevanhunt_leaflet/.npm/package/node_modules/leaflet/dist/leaflet-src.js","/packages/bevanhunt_leaflet/.npm/package/node_modules/leaflet-providers/leaflet-providers.js","/packages/bevanhunt_leaflet/.npm/package/node_modules/spin.js/spin.js","/packages/bevanhunt_leaflet/lib/leaflet_spin.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2H;;;;;;;;;;;;;;;;;;AC/8RA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;;;;;;;;AC5pBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;;;;;;;;ACzXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yH","file":"/packages/bevanhunt_leaflet.js","sourcesContent":["/*\n Leaflet, a JavaScript library for mobile-friendly interactive maps. http://leafletjs.com\n (c) 2010-2013, Vladimir Agafonkin\n (c) 2010-2011, CloudMade\n*/\n(function (window, document, undefined) {\nvar oldL = window.L,\n    L = {};\n\nL.version = '0.7.7';\n\n// define Leaflet for Node module pattern loaders, including Browserify\nif (typeof module === 'object' && typeof module.exports === 'object') {\n\tmodule.exports = L;\n\n// define Leaflet as an AMD module\n} else if (typeof define === 'function' && define.amd) {\n\tdefine(L);\n}\n\n// define Leaflet as a global L variable, saving the original L to restore later if needed\n\nL.noConflict = function () {\n\twindow.L = oldL;\n\treturn this;\n};\n\nwindow.L = L;\n\n\n/*\n * L.Util contains various utility functions used throughout Leaflet code.\n */\n\nL.Util = {\n\textend: function (dest) { // (Object[, Object, ...]) ->\n\t\tvar sources = Array.prototype.slice.call(arguments, 1),\n\t\t    i, j, len, src;\n\n\t\tfor (j = 0, len = sources.length; j < len; j++) {\n\t\t\tsrc = sources[j] || {};\n\t\t\tfor (i in src) {\n\t\t\t\tif (src.hasOwnProperty(i)) {\n\t\t\t\t\tdest[i] = src[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn dest;\n\t},\n\n\tbind: function (fn, obj) { // (Function, Object) -> Function\n\t\tvar args = arguments.length > 2 ? Array.prototype.slice.call(arguments, 2) : null;\n\t\treturn function () {\n\t\t\treturn fn.apply(obj, args || arguments);\n\t\t};\n\t},\n\n\tstamp: (function () {\n\t\tvar lastId = 0,\n\t\t    key = '_leaflet_id';\n\t\treturn function (obj) {\n\t\t\tobj[key] = obj[key] || ++lastId;\n\t\t\treturn obj[key];\n\t\t};\n\t}()),\n\n\tinvokeEach: function (obj, method, context) {\n\t\tvar i, args;\n\n\t\tif (typeof obj === 'object') {\n\t\t\targs = Array.prototype.slice.call(arguments, 3);\n\n\t\t\tfor (i in obj) {\n\t\t\t\tmethod.apply(context, [i, obj[i]].concat(args));\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n\n\tlimitExecByInterval: function (fn, time, context) {\n\t\tvar lock, execOnUnlock;\n\n\t\treturn function wrapperFn() {\n\t\t\tvar args = arguments;\n\n\t\t\tif (lock) {\n\t\t\t\texecOnUnlock = true;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlock = true;\n\n\t\t\tsetTimeout(function () {\n\t\t\t\tlock = false;\n\n\t\t\t\tif (execOnUnlock) {\n\t\t\t\t\twrapperFn.apply(context, args);\n\t\t\t\t\texecOnUnlock = false;\n\t\t\t\t}\n\t\t\t}, time);\n\n\t\t\tfn.apply(context, args);\n\t\t};\n\t},\n\n\tfalseFn: function () {\n\t\treturn false;\n\t},\n\n\tformatNum: function (num, digits) {\n\t\tvar pow = Math.pow(10, digits || 5);\n\t\treturn Math.round(num * pow) / pow;\n\t},\n\n\ttrim: function (str) {\n\t\treturn str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g, '');\n\t},\n\n\tsplitWords: function (str) {\n\t\treturn L.Util.trim(str).split(/\\s+/);\n\t},\n\n\tsetOptions: function (obj, options) {\n\t\tobj.options = L.extend({}, obj.options, options);\n\t\treturn obj.options;\n\t},\n\n\tgetParamString: function (obj, existingUrl, uppercase) {\n\t\tvar params = [];\n\t\tfor (var i in obj) {\n\t\t\tparams.push(encodeURIComponent(uppercase ? i.toUpperCase() : i) + '=' + encodeURIComponent(obj[i]));\n\t\t}\n\t\treturn ((!existingUrl || existingUrl.indexOf('?') === -1) ? '?' : '&') + params.join('&');\n\t},\n\ttemplate: function (str, data) {\n\t\treturn str.replace(/\\{ *([\\w_]+) *\\}/g, function (str, key) {\n\t\t\tvar value = data[key];\n\t\t\tif (value === undefined) {\n\t\t\t\tthrow new Error('No value provided for variable ' + str);\n\t\t\t} else if (typeof value === 'function') {\n\t\t\t\tvalue = value(data);\n\t\t\t}\n\t\t\treturn value;\n\t\t});\n\t},\n\n\tisArray: Array.isArray || function (obj) {\n\t\treturn (Object.prototype.toString.call(obj) === '[object Array]');\n\t},\n\n\temptyImageUrl: 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs='\n};\n\n(function () {\n\n\t// inspired by http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n\n\tfunction getPrefixed(name) {\n\t\tvar i, fn,\n\t\t    prefixes = ['webkit', 'moz', 'o', 'ms'];\n\n\t\tfor (i = 0; i < prefixes.length && !fn; i++) {\n\t\t\tfn = window[prefixes[i] + name];\n\t\t}\n\n\t\treturn fn;\n\t}\n\n\tvar lastTime = 0;\n\n\tfunction timeoutDefer(fn) {\n\t\tvar time = +new Date(),\n\t\t    timeToCall = Math.max(0, 16 - (time - lastTime));\n\n\t\tlastTime = time + timeToCall;\n\t\treturn window.setTimeout(fn, timeToCall);\n\t}\n\n\tvar requestFn = window.requestAnimationFrame ||\n\t        getPrefixed('RequestAnimationFrame') || timeoutDefer;\n\n\tvar cancelFn = window.cancelAnimationFrame ||\n\t        getPrefixed('CancelAnimationFrame') ||\n\t        getPrefixed('CancelRequestAnimationFrame') ||\n\t        function (id) { window.clearTimeout(id); };\n\n\n\tL.Util.requestAnimFrame = function (fn, context, immediate, element) {\n\t\tfn = L.bind(fn, context);\n\n\t\tif (immediate && requestFn === timeoutDefer) {\n\t\t\tfn();\n\t\t} else {\n\t\t\treturn requestFn.call(window, fn, element);\n\t\t}\n\t};\n\n\tL.Util.cancelAnimFrame = function (id) {\n\t\tif (id) {\n\t\t\tcancelFn.call(window, id);\n\t\t}\n\t};\n\n}());\n\n// shortcuts for most used utility functions\nL.extend = L.Util.extend;\nL.bind = L.Util.bind;\nL.stamp = L.Util.stamp;\nL.setOptions = L.Util.setOptions;\n\n\n/*\n * L.Class powers the OOP facilities of the library.\n * Thanks to John Resig and Dean Edwards for inspiration!\n */\n\nL.Class = function () {};\n\nL.Class.extend = function (props) {\n\n\t// extended class with the new prototype\n\tvar NewClass = function () {\n\n\t\t// call the constructor\n\t\tif (this.initialize) {\n\t\t\tthis.initialize.apply(this, arguments);\n\t\t}\n\n\t\t// call all constructor hooks\n\t\tif (this._initHooks) {\n\t\t\tthis.callInitHooks();\n\t\t}\n\t};\n\n\t// instantiate class without calling constructor\n\tvar F = function () {};\n\tF.prototype = this.prototype;\n\n\tvar proto = new F();\n\tproto.constructor = NewClass;\n\n\tNewClass.prototype = proto;\n\n\t//inherit parent's statics\n\tfor (var i in this) {\n\t\tif (this.hasOwnProperty(i) && i !== 'prototype') {\n\t\t\tNewClass[i] = this[i];\n\t\t}\n\t}\n\n\t// mix static properties into the class\n\tif (props.statics) {\n\t\tL.extend(NewClass, props.statics);\n\t\tdelete props.statics;\n\t}\n\n\t// mix includes into the prototype\n\tif (props.includes) {\n\t\tL.Util.extend.apply(null, [proto].concat(props.includes));\n\t\tdelete props.includes;\n\t}\n\n\t// merge options\n\tif (props.options && proto.options) {\n\t\tprops.options = L.extend({}, proto.options, props.options);\n\t}\n\n\t// mix given properties into the prototype\n\tL.extend(proto, props);\n\n\tproto._initHooks = [];\n\n\tvar parent = this;\n\t// jshint camelcase: false\n\tNewClass.__super__ = parent.prototype;\n\n\t// add method for calling all hooks\n\tproto.callInitHooks = function () {\n\n\t\tif (this._initHooksCalled) { return; }\n\n\t\tif (parent.prototype.callInitHooks) {\n\t\t\tparent.prototype.callInitHooks.call(this);\n\t\t}\n\n\t\tthis._initHooksCalled = true;\n\n\t\tfor (var i = 0, len = proto._initHooks.length; i < len; i++) {\n\t\t\tproto._initHooks[i].call(this);\n\t\t}\n\t};\n\n\treturn NewClass;\n};\n\n\n// method for adding properties to prototype\nL.Class.include = function (props) {\n\tL.extend(this.prototype, props);\n};\n\n// merge new default options to the Class\nL.Class.mergeOptions = function (options) {\n\tL.extend(this.prototype.options, options);\n};\n\n// add a constructor hook\nL.Class.addInitHook = function (fn) { // (Function) || (String, args...)\n\tvar args = Array.prototype.slice.call(arguments, 1);\n\n\tvar init = typeof fn === 'function' ? fn : function () {\n\t\tthis[fn].apply(this, args);\n\t};\n\n\tthis.prototype._initHooks = this.prototype._initHooks || [];\n\tthis.prototype._initHooks.push(init);\n};\n\n\n/*\n * L.Mixin.Events is used to add custom events functionality to Leaflet classes.\n */\n\nvar eventsKey = '_leaflet_events';\n\nL.Mixin = {};\n\nL.Mixin.Events = {\n\n\taddEventListener: function (types, fn, context) { // (String, Function[, Object]) or (Object[, Object])\n\n\t\t// types can be a map of types/handlers\n\t\tif (L.Util.invokeEach(types, this.addEventListener, this, fn, context)) { return this; }\n\n\t\tvar events = this[eventsKey] = this[eventsKey] || {},\n\t\t    contextId = context && context !== this && L.stamp(context),\n\t\t    i, len, event, type, indexKey, indexLenKey, typeIndex;\n\n\t\t// types can be a string of space-separated words\n\t\ttypes = L.Util.splitWords(types);\n\n\t\tfor (i = 0, len = types.length; i < len; i++) {\n\t\t\tevent = {\n\t\t\t\taction: fn,\n\t\t\t\tcontext: context || this\n\t\t\t};\n\t\t\ttype = types[i];\n\n\t\t\tif (contextId) {\n\t\t\t\t// store listeners of a particular context in a separate hash (if it has an id)\n\t\t\t\t// gives a major performance boost when removing thousands of map layers\n\n\t\t\t\tindexKey = type + '_idx';\n\t\t\t\tindexLenKey = indexKey + '_len';\n\n\t\t\t\ttypeIndex = events[indexKey] = events[indexKey] || {};\n\n\t\t\t\tif (!typeIndex[contextId]) {\n\t\t\t\t\ttypeIndex[contextId] = [];\n\n\t\t\t\t\t// keep track of the number of keys in the index to quickly check if it's empty\n\t\t\t\t\tevents[indexLenKey] = (events[indexLenKey] || 0) + 1;\n\t\t\t\t}\n\n\t\t\t\ttypeIndex[contextId].push(event);\n\n\n\t\t\t} else {\n\t\t\t\tevents[type] = events[type] || [];\n\t\t\t\tevents[type].push(event);\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\thasEventListeners: function (type) { // (String) -> Boolean\n\t\tvar events = this[eventsKey];\n\t\treturn !!events && ((type in events && events[type].length > 0) ||\n\t\t                    (type + '_idx' in events && events[type + '_idx_len'] > 0));\n\t},\n\n\tremoveEventListener: function (types, fn, context) { // ([String, Function, Object]) or (Object[, Object])\n\n\t\tif (!this[eventsKey]) {\n\t\t\treturn this;\n\t\t}\n\n\t\tif (!types) {\n\t\t\treturn this.clearAllEventListeners();\n\t\t}\n\n\t\tif (L.Util.invokeEach(types, this.removeEventListener, this, fn, context)) { return this; }\n\n\t\tvar events = this[eventsKey],\n\t\t    contextId = context && context !== this && L.stamp(context),\n\t\t    i, len, type, listeners, j, indexKey, indexLenKey, typeIndex, removed;\n\n\t\ttypes = L.Util.splitWords(types);\n\n\t\tfor (i = 0, len = types.length; i < len; i++) {\n\t\t\ttype = types[i];\n\t\t\tindexKey = type + '_idx';\n\t\t\tindexLenKey = indexKey + '_len';\n\n\t\t\ttypeIndex = events[indexKey];\n\n\t\t\tif (!fn) {\n\t\t\t\t// clear all listeners for a type if function isn't specified\n\t\t\t\tdelete events[type];\n\t\t\t\tdelete events[indexKey];\n\t\t\t\tdelete events[indexLenKey];\n\n\t\t\t} else {\n\t\t\t\tlisteners = contextId && typeIndex ? typeIndex[contextId] : events[type];\n\n\t\t\t\tif (listeners) {\n\t\t\t\t\tfor (j = listeners.length - 1; j >= 0; j--) {\n\t\t\t\t\t\tif ((listeners[j].action === fn) && (!context || (listeners[j].context === context))) {\n\t\t\t\t\t\t\tremoved = listeners.splice(j, 1);\n\t\t\t\t\t\t\t// set the old action to a no-op, because it is possible\n\t\t\t\t\t\t\t// that the listener is being iterated over as part of a dispatch\n\t\t\t\t\t\t\tremoved[0].action = L.Util.falseFn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (context && typeIndex && (listeners.length === 0)) {\n\t\t\t\t\t\tdelete typeIndex[contextId];\n\t\t\t\t\t\tevents[indexLenKey]--;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tclearAllEventListeners: function () {\n\t\tdelete this[eventsKey];\n\t\treturn this;\n\t},\n\n\tfireEvent: function (type, data) { // (String[, Object])\n\t\tif (!this.hasEventListeners(type)) {\n\t\t\treturn this;\n\t\t}\n\n\t\tvar event = L.Util.extend({}, data, { type: type, target: this });\n\n\t\tvar events = this[eventsKey],\n\t\t    listeners, i, len, typeIndex, contextId;\n\n\t\tif (events[type]) {\n\t\t\t// make sure adding/removing listeners inside other listeners won't cause infinite loop\n\t\t\tlisteners = events[type].slice();\n\n\t\t\tfor (i = 0, len = listeners.length; i < len; i++) {\n\t\t\t\tlisteners[i].action.call(listeners[i].context, event);\n\t\t\t}\n\t\t}\n\n\t\t// fire event for the context-indexed listeners as well\n\t\ttypeIndex = events[type + '_idx'];\n\n\t\tfor (contextId in typeIndex) {\n\t\t\tlisteners = typeIndex[contextId].slice();\n\n\t\t\tif (listeners) {\n\t\t\t\tfor (i = 0, len = listeners.length; i < len; i++) {\n\t\t\t\t\tlisteners[i].action.call(listeners[i].context, event);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\taddOneTimeEventListener: function (types, fn, context) {\n\n\t\tif (L.Util.invokeEach(types, this.addOneTimeEventListener, this, fn, context)) { return this; }\n\n\t\tvar handler = L.bind(function () {\n\t\t\tthis\n\t\t\t    .removeEventListener(types, fn, context)\n\t\t\t    .removeEventListener(types, handler, context);\n\t\t}, this);\n\n\t\treturn this\n\t\t    .addEventListener(types, fn, context)\n\t\t    .addEventListener(types, handler, context);\n\t}\n};\n\nL.Mixin.Events.on = L.Mixin.Events.addEventListener;\nL.Mixin.Events.off = L.Mixin.Events.removeEventListener;\nL.Mixin.Events.once = L.Mixin.Events.addOneTimeEventListener;\nL.Mixin.Events.fire = L.Mixin.Events.fireEvent;\n\n\n/*\n * L.Browser handles different browser and feature detections for internal Leaflet use.\n */\n\n(function () {\n\n\tvar ie = 'ActiveXObject' in window,\n\t\tielt9 = ie && !document.addEventListener,\n\n\t    // terrible browser detection to work around Safari / iOS / Android browser bugs\n\t    ua = navigator.userAgent.toLowerCase(),\n\t    webkit = ua.indexOf('webkit') !== -1,\n\t    chrome = ua.indexOf('chrome') !== -1,\n\t    phantomjs = ua.indexOf('phantom') !== -1,\n\t    android = ua.indexOf('android') !== -1,\n\t    android23 = ua.search('android [23]') !== -1,\n\t\tgecko = ua.indexOf('gecko') !== -1,\n\n\t    mobile = typeof orientation !== undefined + '',\n\t    msPointer = !window.PointerEvent && window.MSPointerEvent,\n\t\tpointer = (window.PointerEvent && window.navigator.pointerEnabled) ||\n\t\t\t\t  msPointer,\n\t    retina = ('devicePixelRatio' in window && window.devicePixelRatio > 1) ||\n\t             ('matchMedia' in window && window.matchMedia('(min-resolution:144dpi)') &&\n\t              window.matchMedia('(min-resolution:144dpi)').matches),\n\n\t    doc = document.documentElement,\n\t    ie3d = ie && ('transition' in doc.style),\n\t    webkit3d = ('WebKitCSSMatrix' in window) && ('m11' in new window.WebKitCSSMatrix()) && !android23,\n\t    gecko3d = 'MozPerspective' in doc.style,\n\t    opera3d = 'OTransition' in doc.style,\n\t    any3d = !window.L_DISABLE_3D && (ie3d || webkit3d || gecko3d || opera3d) && !phantomjs;\n\n\tvar touch = !window.L_NO_TOUCH && !phantomjs && (pointer || 'ontouchstart' in window ||\n\t\t(window.DocumentTouch && document instanceof window.DocumentTouch));\n\n\tL.Browser = {\n\t\tie: ie,\n\t\tielt9: ielt9,\n\t\twebkit: webkit,\n\t\tgecko: gecko && !webkit && !window.opera && !ie,\n\n\t\tandroid: android,\n\t\tandroid23: android23,\n\n\t\tchrome: chrome,\n\n\t\tie3d: ie3d,\n\t\twebkit3d: webkit3d,\n\t\tgecko3d: gecko3d,\n\t\topera3d: opera3d,\n\t\tany3d: any3d,\n\n\t\tmobile: mobile,\n\t\tmobileWebkit: mobile && webkit,\n\t\tmobileWebkit3d: mobile && webkit3d,\n\t\tmobileOpera: mobile && window.opera,\n\n\t\ttouch: touch,\n\t\tmsPointer: msPointer,\n\t\tpointer: pointer,\n\n\t\tretina: retina\n\t};\n\n}());\n\n\n/*\n * L.Point represents a point with x and y coordinates.\n */\n\nL.Point = function (/*Number*/ x, /*Number*/ y, /*Boolean*/ round) {\n\tthis.x = (round ? Math.round(x) : x);\n\tthis.y = (round ? Math.round(y) : y);\n};\n\nL.Point.prototype = {\n\n\tclone: function () {\n\t\treturn new L.Point(this.x, this.y);\n\t},\n\n\t// non-destructive, returns a new point\n\tadd: function (point) {\n\t\treturn this.clone()._add(L.point(point));\n\t},\n\n\t// destructive, used directly for performance in situations where it's safe to modify existing point\n\t_add: function (point) {\n\t\tthis.x += point.x;\n\t\tthis.y += point.y;\n\t\treturn this;\n\t},\n\n\tsubtract: function (point) {\n\t\treturn this.clone()._subtract(L.point(point));\n\t},\n\n\t_subtract: function (point) {\n\t\tthis.x -= point.x;\n\t\tthis.y -= point.y;\n\t\treturn this;\n\t},\n\n\tdivideBy: function (num) {\n\t\treturn this.clone()._divideBy(num);\n\t},\n\n\t_divideBy: function (num) {\n\t\tthis.x /= num;\n\t\tthis.y /= num;\n\t\treturn this;\n\t},\n\n\tmultiplyBy: function (num) {\n\t\treturn this.clone()._multiplyBy(num);\n\t},\n\n\t_multiplyBy: function (num) {\n\t\tthis.x *= num;\n\t\tthis.y *= num;\n\t\treturn this;\n\t},\n\n\tround: function () {\n\t\treturn this.clone()._round();\n\t},\n\n\t_round: function () {\n\t\tthis.x = Math.round(this.x);\n\t\tthis.y = Math.round(this.y);\n\t\treturn this;\n\t},\n\n\tfloor: function () {\n\t\treturn this.clone()._floor();\n\t},\n\n\t_floor: function () {\n\t\tthis.x = Math.floor(this.x);\n\t\tthis.y = Math.floor(this.y);\n\t\treturn this;\n\t},\n\n\tdistanceTo: function (point) {\n\t\tpoint = L.point(point);\n\n\t\tvar x = point.x - this.x,\n\t\t    y = point.y - this.y;\n\n\t\treturn Math.sqrt(x * x + y * y);\n\t},\n\n\tequals: function (point) {\n\t\tpoint = L.point(point);\n\n\t\treturn point.x === this.x &&\n\t\t       point.y === this.y;\n\t},\n\n\tcontains: function (point) {\n\t\tpoint = L.point(point);\n\n\t\treturn Math.abs(point.x) <= Math.abs(this.x) &&\n\t\t       Math.abs(point.y) <= Math.abs(this.y);\n\t},\n\n\ttoString: function () {\n\t\treturn 'Point(' +\n\t\t        L.Util.formatNum(this.x) + ', ' +\n\t\t        L.Util.formatNum(this.y) + ')';\n\t}\n};\n\nL.point = function (x, y, round) {\n\tif (x instanceof L.Point) {\n\t\treturn x;\n\t}\n\tif (L.Util.isArray(x)) {\n\t\treturn new L.Point(x[0], x[1]);\n\t}\n\tif (x === undefined || x === null) {\n\t\treturn x;\n\t}\n\treturn new L.Point(x, y, round);\n};\n\n\n/*\n * L.Bounds represents a rectangular area on the screen in pixel coordinates.\n */\n\nL.Bounds = function (a, b) { //(Point, Point) or Point[]\n\tif (!a) { return; }\n\n\tvar points = b ? [a, b] : a;\n\n\tfor (var i = 0, len = points.length; i < len; i++) {\n\t\tthis.extend(points[i]);\n\t}\n};\n\nL.Bounds.prototype = {\n\t// extend the bounds to contain the given point\n\textend: function (point) { // (Point)\n\t\tpoint = L.point(point);\n\n\t\tif (!this.min && !this.max) {\n\t\t\tthis.min = point.clone();\n\t\t\tthis.max = point.clone();\n\t\t} else {\n\t\t\tthis.min.x = Math.min(point.x, this.min.x);\n\t\t\tthis.max.x = Math.max(point.x, this.max.x);\n\t\t\tthis.min.y = Math.min(point.y, this.min.y);\n\t\t\tthis.max.y = Math.max(point.y, this.max.y);\n\t\t}\n\t\treturn this;\n\t},\n\n\tgetCenter: function (round) { // (Boolean) -> Point\n\t\treturn new L.Point(\n\t\t        (this.min.x + this.max.x) / 2,\n\t\t        (this.min.y + this.max.y) / 2, round);\n\t},\n\n\tgetBottomLeft: function () { // -> Point\n\t\treturn new L.Point(this.min.x, this.max.y);\n\t},\n\n\tgetTopRight: function () { // -> Point\n\t\treturn new L.Point(this.max.x, this.min.y);\n\t},\n\n\tgetSize: function () {\n\t\treturn this.max.subtract(this.min);\n\t},\n\n\tcontains: function (obj) { // (Bounds) or (Point) -> Boolean\n\t\tvar min, max;\n\n\t\tif (typeof obj[0] === 'number' || obj instanceof L.Point) {\n\t\t\tobj = L.point(obj);\n\t\t} else {\n\t\t\tobj = L.bounds(obj);\n\t\t}\n\n\t\tif (obj instanceof L.Bounds) {\n\t\t\tmin = obj.min;\n\t\t\tmax = obj.max;\n\t\t} else {\n\t\t\tmin = max = obj;\n\t\t}\n\n\t\treturn (min.x >= this.min.x) &&\n\t\t       (max.x <= this.max.x) &&\n\t\t       (min.y >= this.min.y) &&\n\t\t       (max.y <= this.max.y);\n\t},\n\n\tintersects: function (bounds) { // (Bounds) -> Boolean\n\t\tbounds = L.bounds(bounds);\n\n\t\tvar min = this.min,\n\t\t    max = this.max,\n\t\t    min2 = bounds.min,\n\t\t    max2 = bounds.max,\n\t\t    xIntersects = (max2.x >= min.x) && (min2.x <= max.x),\n\t\t    yIntersects = (max2.y >= min.y) && (min2.y <= max.y);\n\n\t\treturn xIntersects && yIntersects;\n\t},\n\n\tisValid: function () {\n\t\treturn !!(this.min && this.max);\n\t}\n};\n\nL.bounds = function (a, b) { // (Bounds) or (Point, Point) or (Point[])\n\tif (!a || a instanceof L.Bounds) {\n\t\treturn a;\n\t}\n\treturn new L.Bounds(a, b);\n};\n\n\n/*\n * L.Transformation is an utility class to perform simple point transformations through a 2d-matrix.\n */\n\nL.Transformation = function (a, b, c, d) {\n\tthis._a = a;\n\tthis._b = b;\n\tthis._c = c;\n\tthis._d = d;\n};\n\nL.Transformation.prototype = {\n\ttransform: function (point, scale) { // (Point, Number) -> Point\n\t\treturn this._transform(point.clone(), scale);\n\t},\n\n\t// destructive transform (faster)\n\t_transform: function (point, scale) {\n\t\tscale = scale || 1;\n\t\tpoint.x = scale * (this._a * point.x + this._b);\n\t\tpoint.y = scale * (this._c * point.y + this._d);\n\t\treturn point;\n\t},\n\n\tuntransform: function (point, scale) {\n\t\tscale = scale || 1;\n\t\treturn new L.Point(\n\t\t        (point.x / scale - this._b) / this._a,\n\t\t        (point.y / scale - this._d) / this._c);\n\t}\n};\n\n\n/*\n * L.DomUtil contains various utility functions for working with DOM.\n */\n\nL.DomUtil = {\n\tget: function (id) {\n\t\treturn (typeof id === 'string' ? document.getElementById(id) : id);\n\t},\n\n\tgetStyle: function (el, style) {\n\n\t\tvar value = el.style[style];\n\n\t\tif (!value && el.currentStyle) {\n\t\t\tvalue = el.currentStyle[style];\n\t\t}\n\n\t\tif ((!value || value === 'auto') && document.defaultView) {\n\t\t\tvar css = document.defaultView.getComputedStyle(el, null);\n\t\t\tvalue = css ? css[style] : null;\n\t\t}\n\n\t\treturn value === 'auto' ? null : value;\n\t},\n\n\tgetViewportOffset: function (element) {\n\n\t\tvar top = 0,\n\t\t    left = 0,\n\t\t    el = element,\n\t\t    docBody = document.body,\n\t\t    docEl = document.documentElement,\n\t\t    pos;\n\n\t\tdo {\n\t\t\ttop  += el.offsetTop  || 0;\n\t\t\tleft += el.offsetLeft || 0;\n\n\t\t\t//add borders\n\t\t\ttop += parseInt(L.DomUtil.getStyle(el, 'borderTopWidth'), 10) || 0;\n\t\t\tleft += parseInt(L.DomUtil.getStyle(el, 'borderLeftWidth'), 10) || 0;\n\n\t\t\tpos = L.DomUtil.getStyle(el, 'position');\n\n\t\t\tif (el.offsetParent === docBody && pos === 'absolute') { break; }\n\n\t\t\tif (pos === 'fixed') {\n\t\t\t\ttop  += docBody.scrollTop  || docEl.scrollTop  || 0;\n\t\t\t\tleft += docBody.scrollLeft || docEl.scrollLeft || 0;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (pos === 'relative' && !el.offsetLeft) {\n\t\t\t\tvar width = L.DomUtil.getStyle(el, 'width'),\n\t\t\t\t    maxWidth = L.DomUtil.getStyle(el, 'max-width'),\n\t\t\t\t    r = el.getBoundingClientRect();\n\n\t\t\t\tif (width !== 'none' || maxWidth !== 'none') {\n\t\t\t\t\tleft += r.left + el.clientLeft;\n\t\t\t\t}\n\n\t\t\t\t//calculate full y offset since we're breaking out of the loop\n\t\t\t\ttop += r.top + (docBody.scrollTop  || docEl.scrollTop  || 0);\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tel = el.offsetParent;\n\n\t\t} while (el);\n\n\t\tel = element;\n\n\t\tdo {\n\t\t\tif (el === docBody) { break; }\n\n\t\t\ttop  -= el.scrollTop  || 0;\n\t\t\tleft -= el.scrollLeft || 0;\n\n\t\t\tel = el.parentNode;\n\t\t} while (el);\n\n\t\treturn new L.Point(left, top);\n\t},\n\n\tdocumentIsLtr: function () {\n\t\tif (!L.DomUtil._docIsLtrCached) {\n\t\t\tL.DomUtil._docIsLtrCached = true;\n\t\t\tL.DomUtil._docIsLtr = L.DomUtil.getStyle(document.body, 'direction') === 'ltr';\n\t\t}\n\t\treturn L.DomUtil._docIsLtr;\n\t},\n\n\tcreate: function (tagName, className, container) {\n\n\t\tvar el = document.createElement(tagName);\n\t\tel.className = className;\n\n\t\tif (container) {\n\t\t\tcontainer.appendChild(el);\n\t\t}\n\n\t\treturn el;\n\t},\n\n\thasClass: function (el, name) {\n\t\tif (el.classList !== undefined) {\n\t\t\treturn el.classList.contains(name);\n\t\t}\n\t\tvar className = L.DomUtil._getClass(el);\n\t\treturn className.length > 0 && new RegExp('(^|\\\\s)' + name + '(\\\\s|$)').test(className);\n\t},\n\n\taddClass: function (el, name) {\n\t\tif (el.classList !== undefined) {\n\t\t\tvar classes = L.Util.splitWords(name);\n\t\t\tfor (var i = 0, len = classes.length; i < len; i++) {\n\t\t\t\tel.classList.add(classes[i]);\n\t\t\t}\n\t\t} else if (!L.DomUtil.hasClass(el, name)) {\n\t\t\tvar className = L.DomUtil._getClass(el);\n\t\t\tL.DomUtil._setClass(el, (className ? className + ' ' : '') + name);\n\t\t}\n\t},\n\n\tremoveClass: function (el, name) {\n\t\tif (el.classList !== undefined) {\n\t\t\tel.classList.remove(name);\n\t\t} else {\n\t\t\tL.DomUtil._setClass(el, L.Util.trim((' ' + L.DomUtil._getClass(el) + ' ').replace(' ' + name + ' ', ' ')));\n\t\t}\n\t},\n\n\t_setClass: function (el, name) {\n\t\tif (el.className.baseVal === undefined) {\n\t\t\tel.className = name;\n\t\t} else {\n\t\t\t// in case of SVG element\n\t\t\tel.className.baseVal = name;\n\t\t}\n\t},\n\n\t_getClass: function (el) {\n\t\treturn el.className.baseVal === undefined ? el.className : el.className.baseVal;\n\t},\n\n\tsetOpacity: function (el, value) {\n\n\t\tif ('opacity' in el.style) {\n\t\t\tel.style.opacity = value;\n\n\t\t} else if ('filter' in el.style) {\n\n\t\t\tvar filter = false,\n\t\t\t    filterName = 'DXImageTransform.Microsoft.Alpha';\n\n\t\t\t// filters collection throws an error if we try to retrieve a filter that doesn't exist\n\t\t\ttry {\n\t\t\t\tfilter = el.filters.item(filterName);\n\t\t\t} catch (e) {\n\t\t\t\t// don't set opacity to 1 if we haven't already set an opacity,\n\t\t\t\t// it isn't needed and breaks transparent pngs.\n\t\t\t\tif (value === 1) { return; }\n\t\t\t}\n\n\t\t\tvalue = Math.round(value * 100);\n\n\t\t\tif (filter) {\n\t\t\t\tfilter.Enabled = (value !== 100);\n\t\t\t\tfilter.Opacity = value;\n\t\t\t} else {\n\t\t\t\tel.style.filter += ' progid:' + filterName + '(opacity=' + value + ')';\n\t\t\t}\n\t\t}\n\t},\n\n\ttestProp: function (props) {\n\n\t\tvar style = document.documentElement.style;\n\n\t\tfor (var i = 0; i < props.length; i++) {\n\t\t\tif (props[i] in style) {\n\t\t\t\treturn props[i];\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\n\tgetTranslateString: function (point) {\n\t\t// on WebKit browsers (Chrome/Safari/iOS Safari/Android) using translate3d instead of translate\n\t\t// makes animation smoother as it ensures HW accel is used. Firefox 13 doesn't care\n\t\t// (same speed either way), Opera 12 doesn't support translate3d\n\n\t\tvar is3d = L.Browser.webkit3d,\n\t\t    open = 'translate' + (is3d ? '3d' : '') + '(',\n\t\t    close = (is3d ? ',0' : '') + ')';\n\n\t\treturn open + point.x + 'px,' + point.y + 'px' + close;\n\t},\n\n\tgetScaleString: function (scale, origin) {\n\n\t\tvar preTranslateStr = L.DomUtil.getTranslateString(origin.add(origin.multiplyBy(-1 * scale))),\n\t\t    scaleStr = ' scale(' + scale + ') ';\n\n\t\treturn preTranslateStr + scaleStr;\n\t},\n\n\tsetPosition: function (el, point, disable3D) { // (HTMLElement, Point[, Boolean])\n\n\t\t// jshint camelcase: false\n\t\tel._leaflet_pos = point;\n\n\t\tif (!disable3D && L.Browser.any3d) {\n\t\t\tel.style[L.DomUtil.TRANSFORM] =  L.DomUtil.getTranslateString(point);\n\t\t} else {\n\t\t\tel.style.left = point.x + 'px';\n\t\t\tel.style.top = point.y + 'px';\n\t\t}\n\t},\n\n\tgetPosition: function (el) {\n\t\t// this method is only used for elements previously positioned using setPosition,\n\t\t// so it's safe to cache the position for performance\n\n\t\t// jshint camelcase: false\n\t\treturn el._leaflet_pos;\n\t}\n};\n\n\n// prefix style property names\n\nL.DomUtil.TRANSFORM = L.DomUtil.testProp(\n        ['transform', 'WebkitTransform', 'OTransform', 'MozTransform', 'msTransform']);\n\n// webkitTransition comes first because some browser versions that drop vendor prefix don't do\n// the same for the transitionend event, in particular the Android 4.1 stock browser\n\nL.DomUtil.TRANSITION = L.DomUtil.testProp(\n        ['webkitTransition', 'transition', 'OTransition', 'MozTransition', 'msTransition']);\n\nL.DomUtil.TRANSITION_END =\n        L.DomUtil.TRANSITION === 'webkitTransition' || L.DomUtil.TRANSITION === 'OTransition' ?\n        L.DomUtil.TRANSITION + 'End' : 'transitionend';\n\n(function () {\n    if ('onselectstart' in document) {\n        L.extend(L.DomUtil, {\n            disableTextSelection: function () {\n                L.DomEvent.on(window, 'selectstart', L.DomEvent.preventDefault);\n            },\n\n            enableTextSelection: function () {\n                L.DomEvent.off(window, 'selectstart', L.DomEvent.preventDefault);\n            }\n        });\n    } else {\n        var userSelectProperty = L.DomUtil.testProp(\n            ['userSelect', 'WebkitUserSelect', 'OUserSelect', 'MozUserSelect', 'msUserSelect']);\n\n        L.extend(L.DomUtil, {\n            disableTextSelection: function () {\n                if (userSelectProperty) {\n                    var style = document.documentElement.style;\n                    this._userSelect = style[userSelectProperty];\n                    style[userSelectProperty] = 'none';\n                }\n            },\n\n            enableTextSelection: function () {\n                if (userSelectProperty) {\n                    document.documentElement.style[userSelectProperty] = this._userSelect;\n                    delete this._userSelect;\n                }\n            }\n        });\n    }\n\n\tL.extend(L.DomUtil, {\n\t\tdisableImageDrag: function () {\n\t\t\tL.DomEvent.on(window, 'dragstart', L.DomEvent.preventDefault);\n\t\t},\n\n\t\tenableImageDrag: function () {\n\t\t\tL.DomEvent.off(window, 'dragstart', L.DomEvent.preventDefault);\n\t\t}\n\t});\n})();\n\n\n/*\n * L.LatLng represents a geographical point with latitude and longitude coordinates.\n */\n\nL.LatLng = function (lat, lng, alt) { // (Number, Number, Number)\n\tlat = parseFloat(lat);\n\tlng = parseFloat(lng);\n\n\tif (isNaN(lat) || isNaN(lng)) {\n\t\tthrow new Error('Invalid LatLng object: (' + lat + ', ' + lng + ')');\n\t}\n\n\tthis.lat = lat;\n\tthis.lng = lng;\n\n\tif (alt !== undefined) {\n\t\tthis.alt = parseFloat(alt);\n\t}\n};\n\nL.extend(L.LatLng, {\n\tDEG_TO_RAD: Math.PI / 180,\n\tRAD_TO_DEG: 180 / Math.PI,\n\tMAX_MARGIN: 1.0E-9 // max margin of error for the \"equals\" check\n});\n\nL.LatLng.prototype = {\n\tequals: function (obj) { // (LatLng) -> Boolean\n\t\tif (!obj) { return false; }\n\n\t\tobj = L.latLng(obj);\n\n\t\tvar margin = Math.max(\n\t\t        Math.abs(this.lat - obj.lat),\n\t\t        Math.abs(this.lng - obj.lng));\n\n\t\treturn margin <= L.LatLng.MAX_MARGIN;\n\t},\n\n\ttoString: function (precision) { // (Number) -> String\n\t\treturn 'LatLng(' +\n\t\t        L.Util.formatNum(this.lat, precision) + ', ' +\n\t\t        L.Util.formatNum(this.lng, precision) + ')';\n\t},\n\n\t// Haversine distance formula, see http://en.wikipedia.org/wiki/Haversine_formula\n\t// TODO move to projection code, LatLng shouldn't know about Earth\n\tdistanceTo: function (other) { // (LatLng) -> Number\n\t\tother = L.latLng(other);\n\n\t\tvar R = 6378137, // earth radius in meters\n\t\t    d2r = L.LatLng.DEG_TO_RAD,\n\t\t    dLat = (other.lat - this.lat) * d2r,\n\t\t    dLon = (other.lng - this.lng) * d2r,\n\t\t    lat1 = this.lat * d2r,\n\t\t    lat2 = other.lat * d2r,\n\t\t    sin1 = Math.sin(dLat / 2),\n\t\t    sin2 = Math.sin(dLon / 2);\n\n\t\tvar a = sin1 * sin1 + sin2 * sin2 * Math.cos(lat1) * Math.cos(lat2);\n\n\t\treturn R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n\t},\n\n\twrap: function (a, b) { // (Number, Number) -> LatLng\n\t\tvar lng = this.lng;\n\n\t\ta = a || -180;\n\t\tb = b ||  180;\n\n\t\tlng = (lng + b) % (b - a) + (lng < a || lng === b ? b : a);\n\n\t\treturn new L.LatLng(this.lat, lng);\n\t}\n};\n\nL.latLng = function (a, b) { // (LatLng) or ([Number, Number]) or (Number, Number)\n\tif (a instanceof L.LatLng) {\n\t\treturn a;\n\t}\n\tif (L.Util.isArray(a)) {\n\t\tif (typeof a[0] === 'number' || typeof a[0] === 'string') {\n\t\t\treturn new L.LatLng(a[0], a[1], a[2]);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\tif (a === undefined || a === null) {\n\t\treturn a;\n\t}\n\tif (typeof a === 'object' && 'lat' in a) {\n\t\treturn new L.LatLng(a.lat, 'lng' in a ? a.lng : a.lon);\n\t}\n\tif (b === undefined) {\n\t\treturn null;\n\t}\n\treturn new L.LatLng(a, b);\n};\n\n\n\n/*\n * L.LatLngBounds represents a rectangular area on the map in geographical coordinates.\n */\n\nL.LatLngBounds = function (southWest, northEast) { // (LatLng, LatLng) or (LatLng[])\n\tif (!southWest) { return; }\n\n\tvar latlngs = northEast ? [southWest, northEast] : southWest;\n\n\tfor (var i = 0, len = latlngs.length; i < len; i++) {\n\t\tthis.extend(latlngs[i]);\n\t}\n};\n\nL.LatLngBounds.prototype = {\n\t// extend the bounds to contain the given point or bounds\n\textend: function (obj) { // (LatLng) or (LatLngBounds)\n\t\tif (!obj) { return this; }\n\n\t\tvar latLng = L.latLng(obj);\n\t\tif (latLng !== null) {\n\t\t\tobj = latLng;\n\t\t} else {\n\t\t\tobj = L.latLngBounds(obj);\n\t\t}\n\n\t\tif (obj instanceof L.LatLng) {\n\t\t\tif (!this._southWest && !this._northEast) {\n\t\t\t\tthis._southWest = new L.LatLng(obj.lat, obj.lng);\n\t\t\t\tthis._northEast = new L.LatLng(obj.lat, obj.lng);\n\t\t\t} else {\n\t\t\t\tthis._southWest.lat = Math.min(obj.lat, this._southWest.lat);\n\t\t\t\tthis._southWest.lng = Math.min(obj.lng, this._southWest.lng);\n\n\t\t\t\tthis._northEast.lat = Math.max(obj.lat, this._northEast.lat);\n\t\t\t\tthis._northEast.lng = Math.max(obj.lng, this._northEast.lng);\n\t\t\t}\n\t\t} else if (obj instanceof L.LatLngBounds) {\n\t\t\tthis.extend(obj._southWest);\n\t\t\tthis.extend(obj._northEast);\n\t\t}\n\t\treturn this;\n\t},\n\n\t// extend the bounds by a percentage\n\tpad: function (bufferRatio) { // (Number) -> LatLngBounds\n\t\tvar sw = this._southWest,\n\t\t    ne = this._northEast,\n\t\t    heightBuffer = Math.abs(sw.lat - ne.lat) * bufferRatio,\n\t\t    widthBuffer = Math.abs(sw.lng - ne.lng) * bufferRatio;\n\n\t\treturn new L.LatLngBounds(\n\t\t        new L.LatLng(sw.lat - heightBuffer, sw.lng - widthBuffer),\n\t\t        new L.LatLng(ne.lat + heightBuffer, ne.lng + widthBuffer));\n\t},\n\n\tgetCenter: function () { // -> LatLng\n\t\treturn new L.LatLng(\n\t\t        (this._southWest.lat + this._northEast.lat) / 2,\n\t\t        (this._southWest.lng + this._northEast.lng) / 2);\n\t},\n\n\tgetSouthWest: function () {\n\t\treturn this._southWest;\n\t},\n\n\tgetNorthEast: function () {\n\t\treturn this._northEast;\n\t},\n\n\tgetNorthWest: function () {\n\t\treturn new L.LatLng(this.getNorth(), this.getWest());\n\t},\n\n\tgetSouthEast: function () {\n\t\treturn new L.LatLng(this.getSouth(), this.getEast());\n\t},\n\n\tgetWest: function () {\n\t\treturn this._southWest.lng;\n\t},\n\n\tgetSouth: function () {\n\t\treturn this._southWest.lat;\n\t},\n\n\tgetEast: function () {\n\t\treturn this._northEast.lng;\n\t},\n\n\tgetNorth: function () {\n\t\treturn this._northEast.lat;\n\t},\n\n\tcontains: function (obj) { // (LatLngBounds) or (LatLng) -> Boolean\n\t\tif (typeof obj[0] === 'number' || obj instanceof L.LatLng) {\n\t\t\tobj = L.latLng(obj);\n\t\t} else {\n\t\t\tobj = L.latLngBounds(obj);\n\t\t}\n\n\t\tvar sw = this._southWest,\n\t\t    ne = this._northEast,\n\t\t    sw2, ne2;\n\n\t\tif (obj instanceof L.LatLngBounds) {\n\t\t\tsw2 = obj.getSouthWest();\n\t\t\tne2 = obj.getNorthEast();\n\t\t} else {\n\t\t\tsw2 = ne2 = obj;\n\t\t}\n\n\t\treturn (sw2.lat >= sw.lat) && (ne2.lat <= ne.lat) &&\n\t\t       (sw2.lng >= sw.lng) && (ne2.lng <= ne.lng);\n\t},\n\n\tintersects: function (bounds) { // (LatLngBounds)\n\t\tbounds = L.latLngBounds(bounds);\n\n\t\tvar sw = this._southWest,\n\t\t    ne = this._northEast,\n\t\t    sw2 = bounds.getSouthWest(),\n\t\t    ne2 = bounds.getNorthEast(),\n\n\t\t    latIntersects = (ne2.lat >= sw.lat) && (sw2.lat <= ne.lat),\n\t\t    lngIntersects = (ne2.lng >= sw.lng) && (sw2.lng <= ne.lng);\n\n\t\treturn latIntersects && lngIntersects;\n\t},\n\n\ttoBBoxString: function () {\n\t\treturn [this.getWest(), this.getSouth(), this.getEast(), this.getNorth()].join(',');\n\t},\n\n\tequals: function (bounds) { // (LatLngBounds)\n\t\tif (!bounds) { return false; }\n\n\t\tbounds = L.latLngBounds(bounds);\n\n\t\treturn this._southWest.equals(bounds.getSouthWest()) &&\n\t\t       this._northEast.equals(bounds.getNorthEast());\n\t},\n\n\tisValid: function () {\n\t\treturn !!(this._southWest && this._northEast);\n\t}\n};\n\n//TODO International date line?\n\nL.latLngBounds = function (a, b) { // (LatLngBounds) or (LatLng, LatLng)\n\tif (!a || a instanceof L.LatLngBounds) {\n\t\treturn a;\n\t}\n\treturn new L.LatLngBounds(a, b);\n};\n\n\n/*\n * L.Projection contains various geographical projections used by CRS classes.\n */\n\nL.Projection = {};\n\n\n/*\n * Spherical Mercator is the most popular map projection, used by EPSG:3857 CRS used by default.\n */\n\nL.Projection.SphericalMercator = {\n\tMAX_LATITUDE: 85.0511287798,\n\n\tproject: function (latlng) { // (LatLng) -> Point\n\t\tvar d = L.LatLng.DEG_TO_RAD,\n\t\t    max = this.MAX_LATITUDE,\n\t\t    lat = Math.max(Math.min(max, latlng.lat), -max),\n\t\t    x = latlng.lng * d,\n\t\t    y = lat * d;\n\n\t\ty = Math.log(Math.tan((Math.PI / 4) + (y / 2)));\n\n\t\treturn new L.Point(x, y);\n\t},\n\n\tunproject: function (point) { // (Point, Boolean) -> LatLng\n\t\tvar d = L.LatLng.RAD_TO_DEG,\n\t\t    lng = point.x * d,\n\t\t    lat = (2 * Math.atan(Math.exp(point.y)) - (Math.PI / 2)) * d;\n\n\t\treturn new L.LatLng(lat, lng);\n\t}\n};\n\n\n/*\n * Simple equirectangular (Plate Carree) projection, used by CRS like EPSG:4326 and Simple.\n */\n\nL.Projection.LonLat = {\n\tproject: function (latlng) {\n\t\treturn new L.Point(latlng.lng, latlng.lat);\n\t},\n\n\tunproject: function (point) {\n\t\treturn new L.LatLng(point.y, point.x);\n\t}\n};\n\n\n/*\n * L.CRS is a base object for all defined CRS (Coordinate Reference Systems) in Leaflet.\n */\n\nL.CRS = {\n\tlatLngToPoint: function (latlng, zoom) { // (LatLng, Number) -> Point\n\t\tvar projectedPoint = this.projection.project(latlng),\n\t\t    scale = this.scale(zoom);\n\n\t\treturn this.transformation._transform(projectedPoint, scale);\n\t},\n\n\tpointToLatLng: function (point, zoom) { // (Point, Number[, Boolean]) -> LatLng\n\t\tvar scale = this.scale(zoom),\n\t\t    untransformedPoint = this.transformation.untransform(point, scale);\n\n\t\treturn this.projection.unproject(untransformedPoint);\n\t},\n\n\tproject: function (latlng) {\n\t\treturn this.projection.project(latlng);\n\t},\n\n\tscale: function (zoom) {\n\t\treturn 256 * Math.pow(2, zoom);\n\t},\n\n\tgetSize: function (zoom) {\n\t\tvar s = this.scale(zoom);\n\t\treturn L.point(s, s);\n\t}\n};\n\n\n/*\n * A simple CRS that can be used for flat non-Earth maps like panoramas or game maps.\n */\n\nL.CRS.Simple = L.extend({}, L.CRS, {\n\tprojection: L.Projection.LonLat,\n\ttransformation: new L.Transformation(1, 0, -1, 0),\n\n\tscale: function (zoom) {\n\t\treturn Math.pow(2, zoom);\n\t}\n});\n\n\n/*\n * L.CRS.EPSG3857 (Spherical Mercator) is the most common CRS for web mapping\n * and is used by Leaflet by default.\n */\n\nL.CRS.EPSG3857 = L.extend({}, L.CRS, {\n\tcode: 'EPSG:3857',\n\n\tprojection: L.Projection.SphericalMercator,\n\ttransformation: new L.Transformation(0.5 / Math.PI, 0.5, -0.5 / Math.PI, 0.5),\n\n\tproject: function (latlng) { // (LatLng) -> Point\n\t\tvar projectedPoint = this.projection.project(latlng),\n\t\t    earthRadius = 6378137;\n\t\treturn projectedPoint.multiplyBy(earthRadius);\n\t}\n});\n\nL.CRS.EPSG900913 = L.extend({}, L.CRS.EPSG3857, {\n\tcode: 'EPSG:900913'\n});\n\n\n/*\n * L.CRS.EPSG4326 is a CRS popular among advanced GIS specialists.\n */\n\nL.CRS.EPSG4326 = L.extend({}, L.CRS, {\n\tcode: 'EPSG:4326',\n\n\tprojection: L.Projection.LonLat,\n\ttransformation: new L.Transformation(1 / 360, 0.5, -1 / 360, 0.5)\n});\n\n\n/*\n * L.Map is the central class of the API - it is used to create a map.\n */\n\nL.Map = L.Class.extend({\n\n\tincludes: L.Mixin.Events,\n\n\toptions: {\n\t\tcrs: L.CRS.EPSG3857,\n\n\t\t/*\n\t\tcenter: LatLng,\n\t\tzoom: Number,\n\t\tlayers: Array,\n\t\t*/\n\n\t\tfadeAnimation: L.DomUtil.TRANSITION && !L.Browser.android23,\n\t\ttrackResize: true,\n\t\tmarkerZoomAnimation: L.DomUtil.TRANSITION && L.Browser.any3d\n\t},\n\n\tinitialize: function (id, options) { // (HTMLElement or String, Object)\n\t\toptions = L.setOptions(this, options);\n\n\n\t\tthis._initContainer(id);\n\t\tthis._initLayout();\n\n\t\t// hack for https://github.com/Leaflet/Leaflet/issues/1980\n\t\tthis._onResize = L.bind(this._onResize, this);\n\n\t\tthis._initEvents();\n\n\t\tif (options.maxBounds) {\n\t\t\tthis.setMaxBounds(options.maxBounds);\n\t\t}\n\n\t\tif (options.center && options.zoom !== undefined) {\n\t\t\tthis.setView(L.latLng(options.center), options.zoom, {reset: true});\n\t\t}\n\n\t\tthis._handlers = [];\n\n\t\tthis._layers = {};\n\t\tthis._zoomBoundLayers = {};\n\t\tthis._tileLayersNum = 0;\n\n\t\tthis.callInitHooks();\n\n\t\tthis._addLayers(options.layers);\n\t},\n\n\n\t// public methods that modify map state\n\n\t// replaced by animation-powered implementation in Map.PanAnimation.js\n\tsetView: function (center, zoom) {\n\t\tzoom = zoom === undefined ? this.getZoom() : zoom;\n\t\tthis._resetView(L.latLng(center), this._limitZoom(zoom));\n\t\treturn this;\n\t},\n\n\tsetZoom: function (zoom, options) {\n\t\tif (!this._loaded) {\n\t\t\tthis._zoom = this._limitZoom(zoom);\n\t\t\treturn this;\n\t\t}\n\t\treturn this.setView(this.getCenter(), zoom, {zoom: options});\n\t},\n\n\tzoomIn: function (delta, options) {\n\t\treturn this.setZoom(this._zoom + (delta || 1), options);\n\t},\n\n\tzoomOut: function (delta, options) {\n\t\treturn this.setZoom(this._zoom - (delta || 1), options);\n\t},\n\n\tsetZoomAround: function (latlng, zoom, options) {\n\t\tvar scale = this.getZoomScale(zoom),\n\t\t    viewHalf = this.getSize().divideBy(2),\n\t\t    containerPoint = latlng instanceof L.Point ? latlng : this.latLngToContainerPoint(latlng),\n\n\t\t    centerOffset = containerPoint.subtract(viewHalf).multiplyBy(1 - 1 / scale),\n\t\t    newCenter = this.containerPointToLatLng(viewHalf.add(centerOffset));\n\n\t\treturn this.setView(newCenter, zoom, {zoom: options});\n\t},\n\n\tfitBounds: function (bounds, options) {\n\n\t\toptions = options || {};\n\t\tbounds = bounds.getBounds ? bounds.getBounds() : L.latLngBounds(bounds);\n\n\t\tvar paddingTL = L.point(options.paddingTopLeft || options.padding || [0, 0]),\n\t\t    paddingBR = L.point(options.paddingBottomRight || options.padding || [0, 0]),\n\n\t\t    zoom = this.getBoundsZoom(bounds, false, paddingTL.add(paddingBR));\n\n\t\tzoom = (options.maxZoom) ? Math.min(options.maxZoom, zoom) : zoom;\n\n\t\tvar paddingOffset = paddingBR.subtract(paddingTL).divideBy(2),\n\n\t\t    swPoint = this.project(bounds.getSouthWest(), zoom),\n\t\t    nePoint = this.project(bounds.getNorthEast(), zoom),\n\t\t    center = this.unproject(swPoint.add(nePoint).divideBy(2).add(paddingOffset), zoom);\n\n\t\treturn this.setView(center, zoom, options);\n\t},\n\n\tfitWorld: function (options) {\n\t\treturn this.fitBounds([[-90, -180], [90, 180]], options);\n\t},\n\n\tpanTo: function (center, options) { // (LatLng)\n\t\treturn this.setView(center, this._zoom, {pan: options});\n\t},\n\n\tpanBy: function (offset) { // (Point)\n\t\t// replaced with animated panBy in Map.PanAnimation.js\n\t\tthis.fire('movestart');\n\n\t\tthis._rawPanBy(L.point(offset));\n\n\t\tthis.fire('move');\n\t\treturn this.fire('moveend');\n\t},\n\n\tsetMaxBounds: function (bounds) {\n\t\tbounds = L.latLngBounds(bounds);\n\n\t\tthis.options.maxBounds = bounds;\n\n\t\tif (!bounds) {\n\t\t\treturn this.off('moveend', this._panInsideMaxBounds, this);\n\t\t}\n\n\t\tif (this._loaded) {\n\t\t\tthis._panInsideMaxBounds();\n\t\t}\n\n\t\treturn this.on('moveend', this._panInsideMaxBounds, this);\n\t},\n\n\tpanInsideBounds: function (bounds, options) {\n\t\tvar center = this.getCenter(),\n\t\t\tnewCenter = this._limitCenter(center, this._zoom, bounds);\n\n\t\tif (center.equals(newCenter)) { return this; }\n\n\t\treturn this.panTo(newCenter, options);\n\t},\n\n\taddLayer: function (layer) {\n\t\t// TODO method is too big, refactor\n\n\t\tvar id = L.stamp(layer);\n\n\t\tif (this._layers[id]) { return this; }\n\n\t\tthis._layers[id] = layer;\n\n\t\t// TODO getMaxZoom, getMinZoom in ILayer (instead of options)\n\t\tif (layer.options && (!isNaN(layer.options.maxZoom) || !isNaN(layer.options.minZoom))) {\n\t\t\tthis._zoomBoundLayers[id] = layer;\n\t\t\tthis._updateZoomLevels();\n\t\t}\n\n\t\t// TODO looks ugly, refactor!!!\n\t\tif (this.options.zoomAnimation && L.TileLayer && (layer instanceof L.TileLayer)) {\n\t\t\tthis._tileLayersNum++;\n\t\t\tthis._tileLayersToLoad++;\n\t\t\tlayer.on('load', this._onTileLayerLoad, this);\n\t\t}\n\n\t\tif (this._loaded) {\n\t\t\tthis._layerAdd(layer);\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tremoveLayer: function (layer) {\n\t\tvar id = L.stamp(layer);\n\n\t\tif (!this._layers[id]) { return this; }\n\n\t\tif (this._loaded) {\n\t\t\tlayer.onRemove(this);\n\t\t}\n\n\t\tdelete this._layers[id];\n\n\t\tif (this._loaded) {\n\t\t\tthis.fire('layerremove', {layer: layer});\n\t\t}\n\n\t\tif (this._zoomBoundLayers[id]) {\n\t\t\tdelete this._zoomBoundLayers[id];\n\t\t\tthis._updateZoomLevels();\n\t\t}\n\n\t\t// TODO looks ugly, refactor\n\t\tif (this.options.zoomAnimation && L.TileLayer && (layer instanceof L.TileLayer)) {\n\t\t\tthis._tileLayersNum--;\n\t\t\tthis._tileLayersToLoad--;\n\t\t\tlayer.off('load', this._onTileLayerLoad, this);\n\t\t}\n\n\t\treturn this;\n\t},\n\n\thasLayer: function (layer) {\n\t\tif (!layer) { return false; }\n\n\t\treturn (L.stamp(layer) in this._layers);\n\t},\n\n\teachLayer: function (method, context) {\n\t\tfor (var i in this._layers) {\n\t\t\tmethod.call(context, this._layers[i]);\n\t\t}\n\t\treturn this;\n\t},\n\n\tinvalidateSize: function (options) {\n\t\tif (!this._loaded) { return this; }\n\n\t\toptions = L.extend({\n\t\t\tanimate: false,\n\t\t\tpan: true\n\t\t}, options === true ? {animate: true} : options);\n\n\t\tvar oldSize = this.getSize();\n\t\tthis._sizeChanged = true;\n\t\tthis._initialCenter = null;\n\n\t\tvar newSize = this.getSize(),\n\t\t    oldCenter = oldSize.divideBy(2).round(),\n\t\t    newCenter = newSize.divideBy(2).round(),\n\t\t    offset = oldCenter.subtract(newCenter);\n\n\t\tif (!offset.x && !offset.y) { return this; }\n\n\t\tif (options.animate && options.pan) {\n\t\t\tthis.panBy(offset);\n\n\t\t} else {\n\t\t\tif (options.pan) {\n\t\t\t\tthis._rawPanBy(offset);\n\t\t\t}\n\n\t\t\tthis.fire('move');\n\n\t\t\tif (options.debounceMoveend) {\n\t\t\t\tclearTimeout(this._sizeTimer);\n\t\t\t\tthis._sizeTimer = setTimeout(L.bind(this.fire, this, 'moveend'), 200);\n\t\t\t} else {\n\t\t\t\tthis.fire('moveend');\n\t\t\t}\n\t\t}\n\n\t\treturn this.fire('resize', {\n\t\t\toldSize: oldSize,\n\t\t\tnewSize: newSize\n\t\t});\n\t},\n\n\t// TODO handler.addTo\n\taddHandler: function (name, HandlerClass) {\n\t\tif (!HandlerClass) { return this; }\n\n\t\tvar handler = this[name] = new HandlerClass(this);\n\n\t\tthis._handlers.push(handler);\n\n\t\tif (this.options[name]) {\n\t\t\thandler.enable();\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tremove: function () {\n\t\tif (this._loaded) {\n\t\t\tthis.fire('unload');\n\t\t}\n\n\t\tthis._initEvents('off');\n\n\t\ttry {\n\t\t\t// throws error in IE6-8\n\t\t\tdelete this._container._leaflet;\n\t\t} catch (e) {\n\t\t\tthis._container._leaflet = undefined;\n\t\t}\n\n\t\tthis._clearPanes();\n\t\tif (this._clearControlPos) {\n\t\t\tthis._clearControlPos();\n\t\t}\n\n\t\tthis._clearHandlers();\n\n\t\treturn this;\n\t},\n\n\n\t// public methods for getting map state\n\n\tgetCenter: function () { // (Boolean) -> LatLng\n\t\tthis._checkIfLoaded();\n\n\t\tif (this._initialCenter && !this._moved()) {\n\t\t\treturn this._initialCenter;\n\t\t}\n\t\treturn this.layerPointToLatLng(this._getCenterLayerPoint());\n\t},\n\n\tgetZoom: function () {\n\t\treturn this._zoom;\n\t},\n\n\tgetBounds: function () {\n\t\tvar bounds = this.getPixelBounds(),\n\t\t    sw = this.unproject(bounds.getBottomLeft()),\n\t\t    ne = this.unproject(bounds.getTopRight());\n\n\t\treturn new L.LatLngBounds(sw, ne);\n\t},\n\n\tgetMinZoom: function () {\n\t\treturn this.options.minZoom === undefined ?\n\t\t\t(this._layersMinZoom === undefined ? 0 : this._layersMinZoom) :\n\t\t\tthis.options.minZoom;\n\t},\n\n\tgetMaxZoom: function () {\n\t\treturn this.options.maxZoom === undefined ?\n\t\t\t(this._layersMaxZoom === undefined ? Infinity : this._layersMaxZoom) :\n\t\t\tthis.options.maxZoom;\n\t},\n\n\tgetBoundsZoom: function (bounds, inside, padding) { // (LatLngBounds[, Boolean, Point]) -> Number\n\t\tbounds = L.latLngBounds(bounds);\n\n\t\tvar zoom = this.getMinZoom() - (inside ? 1 : 0),\n\t\t    maxZoom = this.getMaxZoom(),\n\t\t    size = this.getSize(),\n\n\t\t    nw = bounds.getNorthWest(),\n\t\t    se = bounds.getSouthEast(),\n\n\t\t    zoomNotFound = true,\n\t\t    boundsSize;\n\n\t\tpadding = L.point(padding || [0, 0]);\n\n\t\tdo {\n\t\t\tzoom++;\n\t\t\tboundsSize = this.project(se, zoom).subtract(this.project(nw, zoom)).add(padding);\n\t\t\tzoomNotFound = !inside ? size.contains(boundsSize) : boundsSize.x < size.x || boundsSize.y < size.y;\n\n\t\t} while (zoomNotFound && zoom <= maxZoom);\n\n\t\tif (zoomNotFound && inside) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn inside ? zoom : zoom - 1;\n\t},\n\n\tgetSize: function () {\n\t\tif (!this._size || this._sizeChanged) {\n\t\t\tthis._size = new L.Point(\n\t\t\t\tthis._container.clientWidth,\n\t\t\t\tthis._container.clientHeight);\n\n\t\t\tthis._sizeChanged = false;\n\t\t}\n\t\treturn this._size.clone();\n\t},\n\n\tgetPixelBounds: function () {\n\t\tvar topLeftPoint = this._getTopLeftPoint();\n\t\treturn new L.Bounds(topLeftPoint, topLeftPoint.add(this.getSize()));\n\t},\n\n\tgetPixelOrigin: function () {\n\t\tthis._checkIfLoaded();\n\t\treturn this._initialTopLeftPoint;\n\t},\n\n\tgetPanes: function () {\n\t\treturn this._panes;\n\t},\n\n\tgetContainer: function () {\n\t\treturn this._container;\n\t},\n\n\n\t// TODO replace with universal implementation after refactoring projections\n\n\tgetZoomScale: function (toZoom) {\n\t\tvar crs = this.options.crs;\n\t\treturn crs.scale(toZoom) / crs.scale(this._zoom);\n\t},\n\n\tgetScaleZoom: function (scale) {\n\t\treturn this._zoom + (Math.log(scale) / Math.LN2);\n\t},\n\n\n\t// conversion methods\n\n\tproject: function (latlng, zoom) { // (LatLng[, Number]) -> Point\n\t\tzoom = zoom === undefined ? this._zoom : zoom;\n\t\treturn this.options.crs.latLngToPoint(L.latLng(latlng), zoom);\n\t},\n\n\tunproject: function (point, zoom) { // (Point[, Number]) -> LatLng\n\t\tzoom = zoom === undefined ? this._zoom : zoom;\n\t\treturn this.options.crs.pointToLatLng(L.point(point), zoom);\n\t},\n\n\tlayerPointToLatLng: function (point) { // (Point)\n\t\tvar projectedPoint = L.point(point).add(this.getPixelOrigin());\n\t\treturn this.unproject(projectedPoint);\n\t},\n\n\tlatLngToLayerPoint: function (latlng) { // (LatLng)\n\t\tvar projectedPoint = this.project(L.latLng(latlng))._round();\n\t\treturn projectedPoint._subtract(this.getPixelOrigin());\n\t},\n\n\tcontainerPointToLayerPoint: function (point) { // (Point)\n\t\treturn L.point(point).subtract(this._getMapPanePos());\n\t},\n\n\tlayerPointToContainerPoint: function (point) { // (Point)\n\t\treturn L.point(point).add(this._getMapPanePos());\n\t},\n\n\tcontainerPointToLatLng: function (point) {\n\t\tvar layerPoint = this.containerPointToLayerPoint(L.point(point));\n\t\treturn this.layerPointToLatLng(layerPoint);\n\t},\n\n\tlatLngToContainerPoint: function (latlng) {\n\t\treturn this.layerPointToContainerPoint(this.latLngToLayerPoint(L.latLng(latlng)));\n\t},\n\n\tmouseEventToContainerPoint: function (e) { // (MouseEvent)\n\t\treturn L.DomEvent.getMousePosition(e, this._container);\n\t},\n\n\tmouseEventToLayerPoint: function (e) { // (MouseEvent)\n\t\treturn this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e));\n\t},\n\n\tmouseEventToLatLng: function (e) { // (MouseEvent)\n\t\treturn this.layerPointToLatLng(this.mouseEventToLayerPoint(e));\n\t},\n\n\n\t// map initialization methods\n\n\t_initContainer: function (id) {\n\t\tvar container = this._container = L.DomUtil.get(id);\n\n\t\tif (!container) {\n\t\t\tthrow new Error('Map container not found.');\n\t\t} else if (container._leaflet) {\n\t\t\tthrow new Error('Map container is already initialized.');\n\t\t}\n\n\t\tcontainer._leaflet = true;\n\t},\n\n\t_initLayout: function () {\n\t\tvar container = this._container;\n\n\t\tL.DomUtil.addClass(container, 'leaflet-container' +\n\t\t\t(L.Browser.touch ? ' leaflet-touch' : '') +\n\t\t\t(L.Browser.retina ? ' leaflet-retina' : '') +\n\t\t\t(L.Browser.ielt9 ? ' leaflet-oldie' : '') +\n\t\t\t(this.options.fadeAnimation ? ' leaflet-fade-anim' : ''));\n\n\t\tvar position = L.DomUtil.getStyle(container, 'position');\n\n\t\tif (position !== 'absolute' && position !== 'relative' && position !== 'fixed') {\n\t\t\tcontainer.style.position = 'relative';\n\t\t}\n\n\t\tthis._initPanes();\n\n\t\tif (this._initControlPos) {\n\t\t\tthis._initControlPos();\n\t\t}\n\t},\n\n\t_initPanes: function () {\n\t\tvar panes = this._panes = {};\n\n\t\tthis._mapPane = panes.mapPane = this._createPane('leaflet-map-pane', this._container);\n\n\t\tthis._tilePane = panes.tilePane = this._createPane('leaflet-tile-pane', this._mapPane);\n\t\tpanes.objectsPane = this._createPane('leaflet-objects-pane', this._mapPane);\n\t\tpanes.shadowPane = this._createPane('leaflet-shadow-pane');\n\t\tpanes.overlayPane = this._createPane('leaflet-overlay-pane');\n\t\tpanes.markerPane = this._createPane('leaflet-marker-pane');\n\t\tpanes.popupPane = this._createPane('leaflet-popup-pane');\n\n\t\tvar zoomHide = ' leaflet-zoom-hide';\n\n\t\tif (!this.options.markerZoomAnimation) {\n\t\t\tL.DomUtil.addClass(panes.markerPane, zoomHide);\n\t\t\tL.DomUtil.addClass(panes.shadowPane, zoomHide);\n\t\t\tL.DomUtil.addClass(panes.popupPane, zoomHide);\n\t\t}\n\t},\n\n\t_createPane: function (className, container) {\n\t\treturn L.DomUtil.create('div', className, container || this._panes.objectsPane);\n\t},\n\n\t_clearPanes: function () {\n\t\tthis._container.removeChild(this._mapPane);\n\t},\n\n\t_addLayers: function (layers) {\n\t\tlayers = layers ? (L.Util.isArray(layers) ? layers : [layers]) : [];\n\n\t\tfor (var i = 0, len = layers.length; i < len; i++) {\n\t\t\tthis.addLayer(layers[i]);\n\t\t}\n\t},\n\n\n\t// private methods that modify map state\n\n\t_resetView: function (center, zoom, preserveMapOffset, afterZoomAnim) {\n\n\t\tvar zoomChanged = (this._zoom !== zoom);\n\n\t\tif (!afterZoomAnim) {\n\t\t\tthis.fire('movestart');\n\n\t\t\tif (zoomChanged) {\n\t\t\t\tthis.fire('zoomstart');\n\t\t\t}\n\t\t}\n\n\t\tthis._zoom = zoom;\n\t\tthis._initialCenter = center;\n\n\t\tthis._initialTopLeftPoint = this._getNewTopLeftPoint(center);\n\n\t\tif (!preserveMapOffset) {\n\t\t\tL.DomUtil.setPosition(this._mapPane, new L.Point(0, 0));\n\t\t} else {\n\t\t\tthis._initialTopLeftPoint._add(this._getMapPanePos());\n\t\t}\n\n\t\tthis._tileLayersToLoad = this._tileLayersNum;\n\n\t\tvar loading = !this._loaded;\n\t\tthis._loaded = true;\n\n\t\tthis.fire('viewreset', {hard: !preserveMapOffset});\n\n\t\tif (loading) {\n\t\t\tthis.fire('load');\n\t\t\tthis.eachLayer(this._layerAdd, this);\n\t\t}\n\n\t\tthis.fire('move');\n\n\t\tif (zoomChanged || afterZoomAnim) {\n\t\t\tthis.fire('zoomend');\n\t\t}\n\n\t\tthis.fire('moveend', {hard: !preserveMapOffset});\n\t},\n\n\t_rawPanBy: function (offset) {\n\t\tL.DomUtil.setPosition(this._mapPane, this._getMapPanePos().subtract(offset));\n\t},\n\n\t_getZoomSpan: function () {\n\t\treturn this.getMaxZoom() - this.getMinZoom();\n\t},\n\n\t_updateZoomLevels: function () {\n\t\tvar i,\n\t\t\tminZoom = Infinity,\n\t\t\tmaxZoom = -Infinity,\n\t\t\toldZoomSpan = this._getZoomSpan();\n\n\t\tfor (i in this._zoomBoundLayers) {\n\t\t\tvar layer = this._zoomBoundLayers[i];\n\t\t\tif (!isNaN(layer.options.minZoom)) {\n\t\t\t\tminZoom = Math.min(minZoom, layer.options.minZoom);\n\t\t\t}\n\t\t\tif (!isNaN(layer.options.maxZoom)) {\n\t\t\t\tmaxZoom = Math.max(maxZoom, layer.options.maxZoom);\n\t\t\t}\n\t\t}\n\n\t\tif (i === undefined) { // we have no tilelayers\n\t\t\tthis._layersMaxZoom = this._layersMinZoom = undefined;\n\t\t} else {\n\t\t\tthis._layersMaxZoom = maxZoom;\n\t\t\tthis._layersMinZoom = minZoom;\n\t\t}\n\n\t\tif (oldZoomSpan !== this._getZoomSpan()) {\n\t\t\tthis.fire('zoomlevelschange');\n\t\t}\n\t},\n\n\t_panInsideMaxBounds: function () {\n\t\tthis.panInsideBounds(this.options.maxBounds);\n\t},\n\n\t_checkIfLoaded: function () {\n\t\tif (!this._loaded) {\n\t\t\tthrow new Error('Set map center and zoom first.');\n\t\t}\n\t},\n\n\t// map events\n\n\t_initEvents: function (onOff) {\n\t\tif (!L.DomEvent) { return; }\n\n\t\tonOff = onOff || 'on';\n\n\t\tL.DomEvent[onOff](this._container, 'click', this._onMouseClick, this);\n\n\t\tvar events = ['dblclick', 'mousedown', 'mouseup', 'mouseenter',\n\t\t              'mouseleave', 'mousemove', 'contextmenu'],\n\t\t    i, len;\n\n\t\tfor (i = 0, len = events.length; i < len; i++) {\n\t\t\tL.DomEvent[onOff](this._container, events[i], this._fireMouseEvent, this);\n\t\t}\n\n\t\tif (this.options.trackResize) {\n\t\t\tL.DomEvent[onOff](window, 'resize', this._onResize, this);\n\t\t}\n\t},\n\n\t_onResize: function () {\n\t\tL.Util.cancelAnimFrame(this._resizeRequest);\n\t\tthis._resizeRequest = L.Util.requestAnimFrame(\n\t\t        function () { this.invalidateSize({debounceMoveend: true}); }, this, false, this._container);\n\t},\n\n\t_onMouseClick: function (e) {\n\t\tif (!this._loaded || (!e._simulated &&\n\t\t        ((this.dragging && this.dragging.moved()) ||\n\t\t         (this.boxZoom  && this.boxZoom.moved()))) ||\n\t\t            L.DomEvent._skipped(e)) { return; }\n\n\t\tthis.fire('preclick');\n\t\tthis._fireMouseEvent(e);\n\t},\n\n\t_fireMouseEvent: function (e) {\n\t\tif (!this._loaded || L.DomEvent._skipped(e)) { return; }\n\n\t\tvar type = e.type;\n\n\t\ttype = (type === 'mouseenter' ? 'mouseover' : (type === 'mouseleave' ? 'mouseout' : type));\n\n\t\tif (!this.hasEventListeners(type)) { return; }\n\n\t\tif (type === 'contextmenu') {\n\t\t\tL.DomEvent.preventDefault(e);\n\t\t}\n\n\t\tvar containerPoint = this.mouseEventToContainerPoint(e),\n\t\t    layerPoint = this.containerPointToLayerPoint(containerPoint),\n\t\t    latlng = this.layerPointToLatLng(layerPoint);\n\n\t\tthis.fire(type, {\n\t\t\tlatlng: latlng,\n\t\t\tlayerPoint: layerPoint,\n\t\t\tcontainerPoint: containerPoint,\n\t\t\toriginalEvent: e\n\t\t});\n\t},\n\n\t_onTileLayerLoad: function () {\n\t\tthis._tileLayersToLoad--;\n\t\tif (this._tileLayersNum && !this._tileLayersToLoad) {\n\t\t\tthis.fire('tilelayersload');\n\t\t}\n\t},\n\n\t_clearHandlers: function () {\n\t\tfor (var i = 0, len = this._handlers.length; i < len; i++) {\n\t\t\tthis._handlers[i].disable();\n\t\t}\n\t},\n\n\twhenReady: function (callback, context) {\n\t\tif (this._loaded) {\n\t\t\tcallback.call(context || this, this);\n\t\t} else {\n\t\t\tthis.on('load', callback, context);\n\t\t}\n\t\treturn this;\n\t},\n\n\t_layerAdd: function (layer) {\n\t\tlayer.onAdd(this);\n\t\tthis.fire('layeradd', {layer: layer});\n\t},\n\n\n\t// private methods for getting map state\n\n\t_getMapPanePos: function () {\n\t\treturn L.DomUtil.getPosition(this._mapPane);\n\t},\n\n\t_moved: function () {\n\t\tvar pos = this._getMapPanePos();\n\t\treturn pos && !pos.equals([0, 0]);\n\t},\n\n\t_getTopLeftPoint: function () {\n\t\treturn this.getPixelOrigin().subtract(this._getMapPanePos());\n\t},\n\n\t_getNewTopLeftPoint: function (center, zoom) {\n\t\tvar viewHalf = this.getSize()._divideBy(2);\n\t\t// TODO round on display, not calculation to increase precision?\n\t\treturn this.project(center, zoom)._subtract(viewHalf)._round();\n\t},\n\n\t_latLngToNewLayerPoint: function (latlng, newZoom, newCenter) {\n\t\tvar topLeft = this._getNewTopLeftPoint(newCenter, newZoom).add(this._getMapPanePos());\n\t\treturn this.project(latlng, newZoom)._subtract(topLeft);\n\t},\n\n\t// layer point of the current center\n\t_getCenterLayerPoint: function () {\n\t\treturn this.containerPointToLayerPoint(this.getSize()._divideBy(2));\n\t},\n\n\t// offset of the specified place to the current center in pixels\n\t_getCenterOffset: function (latlng) {\n\t\treturn this.latLngToLayerPoint(latlng).subtract(this._getCenterLayerPoint());\n\t},\n\n\t// adjust center for view to get inside bounds\n\t_limitCenter: function (center, zoom, bounds) {\n\n\t\tif (!bounds) { return center; }\n\n\t\tvar centerPoint = this.project(center, zoom),\n\t\t    viewHalf = this.getSize().divideBy(2),\n\t\t    viewBounds = new L.Bounds(centerPoint.subtract(viewHalf), centerPoint.add(viewHalf)),\n\t\t    offset = this._getBoundsOffset(viewBounds, bounds, zoom);\n\n\t\treturn this.unproject(centerPoint.add(offset), zoom);\n\t},\n\n\t// adjust offset for view to get inside bounds\n\t_limitOffset: function (offset, bounds) {\n\t\tif (!bounds) { return offset; }\n\n\t\tvar viewBounds = this.getPixelBounds(),\n\t\t    newBounds = new L.Bounds(viewBounds.min.add(offset), viewBounds.max.add(offset));\n\n\t\treturn offset.add(this._getBoundsOffset(newBounds, bounds));\n\t},\n\n\t// returns offset needed for pxBounds to get inside maxBounds at a specified zoom\n\t_getBoundsOffset: function (pxBounds, maxBounds, zoom) {\n\t\tvar nwOffset = this.project(maxBounds.getNorthWest(), zoom).subtract(pxBounds.min),\n\t\t    seOffset = this.project(maxBounds.getSouthEast(), zoom).subtract(pxBounds.max),\n\n\t\t    dx = this._rebound(nwOffset.x, -seOffset.x),\n\t\t    dy = this._rebound(nwOffset.y, -seOffset.y);\n\n\t\treturn new L.Point(dx, dy);\n\t},\n\n\t_rebound: function (left, right) {\n\t\treturn left + right > 0 ?\n\t\t\tMath.round(left - right) / 2 :\n\t\t\tMath.max(0, Math.ceil(left)) - Math.max(0, Math.floor(right));\n\t},\n\n\t_limitZoom: function (zoom) {\n\t\tvar min = this.getMinZoom(),\n\t\t    max = this.getMaxZoom();\n\n\t\treturn Math.max(min, Math.min(max, zoom));\n\t}\n});\n\nL.map = function (id, options) {\n\treturn new L.Map(id, options);\n};\n\n\n/*\n * Mercator projection that takes into account that the Earth is not a perfect sphere.\n * Less popular than spherical mercator; used by projections like EPSG:3395.\n */\n\nL.Projection.Mercator = {\n\tMAX_LATITUDE: 85.0840591556,\n\n\tR_MINOR: 6356752.314245179,\n\tR_MAJOR: 6378137,\n\n\tproject: function (latlng) { // (LatLng) -> Point\n\t\tvar d = L.LatLng.DEG_TO_RAD,\n\t\t    max = this.MAX_LATITUDE,\n\t\t    lat = Math.max(Math.min(max, latlng.lat), -max),\n\t\t    r = this.R_MAJOR,\n\t\t    r2 = this.R_MINOR,\n\t\t    x = latlng.lng * d * r,\n\t\t    y = lat * d,\n\t\t    tmp = r2 / r,\n\t\t    eccent = Math.sqrt(1.0 - tmp * tmp),\n\t\t    con = eccent * Math.sin(y);\n\n\t\tcon = Math.pow((1 - con) / (1 + con), eccent * 0.5);\n\n\t\tvar ts = Math.tan(0.5 * ((Math.PI * 0.5) - y)) / con;\n\t\ty = -r * Math.log(ts);\n\n\t\treturn new L.Point(x, y);\n\t},\n\n\tunproject: function (point) { // (Point, Boolean) -> LatLng\n\t\tvar d = L.LatLng.RAD_TO_DEG,\n\t\t    r = this.R_MAJOR,\n\t\t    r2 = this.R_MINOR,\n\t\t    lng = point.x * d / r,\n\t\t    tmp = r2 / r,\n\t\t    eccent = Math.sqrt(1 - (tmp * tmp)),\n\t\t    ts = Math.exp(- point.y / r),\n\t\t    phi = (Math.PI / 2) - 2 * Math.atan(ts),\n\t\t    numIter = 15,\n\t\t    tol = 1e-7,\n\t\t    i = numIter,\n\t\t    dphi = 0.1,\n\t\t    con;\n\n\t\twhile ((Math.abs(dphi) > tol) && (--i > 0)) {\n\t\t\tcon = eccent * Math.sin(phi);\n\t\t\tdphi = (Math.PI / 2) - 2 * Math.atan(ts *\n\t\t\t            Math.pow((1.0 - con) / (1.0 + con), 0.5 * eccent)) - phi;\n\t\t\tphi += dphi;\n\t\t}\n\n\t\treturn new L.LatLng(phi * d, lng);\n\t}\n};\n\n\n\nL.CRS.EPSG3395 = L.extend({}, L.CRS, {\n\tcode: 'EPSG:3395',\n\n\tprojection: L.Projection.Mercator,\n\n\ttransformation: (function () {\n\t\tvar m = L.Projection.Mercator,\n\t\t    r = m.R_MAJOR,\n\t\t    scale = 0.5 / (Math.PI * r);\n\n\t\treturn new L.Transformation(scale, 0.5, -scale, 0.5);\n\t}())\n});\n\n\n/*\n * L.TileLayer is used for standard xyz-numbered tile layers.\n */\n\nL.TileLayer = L.Class.extend({\n\tincludes: L.Mixin.Events,\n\n\toptions: {\n\t\tminZoom: 0,\n\t\tmaxZoom: 18,\n\t\ttileSize: 256,\n\t\tsubdomains: 'abc',\n\t\terrorTileUrl: '',\n\t\tattribution: '',\n\t\tzoomOffset: 0,\n\t\topacity: 1,\n\t\t/*\n\t\tmaxNativeZoom: null,\n\t\tzIndex: null,\n\t\ttms: false,\n\t\tcontinuousWorld: false,\n\t\tnoWrap: false,\n\t\tzoomReverse: false,\n\t\tdetectRetina: false,\n\t\treuseTiles: false,\n\t\tbounds: false,\n\t\t*/\n\t\tunloadInvisibleTiles: L.Browser.mobile,\n\t\tupdateWhenIdle: L.Browser.mobile\n\t},\n\n\tinitialize: function (url, options) {\n\t\toptions = L.setOptions(this, options);\n\n\t\t// detecting retina displays, adjusting tileSize and zoom levels\n\t\tif (options.detectRetina && L.Browser.retina && options.maxZoom > 0) {\n\n\t\t\toptions.tileSize = Math.floor(options.tileSize / 2);\n\t\t\toptions.zoomOffset++;\n\n\t\t\tif (options.minZoom > 0) {\n\t\t\t\toptions.minZoom--;\n\t\t\t}\n\t\t\tthis.options.maxZoom--;\n\t\t}\n\n\t\tif (options.bounds) {\n\t\t\toptions.bounds = L.latLngBounds(options.bounds);\n\t\t}\n\n\t\tthis._url = url;\n\n\t\tvar subdomains = this.options.subdomains;\n\n\t\tif (typeof subdomains === 'string') {\n\t\t\tthis.options.subdomains = subdomains.split('');\n\t\t}\n\t},\n\n\tonAdd: function (map) {\n\t\tthis._map = map;\n\t\tthis._animated = map._zoomAnimated;\n\n\t\t// create a container div for tiles\n\t\tthis._initContainer();\n\n\t\t// set up events\n\t\tmap.on({\n\t\t\t'viewreset': this._reset,\n\t\t\t'moveend': this._update\n\t\t}, this);\n\n\t\tif (this._animated) {\n\t\t\tmap.on({\n\t\t\t\t'zoomanim': this._animateZoom,\n\t\t\t\t'zoomend': this._endZoomAnim\n\t\t\t}, this);\n\t\t}\n\n\t\tif (!this.options.updateWhenIdle) {\n\t\t\tthis._limitedUpdate = L.Util.limitExecByInterval(this._update, 150, this);\n\t\t\tmap.on('move', this._limitedUpdate, this);\n\t\t}\n\n\t\tthis._reset();\n\t\tthis._update();\n\t},\n\n\taddTo: function (map) {\n\t\tmap.addLayer(this);\n\t\treturn this;\n\t},\n\n\tonRemove: function (map) {\n\t\tthis._container.parentNode.removeChild(this._container);\n\n\t\tmap.off({\n\t\t\t'viewreset': this._reset,\n\t\t\t'moveend': this._update\n\t\t}, this);\n\n\t\tif (this._animated) {\n\t\t\tmap.off({\n\t\t\t\t'zoomanim': this._animateZoom,\n\t\t\t\t'zoomend': this._endZoomAnim\n\t\t\t}, this);\n\t\t}\n\n\t\tif (!this.options.updateWhenIdle) {\n\t\t\tmap.off('move', this._limitedUpdate, this);\n\t\t}\n\n\t\tthis._container = null;\n\t\tthis._map = null;\n\t},\n\n\tbringToFront: function () {\n\t\tvar pane = this._map._panes.tilePane;\n\n\t\tif (this._container) {\n\t\t\tpane.appendChild(this._container);\n\t\t\tthis._setAutoZIndex(pane, Math.max);\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tbringToBack: function () {\n\t\tvar pane = this._map._panes.tilePane;\n\n\t\tif (this._container) {\n\t\t\tpane.insertBefore(this._container, pane.firstChild);\n\t\t\tthis._setAutoZIndex(pane, Math.min);\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tgetAttribution: function () {\n\t\treturn this.options.attribution;\n\t},\n\n\tgetContainer: function () {\n\t\treturn this._container;\n\t},\n\n\tsetOpacity: function (opacity) {\n\t\tthis.options.opacity = opacity;\n\n\t\tif (this._map) {\n\t\t\tthis._updateOpacity();\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tsetZIndex: function (zIndex) {\n\t\tthis.options.zIndex = zIndex;\n\t\tthis._updateZIndex();\n\n\t\treturn this;\n\t},\n\n\tsetUrl: function (url, noRedraw) {\n\t\tthis._url = url;\n\n\t\tif (!noRedraw) {\n\t\t\tthis.redraw();\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tredraw: function () {\n\t\tif (this._map) {\n\t\t\tthis._reset({hard: true});\n\t\t\tthis._update();\n\t\t}\n\t\treturn this;\n\t},\n\n\t_updateZIndex: function () {\n\t\tif (this._container && this.options.zIndex !== undefined) {\n\t\t\tthis._container.style.zIndex = this.options.zIndex;\n\t\t}\n\t},\n\n\t_setAutoZIndex: function (pane, compare) {\n\n\t\tvar layers = pane.children,\n\t\t    edgeZIndex = -compare(Infinity, -Infinity), // -Infinity for max, Infinity for min\n\t\t    zIndex, i, len;\n\n\t\tfor (i = 0, len = layers.length; i < len; i++) {\n\n\t\t\tif (layers[i] !== this._container) {\n\t\t\t\tzIndex = parseInt(layers[i].style.zIndex, 10);\n\n\t\t\t\tif (!isNaN(zIndex)) {\n\t\t\t\t\tedgeZIndex = compare(edgeZIndex, zIndex);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.options.zIndex = this._container.style.zIndex =\n\t\t        (isFinite(edgeZIndex) ? edgeZIndex : 0) + compare(1, -1);\n\t},\n\n\t_updateOpacity: function () {\n\t\tvar i,\n\t\t    tiles = this._tiles;\n\n\t\tif (L.Browser.ielt9) {\n\t\t\tfor (i in tiles) {\n\t\t\t\tL.DomUtil.setOpacity(tiles[i], this.options.opacity);\n\t\t\t}\n\t\t} else {\n\t\t\tL.DomUtil.setOpacity(this._container, this.options.opacity);\n\t\t}\n\t},\n\n\t_initContainer: function () {\n\t\tvar tilePane = this._map._panes.tilePane;\n\n\t\tif (!this._container) {\n\t\t\tthis._container = L.DomUtil.create('div', 'leaflet-layer');\n\n\t\t\tthis._updateZIndex();\n\n\t\t\tif (this._animated) {\n\t\t\t\tvar className = 'leaflet-tile-container';\n\n\t\t\t\tthis._bgBuffer = L.DomUtil.create('div', className, this._container);\n\t\t\t\tthis._tileContainer = L.DomUtil.create('div', className, this._container);\n\n\t\t\t} else {\n\t\t\t\tthis._tileContainer = this._container;\n\t\t\t}\n\n\t\t\ttilePane.appendChild(this._container);\n\n\t\t\tif (this.options.opacity < 1) {\n\t\t\t\tthis._updateOpacity();\n\t\t\t}\n\t\t}\n\t},\n\n\t_reset: function (e) {\n\t\tfor (var key in this._tiles) {\n\t\t\tthis.fire('tileunload', {tile: this._tiles[key]});\n\t\t}\n\n\t\tthis._tiles = {};\n\t\tthis._tilesToLoad = 0;\n\n\t\tif (this.options.reuseTiles) {\n\t\t\tthis._unusedTiles = [];\n\t\t}\n\n\t\tthis._tileContainer.innerHTML = '';\n\n\t\tif (this._animated && e && e.hard) {\n\t\t\tthis._clearBgBuffer();\n\t\t}\n\n\t\tthis._initContainer();\n\t},\n\n\t_getTileSize: function () {\n\t\tvar map = this._map,\n\t\t    zoom = map.getZoom() + this.options.zoomOffset,\n\t\t    zoomN = this.options.maxNativeZoom,\n\t\t    tileSize = this.options.tileSize;\n\n\t\tif (zoomN && zoom > zoomN) {\n\t\t\ttileSize = Math.round(map.getZoomScale(zoom) / map.getZoomScale(zoomN) * tileSize);\n\t\t}\n\n\t\treturn tileSize;\n\t},\n\n\t_update: function () {\n\n\t\tif (!this._map) { return; }\n\n\t\tvar map = this._map,\n\t\t    bounds = map.getPixelBounds(),\n\t\t    zoom = map.getZoom(),\n\t\t    tileSize = this._getTileSize();\n\n\t\tif (zoom > this.options.maxZoom || zoom < this.options.minZoom) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar tileBounds = L.bounds(\n\t\t        bounds.min.divideBy(tileSize)._floor(),\n\t\t        bounds.max.divideBy(tileSize)._floor());\n\n\t\tthis._addTilesFromCenterOut(tileBounds);\n\n\t\tif (this.options.unloadInvisibleTiles || this.options.reuseTiles) {\n\t\t\tthis._removeOtherTiles(tileBounds);\n\t\t}\n\t},\n\n\t_addTilesFromCenterOut: function (bounds) {\n\t\tvar queue = [],\n\t\t    center = bounds.getCenter();\n\n\t\tvar j, i, point;\n\n\t\tfor (j = bounds.min.y; j <= bounds.max.y; j++) {\n\t\t\tfor (i = bounds.min.x; i <= bounds.max.x; i++) {\n\t\t\t\tpoint = new L.Point(i, j);\n\n\t\t\t\tif (this._tileShouldBeLoaded(point)) {\n\t\t\t\t\tqueue.push(point);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar tilesToLoad = queue.length;\n\n\t\tif (tilesToLoad === 0) { return; }\n\n\t\t// load tiles in order of their distance to center\n\t\tqueue.sort(function (a, b) {\n\t\t\treturn a.distanceTo(center) - b.distanceTo(center);\n\t\t});\n\n\t\tvar fragment = document.createDocumentFragment();\n\n\t\t// if its the first batch of tiles to load\n\t\tif (!this._tilesToLoad) {\n\t\t\tthis.fire('loading');\n\t\t}\n\n\t\tthis._tilesToLoad += tilesToLoad;\n\n\t\tfor (i = 0; i < tilesToLoad; i++) {\n\t\t\tthis._addTile(queue[i], fragment);\n\t\t}\n\n\t\tthis._tileContainer.appendChild(fragment);\n\t},\n\n\t_tileShouldBeLoaded: function (tilePoint) {\n\t\tif ((tilePoint.x + ':' + tilePoint.y) in this._tiles) {\n\t\t\treturn false; // already loaded\n\t\t}\n\n\t\tvar options = this.options;\n\n\t\tif (!options.continuousWorld) {\n\t\t\tvar limit = this._getWrapTileNum();\n\n\t\t\t// don't load if exceeds world bounds\n\t\t\tif ((options.noWrap && (tilePoint.x < 0 || tilePoint.x >= limit.x)) ||\n\t\t\t\ttilePoint.y < 0 || tilePoint.y >= limit.y) { return false; }\n\t\t}\n\n\t\tif (options.bounds) {\n\t\t\tvar tileSize = this._getTileSize(),\n\t\t\t    nwPoint = tilePoint.multiplyBy(tileSize),\n\t\t\t    sePoint = nwPoint.add([tileSize, tileSize]),\n\t\t\t    nw = this._map.unproject(nwPoint),\n\t\t\t    se = this._map.unproject(sePoint);\n\n\t\t\t// TODO temporary hack, will be removed after refactoring projections\n\t\t\t// https://github.com/Leaflet/Leaflet/issues/1618\n\t\t\tif (!options.continuousWorld && !options.noWrap) {\n\t\t\t\tnw = nw.wrap();\n\t\t\t\tse = se.wrap();\n\t\t\t}\n\n\t\t\tif (!options.bounds.intersects([nw, se])) { return false; }\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t_removeOtherTiles: function (bounds) {\n\t\tvar kArr, x, y, key;\n\n\t\tfor (key in this._tiles) {\n\t\t\tkArr = key.split(':');\n\t\t\tx = parseInt(kArr[0], 10);\n\t\t\ty = parseInt(kArr[1], 10);\n\n\t\t\t// remove tile if it's out of bounds\n\t\t\tif (x < bounds.min.x || x > bounds.max.x || y < bounds.min.y || y > bounds.max.y) {\n\t\t\t\tthis._removeTile(key);\n\t\t\t}\n\t\t}\n\t},\n\n\t_removeTile: function (key) {\n\t\tvar tile = this._tiles[key];\n\n\t\tthis.fire('tileunload', {tile: tile, url: tile.src});\n\n\t\tif (this.options.reuseTiles) {\n\t\t\tL.DomUtil.removeClass(tile, 'leaflet-tile-loaded');\n\t\t\tthis._unusedTiles.push(tile);\n\n\t\t} else if (tile.parentNode === this._tileContainer) {\n\t\t\tthis._tileContainer.removeChild(tile);\n\t\t}\n\n\t\t// for https://github.com/CloudMade/Leaflet/issues/137\n\t\tif (!L.Browser.android) {\n\t\t\ttile.onload = null;\n\t\t\ttile.src = L.Util.emptyImageUrl;\n\t\t}\n\n\t\tdelete this._tiles[key];\n\t},\n\n\t_addTile: function (tilePoint, container) {\n\t\tvar tilePos = this._getTilePos(tilePoint);\n\n\t\t// get unused tile - or create a new tile\n\t\tvar tile = this._getTile();\n\n\t\t/*\n\t\tChrome 20 layouts much faster with top/left (verify with timeline, frames)\n\t\tAndroid 4 browser has display issues with top/left and requires transform instead\n\t\t(other browsers don't currently care) - see debug/hacks/jitter.html for an example\n\t\t*/\n\t\tL.DomUtil.setPosition(tile, tilePos, L.Browser.chrome);\n\n\t\tthis._tiles[tilePoint.x + ':' + tilePoint.y] = tile;\n\n\t\tthis._loadTile(tile, tilePoint);\n\n\t\tif (tile.parentNode !== this._tileContainer) {\n\t\t\tcontainer.appendChild(tile);\n\t\t}\n\t},\n\n\t_getZoomForUrl: function () {\n\n\t\tvar options = this.options,\n\t\t    zoom = this._map.getZoom();\n\n\t\tif (options.zoomReverse) {\n\t\t\tzoom = options.maxZoom - zoom;\n\t\t}\n\n\t\tzoom += options.zoomOffset;\n\n\t\treturn options.maxNativeZoom ? Math.min(zoom, options.maxNativeZoom) : zoom;\n\t},\n\n\t_getTilePos: function (tilePoint) {\n\t\tvar origin = this._map.getPixelOrigin(),\n\t\t    tileSize = this._getTileSize();\n\n\t\treturn tilePoint.multiplyBy(tileSize).subtract(origin);\n\t},\n\n\t// image-specific code (override to implement e.g. Canvas or SVG tile layer)\n\n\tgetTileUrl: function (tilePoint) {\n\t\treturn L.Util.template(this._url, L.extend({\n\t\t\ts: this._getSubdomain(tilePoint),\n\t\t\tz: tilePoint.z,\n\t\t\tx: tilePoint.x,\n\t\t\ty: tilePoint.y\n\t\t}, this.options));\n\t},\n\n\t_getWrapTileNum: function () {\n\t\tvar crs = this._map.options.crs,\n\t\t    size = crs.getSize(this._map.getZoom());\n\t\treturn size.divideBy(this._getTileSize())._floor();\n\t},\n\n\t_adjustTilePoint: function (tilePoint) {\n\n\t\tvar limit = this._getWrapTileNum();\n\n\t\t// wrap tile coordinates\n\t\tif (!this.options.continuousWorld && !this.options.noWrap) {\n\t\t\ttilePoint.x = ((tilePoint.x % limit.x) + limit.x) % limit.x;\n\t\t}\n\n\t\tif (this.options.tms) {\n\t\t\ttilePoint.y = limit.y - tilePoint.y - 1;\n\t\t}\n\n\t\ttilePoint.z = this._getZoomForUrl();\n\t},\n\n\t_getSubdomain: function (tilePoint) {\n\t\tvar index = Math.abs(tilePoint.x + tilePoint.y) % this.options.subdomains.length;\n\t\treturn this.options.subdomains[index];\n\t},\n\n\t_getTile: function () {\n\t\tif (this.options.reuseTiles && this._unusedTiles.length > 0) {\n\t\t\tvar tile = this._unusedTiles.pop();\n\t\t\tthis._resetTile(tile);\n\t\t\treturn tile;\n\t\t}\n\t\treturn this._createTile();\n\t},\n\n\t// Override if data stored on a tile needs to be cleaned up before reuse\n\t_resetTile: function (/*tile*/) {},\n\n\t_createTile: function () {\n\t\tvar tile = L.DomUtil.create('img', 'leaflet-tile');\n\t\ttile.style.width = tile.style.height = this._getTileSize() + 'px';\n\t\ttile.galleryimg = 'no';\n\n\t\ttile.onselectstart = tile.onmousemove = L.Util.falseFn;\n\n\t\tif (L.Browser.ielt9 && this.options.opacity !== undefined) {\n\t\t\tL.DomUtil.setOpacity(tile, this.options.opacity);\n\t\t}\n\t\t// without this hack, tiles disappear after zoom on Chrome for Android\n\t\t// https://github.com/Leaflet/Leaflet/issues/2078\n\t\tif (L.Browser.mobileWebkit3d) {\n\t\t\ttile.style.WebkitBackfaceVisibility = 'hidden';\n\t\t}\n\t\treturn tile;\n\t},\n\n\t_loadTile: function (tile, tilePoint) {\n\t\ttile._layer  = this;\n\t\ttile.onload  = this._tileOnLoad;\n\t\ttile.onerror = this._tileOnError;\n\n\t\tthis._adjustTilePoint(tilePoint);\n\t\ttile.src     = this.getTileUrl(tilePoint);\n\n\t\tthis.fire('tileloadstart', {\n\t\t\ttile: tile,\n\t\t\turl: tile.src\n\t\t});\n\t},\n\n\t_tileLoaded: function () {\n\t\tthis._tilesToLoad--;\n\n\t\tif (this._animated) {\n\t\t\tL.DomUtil.addClass(this._tileContainer, 'leaflet-zoom-animated');\n\t\t}\n\n\t\tif (!this._tilesToLoad) {\n\t\t\tthis.fire('load');\n\n\t\t\tif (this._animated) {\n\t\t\t\t// clear scaled tiles after all new tiles are loaded (for performance)\n\t\t\t\tclearTimeout(this._clearBgBufferTimer);\n\t\t\t\tthis._clearBgBufferTimer = setTimeout(L.bind(this._clearBgBuffer, this), 500);\n\t\t\t}\n\t\t}\n\t},\n\n\t_tileOnLoad: function () {\n\t\tvar layer = this._layer;\n\n\t\t//Only if we are loading an actual image\n\t\tif (this.src !== L.Util.emptyImageUrl) {\n\t\t\tL.DomUtil.addClass(this, 'leaflet-tile-loaded');\n\n\t\t\tlayer.fire('tileload', {\n\t\t\t\ttile: this,\n\t\t\t\turl: this.src\n\t\t\t});\n\t\t}\n\n\t\tlayer._tileLoaded();\n\t},\n\n\t_tileOnError: function () {\n\t\tvar layer = this._layer;\n\n\t\tlayer.fire('tileerror', {\n\t\t\ttile: this,\n\t\t\turl: this.src\n\t\t});\n\n\t\tvar newUrl = layer.options.errorTileUrl;\n\t\tif (newUrl) {\n\t\t\tthis.src = newUrl;\n\t\t}\n\n\t\tlayer._tileLoaded();\n\t}\n});\n\nL.tileLayer = function (url, options) {\n\treturn new L.TileLayer(url, options);\n};\n\n\n/*\n * L.TileLayer.WMS is used for putting WMS tile layers on the map.\n */\n\nL.TileLayer.WMS = L.TileLayer.extend({\n\n\tdefaultWmsParams: {\n\t\tservice: 'WMS',\n\t\trequest: 'GetMap',\n\t\tversion: '1.1.1',\n\t\tlayers: '',\n\t\tstyles: '',\n\t\tformat: 'image/jpeg',\n\t\ttransparent: false\n\t},\n\n\tinitialize: function (url, options) { // (String, Object)\n\n\t\tthis._url = url;\n\n\t\tvar wmsParams = L.extend({}, this.defaultWmsParams),\n\t\t    tileSize = options.tileSize || this.options.tileSize;\n\n\t\tif (options.detectRetina && L.Browser.retina) {\n\t\t\twmsParams.width = wmsParams.height = tileSize * 2;\n\t\t} else {\n\t\t\twmsParams.width = wmsParams.height = tileSize;\n\t\t}\n\n\t\tfor (var i in options) {\n\t\t\t// all keys that are not TileLayer options go to WMS params\n\t\t\tif (!this.options.hasOwnProperty(i) && i !== 'crs') {\n\t\t\t\twmsParams[i] = options[i];\n\t\t\t}\n\t\t}\n\n\t\tthis.wmsParams = wmsParams;\n\n\t\tL.setOptions(this, options);\n\t},\n\n\tonAdd: function (map) {\n\n\t\tthis._crs = this.options.crs || map.options.crs;\n\n\t\tthis._wmsVersion = parseFloat(this.wmsParams.version);\n\n\t\tvar projectionKey = this._wmsVersion >= 1.3 ? 'crs' : 'srs';\n\t\tthis.wmsParams[projectionKey] = this._crs.code;\n\n\t\tL.TileLayer.prototype.onAdd.call(this, map);\n\t},\n\n\tgetTileUrl: function (tilePoint) { // (Point, Number) -> String\n\n\t\tvar map = this._map,\n\t\t    tileSize = this.options.tileSize,\n\n\t\t    nwPoint = tilePoint.multiplyBy(tileSize),\n\t\t    sePoint = nwPoint.add([tileSize, tileSize]),\n\n\t\t    nw = this._crs.project(map.unproject(nwPoint, tilePoint.z)),\n\t\t    se = this._crs.project(map.unproject(sePoint, tilePoint.z)),\n\t\t    bbox = this._wmsVersion >= 1.3 && this._crs === L.CRS.EPSG4326 ?\n\t\t        [se.y, nw.x, nw.y, se.x].join(',') :\n\t\t        [nw.x, se.y, se.x, nw.y].join(','),\n\n\t\t    url = L.Util.template(this._url, {s: this._getSubdomain(tilePoint)});\n\n\t\treturn url + L.Util.getParamString(this.wmsParams, url, true) + '&BBOX=' + bbox;\n\t},\n\n\tsetParams: function (params, noRedraw) {\n\n\t\tL.extend(this.wmsParams, params);\n\n\t\tif (!noRedraw) {\n\t\t\tthis.redraw();\n\t\t}\n\n\t\treturn this;\n\t}\n});\n\nL.tileLayer.wms = function (url, options) {\n\treturn new L.TileLayer.WMS(url, options);\n};\n\n\n/*\n * L.TileLayer.Canvas is a class that you can use as a base for creating\n * dynamically drawn Canvas-based tile layers.\n */\n\nL.TileLayer.Canvas = L.TileLayer.extend({\n\toptions: {\n\t\tasync: false\n\t},\n\n\tinitialize: function (options) {\n\t\tL.setOptions(this, options);\n\t},\n\n\tredraw: function () {\n\t\tif (this._map) {\n\t\t\tthis._reset({hard: true});\n\t\t\tthis._update();\n\t\t}\n\n\t\tfor (var i in this._tiles) {\n\t\t\tthis._redrawTile(this._tiles[i]);\n\t\t}\n\t\treturn this;\n\t},\n\n\t_redrawTile: function (tile) {\n\t\tthis.drawTile(tile, tile._tilePoint, this._map._zoom);\n\t},\n\n\t_createTile: function () {\n\t\tvar tile = L.DomUtil.create('canvas', 'leaflet-tile');\n\t\ttile.width = tile.height = this.options.tileSize;\n\t\ttile.onselectstart = tile.onmousemove = L.Util.falseFn;\n\t\treturn tile;\n\t},\n\n\t_loadTile: function (tile, tilePoint) {\n\t\ttile._layer = this;\n\t\ttile._tilePoint = tilePoint;\n\n\t\tthis._redrawTile(tile);\n\n\t\tif (!this.options.async) {\n\t\t\tthis.tileDrawn(tile);\n\t\t}\n\t},\n\n\tdrawTile: function (/*tile, tilePoint*/) {\n\t\t// override with rendering code\n\t},\n\n\ttileDrawn: function (tile) {\n\t\tthis._tileOnLoad.call(tile);\n\t}\n});\n\n\nL.tileLayer.canvas = function (options) {\n\treturn new L.TileLayer.Canvas(options);\n};\n\n\n/*\n * L.ImageOverlay is used to overlay images over the map (to specific geographical bounds).\n */\n\nL.ImageOverlay = L.Class.extend({\n\tincludes: L.Mixin.Events,\n\n\toptions: {\n\t\topacity: 1\n\t},\n\n\tinitialize: function (url, bounds, options) { // (String, LatLngBounds, Object)\n\t\tthis._url = url;\n\t\tthis._bounds = L.latLngBounds(bounds);\n\n\t\tL.setOptions(this, options);\n\t},\n\n\tonAdd: function (map) {\n\t\tthis._map = map;\n\n\t\tif (!this._image) {\n\t\t\tthis._initImage();\n\t\t}\n\n\t\tmap._panes.overlayPane.appendChild(this._image);\n\n\t\tmap.on('viewreset', this._reset, this);\n\n\t\tif (map.options.zoomAnimation && L.Browser.any3d) {\n\t\t\tmap.on('zoomanim', this._animateZoom, this);\n\t\t}\n\n\t\tthis._reset();\n\t},\n\n\tonRemove: function (map) {\n\t\tmap.getPanes().overlayPane.removeChild(this._image);\n\n\t\tmap.off('viewreset', this._reset, this);\n\n\t\tif (map.options.zoomAnimation) {\n\t\t\tmap.off('zoomanim', this._animateZoom, this);\n\t\t}\n\t},\n\n\taddTo: function (map) {\n\t\tmap.addLayer(this);\n\t\treturn this;\n\t},\n\n\tsetOpacity: function (opacity) {\n\t\tthis.options.opacity = opacity;\n\t\tthis._updateOpacity();\n\t\treturn this;\n\t},\n\n\t// TODO remove bringToFront/bringToBack duplication from TileLayer/Path\n\tbringToFront: function () {\n\t\tif (this._image) {\n\t\t\tthis._map._panes.overlayPane.appendChild(this._image);\n\t\t}\n\t\treturn this;\n\t},\n\n\tbringToBack: function () {\n\t\tvar pane = this._map._panes.overlayPane;\n\t\tif (this._image) {\n\t\t\tpane.insertBefore(this._image, pane.firstChild);\n\t\t}\n\t\treturn this;\n\t},\n\n\tsetUrl: function (url) {\n\t\tthis._url = url;\n\t\tthis._image.src = this._url;\n\t},\n\n\tgetAttribution: function () {\n\t\treturn this.options.attribution;\n\t},\n\n\t_initImage: function () {\n\t\tthis._image = L.DomUtil.create('img', 'leaflet-image-layer');\n\n\t\tif (this._map.options.zoomAnimation && L.Browser.any3d) {\n\t\t\tL.DomUtil.addClass(this._image, 'leaflet-zoom-animated');\n\t\t} else {\n\t\t\tL.DomUtil.addClass(this._image, 'leaflet-zoom-hide');\n\t\t}\n\n\t\tthis._updateOpacity();\n\n\t\t//TODO createImage util method to remove duplication\n\t\tL.extend(this._image, {\n\t\t\tgalleryimg: 'no',\n\t\t\tonselectstart: L.Util.falseFn,\n\t\t\tonmousemove: L.Util.falseFn,\n\t\t\tonload: L.bind(this._onImageLoad, this),\n\t\t\tsrc: this._url\n\t\t});\n\t},\n\n\t_animateZoom: function (e) {\n\t\tvar map = this._map,\n\t\t    image = this._image,\n\t\t    scale = map.getZoomScale(e.zoom),\n\t\t    nw = this._bounds.getNorthWest(),\n\t\t    se = this._bounds.getSouthEast(),\n\n\t\t    topLeft = map._latLngToNewLayerPoint(nw, e.zoom, e.center),\n\t\t    size = map._latLngToNewLayerPoint(se, e.zoom, e.center)._subtract(topLeft),\n\t\t    origin = topLeft._add(size._multiplyBy((1 / 2) * (1 - 1 / scale)));\n\n\t\timage.style[L.DomUtil.TRANSFORM] =\n\t\t        L.DomUtil.getTranslateString(origin) + ' scale(' + scale + ') ';\n\t},\n\n\t_reset: function () {\n\t\tvar image   = this._image,\n\t\t    topLeft = this._map.latLngToLayerPoint(this._bounds.getNorthWest()),\n\t\t    size = this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(topLeft);\n\n\t\tL.DomUtil.setPosition(image, topLeft);\n\n\t\timage.style.width  = size.x + 'px';\n\t\timage.style.height = size.y + 'px';\n\t},\n\n\t_onImageLoad: function () {\n\t\tthis.fire('load');\n\t},\n\n\t_updateOpacity: function () {\n\t\tL.DomUtil.setOpacity(this._image, this.options.opacity);\n\t}\n});\n\nL.imageOverlay = function (url, bounds, options) {\n\treturn new L.ImageOverlay(url, bounds, options);\n};\n\n\n/*\n * L.Icon is an image-based icon class that you can use with L.Marker for custom markers.\n */\n\nL.Icon = L.Class.extend({\n\toptions: {\n\t\t/*\n\t\ticonUrl: (String) (required)\n\t\ticonRetinaUrl: (String) (optional, used for retina devices if detected)\n\t\ticonSize: (Point) (can be set through CSS)\n\t\ticonAnchor: (Point) (centered by default, can be set in CSS with negative margins)\n\t\tpopupAnchor: (Point) (if not specified, popup opens in the anchor point)\n\t\tshadowUrl: (String) (no shadow by default)\n\t\tshadowRetinaUrl: (String) (optional, used for retina devices if detected)\n\t\tshadowSize: (Point)\n\t\tshadowAnchor: (Point)\n\t\t*/\n\t\tclassName: ''\n\t},\n\n\tinitialize: function (options) {\n\t\tL.setOptions(this, options);\n\t},\n\n\tcreateIcon: function (oldIcon) {\n\t\treturn this._createIcon('icon', oldIcon);\n\t},\n\n\tcreateShadow: function (oldIcon) {\n\t\treturn this._createIcon('shadow', oldIcon);\n\t},\n\n\t_createIcon: function (name, oldIcon) {\n\t\tvar src = this._getIconUrl(name);\n\n\t\tif (!src) {\n\t\t\tif (name === 'icon') {\n\t\t\t\tthrow new Error('iconUrl not set in Icon options (see the docs).');\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\tvar img;\n\t\tif (!oldIcon || oldIcon.tagName !== 'IMG') {\n\t\t\timg = this._createImg(src);\n\t\t} else {\n\t\t\timg = this._createImg(src, oldIcon);\n\t\t}\n\t\tthis._setIconStyles(img, name);\n\n\t\treturn img;\n\t},\n\n\t_setIconStyles: function (img, name) {\n\t\tvar options = this.options,\n\t\t    size = L.point(options[name + 'Size']),\n\t\t    anchor;\n\n\t\tif (name === 'shadow') {\n\t\t\tanchor = L.point(options.shadowAnchor || options.iconAnchor);\n\t\t} else {\n\t\t\tanchor = L.point(options.iconAnchor);\n\t\t}\n\n\t\tif (!anchor && size) {\n\t\t\tanchor = size.divideBy(2, true);\n\t\t}\n\n\t\timg.className = 'leaflet-marker-' + name + ' ' + options.className;\n\n\t\tif (anchor) {\n\t\t\timg.style.marginLeft = (-anchor.x) + 'px';\n\t\t\timg.style.marginTop  = (-anchor.y) + 'px';\n\t\t}\n\n\t\tif (size) {\n\t\t\timg.style.width  = size.x + 'px';\n\t\t\timg.style.height = size.y + 'px';\n\t\t}\n\t},\n\n\t_createImg: function (src, el) {\n\t\tel = el || document.createElement('img');\n\t\tel.src = src;\n\t\treturn el;\n\t},\n\n\t_getIconUrl: function (name) {\n\t\tif (L.Browser.retina && this.options[name + 'RetinaUrl']) {\n\t\t\treturn this.options[name + 'RetinaUrl'];\n\t\t}\n\t\treturn this.options[name + 'Url'];\n\t}\n});\n\nL.icon = function (options) {\n\treturn new L.Icon(options);\n};\n\n\n/*\n * L.Icon.Default is the blue marker icon used by default in Leaflet.\n */\n\nL.Icon.Default = L.Icon.extend({\n\n\toptions: {\n\t\ticonSize: [25, 41],\n\t\ticonAnchor: [12, 41],\n\t\tpopupAnchor: [1, -34],\n\n\t\tshadowSize: [41, 41]\n\t},\n\n\t_getIconUrl: function (name) {\n\t\tvar key = name + 'Url';\n\n\t\tif (this.options[key]) {\n\t\t\treturn this.options[key];\n\t\t}\n\n\t\tif (L.Browser.retina && name === 'icon') {\n\t\t\tname += '-2x';\n\t\t}\n\n\t\tvar path = L.Icon.Default.imagePath;\n\n\t\tif (!path) {\n\t\t\tthrow new Error('Couldn\\'t autodetect L.Icon.Default.imagePath, set it manually.');\n\t\t}\n\n\t\treturn path + '/marker-' + name + '.png';\n\t}\n});\n\nL.Icon.Default.imagePath = (function () {\n\tvar scripts = document.getElementsByTagName('script'),\n\t    leafletRe = /[\\/^]leaflet[\\-\\._]?([\\w\\-\\._]*)\\.js\\??/;\n\n\tvar i, len, src, matches, path;\n\n\tfor (i = 0, len = scripts.length; i < len; i++) {\n\t\tsrc = scripts[i].src;\n\t\tmatches = src.match(leafletRe);\n\n\t\tif (matches) {\n\t\t\tpath = src.split(leafletRe)[0];\n\t\t\treturn (path ? path + '/' : '') + 'images';\n\t\t}\n\t}\n}());\n\n\n/*\n * L.Marker is used to display clickable/draggable icons on the map.\n */\n\nL.Marker = L.Class.extend({\n\n\tincludes: L.Mixin.Events,\n\n\toptions: {\n\t\ticon: new L.Icon.Default(),\n\t\ttitle: '',\n\t\talt: '',\n\t\tclickable: true,\n\t\tdraggable: false,\n\t\tkeyboard: true,\n\t\tzIndexOffset: 0,\n\t\topacity: 1,\n\t\triseOnHover: false,\n\t\triseOffset: 250\n\t},\n\n\tinitialize: function (latlng, options) {\n\t\tL.setOptions(this, options);\n\t\tthis._latlng = L.latLng(latlng);\n\t},\n\n\tonAdd: function (map) {\n\t\tthis._map = map;\n\n\t\tmap.on('viewreset', this.update, this);\n\n\t\tthis._initIcon();\n\t\tthis.update();\n\t\tthis.fire('add');\n\n\t\tif (map.options.zoomAnimation && map.options.markerZoomAnimation) {\n\t\t\tmap.on('zoomanim', this._animateZoom, this);\n\t\t}\n\t},\n\n\taddTo: function (map) {\n\t\tmap.addLayer(this);\n\t\treturn this;\n\t},\n\n\tonRemove: function (map) {\n\t\tif (this.dragging) {\n\t\t\tthis.dragging.disable();\n\t\t}\n\n\t\tthis._removeIcon();\n\t\tthis._removeShadow();\n\n\t\tthis.fire('remove');\n\n\t\tmap.off({\n\t\t\t'viewreset': this.update,\n\t\t\t'zoomanim': this._animateZoom\n\t\t}, this);\n\n\t\tthis._map = null;\n\t},\n\n\tgetLatLng: function () {\n\t\treturn this._latlng;\n\t},\n\n\tsetLatLng: function (latlng) {\n\t\tthis._latlng = L.latLng(latlng);\n\n\t\tthis.update();\n\n\t\treturn this.fire('move', { latlng: this._latlng });\n\t},\n\n\tsetZIndexOffset: function (offset) {\n\t\tthis.options.zIndexOffset = offset;\n\t\tthis.update();\n\n\t\treturn this;\n\t},\n\n\tsetIcon: function (icon) {\n\n\t\tthis.options.icon = icon;\n\n\t\tif (this._map) {\n\t\t\tthis._initIcon();\n\t\t\tthis.update();\n\t\t}\n\n\t\tif (this._popup) {\n\t\t\tthis.bindPopup(this._popup);\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tupdate: function () {\n\t\tif (this._icon) {\n\t\t\tthis._setPos(this._map.latLngToLayerPoint(this._latlng).round());\n\t\t}\n\t\treturn this;\n\t},\n\n\t_initIcon: function () {\n\t\tvar options = this.options,\n\t\t    map = this._map,\n\t\t    animation = (map.options.zoomAnimation && map.options.markerZoomAnimation),\n\t\t    classToAdd = animation ? 'leaflet-zoom-animated' : 'leaflet-zoom-hide';\n\n\t\tvar icon = options.icon.createIcon(this._icon),\n\t\t\taddIcon = false;\n\n\t\t// if we're not reusing the icon, remove the old one and init new one\n\t\tif (icon !== this._icon) {\n\t\t\tif (this._icon) {\n\t\t\t\tthis._removeIcon();\n\t\t\t}\n\t\t\taddIcon = true;\n\n\t\t\tif (options.title) {\n\t\t\t\ticon.title = options.title;\n\t\t\t}\n\n\t\t\tif (options.alt) {\n\t\t\t\ticon.alt = options.alt;\n\t\t\t}\n\t\t}\n\n\t\tL.DomUtil.addClass(icon, classToAdd);\n\n\t\tif (options.keyboard) {\n\t\t\ticon.tabIndex = '0';\n\t\t}\n\n\t\tthis._icon = icon;\n\n\t\tthis._initInteraction();\n\n\t\tif (options.riseOnHover) {\n\t\t\tL.DomEvent\n\t\t\t\t.on(icon, 'mouseover', this._bringToFront, this)\n\t\t\t\t.on(icon, 'mouseout', this._resetZIndex, this);\n\t\t}\n\n\t\tvar newShadow = options.icon.createShadow(this._shadow),\n\t\t\taddShadow = false;\n\n\t\tif (newShadow !== this._shadow) {\n\t\t\tthis._removeShadow();\n\t\t\taddShadow = true;\n\t\t}\n\n\t\tif (newShadow) {\n\t\t\tL.DomUtil.addClass(newShadow, classToAdd);\n\t\t}\n\t\tthis._shadow = newShadow;\n\n\n\t\tif (options.opacity < 1) {\n\t\t\tthis._updateOpacity();\n\t\t}\n\n\n\t\tvar panes = this._map._panes;\n\n\t\tif (addIcon) {\n\t\t\tpanes.markerPane.appendChild(this._icon);\n\t\t}\n\n\t\tif (newShadow && addShadow) {\n\t\t\tpanes.shadowPane.appendChild(this._shadow);\n\t\t}\n\t},\n\n\t_removeIcon: function () {\n\t\tif (this.options.riseOnHover) {\n\t\t\tL.DomEvent\n\t\t\t    .off(this._icon, 'mouseover', this._bringToFront)\n\t\t\t    .off(this._icon, 'mouseout', this._resetZIndex);\n\t\t}\n\n\t\tthis._map._panes.markerPane.removeChild(this._icon);\n\n\t\tthis._icon = null;\n\t},\n\n\t_removeShadow: function () {\n\t\tif (this._shadow) {\n\t\t\tthis._map._panes.shadowPane.removeChild(this._shadow);\n\t\t}\n\t\tthis._shadow = null;\n\t},\n\n\t_setPos: function (pos) {\n\t\tL.DomUtil.setPosition(this._icon, pos);\n\n\t\tif (this._shadow) {\n\t\t\tL.DomUtil.setPosition(this._shadow, pos);\n\t\t}\n\n\t\tthis._zIndex = pos.y + this.options.zIndexOffset;\n\n\t\tthis._resetZIndex();\n\t},\n\n\t_updateZIndex: function (offset) {\n\t\tthis._icon.style.zIndex = this._zIndex + offset;\n\t},\n\n\t_animateZoom: function (opt) {\n\t\tvar pos = this._map._latLngToNewLayerPoint(this._latlng, opt.zoom, opt.center).round();\n\n\t\tthis._setPos(pos);\n\t},\n\n\t_initInteraction: function () {\n\n\t\tif (!this.options.clickable) { return; }\n\n\t\t// TODO refactor into something shared with Map/Path/etc. to DRY it up\n\n\t\tvar icon = this._icon,\n\t\t    events = ['dblclick', 'mousedown', 'mouseover', 'mouseout', 'contextmenu'];\n\n\t\tL.DomUtil.addClass(icon, 'leaflet-clickable');\n\t\tL.DomEvent.on(icon, 'click', this._onMouseClick, this);\n\t\tL.DomEvent.on(icon, 'keypress', this._onKeyPress, this);\n\n\t\tfor (var i = 0; i < events.length; i++) {\n\t\t\tL.DomEvent.on(icon, events[i], this._fireMouseEvent, this);\n\t\t}\n\n\t\tif (L.Handler.MarkerDrag) {\n\t\t\tthis.dragging = new L.Handler.MarkerDrag(this);\n\n\t\t\tif (this.options.draggable) {\n\t\t\t\tthis.dragging.enable();\n\t\t\t}\n\t\t}\n\t},\n\n\t_onMouseClick: function (e) {\n\t\tvar wasDragged = this.dragging && this.dragging.moved();\n\n\t\tif (this.hasEventListeners(e.type) || wasDragged) {\n\t\t\tL.DomEvent.stopPropagation(e);\n\t\t}\n\n\t\tif (wasDragged) { return; }\n\n\t\tif ((!this.dragging || !this.dragging._enabled) && this._map.dragging && this._map.dragging.moved()) { return; }\n\n\t\tthis.fire(e.type, {\n\t\t\toriginalEvent: e,\n\t\t\tlatlng: this._latlng\n\t\t});\n\t},\n\n\t_onKeyPress: function (e) {\n\t\tif (e.keyCode === 13) {\n\t\t\tthis.fire('click', {\n\t\t\t\toriginalEvent: e,\n\t\t\t\tlatlng: this._latlng\n\t\t\t});\n\t\t}\n\t},\n\n\t_fireMouseEvent: function (e) {\n\n\t\tthis.fire(e.type, {\n\t\t\toriginalEvent: e,\n\t\t\tlatlng: this._latlng\n\t\t});\n\n\t\t// TODO proper custom event propagation\n\t\t// this line will always be called if marker is in a FeatureGroup\n\t\tif (e.type === 'contextmenu' && this.hasEventListeners(e.type)) {\n\t\t\tL.DomEvent.preventDefault(e);\n\t\t}\n\t\tif (e.type !== 'mousedown') {\n\t\t\tL.DomEvent.stopPropagation(e);\n\t\t} else {\n\t\t\tL.DomEvent.preventDefault(e);\n\t\t}\n\t},\n\n\tsetOpacity: function (opacity) {\n\t\tthis.options.opacity = opacity;\n\t\tif (this._map) {\n\t\t\tthis._updateOpacity();\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t_updateOpacity: function () {\n\t\tL.DomUtil.setOpacity(this._icon, this.options.opacity);\n\t\tif (this._shadow) {\n\t\t\tL.DomUtil.setOpacity(this._shadow, this.options.opacity);\n\t\t}\n\t},\n\n\t_bringToFront: function () {\n\t\tthis._updateZIndex(this.options.riseOffset);\n\t},\n\n\t_resetZIndex: function () {\n\t\tthis._updateZIndex(0);\n\t}\n});\n\nL.marker = function (latlng, options) {\n\treturn new L.Marker(latlng, options);\n};\n\n\n/*\n * L.DivIcon is a lightweight HTML-based icon class (as opposed to the image-based L.Icon)\n * to use with L.Marker.\n */\n\nL.DivIcon = L.Icon.extend({\n\toptions: {\n\t\ticonSize: [12, 12], // also can be set through CSS\n\t\t/*\n\t\ticonAnchor: (Point)\n\t\tpopupAnchor: (Point)\n\t\thtml: (String)\n\t\tbgPos: (Point)\n\t\t*/\n\t\tclassName: 'leaflet-div-icon',\n\t\thtml: false\n\t},\n\n\tcreateIcon: function (oldIcon) {\n\t\tvar div = (oldIcon && oldIcon.tagName === 'DIV') ? oldIcon : document.createElement('div'),\n\t\t    options = this.options;\n\n\t\tif (options.html !== false) {\n\t\t\tdiv.innerHTML = options.html;\n\t\t} else {\n\t\t\tdiv.innerHTML = '';\n\t\t}\n\n\t\tif (options.bgPos) {\n\t\t\tdiv.style.backgroundPosition =\n\t\t\t        (-options.bgPos.x) + 'px ' + (-options.bgPos.y) + 'px';\n\t\t}\n\n\t\tthis._setIconStyles(div, 'icon');\n\t\treturn div;\n\t},\n\n\tcreateShadow: function () {\n\t\treturn null;\n\t}\n});\n\nL.divIcon = function (options) {\n\treturn new L.DivIcon(options);\n};\n\n\n/*\n * L.Popup is used for displaying popups on the map.\n */\n\nL.Map.mergeOptions({\n\tclosePopupOnClick: true\n});\n\nL.Popup = L.Class.extend({\n\tincludes: L.Mixin.Events,\n\n\toptions: {\n\t\tminWidth: 50,\n\t\tmaxWidth: 300,\n\t\t// maxHeight: null,\n\t\tautoPan: true,\n\t\tcloseButton: true,\n\t\toffset: [0, 7],\n\t\tautoPanPadding: [5, 5],\n\t\t// autoPanPaddingTopLeft: null,\n\t\t// autoPanPaddingBottomRight: null,\n\t\tkeepInView: false,\n\t\tclassName: '',\n\t\tzoomAnimation: true\n\t},\n\n\tinitialize: function (options, source) {\n\t\tL.setOptions(this, options);\n\n\t\tthis._source = source;\n\t\tthis._animated = L.Browser.any3d && this.options.zoomAnimation;\n\t\tthis._isOpen = false;\n\t},\n\n\tonAdd: function (map) {\n\t\tthis._map = map;\n\n\t\tif (!this._container) {\n\t\t\tthis._initLayout();\n\t\t}\n\n\t\tvar animFade = map.options.fadeAnimation;\n\n\t\tif (animFade) {\n\t\t\tL.DomUtil.setOpacity(this._container, 0);\n\t\t}\n\t\tmap._panes.popupPane.appendChild(this._container);\n\n\t\tmap.on(this._getEvents(), this);\n\n\t\tthis.update();\n\n\t\tif (animFade) {\n\t\t\tL.DomUtil.setOpacity(this._container, 1);\n\t\t}\n\n\t\tthis.fire('open');\n\n\t\tmap.fire('popupopen', {popup: this});\n\n\t\tif (this._source) {\n\t\t\tthis._source.fire('popupopen', {popup: this});\n\t\t}\n\t},\n\n\taddTo: function (map) {\n\t\tmap.addLayer(this);\n\t\treturn this;\n\t},\n\n\topenOn: function (map) {\n\t\tmap.openPopup(this);\n\t\treturn this;\n\t},\n\n\tonRemove: function (map) {\n\t\tmap._panes.popupPane.removeChild(this._container);\n\n\t\tL.Util.falseFn(this._container.offsetWidth); // force reflow\n\n\t\tmap.off(this._getEvents(), this);\n\n\t\tif (map.options.fadeAnimation) {\n\t\t\tL.DomUtil.setOpacity(this._container, 0);\n\t\t}\n\n\t\tthis._map = null;\n\n\t\tthis.fire('close');\n\n\t\tmap.fire('popupclose', {popup: this});\n\n\t\tif (this._source) {\n\t\t\tthis._source.fire('popupclose', {popup: this});\n\t\t}\n\t},\n\n\tgetLatLng: function () {\n\t\treturn this._latlng;\n\t},\n\n\tsetLatLng: function (latlng) {\n\t\tthis._latlng = L.latLng(latlng);\n\t\tif (this._map) {\n\t\t\tthis._updatePosition();\n\t\t\tthis._adjustPan();\n\t\t}\n\t\treturn this;\n\t},\n\n\tgetContent: function () {\n\t\treturn this._content;\n\t},\n\n\tsetContent: function (content) {\n\t\tthis._content = content;\n\t\tthis.update();\n\t\treturn this;\n\t},\n\n\tupdate: function () {\n\t\tif (!this._map) { return; }\n\n\t\tthis._container.style.visibility = 'hidden';\n\n\t\tthis._updateContent();\n\t\tthis._updateLayout();\n\t\tthis._updatePosition();\n\n\t\tthis._container.style.visibility = '';\n\n\t\tthis._adjustPan();\n\t},\n\n\t_getEvents: function () {\n\t\tvar events = {\n\t\t\tviewreset: this._updatePosition\n\t\t};\n\n\t\tif (this._animated) {\n\t\t\tevents.zoomanim = this._zoomAnimation;\n\t\t}\n\t\tif ('closeOnClick' in this.options ? this.options.closeOnClick : this._map.options.closePopupOnClick) {\n\t\t\tevents.preclick = this._close;\n\t\t}\n\t\tif (this.options.keepInView) {\n\t\t\tevents.moveend = this._adjustPan;\n\t\t}\n\n\t\treturn events;\n\t},\n\n\t_close: function () {\n\t\tif (this._map) {\n\t\t\tthis._map.closePopup(this);\n\t\t}\n\t},\n\n\t_initLayout: function () {\n\t\tvar prefix = 'leaflet-popup',\n\t\t\tcontainerClass = prefix + ' ' + this.options.className + ' leaflet-zoom-' +\n\t\t\t        (this._animated ? 'animated' : 'hide'),\n\t\t\tcontainer = this._container = L.DomUtil.create('div', containerClass),\n\t\t\tcloseButton;\n\n\t\tif (this.options.closeButton) {\n\t\t\tcloseButton = this._closeButton =\n\t\t\t        L.DomUtil.create('a', prefix + '-close-button', container);\n\t\t\tcloseButton.href = '#close';\n\t\t\tcloseButton.innerHTML = '&#215;';\n\t\t\tL.DomEvent.disableClickPropagation(closeButton);\n\n\t\t\tL.DomEvent.on(closeButton, 'click', this._onCloseButtonClick, this);\n\t\t}\n\n\t\tvar wrapper = this._wrapper =\n\t\t        L.DomUtil.create('div', prefix + '-content-wrapper', container);\n\t\tL.DomEvent.disableClickPropagation(wrapper);\n\n\t\tthis._contentNode = L.DomUtil.create('div', prefix + '-content', wrapper);\n\n\t\tL.DomEvent.disableScrollPropagation(this._contentNode);\n\t\tL.DomEvent.on(wrapper, 'contextmenu', L.DomEvent.stopPropagation);\n\n\t\tthis._tipContainer = L.DomUtil.create('div', prefix + '-tip-container', container);\n\t\tthis._tip = L.DomUtil.create('div', prefix + '-tip', this._tipContainer);\n\t},\n\n\t_updateContent: function () {\n\t\tif (!this._content) { return; }\n\n\t\tif (typeof this._content === 'string') {\n\t\t\tthis._contentNode.innerHTML = this._content;\n\t\t} else {\n\t\t\twhile (this._contentNode.hasChildNodes()) {\n\t\t\t\tthis._contentNode.removeChild(this._contentNode.firstChild);\n\t\t\t}\n\t\t\tthis._contentNode.appendChild(this._content);\n\t\t}\n\t\tthis.fire('contentupdate');\n\t},\n\n\t_updateLayout: function () {\n\t\tvar container = this._contentNode,\n\t\t    style = container.style;\n\n\t\tstyle.width = '';\n\t\tstyle.whiteSpace = 'nowrap';\n\n\t\tvar width = container.offsetWidth;\n\t\twidth = Math.min(width, this.options.maxWidth);\n\t\twidth = Math.max(width, this.options.minWidth);\n\n\t\tstyle.width = (width + 1) + 'px';\n\t\tstyle.whiteSpace = '';\n\n\t\tstyle.height = '';\n\n\t\tvar height = container.offsetHeight,\n\t\t    maxHeight = this.options.maxHeight,\n\t\t    scrolledClass = 'leaflet-popup-scrolled';\n\n\t\tif (maxHeight && height > maxHeight) {\n\t\t\tstyle.height = maxHeight + 'px';\n\t\t\tL.DomUtil.addClass(container, scrolledClass);\n\t\t} else {\n\t\t\tL.DomUtil.removeClass(container, scrolledClass);\n\t\t}\n\n\t\tthis._containerWidth = this._container.offsetWidth;\n\t},\n\n\t_updatePosition: function () {\n\t\tif (!this._map) { return; }\n\n\t\tvar pos = this._map.latLngToLayerPoint(this._latlng),\n\t\t    animated = this._animated,\n\t\t    offset = L.point(this.options.offset);\n\n\t\tif (animated) {\n\t\t\tL.DomUtil.setPosition(this._container, pos);\n\t\t}\n\n\t\tthis._containerBottom = -offset.y - (animated ? 0 : pos.y);\n\t\tthis._containerLeft = -Math.round(this._containerWidth / 2) + offset.x + (animated ? 0 : pos.x);\n\n\t\t// bottom position the popup in case the height of the popup changes (images loading etc)\n\t\tthis._container.style.bottom = this._containerBottom + 'px';\n\t\tthis._container.style.left = this._containerLeft + 'px';\n\t},\n\n\t_zoomAnimation: function (opt) {\n\t\tvar pos = this._map._latLngToNewLayerPoint(this._latlng, opt.zoom, opt.center);\n\n\t\tL.DomUtil.setPosition(this._container, pos);\n\t},\n\n\t_adjustPan: function () {\n\t\tif (!this.options.autoPan) { return; }\n\n\t\tvar map = this._map,\n\t\t    containerHeight = this._container.offsetHeight,\n\t\t    containerWidth = this._containerWidth,\n\n\t\t    layerPos = new L.Point(this._containerLeft, -containerHeight - this._containerBottom);\n\n\t\tif (this._animated) {\n\t\t\tlayerPos._add(L.DomUtil.getPosition(this._container));\n\t\t}\n\n\t\tvar containerPos = map.layerPointToContainerPoint(layerPos),\n\t\t    padding = L.point(this.options.autoPanPadding),\n\t\t    paddingTL = L.point(this.options.autoPanPaddingTopLeft || padding),\n\t\t    paddingBR = L.point(this.options.autoPanPaddingBottomRight || padding),\n\t\t    size = map.getSize(),\n\t\t    dx = 0,\n\t\t    dy = 0;\n\n\t\tif (containerPos.x + containerWidth + paddingBR.x > size.x) { // right\n\t\t\tdx = containerPos.x + containerWidth - size.x + paddingBR.x;\n\t\t}\n\t\tif (containerPos.x - dx - paddingTL.x < 0) { // left\n\t\t\tdx = containerPos.x - paddingTL.x;\n\t\t}\n\t\tif (containerPos.y + containerHeight + paddingBR.y > size.y) { // bottom\n\t\t\tdy = containerPos.y + containerHeight - size.y + paddingBR.y;\n\t\t}\n\t\tif (containerPos.y - dy - paddingTL.y < 0) { // top\n\t\t\tdy = containerPos.y - paddingTL.y;\n\t\t}\n\n\t\tif (dx || dy) {\n\t\t\tmap\n\t\t\t    .fire('autopanstart')\n\t\t\t    .panBy([dx, dy]);\n\t\t}\n\t},\n\n\t_onCloseButtonClick: function (e) {\n\t\tthis._close();\n\t\tL.DomEvent.stop(e);\n\t}\n});\n\nL.popup = function (options, source) {\n\treturn new L.Popup(options, source);\n};\n\n\nL.Map.include({\n\topenPopup: function (popup, latlng, options) { // (Popup) or (String || HTMLElement, LatLng[, Object])\n\t\tthis.closePopup();\n\n\t\tif (!(popup instanceof L.Popup)) {\n\t\t\tvar content = popup;\n\n\t\t\tpopup = new L.Popup(options)\n\t\t\t    .setLatLng(latlng)\n\t\t\t    .setContent(content);\n\t\t}\n\t\tpopup._isOpen = true;\n\n\t\tthis._popup = popup;\n\t\treturn this.addLayer(popup);\n\t},\n\n\tclosePopup: function (popup) {\n\t\tif (!popup || popup === this._popup) {\n\t\t\tpopup = this._popup;\n\t\t\tthis._popup = null;\n\t\t}\n\t\tif (popup) {\n\t\t\tthis.removeLayer(popup);\n\t\t\tpopup._isOpen = false;\n\t\t}\n\t\treturn this;\n\t}\n});\n\n\n/*\n * Popup extension to L.Marker, adding popup-related methods.\n */\n\nL.Marker.include({\n\topenPopup: function () {\n\t\tif (this._popup && this._map && !this._map.hasLayer(this._popup)) {\n\t\t\tthis._popup.setLatLng(this._latlng);\n\t\t\tthis._map.openPopup(this._popup);\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tclosePopup: function () {\n\t\tif (this._popup) {\n\t\t\tthis._popup._close();\n\t\t}\n\t\treturn this;\n\t},\n\n\ttogglePopup: function () {\n\t\tif (this._popup) {\n\t\t\tif (this._popup._isOpen) {\n\t\t\t\tthis.closePopup();\n\t\t\t} else {\n\t\t\t\tthis.openPopup();\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t},\n\n\tbindPopup: function (content, options) {\n\t\tvar anchor = L.point(this.options.icon.options.popupAnchor || [0, 0]);\n\n\t\tanchor = anchor.add(L.Popup.prototype.options.offset);\n\n\t\tif (options && options.offset) {\n\t\t\tanchor = anchor.add(options.offset);\n\t\t}\n\n\t\toptions = L.extend({offset: anchor}, options);\n\n\t\tif (!this._popupHandlersAdded) {\n\t\t\tthis\n\t\t\t    .on('click', this.togglePopup, this)\n\t\t\t    .on('remove', this.closePopup, this)\n\t\t\t    .on('move', this._movePopup, this);\n\t\t\tthis._popupHandlersAdded = true;\n\t\t}\n\n\t\tif (content instanceof L.Popup) {\n\t\t\tL.setOptions(content, options);\n\t\t\tthis._popup = content;\n\t\t\tcontent._source = this;\n\t\t} else {\n\t\t\tthis._popup = new L.Popup(options, this)\n\t\t\t\t.setContent(content);\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tsetPopupContent: function (content) {\n\t\tif (this._popup) {\n\t\t\tthis._popup.setContent(content);\n\t\t}\n\t\treturn this;\n\t},\n\n\tunbindPopup: function () {\n\t\tif (this._popup) {\n\t\t\tthis._popup = null;\n\t\t\tthis\n\t\t\t    .off('click', this.togglePopup, this)\n\t\t\t    .off('remove', this.closePopup, this)\n\t\t\t    .off('move', this._movePopup, this);\n\t\t\tthis._popupHandlersAdded = false;\n\t\t}\n\t\treturn this;\n\t},\n\n\tgetPopup: function () {\n\t\treturn this._popup;\n\t},\n\n\t_movePopup: function (e) {\n\t\tthis._popup.setLatLng(e.latlng);\n\t}\n});\n\n\n/*\n * L.LayerGroup is a class to combine several layers into one so that\n * you can manipulate the group (e.g. add/remove it) as one layer.\n */\n\nL.LayerGroup = L.Class.extend({\n\tinitialize: function (layers) {\n\t\tthis._layers = {};\n\n\t\tvar i, len;\n\n\t\tif (layers) {\n\t\t\tfor (i = 0, len = layers.length; i < len; i++) {\n\t\t\t\tthis.addLayer(layers[i]);\n\t\t\t}\n\t\t}\n\t},\n\n\taddLayer: function (layer) {\n\t\tvar id = this.getLayerId(layer);\n\n\t\tthis._layers[id] = layer;\n\n\t\tif (this._map) {\n\t\t\tthis._map.addLayer(layer);\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tremoveLayer: function (layer) {\n\t\tvar id = layer in this._layers ? layer : this.getLayerId(layer);\n\n\t\tif (this._map && this._layers[id]) {\n\t\t\tthis._map.removeLayer(this._layers[id]);\n\t\t}\n\n\t\tdelete this._layers[id];\n\n\t\treturn this;\n\t},\n\n\thasLayer: function (layer) {\n\t\tif (!layer) { return false; }\n\n\t\treturn (layer in this._layers || this.getLayerId(layer) in this._layers);\n\t},\n\n\tclearLayers: function () {\n\t\tthis.eachLayer(this.removeLayer, this);\n\t\treturn this;\n\t},\n\n\tinvoke: function (methodName) {\n\t\tvar args = Array.prototype.slice.call(arguments, 1),\n\t\t    i, layer;\n\n\t\tfor (i in this._layers) {\n\t\t\tlayer = this._layers[i];\n\n\t\t\tif (layer[methodName]) {\n\t\t\t\tlayer[methodName].apply(layer, args);\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tonAdd: function (map) {\n\t\tthis._map = map;\n\t\tthis.eachLayer(map.addLayer, map);\n\t},\n\n\tonRemove: function (map) {\n\t\tthis.eachLayer(map.removeLayer, map);\n\t\tthis._map = null;\n\t},\n\n\taddTo: function (map) {\n\t\tmap.addLayer(this);\n\t\treturn this;\n\t},\n\n\teachLayer: function (method, context) {\n\t\tfor (var i in this._layers) {\n\t\t\tmethod.call(context, this._layers[i]);\n\t\t}\n\t\treturn this;\n\t},\n\n\tgetLayer: function (id) {\n\t\treturn this._layers[id];\n\t},\n\n\tgetLayers: function () {\n\t\tvar layers = [];\n\n\t\tfor (var i in this._layers) {\n\t\t\tlayers.push(this._layers[i]);\n\t\t}\n\t\treturn layers;\n\t},\n\n\tsetZIndex: function (zIndex) {\n\t\treturn this.invoke('setZIndex', zIndex);\n\t},\n\n\tgetLayerId: function (layer) {\n\t\treturn L.stamp(layer);\n\t}\n});\n\nL.layerGroup = function (layers) {\n\treturn new L.LayerGroup(layers);\n};\n\n\n/*\n * L.FeatureGroup extends L.LayerGroup by introducing mouse events and additional methods\n * shared between a group of interactive layers (like vectors or markers).\n */\n\nL.FeatureGroup = L.LayerGroup.extend({\n\tincludes: L.Mixin.Events,\n\n\tstatics: {\n\t\tEVENTS: 'click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose'\n\t},\n\n\taddLayer: function (layer) {\n\t\tif (this.hasLayer(layer)) {\n\t\t\treturn this;\n\t\t}\n\n\t\tif ('on' in layer) {\n\t\t\tlayer.on(L.FeatureGroup.EVENTS, this._propagateEvent, this);\n\t\t}\n\n\t\tL.LayerGroup.prototype.addLayer.call(this, layer);\n\n\t\tif (this._popupContent && layer.bindPopup) {\n\t\t\tlayer.bindPopup(this._popupContent, this._popupOptions);\n\t\t}\n\n\t\treturn this.fire('layeradd', {layer: layer});\n\t},\n\n\tremoveLayer: function (layer) {\n\t\tif (!this.hasLayer(layer)) {\n\t\t\treturn this;\n\t\t}\n\t\tif (layer in this._layers) {\n\t\t\tlayer = this._layers[layer];\n\t\t}\n\n\t\tif ('off' in layer) {\n\t\t\tlayer.off(L.FeatureGroup.EVENTS, this._propagateEvent, this);\n\t\t}\n\n\t\tL.LayerGroup.prototype.removeLayer.call(this, layer);\n\n\t\tif (this._popupContent) {\n\t\t\tthis.invoke('unbindPopup');\n\t\t}\n\n\t\treturn this.fire('layerremove', {layer: layer});\n\t},\n\n\tbindPopup: function (content, options) {\n\t\tthis._popupContent = content;\n\t\tthis._popupOptions = options;\n\t\treturn this.invoke('bindPopup', content, options);\n\t},\n\n\topenPopup: function (latlng) {\n\t\t// open popup on the first layer\n\t\tfor (var id in this._layers) {\n\t\t\tthis._layers[id].openPopup(latlng);\n\t\t\tbreak;\n\t\t}\n\t\treturn this;\n\t},\n\n\tsetStyle: function (style) {\n\t\treturn this.invoke('setStyle', style);\n\t},\n\n\tbringToFront: function () {\n\t\treturn this.invoke('bringToFront');\n\t},\n\n\tbringToBack: function () {\n\t\treturn this.invoke('bringToBack');\n\t},\n\n\tgetBounds: function () {\n\t\tvar bounds = new L.LatLngBounds();\n\n\t\tthis.eachLayer(function (layer) {\n\t\t\tbounds.extend(layer instanceof L.Marker ? layer.getLatLng() : layer.getBounds());\n\t\t});\n\n\t\treturn bounds;\n\t},\n\n\t_propagateEvent: function (e) {\n\t\te = L.extend({\n\t\t\tlayer: e.target,\n\t\t\ttarget: this\n\t\t}, e);\n\t\tthis.fire(e.type, e);\n\t}\n});\n\nL.featureGroup = function (layers) {\n\treturn new L.FeatureGroup(layers);\n};\n\n\n/*\n * L.Path is a base class for rendering vector paths on a map. Inherited by Polyline, Circle, etc.\n */\n\nL.Path = L.Class.extend({\n\tincludes: [L.Mixin.Events],\n\n\tstatics: {\n\t\t// how much to extend the clip area around the map view\n\t\t// (relative to its size, e.g. 0.5 is half the screen in each direction)\n\t\t// set it so that SVG element doesn't exceed 1280px (vectors flicker on dragend if it is)\n\t\tCLIP_PADDING: (function () {\n\t\t\tvar max = L.Browser.mobile ? 1280 : 2000,\n\t\t\t    target = (max / Math.max(window.outerWidth, window.outerHeight) - 1) / 2;\n\t\t\treturn Math.max(0, Math.min(0.5, target));\n\t\t})()\n\t},\n\n\toptions: {\n\t\tstroke: true,\n\t\tcolor: '#0033ff',\n\t\tdashArray: null,\n\t\tlineCap: null,\n\t\tlineJoin: null,\n\t\tweight: 5,\n\t\topacity: 0.5,\n\n\t\tfill: false,\n\t\tfillColor: null, //same as color by default\n\t\tfillOpacity: 0.2,\n\n\t\tclickable: true\n\t},\n\n\tinitialize: function (options) {\n\t\tL.setOptions(this, options);\n\t},\n\n\tonAdd: function (map) {\n\t\tthis._map = map;\n\n\t\tif (!this._container) {\n\t\t\tthis._initElements();\n\t\t\tthis._initEvents();\n\t\t}\n\n\t\tthis.projectLatlngs();\n\t\tthis._updatePath();\n\n\t\tif (this._container) {\n\t\t\tthis._map._pathRoot.appendChild(this._container);\n\t\t}\n\n\t\tthis.fire('add');\n\n\t\tmap.on({\n\t\t\t'viewreset': this.projectLatlngs,\n\t\t\t'moveend': this._updatePath\n\t\t}, this);\n\t},\n\n\taddTo: function (map) {\n\t\tmap.addLayer(this);\n\t\treturn this;\n\t},\n\n\tonRemove: function (map) {\n\t\tmap._pathRoot.removeChild(this._container);\n\n\t\t// Need to fire remove event before we set _map to null as the event hooks might need the object\n\t\tthis.fire('remove');\n\t\tthis._map = null;\n\n\t\tif (L.Browser.vml) {\n\t\t\tthis._container = null;\n\t\t\tthis._stroke = null;\n\t\t\tthis._fill = null;\n\t\t}\n\n\t\tmap.off({\n\t\t\t'viewreset': this.projectLatlngs,\n\t\t\t'moveend': this._updatePath\n\t\t}, this);\n\t},\n\n\tprojectLatlngs: function () {\n\t\t// do all projection stuff here\n\t},\n\n\tsetStyle: function (style) {\n\t\tL.setOptions(this, style);\n\n\t\tif (this._container) {\n\t\t\tthis._updateStyle();\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tredraw: function () {\n\t\tif (this._map) {\n\t\t\tthis.projectLatlngs();\n\t\t\tthis._updatePath();\n\t\t}\n\t\treturn this;\n\t}\n});\n\nL.Map.include({\n\t_updatePathViewport: function () {\n\t\tvar p = L.Path.CLIP_PADDING,\n\t\t    size = this.getSize(),\n\t\t    panePos = L.DomUtil.getPosition(this._mapPane),\n\t\t    min = panePos.multiplyBy(-1)._subtract(size.multiplyBy(p)._round()),\n\t\t    max = min.add(size.multiplyBy(1 + p * 2)._round());\n\n\t\tthis._pathViewport = new L.Bounds(min, max);\n\t}\n});\n\n\n/*\n * Extends L.Path with SVG-specific rendering code.\n */\n\nL.Path.SVG_NS = 'http://www.w3.org/2000/svg';\n\nL.Browser.svg = !!(document.createElementNS && document.createElementNS(L.Path.SVG_NS, 'svg').createSVGRect);\n\nL.Path = L.Path.extend({\n\tstatics: {\n\t\tSVG: L.Browser.svg\n\t},\n\n\tbringToFront: function () {\n\t\tvar root = this._map._pathRoot,\n\t\t    path = this._container;\n\n\t\tif (path && root.lastChild !== path) {\n\t\t\troot.appendChild(path);\n\t\t}\n\t\treturn this;\n\t},\n\n\tbringToBack: function () {\n\t\tvar root = this._map._pathRoot,\n\t\t    path = this._container,\n\t\t    first = root.firstChild;\n\n\t\tif (path && first !== path) {\n\t\t\troot.insertBefore(path, first);\n\t\t}\n\t\treturn this;\n\t},\n\n\tgetPathString: function () {\n\t\t// form path string here\n\t},\n\n\t_createElement: function (name) {\n\t\treturn document.createElementNS(L.Path.SVG_NS, name);\n\t},\n\n\t_initElements: function () {\n\t\tthis._map._initPathRoot();\n\t\tthis._initPath();\n\t\tthis._initStyle();\n\t},\n\n\t_initPath: function () {\n\t\tthis._container = this._createElement('g');\n\n\t\tthis._path = this._createElement('path');\n\n\t\tif (this.options.className) {\n\t\t\tL.DomUtil.addClass(this._path, this.options.className);\n\t\t}\n\n\t\tthis._container.appendChild(this._path);\n\t},\n\n\t_initStyle: function () {\n\t\tif (this.options.stroke) {\n\t\t\tthis._path.setAttribute('stroke-linejoin', 'round');\n\t\t\tthis._path.setAttribute('stroke-linecap', 'round');\n\t\t}\n\t\tif (this.options.fill) {\n\t\t\tthis._path.setAttribute('fill-rule', 'evenodd');\n\t\t}\n\t\tif (this.options.pointerEvents) {\n\t\t\tthis._path.setAttribute('pointer-events', this.options.pointerEvents);\n\t\t}\n\t\tif (!this.options.clickable && !this.options.pointerEvents) {\n\t\t\tthis._path.setAttribute('pointer-events', 'none');\n\t\t}\n\t\tthis._updateStyle();\n\t},\n\n\t_updateStyle: function () {\n\t\tif (this.options.stroke) {\n\t\t\tthis._path.setAttribute('stroke', this.options.color);\n\t\t\tthis._path.setAttribute('stroke-opacity', this.options.opacity);\n\t\t\tthis._path.setAttribute('stroke-width', this.options.weight);\n\t\t\tif (this.options.dashArray) {\n\t\t\t\tthis._path.setAttribute('stroke-dasharray', this.options.dashArray);\n\t\t\t} else {\n\t\t\t\tthis._path.removeAttribute('stroke-dasharray');\n\t\t\t}\n\t\t\tif (this.options.lineCap) {\n\t\t\t\tthis._path.setAttribute('stroke-linecap', this.options.lineCap);\n\t\t\t}\n\t\t\tif (this.options.lineJoin) {\n\t\t\t\tthis._path.setAttribute('stroke-linejoin', this.options.lineJoin);\n\t\t\t}\n\t\t} else {\n\t\t\tthis._path.setAttribute('stroke', 'none');\n\t\t}\n\t\tif (this.options.fill) {\n\t\t\tthis._path.setAttribute('fill', this.options.fillColor || this.options.color);\n\t\t\tthis._path.setAttribute('fill-opacity', this.options.fillOpacity);\n\t\t} else {\n\t\t\tthis._path.setAttribute('fill', 'none');\n\t\t}\n\t},\n\n\t_updatePath: function () {\n\t\tvar str = this.getPathString();\n\t\tif (!str) {\n\t\t\t// fix webkit empty string parsing bug\n\t\t\tstr = 'M0 0';\n\t\t}\n\t\tthis._path.setAttribute('d', str);\n\t},\n\n\t// TODO remove duplication with L.Map\n\t_initEvents: function () {\n\t\tif (this.options.clickable) {\n\t\t\tif (L.Browser.svg || !L.Browser.vml) {\n\t\t\t\tL.DomUtil.addClass(this._path, 'leaflet-clickable');\n\t\t\t}\n\n\t\t\tL.DomEvent.on(this._container, 'click', this._onMouseClick, this);\n\n\t\t\tvar events = ['dblclick', 'mousedown', 'mouseover',\n\t\t\t              'mouseout', 'mousemove', 'contextmenu'];\n\t\t\tfor (var i = 0; i < events.length; i++) {\n\t\t\t\tL.DomEvent.on(this._container, events[i], this._fireMouseEvent, this);\n\t\t\t}\n\t\t}\n\t},\n\n\t_onMouseClick: function (e) {\n\t\tif (this._map.dragging && this._map.dragging.moved()) { return; }\n\n\t\tthis._fireMouseEvent(e);\n\t},\n\n\t_fireMouseEvent: function (e) {\n\t\tif (!this._map || !this.hasEventListeners(e.type)) { return; }\n\n\t\tvar map = this._map,\n\t\t    containerPoint = map.mouseEventToContainerPoint(e),\n\t\t    layerPoint = map.containerPointToLayerPoint(containerPoint),\n\t\t    latlng = map.layerPointToLatLng(layerPoint);\n\n\t\tthis.fire(e.type, {\n\t\t\tlatlng: latlng,\n\t\t\tlayerPoint: layerPoint,\n\t\t\tcontainerPoint: containerPoint,\n\t\t\toriginalEvent: e\n\t\t});\n\n\t\tif (e.type === 'contextmenu') {\n\t\t\tL.DomEvent.preventDefault(e);\n\t\t}\n\t\tif (e.type !== 'mousemove') {\n\t\t\tL.DomEvent.stopPropagation(e);\n\t\t}\n\t}\n});\n\nL.Map.include({\n\t_initPathRoot: function () {\n\t\tif (!this._pathRoot) {\n\t\t\tthis._pathRoot = L.Path.prototype._createElement('svg');\n\t\t\tthis._panes.overlayPane.appendChild(this._pathRoot);\n\n\t\t\tif (this.options.zoomAnimation && L.Browser.any3d) {\n\t\t\t\tL.DomUtil.addClass(this._pathRoot, 'leaflet-zoom-animated');\n\n\t\t\t\tthis.on({\n\t\t\t\t\t'zoomanim': this._animatePathZoom,\n\t\t\t\t\t'zoomend': this._endPathZoom\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tL.DomUtil.addClass(this._pathRoot, 'leaflet-zoom-hide');\n\t\t\t}\n\n\t\t\tthis.on('moveend', this._updateSvgViewport);\n\t\t\tthis._updateSvgViewport();\n\t\t}\n\t},\n\n\t_animatePathZoom: function (e) {\n\t\tvar scale = this.getZoomScale(e.zoom),\n\t\t    offset = this._getCenterOffset(e.center)._multiplyBy(-scale)._add(this._pathViewport.min);\n\n\t\tthis._pathRoot.style[L.DomUtil.TRANSFORM] =\n\t\t        L.DomUtil.getTranslateString(offset) + ' scale(' + scale + ') ';\n\n\t\tthis._pathZooming = true;\n\t},\n\n\t_endPathZoom: function () {\n\t\tthis._pathZooming = false;\n\t},\n\n\t_updateSvgViewport: function () {\n\n\t\tif (this._pathZooming) {\n\t\t\t// Do not update SVGs while a zoom animation is going on otherwise the animation will break.\n\t\t\t// When the zoom animation ends we will be updated again anyway\n\t\t\t// This fixes the case where you do a momentum move and zoom while the move is still ongoing.\n\t\t\treturn;\n\t\t}\n\n\t\tthis._updatePathViewport();\n\n\t\tvar vp = this._pathViewport,\n\t\t    min = vp.min,\n\t\t    max = vp.max,\n\t\t    width = max.x - min.x,\n\t\t    height = max.y - min.y,\n\t\t    root = this._pathRoot,\n\t\t    pane = this._panes.overlayPane;\n\n\t\t// Hack to make flicker on drag end on mobile webkit less irritating\n\t\tif (L.Browser.mobileWebkit) {\n\t\t\tpane.removeChild(root);\n\t\t}\n\n\t\tL.DomUtil.setPosition(root, min);\n\t\troot.setAttribute('width', width);\n\t\troot.setAttribute('height', height);\n\t\troot.setAttribute('viewBox', [min.x, min.y, width, height].join(' '));\n\n\t\tif (L.Browser.mobileWebkit) {\n\t\t\tpane.appendChild(root);\n\t\t}\n\t}\n});\n\n\n/*\n * Popup extension to L.Path (polylines, polygons, circles), adding popup-related methods.\n */\n\nL.Path.include({\n\n\tbindPopup: function (content, options) {\n\n\t\tif (content instanceof L.Popup) {\n\t\t\tthis._popup = content;\n\t\t} else {\n\t\t\tif (!this._popup || options) {\n\t\t\t\tthis._popup = new L.Popup(options, this);\n\t\t\t}\n\t\t\tthis._popup.setContent(content);\n\t\t}\n\n\t\tif (!this._popupHandlersAdded) {\n\t\t\tthis\n\t\t\t    .on('click', this._openPopup, this)\n\t\t\t    .on('remove', this.closePopup, this);\n\n\t\t\tthis._popupHandlersAdded = true;\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tunbindPopup: function () {\n\t\tif (this._popup) {\n\t\t\tthis._popup = null;\n\t\t\tthis\n\t\t\t    .off('click', this._openPopup)\n\t\t\t    .off('remove', this.closePopup);\n\n\t\t\tthis._popupHandlersAdded = false;\n\t\t}\n\t\treturn this;\n\t},\n\n\topenPopup: function (latlng) {\n\n\t\tif (this._popup) {\n\t\t\t// open the popup from one of the path's points if not specified\n\t\t\tlatlng = latlng || this._latlng ||\n\t\t\t         this._latlngs[Math.floor(this._latlngs.length / 2)];\n\n\t\t\tthis._openPopup({latlng: latlng});\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tclosePopup: function () {\n\t\tif (this._popup) {\n\t\t\tthis._popup._close();\n\t\t}\n\t\treturn this;\n\t},\n\n\t_openPopup: function (e) {\n\t\tthis._popup.setLatLng(e.latlng);\n\t\tthis._map.openPopup(this._popup);\n\t}\n});\n\n\n/*\n * Vector rendering for IE6-8 through VML.\n * Thanks to Dmitry Baranovsky and his Raphael library for inspiration!\n */\n\nL.Browser.vml = !L.Browser.svg && (function () {\n\ttry {\n\t\tvar div = document.createElement('div');\n\t\tdiv.innerHTML = '<v:shape adj=\"1\"/>';\n\n\t\tvar shape = div.firstChild;\n\t\tshape.style.behavior = 'url(#default#VML)';\n\n\t\treturn shape && (typeof shape.adj === 'object');\n\n\t} catch (e) {\n\t\treturn false;\n\t}\n}());\n\nL.Path = L.Browser.svg || !L.Browser.vml ? L.Path : L.Path.extend({\n\tstatics: {\n\t\tVML: true,\n\t\tCLIP_PADDING: 0.02\n\t},\n\n\t_createElement: (function () {\n\t\ttry {\n\t\t\tdocument.namespaces.add('lvml', 'urn:schemas-microsoft-com:vml');\n\t\t\treturn function (name) {\n\t\t\t\treturn document.createElement('<lvml:' + name + ' class=\"lvml\">');\n\t\t\t};\n\t\t} catch (e) {\n\t\t\treturn function (name) {\n\t\t\t\treturn document.createElement(\n\t\t\t\t        '<' + name + ' xmlns=\"urn:schemas-microsoft.com:vml\" class=\"lvml\">');\n\t\t\t};\n\t\t}\n\t}()),\n\n\t_initPath: function () {\n\t\tvar container = this._container = this._createElement('shape');\n\n\t\tL.DomUtil.addClass(container, 'leaflet-vml-shape' +\n\t\t\t(this.options.className ? ' ' + this.options.className : ''));\n\n\t\tif (this.options.clickable) {\n\t\t\tL.DomUtil.addClass(container, 'leaflet-clickable');\n\t\t}\n\n\t\tcontainer.coordsize = '1 1';\n\n\t\tthis._path = this._createElement('path');\n\t\tcontainer.appendChild(this._path);\n\n\t\tthis._map._pathRoot.appendChild(container);\n\t},\n\n\t_initStyle: function () {\n\t\tthis._updateStyle();\n\t},\n\n\t_updateStyle: function () {\n\t\tvar stroke = this._stroke,\n\t\t    fill = this._fill,\n\t\t    options = this.options,\n\t\t    container = this._container;\n\n\t\tcontainer.stroked = options.stroke;\n\t\tcontainer.filled = options.fill;\n\n\t\tif (options.stroke) {\n\t\t\tif (!stroke) {\n\t\t\t\tstroke = this._stroke = this._createElement('stroke');\n\t\t\t\tstroke.endcap = 'round';\n\t\t\t\tcontainer.appendChild(stroke);\n\t\t\t}\n\t\t\tstroke.weight = options.weight + 'px';\n\t\t\tstroke.color = options.color;\n\t\t\tstroke.opacity = options.opacity;\n\n\t\t\tif (options.dashArray) {\n\t\t\t\tstroke.dashStyle = L.Util.isArray(options.dashArray) ?\n\t\t\t\t    options.dashArray.join(' ') :\n\t\t\t\t    options.dashArray.replace(/( *, *)/g, ' ');\n\t\t\t} else {\n\t\t\t\tstroke.dashStyle = '';\n\t\t\t}\n\t\t\tif (options.lineCap) {\n\t\t\t\tstroke.endcap = options.lineCap.replace('butt', 'flat');\n\t\t\t}\n\t\t\tif (options.lineJoin) {\n\t\t\t\tstroke.joinstyle = options.lineJoin;\n\t\t\t}\n\n\t\t} else if (stroke) {\n\t\t\tcontainer.removeChild(stroke);\n\t\t\tthis._stroke = null;\n\t\t}\n\n\t\tif (options.fill) {\n\t\t\tif (!fill) {\n\t\t\t\tfill = this._fill = this._createElement('fill');\n\t\t\t\tcontainer.appendChild(fill);\n\t\t\t}\n\t\t\tfill.color = options.fillColor || options.color;\n\t\t\tfill.opacity = options.fillOpacity;\n\n\t\t} else if (fill) {\n\t\t\tcontainer.removeChild(fill);\n\t\t\tthis._fill = null;\n\t\t}\n\t},\n\n\t_updatePath: function () {\n\t\tvar style = this._container.style;\n\n\t\tstyle.display = 'none';\n\t\tthis._path.v = this.getPathString() + ' '; // the space fixes IE empty path string bug\n\t\tstyle.display = '';\n\t}\n});\n\nL.Map.include(L.Browser.svg || !L.Browser.vml ? {} : {\n\t_initPathRoot: function () {\n\t\tif (this._pathRoot) { return; }\n\n\t\tvar root = this._pathRoot = document.createElement('div');\n\t\troot.className = 'leaflet-vml-container';\n\t\tthis._panes.overlayPane.appendChild(root);\n\n\t\tthis.on('moveend', this._updatePathViewport);\n\t\tthis._updatePathViewport();\n\t}\n});\n\n\n/*\n * Vector rendering for all browsers that support canvas.\n */\n\nL.Browser.canvas = (function () {\n\treturn !!document.createElement('canvas').getContext;\n}());\n\nL.Path = (L.Path.SVG && !window.L_PREFER_CANVAS) || !L.Browser.canvas ? L.Path : L.Path.extend({\n\tstatics: {\n\t\t//CLIP_PADDING: 0.02, // not sure if there's a need to set it to a small value\n\t\tCANVAS: true,\n\t\tSVG: false\n\t},\n\n\tredraw: function () {\n\t\tif (this._map) {\n\t\t\tthis.projectLatlngs();\n\t\t\tthis._requestUpdate();\n\t\t}\n\t\treturn this;\n\t},\n\n\tsetStyle: function (style) {\n\t\tL.setOptions(this, style);\n\n\t\tif (this._map) {\n\t\t\tthis._updateStyle();\n\t\t\tthis._requestUpdate();\n\t\t}\n\t\treturn this;\n\t},\n\n\tonRemove: function (map) {\n\t\tmap\n\t\t    .off('viewreset', this.projectLatlngs, this)\n\t\t    .off('moveend', this._updatePath, this);\n\n\t\tif (this.options.clickable) {\n\t\t\tthis._map.off('click', this._onClick, this);\n\t\t\tthis._map.off('mousemove', this._onMouseMove, this);\n\t\t}\n\n\t\tthis._requestUpdate();\n\t\t\n\t\tthis.fire('remove');\n\t\tthis._map = null;\n\t},\n\n\t_requestUpdate: function () {\n\t\tif (this._map && !L.Path._updateRequest) {\n\t\t\tL.Path._updateRequest = L.Util.requestAnimFrame(this._fireMapMoveEnd, this._map);\n\t\t}\n\t},\n\n\t_fireMapMoveEnd: function () {\n\t\tL.Path._updateRequest = null;\n\t\tthis.fire('moveend');\n\t},\n\n\t_initElements: function () {\n\t\tthis._map._initPathRoot();\n\t\tthis._ctx = this._map._canvasCtx;\n\t},\n\n\t_updateStyle: function () {\n\t\tvar options = this.options;\n\n\t\tif (options.stroke) {\n\t\t\tthis._ctx.lineWidth = options.weight;\n\t\t\tthis._ctx.strokeStyle = options.color;\n\t\t}\n\t\tif (options.fill) {\n\t\t\tthis._ctx.fillStyle = options.fillColor || options.color;\n\t\t}\n\n\t\tif (options.lineCap) {\n\t\t\tthis._ctx.lineCap = options.lineCap;\n\t\t}\n\t\tif (options.lineJoin) {\n\t\t\tthis._ctx.lineJoin = options.lineJoin;\n\t\t}\n\t},\n\n\t_drawPath: function () {\n\t\tvar i, j, len, len2, point, drawMethod;\n\n\t\tthis._ctx.beginPath();\n\n\t\tfor (i = 0, len = this._parts.length; i < len; i++) {\n\t\t\tfor (j = 0, len2 = this._parts[i].length; j < len2; j++) {\n\t\t\t\tpoint = this._parts[i][j];\n\t\t\t\tdrawMethod = (j === 0 ? 'move' : 'line') + 'To';\n\n\t\t\t\tthis._ctx[drawMethod](point.x, point.y);\n\t\t\t}\n\t\t\t// TODO refactor ugly hack\n\t\t\tif (this instanceof L.Polygon) {\n\t\t\t\tthis._ctx.closePath();\n\t\t\t}\n\t\t}\n\t},\n\n\t_checkIfEmpty: function () {\n\t\treturn !this._parts.length;\n\t},\n\n\t_updatePath: function () {\n\t\tif (this._checkIfEmpty()) { return; }\n\n\t\tvar ctx = this._ctx,\n\t\t    options = this.options;\n\n\t\tthis._drawPath();\n\t\tctx.save();\n\t\tthis._updateStyle();\n\n\t\tif (options.fill) {\n\t\t\tctx.globalAlpha = options.fillOpacity;\n\t\t\tctx.fill(options.fillRule || 'evenodd');\n\t\t}\n\n\t\tif (options.stroke) {\n\t\t\tctx.globalAlpha = options.opacity;\n\t\t\tctx.stroke();\n\t\t}\n\n\t\tctx.restore();\n\n\t\t// TODO optimization: 1 fill/stroke for all features with equal style instead of 1 for each feature\n\t},\n\n\t_initEvents: function () {\n\t\tif (this.options.clickable) {\n\t\t\tthis._map.on('mousemove', this._onMouseMove, this);\n\t\t\tthis._map.on('click dblclick contextmenu', this._fireMouseEvent, this);\n\t\t}\n\t},\n\n\t_fireMouseEvent: function (e) {\n\t\tif (this._containsPoint(e.layerPoint)) {\n\t\t\tthis.fire(e.type, e);\n\t\t}\n\t},\n\n\t_onMouseMove: function (e) {\n\t\tif (!this._map || this._map._animatingZoom) { return; }\n\n\t\t// TODO don't do on each move\n\t\tif (this._containsPoint(e.layerPoint)) {\n\t\t\tthis._ctx.canvas.style.cursor = 'pointer';\n\t\t\tthis._mouseInside = true;\n\t\t\tthis.fire('mouseover', e);\n\n\t\t} else if (this._mouseInside) {\n\t\t\tthis._ctx.canvas.style.cursor = '';\n\t\t\tthis._mouseInside = false;\n\t\t\tthis.fire('mouseout', e);\n\t\t}\n\t}\n});\n\nL.Map.include((L.Path.SVG && !window.L_PREFER_CANVAS) || !L.Browser.canvas ? {} : {\n\t_initPathRoot: function () {\n\t\tvar root = this._pathRoot,\n\t\t    ctx;\n\n\t\tif (!root) {\n\t\t\troot = this._pathRoot = document.createElement('canvas');\n\t\t\troot.style.position = 'absolute';\n\t\t\tctx = this._canvasCtx = root.getContext('2d');\n\n\t\t\tctx.lineCap = 'round';\n\t\t\tctx.lineJoin = 'round';\n\n\t\t\tthis._panes.overlayPane.appendChild(root);\n\n\t\t\tif (this.options.zoomAnimation) {\n\t\t\t\tthis._pathRoot.className = 'leaflet-zoom-animated';\n\t\t\t\tthis.on('zoomanim', this._animatePathZoom);\n\t\t\t\tthis.on('zoomend', this._endPathZoom);\n\t\t\t}\n\t\t\tthis.on('moveend', this._updateCanvasViewport);\n\t\t\tthis._updateCanvasViewport();\n\t\t}\n\t},\n\n\t_updateCanvasViewport: function () {\n\t\t// don't redraw while zooming. See _updateSvgViewport for more details\n\t\tif (this._pathZooming) { return; }\n\t\tthis._updatePathViewport();\n\n\t\tvar vp = this._pathViewport,\n\t\t    min = vp.min,\n\t\t    size = vp.max.subtract(min),\n\t\t    root = this._pathRoot;\n\n\t\t//TODO check if this works properly on mobile webkit\n\t\tL.DomUtil.setPosition(root, min);\n\t\troot.width = size.x;\n\t\troot.height = size.y;\n\t\troot.getContext('2d').translate(-min.x, -min.y);\n\t}\n});\n\n\n/*\n * L.LineUtil contains different utility functions for line segments\n * and polylines (clipping, simplification, distances, etc.)\n */\n\n/*jshint bitwise:false */ // allow bitwise operations for this file\n\nL.LineUtil = {\n\n\t// Simplify polyline with vertex reduction and Douglas-Peucker simplification.\n\t// Improves rendering performance dramatically by lessening the number of points to draw.\n\n\tsimplify: function (/*Point[]*/ points, /*Number*/ tolerance) {\n\t\tif (!tolerance || !points.length) {\n\t\t\treturn points.slice();\n\t\t}\n\n\t\tvar sqTolerance = tolerance * tolerance;\n\n\t\t// stage 1: vertex reduction\n\t\tpoints = this._reducePoints(points, sqTolerance);\n\n\t\t// stage 2: Douglas-Peucker simplification\n\t\tpoints = this._simplifyDP(points, sqTolerance);\n\n\t\treturn points;\n\t},\n\n\t// distance from a point to a segment between two points\n\tpointToSegmentDistance:  function (/*Point*/ p, /*Point*/ p1, /*Point*/ p2) {\n\t\treturn Math.sqrt(this._sqClosestPointOnSegment(p, p1, p2, true));\n\t},\n\n\tclosestPointOnSegment: function (/*Point*/ p, /*Point*/ p1, /*Point*/ p2) {\n\t\treturn this._sqClosestPointOnSegment(p, p1, p2);\n\t},\n\n\t// Douglas-Peucker simplification, see http://en.wikipedia.org/wiki/Douglas-Peucker_algorithm\n\t_simplifyDP: function (points, sqTolerance) {\n\n\t\tvar len = points.length,\n\t\t    ArrayConstructor = typeof Uint8Array !== undefined + '' ? Uint8Array : Array,\n\t\t    markers = new ArrayConstructor(len);\n\n\t\tmarkers[0] = markers[len - 1] = 1;\n\n\t\tthis._simplifyDPStep(points, markers, sqTolerance, 0, len - 1);\n\n\t\tvar i,\n\t\t    newPoints = [];\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (markers[i]) {\n\t\t\t\tnewPoints.push(points[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn newPoints;\n\t},\n\n\t_simplifyDPStep: function (points, markers, sqTolerance, first, last) {\n\n\t\tvar maxSqDist = 0,\n\t\t    index, i, sqDist;\n\n\t\tfor (i = first + 1; i <= last - 1; i++) {\n\t\t\tsqDist = this._sqClosestPointOnSegment(points[i], points[first], points[last], true);\n\n\t\t\tif (sqDist > maxSqDist) {\n\t\t\t\tindex = i;\n\t\t\t\tmaxSqDist = sqDist;\n\t\t\t}\n\t\t}\n\n\t\tif (maxSqDist > sqTolerance) {\n\t\t\tmarkers[index] = 1;\n\n\t\t\tthis._simplifyDPStep(points, markers, sqTolerance, first, index);\n\t\t\tthis._simplifyDPStep(points, markers, sqTolerance, index, last);\n\t\t}\n\t},\n\n\t// reduce points that are too close to each other to a single point\n\t_reducePoints: function (points, sqTolerance) {\n\t\tvar reducedPoints = [points[0]];\n\n\t\tfor (var i = 1, prev = 0, len = points.length; i < len; i++) {\n\t\t\tif (this._sqDist(points[i], points[prev]) > sqTolerance) {\n\t\t\t\treducedPoints.push(points[i]);\n\t\t\t\tprev = i;\n\t\t\t}\n\t\t}\n\t\tif (prev < len - 1) {\n\t\t\treducedPoints.push(points[len - 1]);\n\t\t}\n\t\treturn reducedPoints;\n\t},\n\n\t// Cohen-Sutherland line clipping algorithm.\n\t// Used to avoid rendering parts of a polyline that are not currently visible.\n\n\tclipSegment: function (a, b, bounds, useLastCode) {\n\t\tvar codeA = useLastCode ? this._lastCode : this._getBitCode(a, bounds),\n\t\t    codeB = this._getBitCode(b, bounds),\n\n\t\t    codeOut, p, newCode;\n\n\t\t// save 2nd code to avoid calculating it on the next segment\n\t\tthis._lastCode = codeB;\n\n\t\twhile (true) {\n\t\t\t// if a,b is inside the clip window (trivial accept)\n\t\t\tif (!(codeA | codeB)) {\n\t\t\t\treturn [a, b];\n\t\t\t// if a,b is outside the clip window (trivial reject)\n\t\t\t} else if (codeA & codeB) {\n\t\t\t\treturn false;\n\t\t\t// other cases\n\t\t\t} else {\n\t\t\t\tcodeOut = codeA || codeB;\n\t\t\t\tp = this._getEdgeIntersection(a, b, codeOut, bounds);\n\t\t\t\tnewCode = this._getBitCode(p, bounds);\n\n\t\t\t\tif (codeOut === codeA) {\n\t\t\t\t\ta = p;\n\t\t\t\t\tcodeA = newCode;\n\t\t\t\t} else {\n\t\t\t\t\tb = p;\n\t\t\t\t\tcodeB = newCode;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t_getEdgeIntersection: function (a, b, code, bounds) {\n\t\tvar dx = b.x - a.x,\n\t\t    dy = b.y - a.y,\n\t\t    min = bounds.min,\n\t\t    max = bounds.max;\n\n\t\tif (code & 8) { // top\n\t\t\treturn new L.Point(a.x + dx * (max.y - a.y) / dy, max.y);\n\t\t} else if (code & 4) { // bottom\n\t\t\treturn new L.Point(a.x + dx * (min.y - a.y) / dy, min.y);\n\t\t} else if (code & 2) { // right\n\t\t\treturn new L.Point(max.x, a.y + dy * (max.x - a.x) / dx);\n\t\t} else if (code & 1) { // left\n\t\t\treturn new L.Point(min.x, a.y + dy * (min.x - a.x) / dx);\n\t\t}\n\t},\n\n\t_getBitCode: function (/*Point*/ p, bounds) {\n\t\tvar code = 0;\n\n\t\tif (p.x < bounds.min.x) { // left\n\t\t\tcode |= 1;\n\t\t} else if (p.x > bounds.max.x) { // right\n\t\t\tcode |= 2;\n\t\t}\n\t\tif (p.y < bounds.min.y) { // bottom\n\t\t\tcode |= 4;\n\t\t} else if (p.y > bounds.max.y) { // top\n\t\t\tcode |= 8;\n\t\t}\n\n\t\treturn code;\n\t},\n\n\t// square distance (to avoid unnecessary Math.sqrt calls)\n\t_sqDist: function (p1, p2) {\n\t\tvar dx = p2.x - p1.x,\n\t\t    dy = p2.y - p1.y;\n\t\treturn dx * dx + dy * dy;\n\t},\n\n\t// return closest point on segment or distance to that point\n\t_sqClosestPointOnSegment: function (p, p1, p2, sqDist) {\n\t\tvar x = p1.x,\n\t\t    y = p1.y,\n\t\t    dx = p2.x - x,\n\t\t    dy = p2.y - y,\n\t\t    dot = dx * dx + dy * dy,\n\t\t    t;\n\n\t\tif (dot > 0) {\n\t\t\tt = ((p.x - x) * dx + (p.y - y) * dy) / dot;\n\n\t\t\tif (t > 1) {\n\t\t\t\tx = p2.x;\n\t\t\t\ty = p2.y;\n\t\t\t} else if (t > 0) {\n\t\t\t\tx += dx * t;\n\t\t\t\ty += dy * t;\n\t\t\t}\n\t\t}\n\n\t\tdx = p.x - x;\n\t\tdy = p.y - y;\n\n\t\treturn sqDist ? dx * dx + dy * dy : new L.Point(x, y);\n\t}\n};\n\n\n/*\n * L.Polyline is used to display polylines on a map.\n */\n\nL.Polyline = L.Path.extend({\n\tinitialize: function (latlngs, options) {\n\t\tL.Path.prototype.initialize.call(this, options);\n\n\t\tthis._latlngs = this._convertLatLngs(latlngs);\n\t},\n\n\toptions: {\n\t\t// how much to simplify the polyline on each zoom level\n\t\t// more = better performance and smoother look, less = more accurate\n\t\tsmoothFactor: 1.0,\n\t\tnoClip: false\n\t},\n\n\tprojectLatlngs: function () {\n\t\tthis._originalPoints = [];\n\n\t\tfor (var i = 0, len = this._latlngs.length; i < len; i++) {\n\t\t\tthis._originalPoints[i] = this._map.latLngToLayerPoint(this._latlngs[i]);\n\t\t}\n\t},\n\n\tgetPathString: function () {\n\t\tfor (var i = 0, len = this._parts.length, str = ''; i < len; i++) {\n\t\t\tstr += this._getPathPartStr(this._parts[i]);\n\t\t}\n\t\treturn str;\n\t},\n\n\tgetLatLngs: function () {\n\t\treturn this._latlngs;\n\t},\n\n\tsetLatLngs: function (latlngs) {\n\t\tthis._latlngs = this._convertLatLngs(latlngs);\n\t\treturn this.redraw();\n\t},\n\n\taddLatLng: function (latlng) {\n\t\tthis._latlngs.push(L.latLng(latlng));\n\t\treturn this.redraw();\n\t},\n\n\tspliceLatLngs: function () { // (Number index, Number howMany)\n\t\tvar removed = [].splice.apply(this._latlngs, arguments);\n\t\tthis._convertLatLngs(this._latlngs, true);\n\t\tthis.redraw();\n\t\treturn removed;\n\t},\n\n\tclosestLayerPoint: function (p) {\n\t\tvar minDistance = Infinity, parts = this._parts, p1, p2, minPoint = null;\n\n\t\tfor (var j = 0, jLen = parts.length; j < jLen; j++) {\n\t\t\tvar points = parts[j];\n\t\t\tfor (var i = 1, len = points.length; i < len; i++) {\n\t\t\t\tp1 = points[i - 1];\n\t\t\t\tp2 = points[i];\n\t\t\t\tvar sqDist = L.LineUtil._sqClosestPointOnSegment(p, p1, p2, true);\n\t\t\t\tif (sqDist < minDistance) {\n\t\t\t\t\tminDistance = sqDist;\n\t\t\t\t\tminPoint = L.LineUtil._sqClosestPointOnSegment(p, p1, p2);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (minPoint) {\n\t\t\tminPoint.distance = Math.sqrt(minDistance);\n\t\t}\n\t\treturn minPoint;\n\t},\n\n\tgetBounds: function () {\n\t\treturn new L.LatLngBounds(this.getLatLngs());\n\t},\n\n\t_convertLatLngs: function (latlngs, overwrite) {\n\t\tvar i, len, target = overwrite ? latlngs : [];\n\n\t\tfor (i = 0, len = latlngs.length; i < len; i++) {\n\t\t\tif (L.Util.isArray(latlngs[i]) && typeof latlngs[i][0] !== 'number') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttarget[i] = L.latLng(latlngs[i]);\n\t\t}\n\t\treturn target;\n\t},\n\n\t_initEvents: function () {\n\t\tL.Path.prototype._initEvents.call(this);\n\t},\n\n\t_getPathPartStr: function (points) {\n\t\tvar round = L.Path.VML;\n\n\t\tfor (var j = 0, len2 = points.length, str = '', p; j < len2; j++) {\n\t\t\tp = points[j];\n\t\t\tif (round) {\n\t\t\t\tp._round();\n\t\t\t}\n\t\t\tstr += (j ? 'L' : 'M') + p.x + ' ' + p.y;\n\t\t}\n\t\treturn str;\n\t},\n\n\t_clipPoints: function () {\n\t\tvar points = this._originalPoints,\n\t\t    len = points.length,\n\t\t    i, k, segment;\n\n\t\tif (this.options.noClip) {\n\t\t\tthis._parts = [points];\n\t\t\treturn;\n\t\t}\n\n\t\tthis._parts = [];\n\n\t\tvar parts = this._parts,\n\t\t    vp = this._map._pathViewport,\n\t\t    lu = L.LineUtil;\n\n\t\tfor (i = 0, k = 0; i < len - 1; i++) {\n\t\t\tsegment = lu.clipSegment(points[i], points[i + 1], vp, i);\n\t\t\tif (!segment) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tparts[k] = parts[k] || [];\n\t\t\tparts[k].push(segment[0]);\n\n\t\t\t// if segment goes out of screen, or it's the last one, it's the end of the line part\n\t\t\tif ((segment[1] !== points[i + 1]) || (i === len - 2)) {\n\t\t\t\tparts[k].push(segment[1]);\n\t\t\t\tk++;\n\t\t\t}\n\t\t}\n\t},\n\n\t// simplify each clipped part of the polyline\n\t_simplifyPoints: function () {\n\t\tvar parts = this._parts,\n\t\t    lu = L.LineUtil;\n\n\t\tfor (var i = 0, len = parts.length; i < len; i++) {\n\t\t\tparts[i] = lu.simplify(parts[i], this.options.smoothFactor);\n\t\t}\n\t},\n\n\t_updatePath: function () {\n\t\tif (!this._map) { return; }\n\n\t\tthis._clipPoints();\n\t\tthis._simplifyPoints();\n\n\t\tL.Path.prototype._updatePath.call(this);\n\t}\n});\n\nL.polyline = function (latlngs, options) {\n\treturn new L.Polyline(latlngs, options);\n};\n\n\n/*\n * L.PolyUtil contains utility functions for polygons (clipping, etc.).\n */\n\n/*jshint bitwise:false */ // allow bitwise operations here\n\nL.PolyUtil = {};\n\n/*\n * Sutherland-Hodgeman polygon clipping algorithm.\n * Used to avoid rendering parts of a polygon that are not currently visible.\n */\nL.PolyUtil.clipPolygon = function (points, bounds) {\n\tvar clippedPoints,\n\t    edges = [1, 4, 2, 8],\n\t    i, j, k,\n\t    a, b,\n\t    len, edge, p,\n\t    lu = L.LineUtil;\n\n\tfor (i = 0, len = points.length; i < len; i++) {\n\t\tpoints[i]._code = lu._getBitCode(points[i], bounds);\n\t}\n\n\t// for each edge (left, bottom, right, top)\n\tfor (k = 0; k < 4; k++) {\n\t\tedge = edges[k];\n\t\tclippedPoints = [];\n\n\t\tfor (i = 0, len = points.length, j = len - 1; i < len; j = i++) {\n\t\t\ta = points[i];\n\t\t\tb = points[j];\n\n\t\t\t// if a is inside the clip window\n\t\t\tif (!(a._code & edge)) {\n\t\t\t\t// if b is outside the clip window (a->b goes out of screen)\n\t\t\t\tif (b._code & edge) {\n\t\t\t\t\tp = lu._getEdgeIntersection(b, a, edge, bounds);\n\t\t\t\t\tp._code = lu._getBitCode(p, bounds);\n\t\t\t\t\tclippedPoints.push(p);\n\t\t\t\t}\n\t\t\t\tclippedPoints.push(a);\n\n\t\t\t// else if b is inside the clip window (a->b enters the screen)\n\t\t\t} else if (!(b._code & edge)) {\n\t\t\t\tp = lu._getEdgeIntersection(b, a, edge, bounds);\n\t\t\t\tp._code = lu._getBitCode(p, bounds);\n\t\t\t\tclippedPoints.push(p);\n\t\t\t}\n\t\t}\n\t\tpoints = clippedPoints;\n\t}\n\n\treturn points;\n};\n\n\n/*\n * L.Polygon is used to display polygons on a map.\n */\n\nL.Polygon = L.Polyline.extend({\n\toptions: {\n\t\tfill: true\n\t},\n\n\tinitialize: function (latlngs, options) {\n\t\tL.Polyline.prototype.initialize.call(this, latlngs, options);\n\t\tthis._initWithHoles(latlngs);\n\t},\n\n\t_initWithHoles: function (latlngs) {\n\t\tvar i, len, hole;\n\t\tif (latlngs && L.Util.isArray(latlngs[0]) && (typeof latlngs[0][0] !== 'number')) {\n\t\t\tthis._latlngs = this._convertLatLngs(latlngs[0]);\n\t\t\tthis._holes = latlngs.slice(1);\n\n\t\t\tfor (i = 0, len = this._holes.length; i < len; i++) {\n\t\t\t\thole = this._holes[i] = this._convertLatLngs(this._holes[i]);\n\t\t\t\tif (hole[0].equals(hole[hole.length - 1])) {\n\t\t\t\t\thole.pop();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// filter out last point if its equal to the first one\n\t\tlatlngs = this._latlngs;\n\n\t\tif (latlngs.length >= 2 && latlngs[0].equals(latlngs[latlngs.length - 1])) {\n\t\t\tlatlngs.pop();\n\t\t}\n\t},\n\n\tprojectLatlngs: function () {\n\t\tL.Polyline.prototype.projectLatlngs.call(this);\n\n\t\t// project polygon holes points\n\t\t// TODO move this logic to Polyline to get rid of duplication\n\t\tthis._holePoints = [];\n\n\t\tif (!this._holes) { return; }\n\n\t\tvar i, j, len, len2;\n\n\t\tfor (i = 0, len = this._holes.length; i < len; i++) {\n\t\t\tthis._holePoints[i] = [];\n\n\t\t\tfor (j = 0, len2 = this._holes[i].length; j < len2; j++) {\n\t\t\t\tthis._holePoints[i][j] = this._map.latLngToLayerPoint(this._holes[i][j]);\n\t\t\t}\n\t\t}\n\t},\n\n\tsetLatLngs: function (latlngs) {\n\t\tif (latlngs && L.Util.isArray(latlngs[0]) && (typeof latlngs[0][0] !== 'number')) {\n\t\t\tthis._initWithHoles(latlngs);\n\t\t\treturn this.redraw();\n\t\t} else {\n\t\t\treturn L.Polyline.prototype.setLatLngs.call(this, latlngs);\n\t\t}\n\t},\n\n\t_clipPoints: function () {\n\t\tvar points = this._originalPoints,\n\t\t    newParts = [];\n\n\t\tthis._parts = [points].concat(this._holePoints);\n\n\t\tif (this.options.noClip) { return; }\n\n\t\tfor (var i = 0, len = this._parts.length; i < len; i++) {\n\t\t\tvar clipped = L.PolyUtil.clipPolygon(this._parts[i], this._map._pathViewport);\n\t\t\tif (clipped.length) {\n\t\t\t\tnewParts.push(clipped);\n\t\t\t}\n\t\t}\n\n\t\tthis._parts = newParts;\n\t},\n\n\t_getPathPartStr: function (points) {\n\t\tvar str = L.Polyline.prototype._getPathPartStr.call(this, points);\n\t\treturn str + (L.Browser.svg ? 'z' : 'x');\n\t}\n});\n\nL.polygon = function (latlngs, options) {\n\treturn new L.Polygon(latlngs, options);\n};\n\n\n/*\n * Contains L.MultiPolyline and L.MultiPolygon layers.\n */\n\n(function () {\n\tfunction createMulti(Klass) {\n\n\t\treturn L.FeatureGroup.extend({\n\n\t\t\tinitialize: function (latlngs, options) {\n\t\t\t\tthis._layers = {};\n\t\t\t\tthis._options = options;\n\t\t\t\tthis.setLatLngs(latlngs);\n\t\t\t},\n\n\t\t\tsetLatLngs: function (latlngs) {\n\t\t\t\tvar i = 0,\n\t\t\t\t    len = latlngs.length;\n\n\t\t\t\tthis.eachLayer(function (layer) {\n\t\t\t\t\tif (i < len) {\n\t\t\t\t\t\tlayer.setLatLngs(latlngs[i++]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.removeLayer(layer);\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\n\t\t\t\twhile (i < len) {\n\t\t\t\t\tthis.addLayer(new Klass(latlngs[i++], this._options));\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\tgetLatLngs: function () {\n\t\t\t\tvar latlngs = [];\n\n\t\t\t\tthis.eachLayer(function (layer) {\n\t\t\t\t\tlatlngs.push(layer.getLatLngs());\n\t\t\t\t});\n\n\t\t\t\treturn latlngs;\n\t\t\t}\n\t\t});\n\t}\n\n\tL.MultiPolyline = createMulti(L.Polyline);\n\tL.MultiPolygon = createMulti(L.Polygon);\n\n\tL.multiPolyline = function (latlngs, options) {\n\t\treturn new L.MultiPolyline(latlngs, options);\n\t};\n\n\tL.multiPolygon = function (latlngs, options) {\n\t\treturn new L.MultiPolygon(latlngs, options);\n\t};\n}());\n\n\n/*\n * L.Rectangle extends Polygon and creates a rectangle when passed a LatLngBounds object.\n */\n\nL.Rectangle = L.Polygon.extend({\n\tinitialize: function (latLngBounds, options) {\n\t\tL.Polygon.prototype.initialize.call(this, this._boundsToLatLngs(latLngBounds), options);\n\t},\n\n\tsetBounds: function (latLngBounds) {\n\t\tthis.setLatLngs(this._boundsToLatLngs(latLngBounds));\n\t},\n\n\t_boundsToLatLngs: function (latLngBounds) {\n\t\tlatLngBounds = L.latLngBounds(latLngBounds);\n\t\treturn [\n\t\t\tlatLngBounds.getSouthWest(),\n\t\t\tlatLngBounds.getNorthWest(),\n\t\t\tlatLngBounds.getNorthEast(),\n\t\t\tlatLngBounds.getSouthEast()\n\t\t];\n\t}\n});\n\nL.rectangle = function (latLngBounds, options) {\n\treturn new L.Rectangle(latLngBounds, options);\n};\n\n\n/*\n * L.Circle is a circle overlay (with a certain radius in meters).\n */\n\nL.Circle = L.Path.extend({\n\tinitialize: function (latlng, radius, options) {\n\t\tL.Path.prototype.initialize.call(this, options);\n\n\t\tthis._latlng = L.latLng(latlng);\n\t\tthis._mRadius = radius;\n\t},\n\n\toptions: {\n\t\tfill: true\n\t},\n\n\tsetLatLng: function (latlng) {\n\t\tthis._latlng = L.latLng(latlng);\n\t\treturn this.redraw();\n\t},\n\n\tsetRadius: function (radius) {\n\t\tthis._mRadius = radius;\n\t\treturn this.redraw();\n\t},\n\n\tprojectLatlngs: function () {\n\t\tvar lngRadius = this._getLngRadius(),\n\t\t    latlng = this._latlng,\n\t\t    pointLeft = this._map.latLngToLayerPoint([latlng.lat, latlng.lng - lngRadius]);\n\n\t\tthis._point = this._map.latLngToLayerPoint(latlng);\n\t\tthis._radius = Math.max(this._point.x - pointLeft.x, 1);\n\t},\n\n\tgetBounds: function () {\n\t\tvar lngRadius = this._getLngRadius(),\n\t\t    latRadius = (this._mRadius / 40075017) * 360,\n\t\t    latlng = this._latlng;\n\n\t\treturn new L.LatLngBounds(\n\t\t        [latlng.lat - latRadius, latlng.lng - lngRadius],\n\t\t        [latlng.lat + latRadius, latlng.lng + lngRadius]);\n\t},\n\n\tgetLatLng: function () {\n\t\treturn this._latlng;\n\t},\n\n\tgetPathString: function () {\n\t\tvar p = this._point,\n\t\t    r = this._radius;\n\n\t\tif (this._checkIfEmpty()) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (L.Browser.svg) {\n\t\t\treturn 'M' + p.x + ',' + (p.y - r) +\n\t\t\t       'A' + r + ',' + r + ',0,1,1,' +\n\t\t\t       (p.x - 0.1) + ',' + (p.y - r) + ' z';\n\t\t} else {\n\t\t\tp._round();\n\t\t\tr = Math.round(r);\n\t\t\treturn 'AL ' + p.x + ',' + p.y + ' ' + r + ',' + r + ' 0,' + (65535 * 360);\n\t\t}\n\t},\n\n\tgetRadius: function () {\n\t\treturn this._mRadius;\n\t},\n\n\t// TODO Earth hardcoded, move into projection code!\n\n\t_getLatRadius: function () {\n\t\treturn (this._mRadius / 40075017) * 360;\n\t},\n\n\t_getLngRadius: function () {\n\t\treturn this._getLatRadius() / Math.cos(L.LatLng.DEG_TO_RAD * this._latlng.lat);\n\t},\n\n\t_checkIfEmpty: function () {\n\t\tif (!this._map) {\n\t\t\treturn false;\n\t\t}\n\t\tvar vp = this._map._pathViewport,\n\t\t    r = this._radius,\n\t\t    p = this._point;\n\n\t\treturn p.x - r > vp.max.x || p.y - r > vp.max.y ||\n\t\t       p.x + r < vp.min.x || p.y + r < vp.min.y;\n\t}\n});\n\nL.circle = function (latlng, radius, options) {\n\treturn new L.Circle(latlng, radius, options);\n};\n\n\n/*\n * L.CircleMarker is a circle overlay with a permanent pixel radius.\n */\n\nL.CircleMarker = L.Circle.extend({\n\toptions: {\n\t\tradius: 10,\n\t\tweight: 2\n\t},\n\n\tinitialize: function (latlng, options) {\n\t\tL.Circle.prototype.initialize.call(this, latlng, null, options);\n\t\tthis._radius = this.options.radius;\n\t},\n\n\tprojectLatlngs: function () {\n\t\tthis._point = this._map.latLngToLayerPoint(this._latlng);\n\t},\n\n\t_updateStyle : function () {\n\t\tL.Circle.prototype._updateStyle.call(this);\n\t\tthis.setRadius(this.options.radius);\n\t},\n\n\tsetLatLng: function (latlng) {\n\t\tL.Circle.prototype.setLatLng.call(this, latlng);\n\t\tif (this._popup && this._popup._isOpen) {\n\t\t\tthis._popup.setLatLng(latlng);\n\t\t}\n\t\treturn this;\n\t},\n\n\tsetRadius: function (radius) {\n\t\tthis.options.radius = this._radius = radius;\n\t\treturn this.redraw();\n\t},\n\n\tgetRadius: function () {\n\t\treturn this._radius;\n\t}\n});\n\nL.circleMarker = function (latlng, options) {\n\treturn new L.CircleMarker(latlng, options);\n};\n\n\n/*\n * Extends L.Polyline to be able to manually detect clicks on Canvas-rendered polylines.\n */\n\nL.Polyline.include(!L.Path.CANVAS ? {} : {\n\t_containsPoint: function (p, closed) {\n\t\tvar i, j, k, len, len2, dist, part,\n\t\t    w = this.options.weight / 2;\n\n\t\tif (L.Browser.touch) {\n\t\t\tw += 10; // polyline click tolerance on touch devices\n\t\t}\n\n\t\tfor (i = 0, len = this._parts.length; i < len; i++) {\n\t\t\tpart = this._parts[i];\n\t\t\tfor (j = 0, len2 = part.length, k = len2 - 1; j < len2; k = j++) {\n\t\t\t\tif (!closed && (j === 0)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tdist = L.LineUtil.pointToSegmentDistance(p, part[k], part[j]);\n\n\t\t\t\tif (dist <= w) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n});\n\n\n/*\n * Extends L.Polygon to be able to manually detect clicks on Canvas-rendered polygons.\n */\n\nL.Polygon.include(!L.Path.CANVAS ? {} : {\n\t_containsPoint: function (p) {\n\t\tvar inside = false,\n\t\t    part, p1, p2,\n\t\t    i, j, k,\n\t\t    len, len2;\n\n\t\t// TODO optimization: check if within bounds first\n\n\t\tif (L.Polyline.prototype._containsPoint.call(this, p, true)) {\n\t\t\t// click on polygon border\n\t\t\treturn true;\n\t\t}\n\n\t\t// ray casting algorithm for detecting if point is in polygon\n\n\t\tfor (i = 0, len = this._parts.length; i < len; i++) {\n\t\t\tpart = this._parts[i];\n\n\t\t\tfor (j = 0, len2 = part.length, k = len2 - 1; j < len2; k = j++) {\n\t\t\t\tp1 = part[j];\n\t\t\t\tp2 = part[k];\n\n\t\t\t\tif (((p1.y > p.y) !== (p2.y > p.y)) &&\n\t\t\t\t\t\t(p.x < (p2.x - p1.x) * (p.y - p1.y) / (p2.y - p1.y) + p1.x)) {\n\t\t\t\t\tinside = !inside;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn inside;\n\t}\n});\n\n\n/*\n * Extends L.Circle with Canvas-specific code.\n */\n\nL.Circle.include(!L.Path.CANVAS ? {} : {\n\t_drawPath: function () {\n\t\tvar p = this._point;\n\t\tthis._ctx.beginPath();\n\t\tthis._ctx.arc(p.x, p.y, this._radius, 0, Math.PI * 2, false);\n\t},\n\n\t_containsPoint: function (p) {\n\t\tvar center = this._point,\n\t\t    w2 = this.options.stroke ? this.options.weight / 2 : 0;\n\n\t\treturn (p.distanceTo(center) <= this._radius + w2);\n\t}\n});\n\n\n/*\n * CircleMarker canvas specific drawing parts.\n */\n\nL.CircleMarker.include(!L.Path.CANVAS ? {} : {\n\t_updateStyle: function () {\n\t\tL.Path.prototype._updateStyle.call(this);\n\t}\n});\n\n\n/*\n * L.GeoJSON turns any GeoJSON data into a Leaflet layer.\n */\n\nL.GeoJSON = L.FeatureGroup.extend({\n\n\tinitialize: function (geojson, options) {\n\t\tL.setOptions(this, options);\n\n\t\tthis._layers = {};\n\n\t\tif (geojson) {\n\t\t\tthis.addData(geojson);\n\t\t}\n\t},\n\n\taddData: function (geojson) {\n\t\tvar features = L.Util.isArray(geojson) ? geojson : geojson.features,\n\t\t    i, len, feature;\n\n\t\tif (features) {\n\t\t\tfor (i = 0, len = features.length; i < len; i++) {\n\t\t\t\t// Only add this if geometry or geometries are set and not null\n\t\t\t\tfeature = features[i];\n\t\t\t\tif (feature.geometries || feature.geometry || feature.features || feature.coordinates) {\n\t\t\t\t\tthis.addData(features[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\n\t\tvar options = this.options;\n\n\t\tif (options.filter && !options.filter(geojson)) { return; }\n\n\t\tvar layer = L.GeoJSON.geometryToLayer(geojson, options.pointToLayer, options.coordsToLatLng, options);\n\t\tlayer.feature = L.GeoJSON.asFeature(geojson);\n\n\t\tlayer.defaultOptions = layer.options;\n\t\tthis.resetStyle(layer);\n\n\t\tif (options.onEachFeature) {\n\t\t\toptions.onEachFeature(geojson, layer);\n\t\t}\n\n\t\treturn this.addLayer(layer);\n\t},\n\n\tresetStyle: function (layer) {\n\t\tvar style = this.options.style;\n\t\tif (style) {\n\t\t\t// reset any custom styles\n\t\t\tL.Util.extend(layer.options, layer.defaultOptions);\n\n\t\t\tthis._setLayerStyle(layer, style);\n\t\t}\n\t},\n\n\tsetStyle: function (style) {\n\t\tthis.eachLayer(function (layer) {\n\t\t\tthis._setLayerStyle(layer, style);\n\t\t}, this);\n\t},\n\n\t_setLayerStyle: function (layer, style) {\n\t\tif (typeof style === 'function') {\n\t\t\tstyle = style(layer.feature);\n\t\t}\n\t\tif (layer.setStyle) {\n\t\t\tlayer.setStyle(style);\n\t\t}\n\t}\n});\n\nL.extend(L.GeoJSON, {\n\tgeometryToLayer: function (geojson, pointToLayer, coordsToLatLng, vectorOptions) {\n\t\tvar geometry = geojson.type === 'Feature' ? geojson.geometry : geojson,\n\t\t    coords = geometry.coordinates,\n\t\t    layers = [],\n\t\t    latlng, latlngs, i, len;\n\n\t\tcoordsToLatLng = coordsToLatLng || this.coordsToLatLng;\n\n\t\tswitch (geometry.type) {\n\t\tcase 'Point':\n\t\t\tlatlng = coordsToLatLng(coords);\n\t\t\treturn pointToLayer ? pointToLayer(geojson, latlng) : new L.Marker(latlng);\n\n\t\tcase 'MultiPoint':\n\t\t\tfor (i = 0, len = coords.length; i < len; i++) {\n\t\t\t\tlatlng = coordsToLatLng(coords[i]);\n\t\t\t\tlayers.push(pointToLayer ? pointToLayer(geojson, latlng) : new L.Marker(latlng));\n\t\t\t}\n\t\t\treturn new L.FeatureGroup(layers);\n\n\t\tcase 'LineString':\n\t\t\tlatlngs = this.coordsToLatLngs(coords, 0, coordsToLatLng);\n\t\t\treturn new L.Polyline(latlngs, vectorOptions);\n\n\t\tcase 'Polygon':\n\t\t\tif (coords.length === 2 && !coords[1].length) {\n\t\t\t\tthrow new Error('Invalid GeoJSON object.');\n\t\t\t}\n\t\t\tlatlngs = this.coordsToLatLngs(coords, 1, coordsToLatLng);\n\t\t\treturn new L.Polygon(latlngs, vectorOptions);\n\n\t\tcase 'MultiLineString':\n\t\t\tlatlngs = this.coordsToLatLngs(coords, 1, coordsToLatLng);\n\t\t\treturn new L.MultiPolyline(latlngs, vectorOptions);\n\n\t\tcase 'MultiPolygon':\n\t\t\tlatlngs = this.coordsToLatLngs(coords, 2, coordsToLatLng);\n\t\t\treturn new L.MultiPolygon(latlngs, vectorOptions);\n\n\t\tcase 'GeometryCollection':\n\t\t\tfor (i = 0, len = geometry.geometries.length; i < len; i++) {\n\n\t\t\t\tlayers.push(this.geometryToLayer({\n\t\t\t\t\tgeometry: geometry.geometries[i],\n\t\t\t\t\ttype: 'Feature',\n\t\t\t\t\tproperties: geojson.properties\n\t\t\t\t}, pointToLayer, coordsToLatLng, vectorOptions));\n\t\t\t}\n\t\t\treturn new L.FeatureGroup(layers);\n\n\t\tdefault:\n\t\t\tthrow new Error('Invalid GeoJSON object.');\n\t\t}\n\t},\n\n\tcoordsToLatLng: function (coords) { // (Array[, Boolean]) -> LatLng\n\t\treturn new L.LatLng(coords[1], coords[0], coords[2]);\n\t},\n\n\tcoordsToLatLngs: function (coords, levelsDeep, coordsToLatLng) { // (Array[, Number, Function]) -> Array\n\t\tvar latlng, i, len,\n\t\t    latlngs = [];\n\n\t\tfor (i = 0, len = coords.length; i < len; i++) {\n\t\t\tlatlng = levelsDeep ?\n\t\t\t        this.coordsToLatLngs(coords[i], levelsDeep - 1, coordsToLatLng) :\n\t\t\t        (coordsToLatLng || this.coordsToLatLng)(coords[i]);\n\n\t\t\tlatlngs.push(latlng);\n\t\t}\n\n\t\treturn latlngs;\n\t},\n\n\tlatLngToCoords: function (latlng) {\n\t\tvar coords = [latlng.lng, latlng.lat];\n\n\t\tif (latlng.alt !== undefined) {\n\t\t\tcoords.push(latlng.alt);\n\t\t}\n\t\treturn coords;\n\t},\n\n\tlatLngsToCoords: function (latLngs) {\n\t\tvar coords = [];\n\n\t\tfor (var i = 0, len = latLngs.length; i < len; i++) {\n\t\t\tcoords.push(L.GeoJSON.latLngToCoords(latLngs[i]));\n\t\t}\n\n\t\treturn coords;\n\t},\n\n\tgetFeature: function (layer, newGeometry) {\n\t\treturn layer.feature ? L.extend({}, layer.feature, {geometry: newGeometry}) : L.GeoJSON.asFeature(newGeometry);\n\t},\n\n\tasFeature: function (geoJSON) {\n\t\tif (geoJSON.type === 'Feature') {\n\t\t\treturn geoJSON;\n\t\t}\n\n\t\treturn {\n\t\t\ttype: 'Feature',\n\t\t\tproperties: {},\n\t\t\tgeometry: geoJSON\n\t\t};\n\t}\n});\n\nvar PointToGeoJSON = {\n\ttoGeoJSON: function () {\n\t\treturn L.GeoJSON.getFeature(this, {\n\t\t\ttype: 'Point',\n\t\t\tcoordinates: L.GeoJSON.latLngToCoords(this.getLatLng())\n\t\t});\n\t}\n};\n\nL.Marker.include(PointToGeoJSON);\nL.Circle.include(PointToGeoJSON);\nL.CircleMarker.include(PointToGeoJSON);\n\nL.Polyline.include({\n\ttoGeoJSON: function () {\n\t\treturn L.GeoJSON.getFeature(this, {\n\t\t\ttype: 'LineString',\n\t\t\tcoordinates: L.GeoJSON.latLngsToCoords(this.getLatLngs())\n\t\t});\n\t}\n});\n\nL.Polygon.include({\n\ttoGeoJSON: function () {\n\t\tvar coords = [L.GeoJSON.latLngsToCoords(this.getLatLngs())],\n\t\t    i, len, hole;\n\n\t\tcoords[0].push(coords[0][0]);\n\n\t\tif (this._holes) {\n\t\t\tfor (i = 0, len = this._holes.length; i < len; i++) {\n\t\t\t\thole = L.GeoJSON.latLngsToCoords(this._holes[i]);\n\t\t\t\thole.push(hole[0]);\n\t\t\t\tcoords.push(hole);\n\t\t\t}\n\t\t}\n\n\t\treturn L.GeoJSON.getFeature(this, {\n\t\t\ttype: 'Polygon',\n\t\t\tcoordinates: coords\n\t\t});\n\t}\n});\n\n(function () {\n\tfunction multiToGeoJSON(type) {\n\t\treturn function () {\n\t\t\tvar coords = [];\n\n\t\t\tthis.eachLayer(function (layer) {\n\t\t\t\tcoords.push(layer.toGeoJSON().geometry.coordinates);\n\t\t\t});\n\n\t\t\treturn L.GeoJSON.getFeature(this, {\n\t\t\t\ttype: type,\n\t\t\t\tcoordinates: coords\n\t\t\t});\n\t\t};\n\t}\n\n\tL.MultiPolyline.include({toGeoJSON: multiToGeoJSON('MultiLineString')});\n\tL.MultiPolygon.include({toGeoJSON: multiToGeoJSON('MultiPolygon')});\n\n\tL.LayerGroup.include({\n\t\ttoGeoJSON: function () {\n\n\t\t\tvar geometry = this.feature && this.feature.geometry,\n\t\t\t\tjsons = [],\n\t\t\t\tjson;\n\n\t\t\tif (geometry && geometry.type === 'MultiPoint') {\n\t\t\t\treturn multiToGeoJSON('MultiPoint').call(this);\n\t\t\t}\n\n\t\t\tvar isGeometryCollection = geometry && geometry.type === 'GeometryCollection';\n\n\t\t\tthis.eachLayer(function (layer) {\n\t\t\t\tif (layer.toGeoJSON) {\n\t\t\t\t\tjson = layer.toGeoJSON();\n\t\t\t\t\tjsons.push(isGeometryCollection ? json.geometry : L.GeoJSON.asFeature(json));\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (isGeometryCollection) {\n\t\t\t\treturn L.GeoJSON.getFeature(this, {\n\t\t\t\t\tgeometries: jsons,\n\t\t\t\t\ttype: 'GeometryCollection'\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\ttype: 'FeatureCollection',\n\t\t\t\tfeatures: jsons\n\t\t\t};\n\t\t}\n\t});\n}());\n\nL.geoJson = function (geojson, options) {\n\treturn new L.GeoJSON(geojson, options);\n};\n\n\n/*\n * L.DomEvent contains functions for working with DOM events.\n */\n\nL.DomEvent = {\n\t/* inspired by John Resig, Dean Edwards and YUI addEvent implementations */\n\taddListener: function (obj, type, fn, context) { // (HTMLElement, String, Function[, Object])\n\n\t\tvar id = L.stamp(fn),\n\t\t    key = '_leaflet_' + type + id,\n\t\t    handler, originalHandler, newType;\n\n\t\tif (obj[key]) { return this; }\n\n\t\thandler = function (e) {\n\t\t\treturn fn.call(context || obj, e || L.DomEvent._getEvent());\n\t\t};\n\n\t\tif (L.Browser.pointer && type.indexOf('touch') === 0) {\n\t\t\treturn this.addPointerListener(obj, type, handler, id);\n\t\t}\n\t\tif (L.Browser.touch && (type === 'dblclick') && this.addDoubleTapListener) {\n\t\t\tthis.addDoubleTapListener(obj, handler, id);\n\t\t}\n\n\t\tif ('addEventListener' in obj) {\n\n\t\t\tif (type === 'mousewheel') {\n\t\t\t\tobj.addEventListener('DOMMouseScroll', handler, false);\n\t\t\t\tobj.addEventListener(type, handler, false);\n\n\t\t\t} else if ((type === 'mouseenter') || (type === 'mouseleave')) {\n\n\t\t\t\toriginalHandler = handler;\n\t\t\t\tnewType = (type === 'mouseenter' ? 'mouseover' : 'mouseout');\n\n\t\t\t\thandler = function (e) {\n\t\t\t\t\tif (!L.DomEvent._checkMouse(obj, e)) { return; }\n\t\t\t\t\treturn originalHandler(e);\n\t\t\t\t};\n\n\t\t\t\tobj.addEventListener(newType, handler, false);\n\n\t\t\t} else if (type === 'click' && L.Browser.android) {\n\t\t\t\toriginalHandler = handler;\n\t\t\t\thandler = function (e) {\n\t\t\t\t\treturn L.DomEvent._filterClick(e, originalHandler);\n\t\t\t\t};\n\n\t\t\t\tobj.addEventListener(type, handler, false);\n\t\t\t} else {\n\t\t\t\tobj.addEventListener(type, handler, false);\n\t\t\t}\n\n\t\t} else if ('attachEvent' in obj) {\n\t\t\tobj.attachEvent('on' + type, handler);\n\t\t}\n\n\t\tobj[key] = handler;\n\n\t\treturn this;\n\t},\n\n\tremoveListener: function (obj, type, fn) {  // (HTMLElement, String, Function)\n\n\t\tvar id = L.stamp(fn),\n\t\t    key = '_leaflet_' + type + id,\n\t\t    handler = obj[key];\n\n\t\tif (!handler) { return this; }\n\n\t\tif (L.Browser.pointer && type.indexOf('touch') === 0) {\n\t\t\tthis.removePointerListener(obj, type, id);\n\t\t} else if (L.Browser.touch && (type === 'dblclick') && this.removeDoubleTapListener) {\n\t\t\tthis.removeDoubleTapListener(obj, id);\n\n\t\t} else if ('removeEventListener' in obj) {\n\n\t\t\tif (type === 'mousewheel') {\n\t\t\t\tobj.removeEventListener('DOMMouseScroll', handler, false);\n\t\t\t\tobj.removeEventListener(type, handler, false);\n\n\t\t\t} else if ((type === 'mouseenter') || (type === 'mouseleave')) {\n\t\t\t\tobj.removeEventListener((type === 'mouseenter' ? 'mouseover' : 'mouseout'), handler, false);\n\t\t\t} else {\n\t\t\t\tobj.removeEventListener(type, handler, false);\n\t\t\t}\n\t\t} else if ('detachEvent' in obj) {\n\t\t\tobj.detachEvent('on' + type, handler);\n\t\t}\n\n\t\tobj[key] = null;\n\n\t\treturn this;\n\t},\n\n\tstopPropagation: function (e) {\n\n\t\tif (e.stopPropagation) {\n\t\t\te.stopPropagation();\n\t\t} else {\n\t\t\te.cancelBubble = true;\n\t\t}\n\t\tL.DomEvent._skipped(e);\n\n\t\treturn this;\n\t},\n\n\tdisableScrollPropagation: function (el) {\n\t\tvar stop = L.DomEvent.stopPropagation;\n\n\t\treturn L.DomEvent\n\t\t\t.on(el, 'mousewheel', stop)\n\t\t\t.on(el, 'MozMousePixelScroll', stop);\n\t},\n\n\tdisableClickPropagation: function (el) {\n\t\tvar stop = L.DomEvent.stopPropagation;\n\n\t\tfor (var i = L.Draggable.START.length - 1; i >= 0; i--) {\n\t\t\tL.DomEvent.on(el, L.Draggable.START[i], stop);\n\t\t}\n\n\t\treturn L.DomEvent\n\t\t\t.on(el, 'click', L.DomEvent._fakeStop)\n\t\t\t.on(el, 'dblclick', stop);\n\t},\n\n\tpreventDefault: function (e) {\n\n\t\tif (e.preventDefault) {\n\t\t\te.preventDefault();\n\t\t} else {\n\t\t\te.returnValue = false;\n\t\t}\n\t\treturn this;\n\t},\n\n\tstop: function (e) {\n\t\treturn L.DomEvent\n\t\t\t.preventDefault(e)\n\t\t\t.stopPropagation(e);\n\t},\n\n\tgetMousePosition: function (e, container) {\n\t\tif (!container) {\n\t\t\treturn new L.Point(e.clientX, e.clientY);\n\t\t}\n\n\t\tvar rect = container.getBoundingClientRect();\n\n\t\treturn new L.Point(\n\t\t\te.clientX - rect.left - container.clientLeft,\n\t\t\te.clientY - rect.top - container.clientTop);\n\t},\n\n\tgetWheelDelta: function (e) {\n\n\t\tvar delta = 0;\n\n\t\tif (e.wheelDelta) {\n\t\t\tdelta = e.wheelDelta / 120;\n\t\t}\n\t\tif (e.detail) {\n\t\t\tdelta = -e.detail / 3;\n\t\t}\n\t\treturn delta;\n\t},\n\n\t_skipEvents: {},\n\n\t_fakeStop: function (e) {\n\t\t// fakes stopPropagation by setting a special event flag, checked/reset with L.DomEvent._skipped(e)\n\t\tL.DomEvent._skipEvents[e.type] = true;\n\t},\n\n\t_skipped: function (e) {\n\t\tvar skipped = this._skipEvents[e.type];\n\t\t// reset when checking, as it's only used in map container and propagates outside of the map\n\t\tthis._skipEvents[e.type] = false;\n\t\treturn skipped;\n\t},\n\n\t// check if element really left/entered the event target (for mouseenter/mouseleave)\n\t_checkMouse: function (el, e) {\n\n\t\tvar related = e.relatedTarget;\n\n\t\tif (!related) { return true; }\n\n\t\ttry {\n\t\t\twhile (related && (related !== el)) {\n\t\t\t\trelated = related.parentNode;\n\t\t\t}\n\t\t} catch (err) {\n\t\t\treturn false;\n\t\t}\n\t\treturn (related !== el);\n\t},\n\n\t_getEvent: function () { // evil magic for IE\n\t\t/*jshint noarg:false */\n\t\tvar e = window.event;\n\t\tif (!e) {\n\t\t\tvar caller = arguments.callee.caller;\n\t\t\twhile (caller) {\n\t\t\t\te = caller['arguments'][0];\n\t\t\t\tif (e && window.Event === e.constructor) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcaller = caller.caller;\n\t\t\t}\n\t\t}\n\t\treturn e;\n\t},\n\n\t// this is a horrible workaround for a bug in Android where a single touch triggers two click events\n\t_filterClick: function (e, handler) {\n\t\tvar timeStamp = (e.timeStamp || e.originalEvent.timeStamp),\n\t\t\telapsed = L.DomEvent._lastClick && (timeStamp - L.DomEvent._lastClick);\n\n\t\t// are they closer together than 500ms yet more than 100ms?\n\t\t// Android typically triggers them ~300ms apart while multiple listeners\n\t\t// on the same event should be triggered far faster;\n\t\t// or check if click is simulated on the element, and if it is, reject any non-simulated events\n\n\t\tif ((elapsed && elapsed > 100 && elapsed < 500) || (e.target._simulatedClick && !e._simulated)) {\n\t\t\tL.DomEvent.stop(e);\n\t\t\treturn;\n\t\t}\n\t\tL.DomEvent._lastClick = timeStamp;\n\n\t\treturn handler(e);\n\t}\n};\n\nL.DomEvent.on = L.DomEvent.addListener;\nL.DomEvent.off = L.DomEvent.removeListener;\n\n\n/*\n * L.Draggable allows you to add dragging capabilities to any element. Supports mobile devices too.\n */\n\nL.Draggable = L.Class.extend({\n\tincludes: L.Mixin.Events,\n\n\tstatics: {\n\t\tSTART: L.Browser.touch ? ['touchstart', 'mousedown'] : ['mousedown'],\n\t\tEND: {\n\t\t\tmousedown: 'mouseup',\n\t\t\ttouchstart: 'touchend',\n\t\t\tpointerdown: 'touchend',\n\t\t\tMSPointerDown: 'touchend'\n\t\t},\n\t\tMOVE: {\n\t\t\tmousedown: 'mousemove',\n\t\t\ttouchstart: 'touchmove',\n\t\t\tpointerdown: 'touchmove',\n\t\t\tMSPointerDown: 'touchmove'\n\t\t}\n\t},\n\n\tinitialize: function (element, dragStartTarget) {\n\t\tthis._element = element;\n\t\tthis._dragStartTarget = dragStartTarget || element;\n\t},\n\n\tenable: function () {\n\t\tif (this._enabled) { return; }\n\n\t\tfor (var i = L.Draggable.START.length - 1; i >= 0; i--) {\n\t\t\tL.DomEvent.on(this._dragStartTarget, L.Draggable.START[i], this._onDown, this);\n\t\t}\n\n\t\tthis._enabled = true;\n\t},\n\n\tdisable: function () {\n\t\tif (!this._enabled) { return; }\n\n\t\tfor (var i = L.Draggable.START.length - 1; i >= 0; i--) {\n\t\t\tL.DomEvent.off(this._dragStartTarget, L.Draggable.START[i], this._onDown, this);\n\t\t}\n\n\t\tthis._enabled = false;\n\t\tthis._moved = false;\n\t},\n\n\t_onDown: function (e) {\n\t\tthis._moved = false;\n\n\t\tif (e.shiftKey || ((e.which !== 1) && (e.button !== 1) && !e.touches)) { return; }\n\n\t\tL.DomEvent.stopPropagation(e);\n\n\t\tif (L.Draggable._disabled) { return; }\n\n\t\tL.DomUtil.disableImageDrag();\n\t\tL.DomUtil.disableTextSelection();\n\n\t\tif (this._moving) { return; }\n\n\t\tvar first = e.touches ? e.touches[0] : e;\n\n\t\tthis._startPoint = new L.Point(first.clientX, first.clientY);\n\t\tthis._startPos = this._newPos = L.DomUtil.getPosition(this._element);\n\n\t\tL.DomEvent\n\t\t    .on(document, L.Draggable.MOVE[e.type], this._onMove, this)\n\t\t    .on(document, L.Draggable.END[e.type], this._onUp, this);\n\t},\n\n\t_onMove: function (e) {\n\t\tif (e.touches && e.touches.length > 1) {\n\t\t\tthis._moved = true;\n\t\t\treturn;\n\t\t}\n\n\t\tvar first = (e.touches && e.touches.length === 1 ? e.touches[0] : e),\n\t\t    newPoint = new L.Point(first.clientX, first.clientY),\n\t\t    offset = newPoint.subtract(this._startPoint);\n\n\t\tif (!offset.x && !offset.y) { return; }\n\t\tif (L.Browser.touch && Math.abs(offset.x) + Math.abs(offset.y) < 3) { return; }\n\n\t\tL.DomEvent.preventDefault(e);\n\n\t\tif (!this._moved) {\n\t\t\tthis.fire('dragstart');\n\n\t\t\tthis._moved = true;\n\t\t\tthis._startPos = L.DomUtil.getPosition(this._element).subtract(offset);\n\n\t\t\tL.DomUtil.addClass(document.body, 'leaflet-dragging');\n\t\t\tthis._lastTarget = e.target || e.srcElement;\n\t\t\tL.DomUtil.addClass(this._lastTarget, 'leaflet-drag-target');\n\t\t}\n\n\t\tthis._newPos = this._startPos.add(offset);\n\t\tthis._moving = true;\n\n\t\tL.Util.cancelAnimFrame(this._animRequest);\n\t\tthis._animRequest = L.Util.requestAnimFrame(this._updatePosition, this, true, this._dragStartTarget);\n\t},\n\n\t_updatePosition: function () {\n\t\tthis.fire('predrag');\n\t\tL.DomUtil.setPosition(this._element, this._newPos);\n\t\tthis.fire('drag');\n\t},\n\n\t_onUp: function () {\n\t\tL.DomUtil.removeClass(document.body, 'leaflet-dragging');\n\n\t\tif (this._lastTarget) {\n\t\t\tL.DomUtil.removeClass(this._lastTarget, 'leaflet-drag-target');\n\t\t\tthis._lastTarget = null;\n\t\t}\n\n\t\tfor (var i in L.Draggable.MOVE) {\n\t\t\tL.DomEvent\n\t\t\t    .off(document, L.Draggable.MOVE[i], this._onMove)\n\t\t\t    .off(document, L.Draggable.END[i], this._onUp);\n\t\t}\n\n\t\tL.DomUtil.enableImageDrag();\n\t\tL.DomUtil.enableTextSelection();\n\n\t\tif (this._moved && this._moving) {\n\t\t\t// ensure drag is not fired after dragend\n\t\t\tL.Util.cancelAnimFrame(this._animRequest);\n\n\t\t\tthis.fire('dragend', {\n\t\t\t\tdistance: this._newPos.distanceTo(this._startPos)\n\t\t\t});\n\t\t}\n\n\t\tthis._moving = false;\n\t}\n});\n\n\n/*\n\tL.Handler is a base class for handler classes that are used internally to inject\n\tinteraction features like dragging to classes like Map and Marker.\n*/\n\nL.Handler = L.Class.extend({\n\tinitialize: function (map) {\n\t\tthis._map = map;\n\t},\n\n\tenable: function () {\n\t\tif (this._enabled) { return; }\n\n\t\tthis._enabled = true;\n\t\tthis.addHooks();\n\t},\n\n\tdisable: function () {\n\t\tif (!this._enabled) { return; }\n\n\t\tthis._enabled = false;\n\t\tthis.removeHooks();\n\t},\n\n\tenabled: function () {\n\t\treturn !!this._enabled;\n\t}\n});\n\n\n/*\n * L.Handler.MapDrag is used to make the map draggable (with panning inertia), enabled by default.\n */\n\nL.Map.mergeOptions({\n\tdragging: true,\n\n\tinertia: !L.Browser.android23,\n\tinertiaDeceleration: 3400, // px/s^2\n\tinertiaMaxSpeed: Infinity, // px/s\n\tinertiaThreshold: L.Browser.touch ? 32 : 18, // ms\n\teaseLinearity: 0.25,\n\n\t// TODO refactor, move to CRS\n\tworldCopyJump: false\n});\n\nL.Map.Drag = L.Handler.extend({\n\taddHooks: function () {\n\t\tif (!this._draggable) {\n\t\t\tvar map = this._map;\n\n\t\t\tthis._draggable = new L.Draggable(map._mapPane, map._container);\n\n\t\t\tthis._draggable.on({\n\t\t\t\t'dragstart': this._onDragStart,\n\t\t\t\t'drag': this._onDrag,\n\t\t\t\t'dragend': this._onDragEnd\n\t\t\t}, this);\n\n\t\t\tif (map.options.worldCopyJump) {\n\t\t\t\tthis._draggable.on('predrag', this._onPreDrag, this);\n\t\t\t\tmap.on('viewreset', this._onViewReset, this);\n\n\t\t\t\tmap.whenReady(this._onViewReset, this);\n\t\t\t}\n\t\t}\n\t\tthis._draggable.enable();\n\t},\n\n\tremoveHooks: function () {\n\t\tthis._draggable.disable();\n\t},\n\n\tmoved: function () {\n\t\treturn this._draggable && this._draggable._moved;\n\t},\n\n\t_onDragStart: function () {\n\t\tvar map = this._map;\n\n\t\tif (map._panAnim) {\n\t\t\tmap._panAnim.stop();\n\t\t}\n\n\t\tmap\n\t\t    .fire('movestart')\n\t\t    .fire('dragstart');\n\n\t\tif (map.options.inertia) {\n\t\t\tthis._positions = [];\n\t\t\tthis._times = [];\n\t\t}\n\t},\n\n\t_onDrag: function () {\n\t\tif (this._map.options.inertia) {\n\t\t\tvar time = this._lastTime = +new Date(),\n\t\t\t    pos = this._lastPos = this._draggable._newPos;\n\n\t\t\tthis._positions.push(pos);\n\t\t\tthis._times.push(time);\n\n\t\t\tif (time - this._times[0] > 200) {\n\t\t\t\tthis._positions.shift();\n\t\t\t\tthis._times.shift();\n\t\t\t}\n\t\t}\n\n\t\tthis._map\n\t\t    .fire('move')\n\t\t    .fire('drag');\n\t},\n\n\t_onViewReset: function () {\n\t\t// TODO fix hardcoded Earth values\n\t\tvar pxCenter = this._map.getSize()._divideBy(2),\n\t\t    pxWorldCenter = this._map.latLngToLayerPoint([0, 0]);\n\n\t\tthis._initialWorldOffset = pxWorldCenter.subtract(pxCenter).x;\n\t\tthis._worldWidth = this._map.project([0, 180]).x;\n\t},\n\n\t_onPreDrag: function () {\n\t\t// TODO refactor to be able to adjust map pane position after zoom\n\t\tvar worldWidth = this._worldWidth,\n\t\t    halfWidth = Math.round(worldWidth / 2),\n\t\t    dx = this._initialWorldOffset,\n\t\t    x = this._draggable._newPos.x,\n\t\t    newX1 = (x - halfWidth + dx) % worldWidth + halfWidth - dx,\n\t\t    newX2 = (x + halfWidth + dx) % worldWidth - halfWidth - dx,\n\t\t    newX = Math.abs(newX1 + dx) < Math.abs(newX2 + dx) ? newX1 : newX2;\n\n\t\tthis._draggable._newPos.x = newX;\n\t},\n\n\t_onDragEnd: function (e) {\n\t\tvar map = this._map,\n\t\t    options = map.options,\n\t\t    delay = +new Date() - this._lastTime,\n\n\t\t    noInertia = !options.inertia || delay > options.inertiaThreshold || !this._positions[0];\n\n\t\tmap.fire('dragend', e);\n\n\t\tif (noInertia) {\n\t\t\tmap.fire('moveend');\n\n\t\t} else {\n\n\t\t\tvar direction = this._lastPos.subtract(this._positions[0]),\n\t\t\t    duration = (this._lastTime + delay - this._times[0]) / 1000,\n\t\t\t    ease = options.easeLinearity,\n\n\t\t\t    speedVector = direction.multiplyBy(ease / duration),\n\t\t\t    speed = speedVector.distanceTo([0, 0]),\n\n\t\t\t    limitedSpeed = Math.min(options.inertiaMaxSpeed, speed),\n\t\t\t    limitedSpeedVector = speedVector.multiplyBy(limitedSpeed / speed),\n\n\t\t\t    decelerationDuration = limitedSpeed / (options.inertiaDeceleration * ease),\n\t\t\t    offset = limitedSpeedVector.multiplyBy(-decelerationDuration / 2).round();\n\n\t\t\tif (!offset.x || !offset.y) {\n\t\t\t\tmap.fire('moveend');\n\n\t\t\t} else {\n\t\t\t\toffset = map._limitOffset(offset, map.options.maxBounds);\n\n\t\t\t\tL.Util.requestAnimFrame(function () {\n\t\t\t\t\tmap.panBy(offset, {\n\t\t\t\t\t\tduration: decelerationDuration,\n\t\t\t\t\t\teaseLinearity: ease,\n\t\t\t\t\t\tnoMoveStart: true\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n});\n\nL.Map.addInitHook('addHandler', 'dragging', L.Map.Drag);\n\n\n/*\n * L.Handler.DoubleClickZoom is used to handle double-click zoom on the map, enabled by default.\n */\n\nL.Map.mergeOptions({\n\tdoubleClickZoom: true\n});\n\nL.Map.DoubleClickZoom = L.Handler.extend({\n\taddHooks: function () {\n\t\tthis._map.on('dblclick', this._onDoubleClick, this);\n\t},\n\n\tremoveHooks: function () {\n\t\tthis._map.off('dblclick', this._onDoubleClick, this);\n\t},\n\n\t_onDoubleClick: function (e) {\n\t\tvar map = this._map,\n\t\t    zoom = map.getZoom() + (e.originalEvent.shiftKey ? -1 : 1);\n\n\t\tif (map.options.doubleClickZoom === 'center') {\n\t\t\tmap.setZoom(zoom);\n\t\t} else {\n\t\t\tmap.setZoomAround(e.containerPoint, zoom);\n\t\t}\n\t}\n});\n\nL.Map.addInitHook('addHandler', 'doubleClickZoom', L.Map.DoubleClickZoom);\n\n\n/*\n * L.Handler.ScrollWheelZoom is used by L.Map to enable mouse scroll wheel zoom on the map.\n */\n\nL.Map.mergeOptions({\n\tscrollWheelZoom: true\n});\n\nL.Map.ScrollWheelZoom = L.Handler.extend({\n\taddHooks: function () {\n\t\tL.DomEvent.on(this._map._container, 'mousewheel', this._onWheelScroll, this);\n\t\tL.DomEvent.on(this._map._container, 'MozMousePixelScroll', L.DomEvent.preventDefault);\n\t\tthis._delta = 0;\n\t},\n\n\tremoveHooks: function () {\n\t\tL.DomEvent.off(this._map._container, 'mousewheel', this._onWheelScroll);\n\t\tL.DomEvent.off(this._map._container, 'MozMousePixelScroll', L.DomEvent.preventDefault);\n\t},\n\n\t_onWheelScroll: function (e) {\n\t\tvar delta = L.DomEvent.getWheelDelta(e);\n\n\t\tthis._delta += delta;\n\t\tthis._lastMousePos = this._map.mouseEventToContainerPoint(e);\n\n\t\tif (!this._startTime) {\n\t\t\tthis._startTime = +new Date();\n\t\t}\n\n\t\tvar left = Math.max(40 - (+new Date() - this._startTime), 0);\n\n\t\tclearTimeout(this._timer);\n\t\tthis._timer = setTimeout(L.bind(this._performZoom, this), left);\n\n\t\tL.DomEvent.preventDefault(e);\n\t\tL.DomEvent.stopPropagation(e);\n\t},\n\n\t_performZoom: function () {\n\t\tvar map = this._map,\n\t\t    delta = this._delta,\n\t\t    zoom = map.getZoom();\n\n\t\tdelta = delta > 0 ? Math.ceil(delta) : Math.floor(delta);\n\t\tdelta = Math.max(Math.min(delta, 4), -4);\n\t\tdelta = map._limitZoom(zoom + delta) - zoom;\n\n\t\tthis._delta = 0;\n\t\tthis._startTime = null;\n\n\t\tif (!delta) { return; }\n\n\t\tif (map.options.scrollWheelZoom === 'center') {\n\t\t\tmap.setZoom(zoom + delta);\n\t\t} else {\n\t\t\tmap.setZoomAround(this._lastMousePos, zoom + delta);\n\t\t}\n\t}\n});\n\nL.Map.addInitHook('addHandler', 'scrollWheelZoom', L.Map.ScrollWheelZoom);\n\n\n/*\n * Extends the event handling code with double tap support for mobile browsers.\n */\n\nL.extend(L.DomEvent, {\n\n\t_touchstart: L.Browser.msPointer ? 'MSPointerDown' : L.Browser.pointer ? 'pointerdown' : 'touchstart',\n\t_touchend: L.Browser.msPointer ? 'MSPointerUp' : L.Browser.pointer ? 'pointerup' : 'touchend',\n\n\t// inspired by Zepto touch code by Thomas Fuchs\n\taddDoubleTapListener: function (obj, handler, id) {\n\t\tvar last,\n\t\t    doubleTap = false,\n\t\t    delay = 250,\n\t\t    touch,\n\t\t    pre = '_leaflet_',\n\t\t    touchstart = this._touchstart,\n\t\t    touchend = this._touchend,\n\t\t    trackedTouches = [];\n\n\t\tfunction onTouchStart(e) {\n\t\t\tvar count;\n\n\t\t\tif (L.Browser.pointer) {\n\t\t\t\ttrackedTouches.push(e.pointerId);\n\t\t\t\tcount = trackedTouches.length;\n\t\t\t} else {\n\t\t\t\tcount = e.touches.length;\n\t\t\t}\n\t\t\tif (count > 1) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar now = Date.now(),\n\t\t\t\tdelta = now - (last || now);\n\n\t\t\ttouch = e.touches ? e.touches[0] : e;\n\t\t\tdoubleTap = (delta > 0 && delta <= delay);\n\t\t\tlast = now;\n\t\t}\n\n\t\tfunction onTouchEnd(e) {\n\t\t\tif (L.Browser.pointer) {\n\t\t\t\tvar idx = trackedTouches.indexOf(e.pointerId);\n\t\t\t\tif (idx === -1) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\ttrackedTouches.splice(idx, 1);\n\t\t\t}\n\n\t\t\tif (doubleTap) {\n\t\t\t\tif (L.Browser.pointer) {\n\t\t\t\t\t// work around .type being readonly with MSPointer* events\n\t\t\t\t\tvar newTouch = { },\n\t\t\t\t\t\tprop;\n\n\t\t\t\t\t// jshint forin:false\n\t\t\t\t\tfor (var i in touch) {\n\t\t\t\t\t\tprop = touch[i];\n\t\t\t\t\t\tif (typeof prop === 'function') {\n\t\t\t\t\t\t\tnewTouch[i] = prop.bind(touch);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnewTouch[i] = prop;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ttouch = newTouch;\n\t\t\t\t}\n\t\t\t\ttouch.type = 'dblclick';\n\t\t\t\thandler(touch);\n\t\t\t\tlast = null;\n\t\t\t}\n\t\t}\n\t\tobj[pre + touchstart + id] = onTouchStart;\n\t\tobj[pre + touchend + id] = onTouchEnd;\n\n\t\t// on pointer we need to listen on the document, otherwise a drag starting on the map and moving off screen\n\t\t// will not come through to us, so we will lose track of how many touches are ongoing\n\t\tvar endElement = L.Browser.pointer ? document.documentElement : obj;\n\n\t\tobj.addEventListener(touchstart, onTouchStart, false);\n\t\tendElement.addEventListener(touchend, onTouchEnd, false);\n\n\t\tif (L.Browser.pointer) {\n\t\t\tendElement.addEventListener(L.DomEvent.POINTER_CANCEL, onTouchEnd, false);\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tremoveDoubleTapListener: function (obj, id) {\n\t\tvar pre = '_leaflet_';\n\n\t\tobj.removeEventListener(this._touchstart, obj[pre + this._touchstart + id], false);\n\t\t(L.Browser.pointer ? document.documentElement : obj).removeEventListener(\n\t\t        this._touchend, obj[pre + this._touchend + id], false);\n\n\t\tif (L.Browser.pointer) {\n\t\t\tdocument.documentElement.removeEventListener(L.DomEvent.POINTER_CANCEL, obj[pre + this._touchend + id],\n\t\t\t\tfalse);\n\t\t}\n\n\t\treturn this;\n\t}\n});\n\n\n/*\n * Extends L.DomEvent to provide touch support for Internet Explorer and Windows-based devices.\n */\n\nL.extend(L.DomEvent, {\n\n\t//static\n\tPOINTER_DOWN: L.Browser.msPointer ? 'MSPointerDown' : 'pointerdown',\n\tPOINTER_MOVE: L.Browser.msPointer ? 'MSPointerMove' : 'pointermove',\n\tPOINTER_UP: L.Browser.msPointer ? 'MSPointerUp' : 'pointerup',\n\tPOINTER_CANCEL: L.Browser.msPointer ? 'MSPointerCancel' : 'pointercancel',\n\n\t_pointers: [],\n\t_pointerDocumentListener: false,\n\n\t// Provides a touch events wrapper for (ms)pointer events.\n\t// Based on changes by veproza https://github.com/CloudMade/Leaflet/pull/1019\n\t//ref http://www.w3.org/TR/pointerevents/ https://www.w3.org/Bugs/Public/show_bug.cgi?id=22890\n\n\taddPointerListener: function (obj, type, handler, id) {\n\n\t\tswitch (type) {\n\t\tcase 'touchstart':\n\t\t\treturn this.addPointerListenerStart(obj, type, handler, id);\n\t\tcase 'touchend':\n\t\t\treturn this.addPointerListenerEnd(obj, type, handler, id);\n\t\tcase 'touchmove':\n\t\t\treturn this.addPointerListenerMove(obj, type, handler, id);\n\t\tdefault:\n\t\t\tthrow 'Unknown touch event type';\n\t\t}\n\t},\n\n\taddPointerListenerStart: function (obj, type, handler, id) {\n\t\tvar pre = '_leaflet_',\n\t\t    pointers = this._pointers;\n\n\t\tvar cb = function (e) {\n\t\t\tif (e.pointerType !== 'mouse' && e.pointerType !== e.MSPOINTER_TYPE_MOUSE) {\n\t\t\t\tL.DomEvent.preventDefault(e);\n\t\t\t}\n\n\t\t\tvar alreadyInArray = false;\n\t\t\tfor (var i = 0; i < pointers.length; i++) {\n\t\t\t\tif (pointers[i].pointerId === e.pointerId) {\n\t\t\t\t\talreadyInArray = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!alreadyInArray) {\n\t\t\t\tpointers.push(e);\n\t\t\t}\n\n\t\t\te.touches = pointers.slice();\n\t\t\te.changedTouches = [e];\n\n\t\t\thandler(e);\n\t\t};\n\n\t\tobj[pre + 'touchstart' + id] = cb;\n\t\tobj.addEventListener(this.POINTER_DOWN, cb, false);\n\n\t\t// need to also listen for end events to keep the _pointers list accurate\n\t\t// this needs to be on the body and never go away\n\t\tif (!this._pointerDocumentListener) {\n\t\t\tvar internalCb = function (e) {\n\t\t\t\tfor (var i = 0; i < pointers.length; i++) {\n\t\t\t\t\tif (pointers[i].pointerId === e.pointerId) {\n\t\t\t\t\t\tpointers.splice(i, 1);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\t//We listen on the documentElement as any drags that end by moving the touch off the screen get fired there\n\t\t\tdocument.documentElement.addEventListener(this.POINTER_UP, internalCb, false);\n\t\t\tdocument.documentElement.addEventListener(this.POINTER_CANCEL, internalCb, false);\n\n\t\t\tthis._pointerDocumentListener = true;\n\t\t}\n\n\t\treturn this;\n\t},\n\n\taddPointerListenerMove: function (obj, type, handler, id) {\n\t\tvar pre = '_leaflet_',\n\t\t    touches = this._pointers;\n\n\t\tfunction cb(e) {\n\n\t\t\t// don't fire touch moves when mouse isn't down\n\t\t\tif ((e.pointerType === e.MSPOINTER_TYPE_MOUSE || e.pointerType === 'mouse') && e.buttons === 0) { return; }\n\n\t\t\tfor (var i = 0; i < touches.length; i++) {\n\t\t\t\tif (touches[i].pointerId === e.pointerId) {\n\t\t\t\t\ttouches[i] = e;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\te.touches = touches.slice();\n\t\t\te.changedTouches = [e];\n\n\t\t\thandler(e);\n\t\t}\n\n\t\tobj[pre + 'touchmove' + id] = cb;\n\t\tobj.addEventListener(this.POINTER_MOVE, cb, false);\n\n\t\treturn this;\n\t},\n\n\taddPointerListenerEnd: function (obj, type, handler, id) {\n\t\tvar pre = '_leaflet_',\n\t\t    touches = this._pointers;\n\n\t\tvar cb = function (e) {\n\t\t\tfor (var i = 0; i < touches.length; i++) {\n\t\t\t\tif (touches[i].pointerId === e.pointerId) {\n\t\t\t\t\ttouches.splice(i, 1);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\te.touches = touches.slice();\n\t\t\te.changedTouches = [e];\n\n\t\t\thandler(e);\n\t\t};\n\n\t\tobj[pre + 'touchend' + id] = cb;\n\t\tobj.addEventListener(this.POINTER_UP, cb, false);\n\t\tobj.addEventListener(this.POINTER_CANCEL, cb, false);\n\n\t\treturn this;\n\t},\n\n\tremovePointerListener: function (obj, type, id) {\n\t\tvar pre = '_leaflet_',\n\t\t    cb = obj[pre + type + id];\n\n\t\tswitch (type) {\n\t\tcase 'touchstart':\n\t\t\tobj.removeEventListener(this.POINTER_DOWN, cb, false);\n\t\t\tbreak;\n\t\tcase 'touchmove':\n\t\t\tobj.removeEventListener(this.POINTER_MOVE, cb, false);\n\t\t\tbreak;\n\t\tcase 'touchend':\n\t\t\tobj.removeEventListener(this.POINTER_UP, cb, false);\n\t\t\tobj.removeEventListener(this.POINTER_CANCEL, cb, false);\n\t\t\tbreak;\n\t\t}\n\n\t\treturn this;\n\t}\n});\n\n\n/*\n * L.Handler.TouchZoom is used by L.Map to add pinch zoom on supported mobile browsers.\n */\n\nL.Map.mergeOptions({\n\ttouchZoom: L.Browser.touch && !L.Browser.android23,\n\tbounceAtZoomLimits: true\n});\n\nL.Map.TouchZoom = L.Handler.extend({\n\taddHooks: function () {\n\t\tL.DomEvent.on(this._map._container, 'touchstart', this._onTouchStart, this);\n\t},\n\n\tremoveHooks: function () {\n\t\tL.DomEvent.off(this._map._container, 'touchstart', this._onTouchStart, this);\n\t},\n\n\t_onTouchStart: function (e) {\n\t\tvar map = this._map;\n\n\t\tif (!e.touches || e.touches.length !== 2 || map._animatingZoom || this._zooming) { return; }\n\n\t\tvar p1 = map.mouseEventToLayerPoint(e.touches[0]),\n\t\t    p2 = map.mouseEventToLayerPoint(e.touches[1]),\n\t\t    viewCenter = map._getCenterLayerPoint();\n\n\t\tthis._startCenter = p1.add(p2)._divideBy(2);\n\t\tthis._startDist = p1.distanceTo(p2);\n\n\t\tthis._moved = false;\n\t\tthis._zooming = true;\n\n\t\tthis._centerOffset = viewCenter.subtract(this._startCenter);\n\n\t\tif (map._panAnim) {\n\t\t\tmap._panAnim.stop();\n\t\t}\n\n\t\tL.DomEvent\n\t\t    .on(document, 'touchmove', this._onTouchMove, this)\n\t\t    .on(document, 'touchend', this._onTouchEnd, this);\n\n\t\tL.DomEvent.preventDefault(e);\n\t},\n\n\t_onTouchMove: function (e) {\n\t\tvar map = this._map;\n\n\t\tif (!e.touches || e.touches.length !== 2 || !this._zooming) { return; }\n\n\t\tvar p1 = map.mouseEventToLayerPoint(e.touches[0]),\n\t\t    p2 = map.mouseEventToLayerPoint(e.touches[1]);\n\n\t\tthis._scale = p1.distanceTo(p2) / this._startDist;\n\t\tthis._delta = p1._add(p2)._divideBy(2)._subtract(this._startCenter);\n\n\t\tif (this._scale === 1) { return; }\n\n\t\tif (!map.options.bounceAtZoomLimits) {\n\t\t\tif ((map.getZoom() === map.getMinZoom() && this._scale < 1) ||\n\t\t\t    (map.getZoom() === map.getMaxZoom() && this._scale > 1)) { return; }\n\t\t}\n\n\t\tif (!this._moved) {\n\t\t\tL.DomUtil.addClass(map._mapPane, 'leaflet-touching');\n\n\t\t\tmap\n\t\t\t    .fire('movestart')\n\t\t\t    .fire('zoomstart');\n\n\t\t\tthis._moved = true;\n\t\t}\n\n\t\tL.Util.cancelAnimFrame(this._animRequest);\n\t\tthis._animRequest = L.Util.requestAnimFrame(\n\t\t        this._updateOnMove, this, true, this._map._container);\n\n\t\tL.DomEvent.preventDefault(e);\n\t},\n\n\t_updateOnMove: function () {\n\t\tvar map = this._map,\n\t\t    origin = this._getScaleOrigin(),\n\t\t    center = map.layerPointToLatLng(origin),\n\t\t    zoom = map.getScaleZoom(this._scale);\n\n\t\tmap._animateZoom(center, zoom, this._startCenter, this._scale, this._delta, false, true);\n\t},\n\n\t_onTouchEnd: function () {\n\t\tif (!this._moved || !this._zooming) {\n\t\t\tthis._zooming = false;\n\t\t\treturn;\n\t\t}\n\n\t\tvar map = this._map;\n\n\t\tthis._zooming = false;\n\t\tL.DomUtil.removeClass(map._mapPane, 'leaflet-touching');\n\t\tL.Util.cancelAnimFrame(this._animRequest);\n\n\t\tL.DomEvent\n\t\t    .off(document, 'touchmove', this._onTouchMove)\n\t\t    .off(document, 'touchend', this._onTouchEnd);\n\n\t\tvar origin = this._getScaleOrigin(),\n\t\t    center = map.layerPointToLatLng(origin),\n\n\t\t    oldZoom = map.getZoom(),\n\t\t    floatZoomDelta = map.getScaleZoom(this._scale) - oldZoom,\n\t\t    roundZoomDelta = (floatZoomDelta > 0 ?\n\t\t            Math.ceil(floatZoomDelta) : Math.floor(floatZoomDelta)),\n\n\t\t    zoom = map._limitZoom(oldZoom + roundZoomDelta),\n\t\t    scale = map.getZoomScale(zoom) / this._scale;\n\n\t\tmap._animateZoom(center, zoom, origin, scale);\n\t},\n\n\t_getScaleOrigin: function () {\n\t\tvar centerOffset = this._centerOffset.subtract(this._delta).divideBy(this._scale);\n\t\treturn this._startCenter.add(centerOffset);\n\t}\n});\n\nL.Map.addInitHook('addHandler', 'touchZoom', L.Map.TouchZoom);\n\n\n/*\n * L.Map.Tap is used to enable mobile hacks like quick taps and long hold.\n */\n\nL.Map.mergeOptions({\n\ttap: true,\n\ttapTolerance: 15\n});\n\nL.Map.Tap = L.Handler.extend({\n\taddHooks: function () {\n\t\tL.DomEvent.on(this._map._container, 'touchstart', this._onDown, this);\n\t},\n\n\tremoveHooks: function () {\n\t\tL.DomEvent.off(this._map._container, 'touchstart', this._onDown, this);\n\t},\n\n\t_onDown: function (e) {\n\t\tif (!e.touches) { return; }\n\n\t\tL.DomEvent.preventDefault(e);\n\n\t\tthis._fireClick = true;\n\n\t\t// don't simulate click or track longpress if more than 1 touch\n\t\tif (e.touches.length > 1) {\n\t\t\tthis._fireClick = false;\n\t\t\tclearTimeout(this._holdTimeout);\n\t\t\treturn;\n\t\t}\n\n\t\tvar first = e.touches[0],\n\t\t    el = first.target;\n\n\t\tthis._startPos = this._newPos = new L.Point(first.clientX, first.clientY);\n\n\t\t// if touching a link, highlight it\n\t\tif (el.tagName && el.tagName.toLowerCase() === 'a') {\n\t\t\tL.DomUtil.addClass(el, 'leaflet-active');\n\t\t}\n\n\t\t// simulate long hold but setting a timeout\n\t\tthis._holdTimeout = setTimeout(L.bind(function () {\n\t\t\tif (this._isTapValid()) {\n\t\t\t\tthis._fireClick = false;\n\t\t\t\tthis._onUp();\n\t\t\t\tthis._simulateEvent('contextmenu', first);\n\t\t\t}\n\t\t}, this), 1000);\n\n\t\tL.DomEvent\n\t\t\t.on(document, 'touchmove', this._onMove, this)\n\t\t\t.on(document, 'touchend', this._onUp, this);\n\t},\n\n\t_onUp: function (e) {\n\t\tclearTimeout(this._holdTimeout);\n\n\t\tL.DomEvent\n\t\t\t.off(document, 'touchmove', this._onMove, this)\n\t\t\t.off(document, 'touchend', this._onUp, this);\n\n\t\tif (this._fireClick && e && e.changedTouches) {\n\n\t\t\tvar first = e.changedTouches[0],\n\t\t\t    el = first.target;\n\n\t\t\tif (el && el.tagName && el.tagName.toLowerCase() === 'a') {\n\t\t\t\tL.DomUtil.removeClass(el, 'leaflet-active');\n\t\t\t}\n\n\t\t\t// simulate click if the touch didn't move too much\n\t\t\tif (this._isTapValid()) {\n\t\t\t\tthis._simulateEvent('click', first);\n\t\t\t}\n\t\t}\n\t},\n\n\t_isTapValid: function () {\n\t\treturn this._newPos.distanceTo(this._startPos) <= this._map.options.tapTolerance;\n\t},\n\n\t_onMove: function (e) {\n\t\tvar first = e.touches[0];\n\t\tthis._newPos = new L.Point(first.clientX, first.clientY);\n\t},\n\n\t_simulateEvent: function (type, e) {\n\t\tvar simulatedEvent = document.createEvent('MouseEvents');\n\n\t\tsimulatedEvent._simulated = true;\n\t\te.target._simulatedClick = true;\n\n\t\tsimulatedEvent.initMouseEvent(\n\t\t        type, true, true, window, 1,\n\t\t        e.screenX, e.screenY,\n\t\t        e.clientX, e.clientY,\n\t\t        false, false, false, false, 0, null);\n\n\t\te.target.dispatchEvent(simulatedEvent);\n\t}\n});\n\nif (L.Browser.touch && !L.Browser.pointer) {\n\tL.Map.addInitHook('addHandler', 'tap', L.Map.Tap);\n}\n\n\n/*\n * L.Handler.ShiftDragZoom is used to add shift-drag zoom interaction to the map\n  * (zoom to a selected bounding box), enabled by default.\n */\n\nL.Map.mergeOptions({\n\tboxZoom: true\n});\n\nL.Map.BoxZoom = L.Handler.extend({\n\tinitialize: function (map) {\n\t\tthis._map = map;\n\t\tthis._container = map._container;\n\t\tthis._pane = map._panes.overlayPane;\n\t\tthis._moved = false;\n\t},\n\n\taddHooks: function () {\n\t\tL.DomEvent.on(this._container, 'mousedown', this._onMouseDown, this);\n\t},\n\n\tremoveHooks: function () {\n\t\tL.DomEvent.off(this._container, 'mousedown', this._onMouseDown);\n\t\tthis._moved = false;\n\t},\n\n\tmoved: function () {\n\t\treturn this._moved;\n\t},\n\n\t_onMouseDown: function (e) {\n\t\tthis._moved = false;\n\n\t\tif (!e.shiftKey || ((e.which !== 1) && (e.button !== 1))) { return false; }\n\n\t\tL.DomUtil.disableTextSelection();\n\t\tL.DomUtil.disableImageDrag();\n\n\t\tthis._startLayerPoint = this._map.mouseEventToLayerPoint(e);\n\n\t\tL.DomEvent\n\t\t    .on(document, 'mousemove', this._onMouseMove, this)\n\t\t    .on(document, 'mouseup', this._onMouseUp, this)\n\t\t    .on(document, 'keydown', this._onKeyDown, this);\n\t},\n\n\t_onMouseMove: function (e) {\n\t\tif (!this._moved) {\n\t\t\tthis._box = L.DomUtil.create('div', 'leaflet-zoom-box', this._pane);\n\t\t\tL.DomUtil.setPosition(this._box, this._startLayerPoint);\n\n\t\t\t//TODO refactor: move cursor to styles\n\t\t\tthis._container.style.cursor = 'crosshair';\n\t\t\tthis._map.fire('boxzoomstart');\n\t\t}\n\n\t\tvar startPoint = this._startLayerPoint,\n\t\t    box = this._box,\n\n\t\t    layerPoint = this._map.mouseEventToLayerPoint(e),\n\t\t    offset = layerPoint.subtract(startPoint),\n\n\t\t    newPos = new L.Point(\n\t\t        Math.min(layerPoint.x, startPoint.x),\n\t\t        Math.min(layerPoint.y, startPoint.y));\n\n\t\tL.DomUtil.setPosition(box, newPos);\n\n\t\tthis._moved = true;\n\n\t\t// TODO refactor: remove hardcoded 4 pixels\n\t\tbox.style.width  = (Math.max(0, Math.abs(offset.x) - 4)) + 'px';\n\t\tbox.style.height = (Math.max(0, Math.abs(offset.y) - 4)) + 'px';\n\t},\n\n\t_finish: function () {\n\t\tif (this._moved) {\n\t\t\tthis._pane.removeChild(this._box);\n\t\t\tthis._container.style.cursor = '';\n\t\t}\n\n\t\tL.DomUtil.enableTextSelection();\n\t\tL.DomUtil.enableImageDrag();\n\n\t\tL.DomEvent\n\t\t    .off(document, 'mousemove', this._onMouseMove)\n\t\t    .off(document, 'mouseup', this._onMouseUp)\n\t\t    .off(document, 'keydown', this._onKeyDown);\n\t},\n\n\t_onMouseUp: function (e) {\n\n\t\tthis._finish();\n\n\t\tvar map = this._map,\n\t\t    layerPoint = map.mouseEventToLayerPoint(e);\n\n\t\tif (this._startLayerPoint.equals(layerPoint)) { return; }\n\n\t\tvar bounds = new L.LatLngBounds(\n\t\t        map.layerPointToLatLng(this._startLayerPoint),\n\t\t        map.layerPointToLatLng(layerPoint));\n\n\t\tmap.fitBounds(bounds);\n\n\t\tmap.fire('boxzoomend', {\n\t\t\tboxZoomBounds: bounds\n\t\t});\n\t},\n\n\t_onKeyDown: function (e) {\n\t\tif (e.keyCode === 27) {\n\t\t\tthis._finish();\n\t\t}\n\t}\n});\n\nL.Map.addInitHook('addHandler', 'boxZoom', L.Map.BoxZoom);\n\n\n/*\n * L.Map.Keyboard is handling keyboard interaction with the map, enabled by default.\n */\n\nL.Map.mergeOptions({\n\tkeyboard: true,\n\tkeyboardPanOffset: 80,\n\tkeyboardZoomOffset: 1\n});\n\nL.Map.Keyboard = L.Handler.extend({\n\n\tkeyCodes: {\n\t\tleft:    [37],\n\t\tright:   [39],\n\t\tdown:    [40],\n\t\tup:      [38],\n\t\tzoomIn:  [187, 107, 61, 171],\n\t\tzoomOut: [189, 109, 173]\n\t},\n\n\tinitialize: function (map) {\n\t\tthis._map = map;\n\n\t\tthis._setPanOffset(map.options.keyboardPanOffset);\n\t\tthis._setZoomOffset(map.options.keyboardZoomOffset);\n\t},\n\n\taddHooks: function () {\n\t\tvar container = this._map._container;\n\n\t\t// make the container focusable by tabbing\n\t\tif (container.tabIndex === -1) {\n\t\t\tcontainer.tabIndex = '0';\n\t\t}\n\n\t\tL.DomEvent\n\t\t    .on(container, 'focus', this._onFocus, this)\n\t\t    .on(container, 'blur', this._onBlur, this)\n\t\t    .on(container, 'mousedown', this._onMouseDown, this);\n\n\t\tthis._map\n\t\t    .on('focus', this._addHooks, this)\n\t\t    .on('blur', this._removeHooks, this);\n\t},\n\n\tremoveHooks: function () {\n\t\tthis._removeHooks();\n\n\t\tvar container = this._map._container;\n\n\t\tL.DomEvent\n\t\t    .off(container, 'focus', this._onFocus, this)\n\t\t    .off(container, 'blur', this._onBlur, this)\n\t\t    .off(container, 'mousedown', this._onMouseDown, this);\n\n\t\tthis._map\n\t\t    .off('focus', this._addHooks, this)\n\t\t    .off('blur', this._removeHooks, this);\n\t},\n\n\t_onMouseDown: function () {\n\t\tif (this._focused) { return; }\n\n\t\tvar body = document.body,\n\t\t    docEl = document.documentElement,\n\t\t    top = body.scrollTop || docEl.scrollTop,\n\t\t    left = body.scrollLeft || docEl.scrollLeft;\n\n\t\tthis._map._container.focus();\n\n\t\twindow.scrollTo(left, top);\n\t},\n\n\t_onFocus: function () {\n\t\tthis._focused = true;\n\t\tthis._map.fire('focus');\n\t},\n\n\t_onBlur: function () {\n\t\tthis._focused = false;\n\t\tthis._map.fire('blur');\n\t},\n\n\t_setPanOffset: function (pan) {\n\t\tvar keys = this._panKeys = {},\n\t\t    codes = this.keyCodes,\n\t\t    i, len;\n\n\t\tfor (i = 0, len = codes.left.length; i < len; i++) {\n\t\t\tkeys[codes.left[i]] = [-1 * pan, 0];\n\t\t}\n\t\tfor (i = 0, len = codes.right.length; i < len; i++) {\n\t\t\tkeys[codes.right[i]] = [pan, 0];\n\t\t}\n\t\tfor (i = 0, len = codes.down.length; i < len; i++) {\n\t\t\tkeys[codes.down[i]] = [0, pan];\n\t\t}\n\t\tfor (i = 0, len = codes.up.length; i < len; i++) {\n\t\t\tkeys[codes.up[i]] = [0, -1 * pan];\n\t\t}\n\t},\n\n\t_setZoomOffset: function (zoom) {\n\t\tvar keys = this._zoomKeys = {},\n\t\t    codes = this.keyCodes,\n\t\t    i, len;\n\n\t\tfor (i = 0, len = codes.zoomIn.length; i < len; i++) {\n\t\t\tkeys[codes.zoomIn[i]] = zoom;\n\t\t}\n\t\tfor (i = 0, len = codes.zoomOut.length; i < len; i++) {\n\t\t\tkeys[codes.zoomOut[i]] = -zoom;\n\t\t}\n\t},\n\n\t_addHooks: function () {\n\t\tL.DomEvent.on(document, 'keydown', this._onKeyDown, this);\n\t},\n\n\t_removeHooks: function () {\n\t\tL.DomEvent.off(document, 'keydown', this._onKeyDown, this);\n\t},\n\n\t_onKeyDown: function (e) {\n\t\tvar key = e.keyCode,\n\t\t    map = this._map;\n\n\t\tif (key in this._panKeys) {\n\n\t\t\tif (map._panAnim && map._panAnim._inProgress) { return; }\n\n\t\t\tmap.panBy(this._panKeys[key]);\n\n\t\t\tif (map.options.maxBounds) {\n\t\t\t\tmap.panInsideBounds(map.options.maxBounds);\n\t\t\t}\n\n\t\t} else if (key in this._zoomKeys) {\n\t\t\tmap.setZoom(map.getZoom() + this._zoomKeys[key]);\n\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\n\t\tL.DomEvent.stop(e);\n\t}\n});\n\nL.Map.addInitHook('addHandler', 'keyboard', L.Map.Keyboard);\n\n\n/*\n * L.Handler.MarkerDrag is used internally by L.Marker to make the markers draggable.\n */\n\nL.Handler.MarkerDrag = L.Handler.extend({\n\tinitialize: function (marker) {\n\t\tthis._marker = marker;\n\t},\n\n\taddHooks: function () {\n\t\tvar icon = this._marker._icon;\n\t\tif (!this._draggable) {\n\t\t\tthis._draggable = new L.Draggable(icon, icon);\n\t\t}\n\n\t\tthis._draggable\n\t\t\t.on('dragstart', this._onDragStart, this)\n\t\t\t.on('drag', this._onDrag, this)\n\t\t\t.on('dragend', this._onDragEnd, this);\n\t\tthis._draggable.enable();\n\t\tL.DomUtil.addClass(this._marker._icon, 'leaflet-marker-draggable');\n\t},\n\n\tremoveHooks: function () {\n\t\tthis._draggable\n\t\t\t.off('dragstart', this._onDragStart, this)\n\t\t\t.off('drag', this._onDrag, this)\n\t\t\t.off('dragend', this._onDragEnd, this);\n\n\t\tthis._draggable.disable();\n\t\tL.DomUtil.removeClass(this._marker._icon, 'leaflet-marker-draggable');\n\t},\n\n\tmoved: function () {\n\t\treturn this._draggable && this._draggable._moved;\n\t},\n\n\t_onDragStart: function () {\n\t\tthis._marker\n\t\t    .closePopup()\n\t\t    .fire('movestart')\n\t\t    .fire('dragstart');\n\t},\n\n\t_onDrag: function () {\n\t\tvar marker = this._marker,\n\t\t    shadow = marker._shadow,\n\t\t    iconPos = L.DomUtil.getPosition(marker._icon),\n\t\t    latlng = marker._map.layerPointToLatLng(iconPos);\n\n\t\t// update shadow position\n\t\tif (shadow) {\n\t\t\tL.DomUtil.setPosition(shadow, iconPos);\n\t\t}\n\n\t\tmarker._latlng = latlng;\n\n\t\tmarker\n\t\t    .fire('move', {latlng: latlng})\n\t\t    .fire('drag');\n\t},\n\n\t_onDragEnd: function (e) {\n\t\tthis._marker\n\t\t    .fire('moveend')\n\t\t    .fire('dragend', e);\n\t}\n});\n\n\n/*\n * L.Control is a base class for implementing map controls. Handles positioning.\n * All other controls extend from this class.\n */\n\nL.Control = L.Class.extend({\n\toptions: {\n\t\tposition: 'topright'\n\t},\n\n\tinitialize: function (options) {\n\t\tL.setOptions(this, options);\n\t},\n\n\tgetPosition: function () {\n\t\treturn this.options.position;\n\t},\n\n\tsetPosition: function (position) {\n\t\tvar map = this._map;\n\n\t\tif (map) {\n\t\t\tmap.removeControl(this);\n\t\t}\n\n\t\tthis.options.position = position;\n\n\t\tif (map) {\n\t\t\tmap.addControl(this);\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tgetContainer: function () {\n\t\treturn this._container;\n\t},\n\n\taddTo: function (map) {\n\t\tthis._map = map;\n\n\t\tvar container = this._container = this.onAdd(map),\n\t\t    pos = this.getPosition(),\n\t\t    corner = map._controlCorners[pos];\n\n\t\tL.DomUtil.addClass(container, 'leaflet-control');\n\n\t\tif (pos.indexOf('bottom') !== -1) {\n\t\t\tcorner.insertBefore(container, corner.firstChild);\n\t\t} else {\n\t\t\tcorner.appendChild(container);\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tremoveFrom: function (map) {\n\t\tvar pos = this.getPosition(),\n\t\t    corner = map._controlCorners[pos];\n\n\t\tcorner.removeChild(this._container);\n\t\tthis._map = null;\n\n\t\tif (this.onRemove) {\n\t\t\tthis.onRemove(map);\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t_refocusOnMap: function () {\n\t\tif (this._map) {\n\t\t\tthis._map.getContainer().focus();\n\t\t}\n\t}\n});\n\nL.control = function (options) {\n\treturn new L.Control(options);\n};\n\n\n// adds control-related methods to L.Map\n\nL.Map.include({\n\taddControl: function (control) {\n\t\tcontrol.addTo(this);\n\t\treturn this;\n\t},\n\n\tremoveControl: function (control) {\n\t\tcontrol.removeFrom(this);\n\t\treturn this;\n\t},\n\n\t_initControlPos: function () {\n\t\tvar corners = this._controlCorners = {},\n\t\t    l = 'leaflet-',\n\t\t    container = this._controlContainer =\n\t\t            L.DomUtil.create('div', l + 'control-container', this._container);\n\n\t\tfunction createCorner(vSide, hSide) {\n\t\t\tvar className = l + vSide + ' ' + l + hSide;\n\n\t\t\tcorners[vSide + hSide] = L.DomUtil.create('div', className, container);\n\t\t}\n\n\t\tcreateCorner('top', 'left');\n\t\tcreateCorner('top', 'right');\n\t\tcreateCorner('bottom', 'left');\n\t\tcreateCorner('bottom', 'right');\n\t},\n\n\t_clearControlPos: function () {\n\t\tthis._container.removeChild(this._controlContainer);\n\t}\n});\n\n\n/*\n * L.Control.Zoom is used for the default zoom buttons on the map.\n */\n\nL.Control.Zoom = L.Control.extend({\n\toptions: {\n\t\tposition: 'topleft',\n\t\tzoomInText: '+',\n\t\tzoomInTitle: 'Zoom in',\n\t\tzoomOutText: '-',\n\t\tzoomOutTitle: 'Zoom out'\n\t},\n\n\tonAdd: function (map) {\n\t\tvar zoomName = 'leaflet-control-zoom',\n\t\t    container = L.DomUtil.create('div', zoomName + ' leaflet-bar');\n\n\t\tthis._map = map;\n\n\t\tthis._zoomInButton  = this._createButton(\n\t\t        this.options.zoomInText, this.options.zoomInTitle,\n\t\t        zoomName + '-in',  container, this._zoomIn,  this);\n\t\tthis._zoomOutButton = this._createButton(\n\t\t        this.options.zoomOutText, this.options.zoomOutTitle,\n\t\t        zoomName + '-out', container, this._zoomOut, this);\n\n\t\tthis._updateDisabled();\n\t\tmap.on('zoomend zoomlevelschange', this._updateDisabled, this);\n\n\t\treturn container;\n\t},\n\n\tonRemove: function (map) {\n\t\tmap.off('zoomend zoomlevelschange', this._updateDisabled, this);\n\t},\n\n\t_zoomIn: function (e) {\n\t\tthis._map.zoomIn(e.shiftKey ? 3 : 1);\n\t},\n\n\t_zoomOut: function (e) {\n\t\tthis._map.zoomOut(e.shiftKey ? 3 : 1);\n\t},\n\n\t_createButton: function (html, title, className, container, fn, context) {\n\t\tvar link = L.DomUtil.create('a', className, container);\n\t\tlink.innerHTML = html;\n\t\tlink.href = '#';\n\t\tlink.title = title;\n\n\t\tvar stop = L.DomEvent.stopPropagation;\n\n\t\tL.DomEvent\n\t\t    .on(link, 'click', stop)\n\t\t    .on(link, 'mousedown', stop)\n\t\t    .on(link, 'dblclick', stop)\n\t\t    .on(link, 'click', L.DomEvent.preventDefault)\n\t\t    .on(link, 'click', fn, context)\n\t\t    .on(link, 'click', this._refocusOnMap, context);\n\n\t\treturn link;\n\t},\n\n\t_updateDisabled: function () {\n\t\tvar map = this._map,\n\t\t\tclassName = 'leaflet-disabled';\n\n\t\tL.DomUtil.removeClass(this._zoomInButton, className);\n\t\tL.DomUtil.removeClass(this._zoomOutButton, className);\n\n\t\tif (map._zoom === map.getMinZoom()) {\n\t\t\tL.DomUtil.addClass(this._zoomOutButton, className);\n\t\t}\n\t\tif (map._zoom === map.getMaxZoom()) {\n\t\t\tL.DomUtil.addClass(this._zoomInButton, className);\n\t\t}\n\t}\n});\n\nL.Map.mergeOptions({\n\tzoomControl: true\n});\n\nL.Map.addInitHook(function () {\n\tif (this.options.zoomControl) {\n\t\tthis.zoomControl = new L.Control.Zoom();\n\t\tthis.addControl(this.zoomControl);\n\t}\n});\n\nL.control.zoom = function (options) {\n\treturn new L.Control.Zoom(options);\n};\n\n\n\n/*\n * L.Control.Attribution is used for displaying attribution on the map (added by default).\n */\n\nL.Control.Attribution = L.Control.extend({\n\toptions: {\n\t\tposition: 'bottomright',\n\t\tprefix: '<a href=\"http://leafletjs.com\" title=\"A JS library for interactive maps\">Leaflet</a>'\n\t},\n\n\tinitialize: function (options) {\n\t\tL.setOptions(this, options);\n\n\t\tthis._attributions = {};\n\t},\n\n\tonAdd: function (map) {\n\t\tthis._container = L.DomUtil.create('div', 'leaflet-control-attribution');\n\t\tL.DomEvent.disableClickPropagation(this._container);\n\n\t\tfor (var i in map._layers) {\n\t\t\tif (map._layers[i].getAttribution) {\n\t\t\t\tthis.addAttribution(map._layers[i].getAttribution());\n\t\t\t}\n\t\t}\n\t\t\n\t\tmap\n\t\t    .on('layeradd', this._onLayerAdd, this)\n\t\t    .on('layerremove', this._onLayerRemove, this);\n\n\t\tthis._update();\n\n\t\treturn this._container;\n\t},\n\n\tonRemove: function (map) {\n\t\tmap\n\t\t    .off('layeradd', this._onLayerAdd)\n\t\t    .off('layerremove', this._onLayerRemove);\n\n\t},\n\n\tsetPrefix: function (prefix) {\n\t\tthis.options.prefix = prefix;\n\t\tthis._update();\n\t\treturn this;\n\t},\n\n\taddAttribution: function (text) {\n\t\tif (!text) { return; }\n\n\t\tif (!this._attributions[text]) {\n\t\t\tthis._attributions[text] = 0;\n\t\t}\n\t\tthis._attributions[text]++;\n\n\t\tthis._update();\n\n\t\treturn this;\n\t},\n\n\tremoveAttribution: function (text) {\n\t\tif (!text) { return; }\n\n\t\tif (this._attributions[text]) {\n\t\t\tthis._attributions[text]--;\n\t\t\tthis._update();\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t_update: function () {\n\t\tif (!this._map) { return; }\n\n\t\tvar attribs = [];\n\n\t\tfor (var i in this._attributions) {\n\t\t\tif (this._attributions[i]) {\n\t\t\t\tattribs.push(i);\n\t\t\t}\n\t\t}\n\n\t\tvar prefixAndAttribs = [];\n\n\t\tif (this.options.prefix) {\n\t\t\tprefixAndAttribs.push(this.options.prefix);\n\t\t}\n\t\tif (attribs.length) {\n\t\t\tprefixAndAttribs.push(attribs.join(', '));\n\t\t}\n\n\t\tthis._container.innerHTML = prefixAndAttribs.join(' | ');\n\t},\n\n\t_onLayerAdd: function (e) {\n\t\tif (e.layer.getAttribution) {\n\t\t\tthis.addAttribution(e.layer.getAttribution());\n\t\t}\n\t},\n\n\t_onLayerRemove: function (e) {\n\t\tif (e.layer.getAttribution) {\n\t\t\tthis.removeAttribution(e.layer.getAttribution());\n\t\t}\n\t}\n});\n\nL.Map.mergeOptions({\n\tattributionControl: true\n});\n\nL.Map.addInitHook(function () {\n\tif (this.options.attributionControl) {\n\t\tthis.attributionControl = (new L.Control.Attribution()).addTo(this);\n\t}\n});\n\nL.control.attribution = function (options) {\n\treturn new L.Control.Attribution(options);\n};\n\n\n/*\n * L.Control.Scale is used for displaying metric/imperial scale on the map.\n */\n\nL.Control.Scale = L.Control.extend({\n\toptions: {\n\t\tposition: 'bottomleft',\n\t\tmaxWidth: 100,\n\t\tmetric: true,\n\t\timperial: true,\n\t\tupdateWhenIdle: false\n\t},\n\n\tonAdd: function (map) {\n\t\tthis._map = map;\n\n\t\tvar className = 'leaflet-control-scale',\n\t\t    container = L.DomUtil.create('div', className),\n\t\t    options = this.options;\n\n\t\tthis._addScales(options, className, container);\n\n\t\tmap.on(options.updateWhenIdle ? 'moveend' : 'move', this._update, this);\n\t\tmap.whenReady(this._update, this);\n\n\t\treturn container;\n\t},\n\n\tonRemove: function (map) {\n\t\tmap.off(this.options.updateWhenIdle ? 'moveend' : 'move', this._update, this);\n\t},\n\n\t_addScales: function (options, className, container) {\n\t\tif (options.metric) {\n\t\t\tthis._mScale = L.DomUtil.create('div', className + '-line', container);\n\t\t}\n\t\tif (options.imperial) {\n\t\t\tthis._iScale = L.DomUtil.create('div', className + '-line', container);\n\t\t}\n\t},\n\n\t_update: function () {\n\t\tvar bounds = this._map.getBounds(),\n\t\t    centerLat = bounds.getCenter().lat,\n\t\t    halfWorldMeters = 6378137 * Math.PI * Math.cos(centerLat * Math.PI / 180),\n\t\t    dist = halfWorldMeters * (bounds.getNorthEast().lng - bounds.getSouthWest().lng) / 180,\n\n\t\t    size = this._map.getSize(),\n\t\t    options = this.options,\n\t\t    maxMeters = 0;\n\n\t\tif (size.x > 0) {\n\t\t\tmaxMeters = dist * (options.maxWidth / size.x);\n\t\t}\n\n\t\tthis._updateScales(options, maxMeters);\n\t},\n\n\t_updateScales: function (options, maxMeters) {\n\t\tif (options.metric && maxMeters) {\n\t\t\tthis._updateMetric(maxMeters);\n\t\t}\n\n\t\tif (options.imperial && maxMeters) {\n\t\t\tthis._updateImperial(maxMeters);\n\t\t}\n\t},\n\n\t_updateMetric: function (maxMeters) {\n\t\tvar meters = this._getRoundNum(maxMeters);\n\n\t\tthis._mScale.style.width = this._getScaleWidth(meters / maxMeters) + 'px';\n\t\tthis._mScale.innerHTML = meters < 1000 ? meters + ' m' : (meters / 1000) + ' km';\n\t},\n\n\t_updateImperial: function (maxMeters) {\n\t\tvar maxFeet = maxMeters * 3.2808399,\n\t\t    scale = this._iScale,\n\t\t    maxMiles, miles, feet;\n\n\t\tif (maxFeet > 5280) {\n\t\t\tmaxMiles = maxFeet / 5280;\n\t\t\tmiles = this._getRoundNum(maxMiles);\n\n\t\t\tscale.style.width = this._getScaleWidth(miles / maxMiles) + 'px';\n\t\t\tscale.innerHTML = miles + ' mi';\n\n\t\t} else {\n\t\t\tfeet = this._getRoundNum(maxFeet);\n\n\t\t\tscale.style.width = this._getScaleWidth(feet / maxFeet) + 'px';\n\t\t\tscale.innerHTML = feet + ' ft';\n\t\t}\n\t},\n\n\t_getScaleWidth: function (ratio) {\n\t\treturn Math.round(this.options.maxWidth * ratio) - 10;\n\t},\n\n\t_getRoundNum: function (num) {\n\t\tvar pow10 = Math.pow(10, (Math.floor(num) + '').length - 1),\n\t\t    d = num / pow10;\n\n\t\td = d >= 10 ? 10 : d >= 5 ? 5 : d >= 3 ? 3 : d >= 2 ? 2 : 1;\n\n\t\treturn pow10 * d;\n\t}\n});\n\nL.control.scale = function (options) {\n\treturn new L.Control.Scale(options);\n};\n\n\n/*\n * L.Control.Layers is a control to allow users to switch between different layers on the map.\n */\n\nL.Control.Layers = L.Control.extend({\n\toptions: {\n\t\tcollapsed: true,\n\t\tposition: 'topright',\n\t\tautoZIndex: true\n\t},\n\n\tinitialize: function (baseLayers, overlays, options) {\n\t\tL.setOptions(this, options);\n\n\t\tthis._layers = {};\n\t\tthis._lastZIndex = 0;\n\t\tthis._handlingClick = false;\n\n\t\tfor (var i in baseLayers) {\n\t\t\tthis._addLayer(baseLayers[i], i);\n\t\t}\n\n\t\tfor (i in overlays) {\n\t\t\tthis._addLayer(overlays[i], i, true);\n\t\t}\n\t},\n\n\tonAdd: function (map) {\n\t\tthis._initLayout();\n\t\tthis._update();\n\n\t\tmap\n\t\t    .on('layeradd', this._onLayerChange, this)\n\t\t    .on('layerremove', this._onLayerChange, this);\n\n\t\treturn this._container;\n\t},\n\n\tonRemove: function (map) {\n\t\tmap\n\t\t    .off('layeradd', this._onLayerChange, this)\n\t\t    .off('layerremove', this._onLayerChange, this);\n\t},\n\n\taddBaseLayer: function (layer, name) {\n\t\tthis._addLayer(layer, name);\n\t\tthis._update();\n\t\treturn this;\n\t},\n\n\taddOverlay: function (layer, name) {\n\t\tthis._addLayer(layer, name, true);\n\t\tthis._update();\n\t\treturn this;\n\t},\n\n\tremoveLayer: function (layer) {\n\t\tvar id = L.stamp(layer);\n\t\tdelete this._layers[id];\n\t\tthis._update();\n\t\treturn this;\n\t},\n\n\t_initLayout: function () {\n\t\tvar className = 'leaflet-control-layers',\n\t\t    container = this._container = L.DomUtil.create('div', className);\n\n\t\t//Makes this work on IE10 Touch devices by stopping it from firing a mouseout event when the touch is released\n\t\tcontainer.setAttribute('aria-haspopup', true);\n\n\t\tif (!L.Browser.touch) {\n\t\t\tL.DomEvent\n\t\t\t\t.disableClickPropagation(container)\n\t\t\t\t.disableScrollPropagation(container);\n\t\t} else {\n\t\t\tL.DomEvent.on(container, 'click', L.DomEvent.stopPropagation);\n\t\t}\n\n\t\tvar form = this._form = L.DomUtil.create('form', className + '-list');\n\n\t\tif (this.options.collapsed) {\n\t\t\tif (!L.Browser.android) {\n\t\t\t\tL.DomEvent\n\t\t\t\t    .on(container, 'mouseover', this._expand, this)\n\t\t\t\t    .on(container, 'mouseout', this._collapse, this);\n\t\t\t}\n\t\t\tvar link = this._layersLink = L.DomUtil.create('a', className + '-toggle', container);\n\t\t\tlink.href = '#';\n\t\t\tlink.title = 'Layers';\n\n\t\t\tif (L.Browser.touch) {\n\t\t\t\tL.DomEvent\n\t\t\t\t    .on(link, 'click', L.DomEvent.stop)\n\t\t\t\t    .on(link, 'click', this._expand, this);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tL.DomEvent.on(link, 'focus', this._expand, this);\n\t\t\t}\n\t\t\t//Work around for Firefox android issue https://github.com/Leaflet/Leaflet/issues/2033\n\t\t\tL.DomEvent.on(form, 'click', function () {\n\t\t\t\tsetTimeout(L.bind(this._onInputClick, this), 0);\n\t\t\t}, this);\n\n\t\t\tthis._map.on('click', this._collapse, this);\n\t\t\t// TODO keyboard accessibility\n\t\t} else {\n\t\t\tthis._expand();\n\t\t}\n\n\t\tthis._baseLayersList = L.DomUtil.create('div', className + '-base', form);\n\t\tthis._separator = L.DomUtil.create('div', className + '-separator', form);\n\t\tthis._overlaysList = L.DomUtil.create('div', className + '-overlays', form);\n\n\t\tcontainer.appendChild(form);\n\t},\n\n\t_addLayer: function (layer, name, overlay) {\n\t\tvar id = L.stamp(layer);\n\n\t\tthis._layers[id] = {\n\t\t\tlayer: layer,\n\t\t\tname: name,\n\t\t\toverlay: overlay\n\t\t};\n\n\t\tif (this.options.autoZIndex && layer.setZIndex) {\n\t\t\tthis._lastZIndex++;\n\t\t\tlayer.setZIndex(this._lastZIndex);\n\t\t}\n\t},\n\n\t_update: function () {\n\t\tif (!this._container) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._baseLayersList.innerHTML = '';\n\t\tthis._overlaysList.innerHTML = '';\n\n\t\tvar baseLayersPresent = false,\n\t\t    overlaysPresent = false,\n\t\t    i, obj;\n\n\t\tfor (i in this._layers) {\n\t\t\tobj = this._layers[i];\n\t\t\tthis._addItem(obj);\n\t\t\toverlaysPresent = overlaysPresent || obj.overlay;\n\t\t\tbaseLayersPresent = baseLayersPresent || !obj.overlay;\n\t\t}\n\n\t\tthis._separator.style.display = overlaysPresent && baseLayersPresent ? '' : 'none';\n\t},\n\n\t_onLayerChange: function (e) {\n\t\tvar obj = this._layers[L.stamp(e.layer)];\n\n\t\tif (!obj) { return; }\n\n\t\tif (!this._handlingClick) {\n\t\t\tthis._update();\n\t\t}\n\n\t\tvar type = obj.overlay ?\n\t\t\t(e.type === 'layeradd' ? 'overlayadd' : 'overlayremove') :\n\t\t\t(e.type === 'layeradd' ? 'baselayerchange' : null);\n\n\t\tif (type) {\n\t\t\tthis._map.fire(type, obj);\n\t\t}\n\t},\n\n\t// IE7 bugs out if you create a radio dynamically, so you have to do it this hacky way (see http://bit.ly/PqYLBe)\n\t_createRadioElement: function (name, checked) {\n\n\t\tvar radioHtml = '<input type=\"radio\" class=\"leaflet-control-layers-selector\" name=\"' + name + '\"';\n\t\tif (checked) {\n\t\t\tradioHtml += ' checked=\"checked\"';\n\t\t}\n\t\tradioHtml += '/>';\n\n\t\tvar radioFragment = document.createElement('div');\n\t\tradioFragment.innerHTML = radioHtml;\n\n\t\treturn radioFragment.firstChild;\n\t},\n\n\t_addItem: function (obj) {\n\t\tvar label = document.createElement('label'),\n\t\t    input,\n\t\t    checked = this._map.hasLayer(obj.layer);\n\n\t\tif (obj.overlay) {\n\t\t\tinput = document.createElement('input');\n\t\t\tinput.type = 'checkbox';\n\t\t\tinput.className = 'leaflet-control-layers-selector';\n\t\t\tinput.defaultChecked = checked;\n\t\t} else {\n\t\t\tinput = this._createRadioElement('leaflet-base-layers', checked);\n\t\t}\n\n\t\tinput.layerId = L.stamp(obj.layer);\n\n\t\tL.DomEvent.on(input, 'click', this._onInputClick, this);\n\n\t\tvar name = document.createElement('span');\n\t\tname.innerHTML = ' ' + obj.name;\n\n\t\tlabel.appendChild(input);\n\t\tlabel.appendChild(name);\n\n\t\tvar container = obj.overlay ? this._overlaysList : this._baseLayersList;\n\t\tcontainer.appendChild(label);\n\n\t\treturn label;\n\t},\n\n\t_onInputClick: function () {\n\t\tvar i, input, obj,\n\t\t    inputs = this._form.getElementsByTagName('input'),\n\t\t    inputsLen = inputs.length;\n\n\t\tthis._handlingClick = true;\n\n\t\tfor (i = 0; i < inputsLen; i++) {\n\t\t\tinput = inputs[i];\n\t\t\tobj = this._layers[input.layerId];\n\n\t\t\tif (input.checked && !this._map.hasLayer(obj.layer)) {\n\t\t\t\tthis._map.addLayer(obj.layer);\n\n\t\t\t} else if (!input.checked && this._map.hasLayer(obj.layer)) {\n\t\t\t\tthis._map.removeLayer(obj.layer);\n\t\t\t}\n\t\t}\n\n\t\tthis._handlingClick = false;\n\n\t\tthis._refocusOnMap();\n\t},\n\n\t_expand: function () {\n\t\tL.DomUtil.addClass(this._container, 'leaflet-control-layers-expanded');\n\t},\n\n\t_collapse: function () {\n\t\tthis._container.className = this._container.className.replace(' leaflet-control-layers-expanded', '');\n\t}\n});\n\nL.control.layers = function (baseLayers, overlays, options) {\n\treturn new L.Control.Layers(baseLayers, overlays, options);\n};\n\n\n/*\n * L.PosAnimation is used by Leaflet internally for pan animations.\n */\n\nL.PosAnimation = L.Class.extend({\n\tincludes: L.Mixin.Events,\n\n\trun: function (el, newPos, duration, easeLinearity) { // (HTMLElement, Point[, Number, Number])\n\t\tthis.stop();\n\n\t\tthis._el = el;\n\t\tthis._inProgress = true;\n\t\tthis._newPos = newPos;\n\n\t\tthis.fire('start');\n\n\t\tel.style[L.DomUtil.TRANSITION] = 'all ' + (duration || 0.25) +\n\t\t        's cubic-bezier(0,0,' + (easeLinearity || 0.5) + ',1)';\n\n\t\tL.DomEvent.on(el, L.DomUtil.TRANSITION_END, this._onTransitionEnd, this);\n\t\tL.DomUtil.setPosition(el, newPos);\n\n\t\t// toggle reflow, Chrome flickers for some reason if you don't do this\n\t\tL.Util.falseFn(el.offsetWidth);\n\n\t\t// there's no native way to track value updates of transitioned properties, so we imitate this\n\t\tthis._stepTimer = setInterval(L.bind(this._onStep, this), 50);\n\t},\n\n\tstop: function () {\n\t\tif (!this._inProgress) { return; }\n\n\t\t// if we just removed the transition property, the element would jump to its final position,\n\t\t// so we need to make it stay at the current position\n\n\t\tL.DomUtil.setPosition(this._el, this._getPos());\n\t\tthis._onTransitionEnd();\n\t\tL.Util.falseFn(this._el.offsetWidth); // force reflow in case we are about to start a new animation\n\t},\n\n\t_onStep: function () {\n\t\tvar stepPos = this._getPos();\n\t\tif (!stepPos) {\n\t\t\tthis._onTransitionEnd();\n\t\t\treturn;\n\t\t}\n\t\t// jshint camelcase: false\n\t\t// make L.DomUtil.getPosition return intermediate position value during animation\n\t\tthis._el._leaflet_pos = stepPos;\n\n\t\tthis.fire('step');\n\t},\n\n\t// you can't easily get intermediate values of properties animated with CSS3 Transitions,\n\t// we need to parse computed style (in case of transform it returns matrix string)\n\n\t_transformRe: /([-+]?(?:\\d*\\.)?\\d+)\\D*, ([-+]?(?:\\d*\\.)?\\d+)\\D*\\)/,\n\n\t_getPos: function () {\n\t\tvar left, top, matches,\n\t\t    el = this._el,\n\t\t    style = window.getComputedStyle(el);\n\n\t\tif (L.Browser.any3d) {\n\t\t\tmatches = style[L.DomUtil.TRANSFORM].match(this._transformRe);\n\t\t\tif (!matches) { return; }\n\t\t\tleft = parseFloat(matches[1]);\n\t\t\ttop  = parseFloat(matches[2]);\n\t\t} else {\n\t\t\tleft = parseFloat(style.left);\n\t\t\ttop  = parseFloat(style.top);\n\t\t}\n\n\t\treturn new L.Point(left, top, true);\n\t},\n\n\t_onTransitionEnd: function () {\n\t\tL.DomEvent.off(this._el, L.DomUtil.TRANSITION_END, this._onTransitionEnd, this);\n\n\t\tif (!this._inProgress) { return; }\n\t\tthis._inProgress = false;\n\n\t\tthis._el.style[L.DomUtil.TRANSITION] = '';\n\n\t\t// jshint camelcase: false\n\t\t// make sure L.DomUtil.getPosition returns the final position value after animation\n\t\tthis._el._leaflet_pos = this._newPos;\n\n\t\tclearInterval(this._stepTimer);\n\n\t\tthis.fire('step').fire('end');\n\t}\n\n});\n\n\n/*\n * Extends L.Map to handle panning animations.\n */\n\nL.Map.include({\n\n\tsetView: function (center, zoom, options) {\n\n\t\tzoom = zoom === undefined ? this._zoom : this._limitZoom(zoom);\n\t\tcenter = this._limitCenter(L.latLng(center), zoom, this.options.maxBounds);\n\t\toptions = options || {};\n\n\t\tif (this._panAnim) {\n\t\t\tthis._panAnim.stop();\n\t\t}\n\n\t\tif (this._loaded && !options.reset && options !== true) {\n\n\t\t\tif (options.animate !== undefined) {\n\t\t\t\toptions.zoom = L.extend({animate: options.animate}, options.zoom);\n\t\t\t\toptions.pan = L.extend({animate: options.animate}, options.pan);\n\t\t\t}\n\n\t\t\t// try animating pan or zoom\n\t\t\tvar animated = (this._zoom !== zoom) ?\n\t\t\t\tthis._tryAnimatedZoom && this._tryAnimatedZoom(center, zoom, options.zoom) :\n\t\t\t\tthis._tryAnimatedPan(center, options.pan);\n\n\t\t\tif (animated) {\n\t\t\t\t// prevent resize handler call, the view will refresh after animation anyway\n\t\t\t\tclearTimeout(this._sizeTimer);\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}\n\n\t\t// animation didn't start, just reset the map view\n\t\tthis._resetView(center, zoom);\n\n\t\treturn this;\n\t},\n\n\tpanBy: function (offset, options) {\n\t\toffset = L.point(offset).round();\n\t\toptions = options || {};\n\n\t\tif (!offset.x && !offset.y) {\n\t\t\treturn this;\n\t\t}\n\n\t\tif (!this._panAnim) {\n\t\t\tthis._panAnim = new L.PosAnimation();\n\n\t\t\tthis._panAnim.on({\n\t\t\t\t'step': this._onPanTransitionStep,\n\t\t\t\t'end': this._onPanTransitionEnd\n\t\t\t}, this);\n\t\t}\n\n\t\t// don't fire movestart if animating inertia\n\t\tif (!options.noMoveStart) {\n\t\t\tthis.fire('movestart');\n\t\t}\n\n\t\t// animate pan unless animate: false specified\n\t\tif (options.animate !== false) {\n\t\t\tL.DomUtil.addClass(this._mapPane, 'leaflet-pan-anim');\n\n\t\t\tvar newPos = this._getMapPanePos().subtract(offset);\n\t\t\tthis._panAnim.run(this._mapPane, newPos, options.duration || 0.25, options.easeLinearity);\n\t\t} else {\n\t\t\tthis._rawPanBy(offset);\n\t\t\tthis.fire('move').fire('moveend');\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t_onPanTransitionStep: function () {\n\t\tthis.fire('move');\n\t},\n\n\t_onPanTransitionEnd: function () {\n\t\tL.DomUtil.removeClass(this._mapPane, 'leaflet-pan-anim');\n\t\tthis.fire('moveend');\n\t},\n\n\t_tryAnimatedPan: function (center, options) {\n\t\t// difference between the new and current centers in pixels\n\t\tvar offset = this._getCenterOffset(center)._floor();\n\n\t\t// don't animate too far unless animate: true specified in options\n\t\tif ((options && options.animate) !== true && !this.getSize().contains(offset)) { return false; }\n\n\t\tthis.panBy(offset, options);\n\n\t\treturn true;\n\t}\n});\n\n\n/*\n * L.PosAnimation fallback implementation that powers Leaflet pan animations\n * in browsers that don't support CSS3 Transitions.\n */\n\nL.PosAnimation = L.DomUtil.TRANSITION ? L.PosAnimation : L.PosAnimation.extend({\n\n\trun: function (el, newPos, duration, easeLinearity) { // (HTMLElement, Point[, Number, Number])\n\t\tthis.stop();\n\n\t\tthis._el = el;\n\t\tthis._inProgress = true;\n\t\tthis._duration = duration || 0.25;\n\t\tthis._easeOutPower = 1 / Math.max(easeLinearity || 0.5, 0.2);\n\n\t\tthis._startPos = L.DomUtil.getPosition(el);\n\t\tthis._offset = newPos.subtract(this._startPos);\n\t\tthis._startTime = +new Date();\n\n\t\tthis.fire('start');\n\n\t\tthis._animate();\n\t},\n\n\tstop: function () {\n\t\tif (!this._inProgress) { return; }\n\n\t\tthis._step();\n\t\tthis._complete();\n\t},\n\n\t_animate: function () {\n\t\t// animation loop\n\t\tthis._animId = L.Util.requestAnimFrame(this._animate, this);\n\t\tthis._step();\n\t},\n\n\t_step: function () {\n\t\tvar elapsed = (+new Date()) - this._startTime,\n\t\t    duration = this._duration * 1000;\n\n\t\tif (elapsed < duration) {\n\t\t\tthis._runFrame(this._easeOut(elapsed / duration));\n\t\t} else {\n\t\t\tthis._runFrame(1);\n\t\t\tthis._complete();\n\t\t}\n\t},\n\n\t_runFrame: function (progress) {\n\t\tvar pos = this._startPos.add(this._offset.multiplyBy(progress));\n\t\tL.DomUtil.setPosition(this._el, pos);\n\n\t\tthis.fire('step');\n\t},\n\n\t_complete: function () {\n\t\tL.Util.cancelAnimFrame(this._animId);\n\n\t\tthis._inProgress = false;\n\t\tthis.fire('end');\n\t},\n\n\t_easeOut: function (t) {\n\t\treturn 1 - Math.pow(1 - t, this._easeOutPower);\n\t}\n});\n\n\n/*\n * Extends L.Map to handle zoom animations.\n */\n\nL.Map.mergeOptions({\n\tzoomAnimation: true,\n\tzoomAnimationThreshold: 4\n});\n\nif (L.DomUtil.TRANSITION) {\n\n\tL.Map.addInitHook(function () {\n\t\t// don't animate on browsers without hardware-accelerated transitions or old Android/Opera\n\t\tthis._zoomAnimated = this.options.zoomAnimation && L.DomUtil.TRANSITION &&\n\t\t\t\tL.Browser.any3d && !L.Browser.android23 && !L.Browser.mobileOpera;\n\n\t\t// zoom transitions run with the same duration for all layers, so if one of transitionend events\n\t\t// happens after starting zoom animation (propagating to the map pane), we know that it ended globally\n\t\tif (this._zoomAnimated) {\n\t\t\tL.DomEvent.on(this._mapPane, L.DomUtil.TRANSITION_END, this._catchTransitionEnd, this);\n\t\t}\n\t});\n}\n\nL.Map.include(!L.DomUtil.TRANSITION ? {} : {\n\n\t_catchTransitionEnd: function (e) {\n\t\tif (this._animatingZoom && e.propertyName.indexOf('transform') >= 0) {\n\t\t\tthis._onZoomTransitionEnd();\n\t\t}\n\t},\n\n\t_nothingToAnimate: function () {\n\t\treturn !this._container.getElementsByClassName('leaflet-zoom-animated').length;\n\t},\n\n\t_tryAnimatedZoom: function (center, zoom, options) {\n\n\t\tif (this._animatingZoom) { return true; }\n\n\t\toptions = options || {};\n\n\t\t// don't animate if disabled, not supported or zoom difference is too large\n\t\tif (!this._zoomAnimated || options.animate === false || this._nothingToAnimate() ||\n\t\t        Math.abs(zoom - this._zoom) > this.options.zoomAnimationThreshold) { return false; }\n\n\t\t// offset is the pixel coords of the zoom origin relative to the current center\n\t\tvar scale = this.getZoomScale(zoom),\n\t\t    offset = this._getCenterOffset(center)._divideBy(1 - 1 / scale),\n\t\t\torigin = this._getCenterLayerPoint()._add(offset);\n\n\t\t// don't animate if the zoom origin isn't within one screen from the current center, unless forced\n\t\tif (options.animate !== true && !this.getSize().contains(offset)) { return false; }\n\n\t\tthis\n\t\t    .fire('movestart')\n\t\t    .fire('zoomstart');\n\n\t\tthis._animateZoom(center, zoom, origin, scale, null, true);\n\n\t\treturn true;\n\t},\n\n\t_animateZoom: function (center, zoom, origin, scale, delta, backwards, forTouchZoom) {\n\n\t\tif (!forTouchZoom) {\n\t\t\tthis._animatingZoom = true;\n\t\t}\n\n\t\t// put transform transition on all layers with leaflet-zoom-animated class\n\t\tL.DomUtil.addClass(this._mapPane, 'leaflet-zoom-anim');\n\n\t\t// remember what center/zoom to set after animation\n\t\tthis._animateToCenter = center;\n\t\tthis._animateToZoom = zoom;\n\n\t\t// disable any dragging during animation\n\t\tif (L.Draggable) {\n\t\t\tL.Draggable._disabled = true;\n\t\t}\n\n\t\tL.Util.requestAnimFrame(function () {\n\t\t\tthis.fire('zoomanim', {\n\t\t\t\tcenter: center,\n\t\t\t\tzoom: zoom,\n\t\t\t\torigin: origin,\n\t\t\t\tscale: scale,\n\t\t\t\tdelta: delta,\n\t\t\t\tbackwards: backwards\n\t\t\t});\n\t\t\t// horrible hack to work around a Chrome bug https://github.com/Leaflet/Leaflet/issues/3689\n\t\t\tsetTimeout(L.bind(this._onZoomTransitionEnd, this), 250);\n\t\t}, this);\n\t},\n\n\t_onZoomTransitionEnd: function () {\n\t\tif (!this._animatingZoom) { return; }\n\n\t\tthis._animatingZoom = false;\n\n\t\tL.DomUtil.removeClass(this._mapPane, 'leaflet-zoom-anim');\n\n\t\tL.Util.requestAnimFrame(function () {\n\t\t\tthis._resetView(this._animateToCenter, this._animateToZoom, true, true);\n\n\t\t\tif (L.Draggable) {\n\t\t\t\tL.Draggable._disabled = false;\n\t\t\t}\n\t\t}, this);\n\t}\n});\n\n\n/*\n\tZoom animation logic for L.TileLayer.\n*/\n\nL.TileLayer.include({\n\t_animateZoom: function (e) {\n\t\tif (!this._animating) {\n\t\t\tthis._animating = true;\n\t\t\tthis._prepareBgBuffer();\n\t\t}\n\n\t\tvar bg = this._bgBuffer,\n\t\t    transform = L.DomUtil.TRANSFORM,\n\t\t    initialTransform = e.delta ? L.DomUtil.getTranslateString(e.delta) : bg.style[transform],\n\t\t    scaleStr = L.DomUtil.getScaleString(e.scale, e.origin);\n\n\t\tbg.style[transform] = e.backwards ?\n\t\t\t\tscaleStr + ' ' + initialTransform :\n\t\t\t\tinitialTransform + ' ' + scaleStr;\n\t},\n\n\t_endZoomAnim: function () {\n\t\tvar front = this._tileContainer,\n\t\t    bg = this._bgBuffer;\n\n\t\tfront.style.visibility = '';\n\t\tfront.parentNode.appendChild(front); // Bring to fore\n\n\t\t// force reflow\n\t\tL.Util.falseFn(bg.offsetWidth);\n\n\t\tvar zoom = this._map.getZoom();\n\t\tif (zoom > this.options.maxZoom || zoom < this.options.minZoom) {\n\t\t\tthis._clearBgBuffer();\n\t\t}\n\n\t\tthis._animating = false;\n\t},\n\n\t_clearBgBuffer: function () {\n\t\tvar map = this._map;\n\n\t\tif (map && !map._animatingZoom && !map.touchZoom._zooming) {\n\t\t\tthis._bgBuffer.innerHTML = '';\n\t\t\tthis._bgBuffer.style[L.DomUtil.TRANSFORM] = '';\n\t\t}\n\t},\n\n\t_prepareBgBuffer: function () {\n\n\t\tvar front = this._tileContainer,\n\t\t    bg = this._bgBuffer;\n\n\t\t// if foreground layer doesn't have many tiles but bg layer does,\n\t\t// keep the existing bg layer and just zoom it some more\n\n\t\tvar bgLoaded = this._getLoadedTilesPercentage(bg),\n\t\t    frontLoaded = this._getLoadedTilesPercentage(front);\n\n\t\tif (bg && bgLoaded > 0.5 && frontLoaded < 0.5) {\n\n\t\t\tfront.style.visibility = 'hidden';\n\t\t\tthis._stopLoadingImages(front);\n\t\t\treturn;\n\t\t}\n\n\t\t// prepare the buffer to become the front tile pane\n\t\tbg.style.visibility = 'hidden';\n\t\tbg.style[L.DomUtil.TRANSFORM] = '';\n\n\t\t// switch out the current layer to be the new bg layer (and vice-versa)\n\t\tthis._tileContainer = bg;\n\t\tbg = this._bgBuffer = front;\n\n\t\tthis._stopLoadingImages(bg);\n\n\t\t//prevent bg buffer from clearing right after zoom\n\t\tclearTimeout(this._clearBgBufferTimer);\n\t},\n\n\t_getLoadedTilesPercentage: function (container) {\n\t\tvar tiles = container.getElementsByTagName('img'),\n\t\t    i, len, count = 0;\n\n\t\tfor (i = 0, len = tiles.length; i < len; i++) {\n\t\t\tif (tiles[i].complete) {\n\t\t\t\tcount++;\n\t\t\t}\n\t\t}\n\t\treturn count / len;\n\t},\n\n\t// stops loading all tiles in the background layer\n\t_stopLoadingImages: function (container) {\n\t\tvar tiles = Array.prototype.slice.call(container.getElementsByTagName('img')),\n\t\t    i, len, tile;\n\n\t\tfor (i = 0, len = tiles.length; i < len; i++) {\n\t\t\ttile = tiles[i];\n\n\t\t\tif (!tile.complete) {\n\t\t\t\ttile.onload = L.Util.falseFn;\n\t\t\t\ttile.onerror = L.Util.falseFn;\n\t\t\t\ttile.src = L.Util.emptyImageUrl;\n\n\t\t\t\ttile.parentNode.removeChild(tile);\n\t\t\t}\n\t\t}\n\t}\n});\n\n\n/*\n * Provides L.Map with convenient shortcuts for using browser geolocation features.\n */\n\nL.Map.include({\n\t_defaultLocateOptions: {\n\t\twatch: false,\n\t\tsetView: false,\n\t\tmaxZoom: Infinity,\n\t\ttimeout: 10000,\n\t\tmaximumAge: 0,\n\t\tenableHighAccuracy: false\n\t},\n\n\tlocate: function (/*Object*/ options) {\n\n\t\toptions = this._locateOptions = L.extend(this._defaultLocateOptions, options);\n\n\t\tif (!navigator.geolocation) {\n\t\t\tthis._handleGeolocationError({\n\t\t\t\tcode: 0,\n\t\t\t\tmessage: 'Geolocation not supported.'\n\t\t\t});\n\t\t\treturn this;\n\t\t}\n\n\t\tvar onResponse = L.bind(this._handleGeolocationResponse, this),\n\t\t\tonError = L.bind(this._handleGeolocationError, this);\n\n\t\tif (options.watch) {\n\t\t\tthis._locationWatchId =\n\t\t\t        navigator.geolocation.watchPosition(onResponse, onError, options);\n\t\t} else {\n\t\t\tnavigator.geolocation.getCurrentPosition(onResponse, onError, options);\n\t\t}\n\t\treturn this;\n\t},\n\n\tstopLocate: function () {\n\t\tif (navigator.geolocation) {\n\t\t\tnavigator.geolocation.clearWatch(this._locationWatchId);\n\t\t}\n\t\tif (this._locateOptions) {\n\t\t\tthis._locateOptions.setView = false;\n\t\t}\n\t\treturn this;\n\t},\n\n\t_handleGeolocationError: function (error) {\n\t\tvar c = error.code,\n\t\t    message = error.message ||\n\t\t            (c === 1 ? 'permission denied' :\n\t\t            (c === 2 ? 'position unavailable' : 'timeout'));\n\n\t\tif (this._locateOptions.setView && !this._loaded) {\n\t\t\tthis.fitWorld();\n\t\t}\n\n\t\tthis.fire('locationerror', {\n\t\t\tcode: c,\n\t\t\tmessage: 'Geolocation error: ' + message + '.'\n\t\t});\n\t},\n\n\t_handleGeolocationResponse: function (pos) {\n\t\tvar lat = pos.coords.latitude,\n\t\t    lng = pos.coords.longitude,\n\t\t    latlng = new L.LatLng(lat, lng),\n\n\t\t    latAccuracy = 180 * pos.coords.accuracy / 40075017,\n\t\t    lngAccuracy = latAccuracy / Math.cos(L.LatLng.DEG_TO_RAD * lat),\n\n\t\t    bounds = L.latLngBounds(\n\t\t            [lat - latAccuracy, lng - lngAccuracy],\n\t\t            [lat + latAccuracy, lng + lngAccuracy]),\n\n\t\t    options = this._locateOptions;\n\n\t\tif (options.setView) {\n\t\t\tvar zoom = Math.min(this.getBoundsZoom(bounds), options.maxZoom);\n\t\t\tthis.setView(latlng, zoom);\n\t\t}\n\n\t\tvar data = {\n\t\t\tlatlng: latlng,\n\t\t\tbounds: bounds,\n\t\t\ttimestamp: pos.timestamp\n\t\t};\n\n\t\tfor (var i in pos.coords) {\n\t\t\tif (typeof pos.coords[i] === 'number') {\n\t\t\t\tdata[i] = pos.coords[i];\n\t\t\t}\n\t\t}\n\n\t\tthis.fire('locationfound', data);\n\t}\n});\n\n\n}(window, document));","(function (root, factory) {\n\tif (typeof define === 'function' && define.amd) {\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine(['leaflet'], factory);\n\t} else if (typeof modules === 'object' && module.exports) {\n\t\t// define a Common JS module that relies on 'leaflet'\n\t\tmodule.exports = factory(require('leaflet'));\n\t} else {\n\t\t// Assume Leaflet is loaded into global object L already\n\t\tfactory(L);\n\t}\n}(this, function (L) {\n\t'use strict';\n\n\tL.TileLayer.Provider = L.TileLayer.extend({\n\t\tinitialize: function (arg, options) {\n\t\t\tvar providers = L.TileLayer.Provider.providers;\n\n\t\t\tvar parts = arg.split('.');\n\n\t\t\tvar providerName = parts[0];\n\t\t\tvar variantName = parts[1];\n\n\t\t\tif (!providers[providerName]) {\n\t\t\t\tthrow 'No such provider (' + providerName + ')';\n\t\t\t}\n\n\t\t\tvar provider = {\n\t\t\t\turl: providers[providerName].url,\n\t\t\t\toptions: providers[providerName].options\n\t\t\t};\n\n\t\t\t// overwrite values in provider from variant.\n\t\t\tif (variantName && 'variants' in providers[providerName]) {\n\t\t\t\tif (!(variantName in providers[providerName].variants)) {\n\t\t\t\t\tthrow 'No such variant of ' + providerName + ' (' + variantName + ')';\n\t\t\t\t}\n\t\t\t\tvar variant = providers[providerName].variants[variantName];\n\t\t\t\tvar variantOptions;\n\t\t\t\tif (typeof variant === 'string') {\n\t\t\t\t\tvariantOptions = {\n\t\t\t\t\t\tvariant: variant\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tvariantOptions = variant.options;\n\t\t\t\t}\n\t\t\t\tprovider = {\n\t\t\t\t\turl: variant.url || provider.url,\n\t\t\t\t\toptions: L.Util.extend({}, provider.options, variantOptions)\n\t\t\t\t};\n\t\t\t} else if (typeof provider.url === 'function') {\n\t\t\t\tprovider.url = provider.url(parts.splice(1, parts.length - 1).join('.'));\n\t\t\t}\n\n\t\t\tvar forceHTTP = window.location.protocol === 'file:' || provider.options.forceHTTP;\n\t\t\tif (provider.url.indexOf('//') === 0 && forceHTTP) {\n\t\t\t\tprovider.url = 'http:' + provider.url;\n\t\t\t}\n\n\t\t\t// If retina option is set\n\t\t\tif (provider.options.retina) {\n\t\t\t\t// Check retina screen\n\t\t\t\tif (options.detectRetina && L.Browser.retina) {\n\t\t\t\t\t// The retina option will be active now\n\t\t\t\t\t// But we need to prevent Leaflet retina mode\n\t\t\t\t\toptions.detectRetina = false;\n\t\t\t\t} else {\n\t\t\t\t\t// No retina, remove option\n\t\t\t\t\tprovider.options.retina = '';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// replace attribution placeholders with their values from toplevel provider attribution,\n\t\t\t// recursively\n\t\t\tvar attributionReplacer = function (attr) {\n\t\t\t\tif (attr.indexOf('{attribution.') === -1) {\n\t\t\t\t\treturn attr;\n\t\t\t\t}\n\t\t\t\treturn attr.replace(/\\{attribution.(\\w*)\\}/,\n\t\t\t\t\tfunction (match, attributionName) {\n\t\t\t\t\t\treturn attributionReplacer(providers[attributionName].options.attribution);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t};\n\t\t\tprovider.options.attribution = attributionReplacer(provider.options.attribution);\n\n\t\t\t// Compute final options combining provider options with any user overrides\n\t\t\tvar layerOpts = L.Util.extend({}, provider.options, options);\n\t\t\tL.TileLayer.prototype.initialize.call(this, provider.url, layerOpts);\n\t\t}\n\t});\n\n\t/**\n\t * Definition of providers.\n\t * see http://leafletjs.com/reference.html#tilelayer for options in the options map.\n\t */\n\n\tL.TileLayer.Provider.providers = {\n\t\tOpenStreetMap: {\n\t\t\turl: '//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n\t\t\toptions: {\n\t\t\t\tmaxZoom: 19,\n\t\t\t\tattribution:\n\t\t\t\t\t'&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>'\n\t\t\t},\n\t\t\tvariants: {\n\t\t\t\tMapnik: {},\n\t\t\t\tBlackAndWhite: {\n\t\t\t\t\turl: 'http://{s}.tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png',\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tmaxZoom: 18\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tDE: {\n\t\t\t\t\turl: 'http://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png',\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tmaxZoom: 18\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tFrance: {\n\t\t\t\t\turl: 'http://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png',\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tattribution: '&copy; Openstreetmap France | {attribution.OpenStreetMap}'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tHOT: {\n\t\t\t\t\turl: 'http://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png',\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tattribution: '{attribution.OpenStreetMap}, Tiles courtesy of <a href=\"http://hot.openstreetmap.org/\" target=\"_blank\">Humanitarian OpenStreetMap Team</a>'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tOpenSeaMap: {\n\t\t\turl: 'http://tiles.openseamap.org/seamark/{z}/{x}/{y}.png',\n\t\t\toptions: {\n\t\t\t\tattribution: 'Map data: &copy; <a href=\"http://www.openseamap.org\">OpenSeaMap</a> contributors'\n\t\t\t}\n\t\t},\n\t\tOpenTopoMap: {\n\t\t\turl: '//{s}.tile.opentopomap.org/{z}/{x}/{y}.png',\n\t\t\toptions: {\n\t\t\t\tmaxZoom: 16,\n\t\t\t\tattribution: 'Map data: {attribution.OpenStreetMap}, <a href=\"http://viewfinderpanoramas.org\">SRTM</a> | Map style: &copy; <a href=\"https://opentopomap.org\">OpenTopoMap</a> (<a href=\"https://creativecommons.org/licenses/by-sa/3.0/\">CC-BY-SA</a>)'\n\t\t\t}\n\t\t},\n\t\tThunderforest: {\n\t\t\turl: '//{s}.tile.thunderforest.com/{variant}/{z}/{x}/{y}.png',\n\t\t\toptions: {\n\t\t\t\tattribution:\n\t\t\t\t\t'&copy; <a href=\"http://www.opencyclemap.org\">OpenCycleMap</a>, {attribution.OpenStreetMap}',\n\t\t\t\tvariant: 'cycle'\n\t\t\t},\n\t\t\tvariants: {\n\t\t\t\tOpenCycleMap: 'cycle',\n\t\t\t\tTransport: {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tvariant: 'transport',\n\t\t\t\t\t\tmaxZoom: 19\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tTransportDark: {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tvariant: 'transport-dark',\n\t\t\t\t\t\tmaxZoom: 19\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tLandscape: 'landscape',\n\t\t\t\tOutdoors: 'outdoors'\n\t\t\t}\n\t\t},\n\t\tOpenMapSurfer: {\n\t\t\turl: 'http://korona.geog.uni-heidelberg.de/tiles/{variant}/x={x}&y={y}&z={z}',\n\t\t\toptions: {\n\t\t\t\tmaxZoom: 20,\n\t\t\t\tvariant: 'roads',\n\t\t\t\tattribution: 'Imagery from <a href=\"http://giscience.uni-hd.de/\">GIScience Research Group @ University of Heidelberg</a> &mdash; Map data {attribution.OpenStreetMap}'\n\t\t\t},\n\t\t\tvariants: {\n\t\t\t\tRoads: 'roads',\n\t\t\t\tAdminBounds: {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tvariant: 'adminb',\n\t\t\t\t\t\tmaxZoom: 19\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tGrayscale: {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tvariant: 'roadsg',\n\t\t\t\t\t\tmaxZoom: 19\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tHydda: {\n\t\t\turl: 'http://{s}.tile.openstreetmap.se/hydda/{variant}/{z}/{x}/{y}.png',\n\t\t\toptions: {\n\t\t\t\tvariant: 'full',\n\t\t\t\tattribution: 'Tiles courtesy of <a href=\"http://openstreetmap.se/\" target=\"_blank\">OpenStreetMap Sweden</a> &mdash; Map data {attribution.OpenStreetMap}'\n\t\t\t},\n\t\t\tvariants: {\n\t\t\t\tFull: 'full',\n\t\t\t\tBase: 'base',\n\t\t\t\tRoadsAndLabels: 'roads_and_labels'\n\t\t\t}\n\t\t},\n\t\tMapQuestOpen: {\n\t\t\t/* Mapquest does support https, but with a different subdomain:\n\t\t\t * https://otile{s}-s.mqcdn.com/tiles/1.0.0/{type}/{z}/{x}/{y}.{ext}\n\t\t\t * which makes implementing protocol relativity impossible.\n\t\t\t */\n\t\t\turl: 'http://otile{s}.mqcdn.com/tiles/1.0.0/{type}/{z}/{x}/{y}.{ext}',\n\t\t\toptions: {\n\t\t\t\ttype: 'map',\n\t\t\t\text: 'jpg',\n\t\t\t\tattribution:\n\t\t\t\t\t'Tiles Courtesy of <a href=\"http://www.mapquest.com/\">MapQuest</a> &mdash; ' +\n\t\t\t\t\t'Map data {attribution.OpenStreetMap}',\n\t\t\t\tsubdomains: '1234'\n\t\t\t},\n\t\t\tvariants: {\n\t\t\t\tOSM: {},\n\t\t\t\tAerial: {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\ttype: 'sat',\n\t\t\t\t\t\tattribution:\n\t\t\t\t\t\t\t'Tiles Courtesy of <a href=\"http://www.mapquest.com/\">MapQuest</a> &mdash; ' +\n\t\t\t\t\t\t\t'Portions Courtesy NASA/JPL-Caltech and U.S. Depart. of Agriculture, Farm Service Agency'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tHybridOverlay: {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\ttype: 'hyb',\n\t\t\t\t\t\text: 'png',\n\t\t\t\t\t\topacity: 0.9\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tMapBox: {\n\t\t\turl: '//api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}',\n\t\t\toptions: {\n\t\t\t\tattribution:\n\t\t\t\t\t'Imagery from <a href=\"http://mapbox.com/about/maps/\">MapBox</a> &mdash; ' +\n\t\t\t\t\t'Map data {attribution.OpenStreetMap}',\n\t\t\t\tsubdomains: 'abcd'\n\t\t\t}\n\t\t},\n\t\tStamen: {\n\t\t\turl: '//stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}.{ext}',\n\t\t\toptions: {\n\t\t\t\tattribution:\n\t\t\t\t\t'Map tiles by <a href=\"http://stamen.com\">Stamen Design</a>, ' +\n\t\t\t\t\t'<a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a> &mdash; ' +\n\t\t\t\t\t'Map data {attribution.OpenStreetMap}',\n\t\t\t\tsubdomains: 'abcd',\n\t\t\t\tminZoom: 0,\n\t\t\t\tmaxZoom: 20,\n\t\t\t\tvariant: 'toner',\n\t\t\t\text: 'png'\n\t\t\t},\n\t\t\tvariants: {\n\t\t\t\tToner: 'toner',\n\t\t\t\tTonerBackground: 'toner-background',\n\t\t\t\tTonerHybrid: 'toner-hybrid',\n\t\t\t\tTonerLines: 'toner-lines',\n\t\t\t\tTonerLabels: 'toner-labels',\n\t\t\t\tTonerLite: 'toner-lite',\n\t\t\t\tWatercolor: {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tvariant: 'watercolor',\n\t\t\t\t\t\tminZoom: 1,\n\t\t\t\t\t\tmaxZoom: 16\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tTerrain: {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tvariant: 'terrain',\n\t\t\t\t\t\tminZoom: 4,\n\t\t\t\t\t\tmaxZoom: 18,\n\t\t\t\t\t\tbounds: [[22, -132], [70, -56]]\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tTerrainBackground: {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tvariant: 'terrain-background',\n\t\t\t\t\t\tminZoom: 4,\n\t\t\t\t\t\tmaxZoom: 18,\n\t\t\t\t\t\tbounds: [[22, -132], [70, -56]]\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tTopOSMRelief: {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tvariant: 'toposm-color-relief',\n\t\t\t\t\t\text: 'jpg',\n\t\t\t\t\t\tbounds: [[22, -132], [51, -56]]\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tTopOSMFeatures: {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tvariant: 'toposm-features',\n\t\t\t\t\t\tbounds: [[22, -132], [51, -56]],\n\t\t\t\t\t\topacity: 0.9\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tEsri: {\n\t\t\turl: '//server.arcgisonline.com/ArcGIS/rest/services/{variant}/MapServer/tile/{z}/{y}/{x}',\n\t\t\toptions: {\n\t\t\t\tvariant: 'World_Street_Map',\n\t\t\t\tattribution: 'Tiles &copy; Esri'\n\t\t\t},\n\t\t\tvariants: {\n\t\t\t\tWorldStreetMap: {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tattribution:\n\t\t\t\t\t\t\t'{attribution.Esri} &mdash; ' +\n\t\t\t\t\t\t\t'Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tDeLorme: {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tvariant: 'Specialty/DeLorme_World_Base_Map',\n\t\t\t\t\t\tminZoom: 1,\n\t\t\t\t\t\tmaxZoom: 11,\n\t\t\t\t\t\tattribution: '{attribution.Esri} &mdash; Copyright: &copy;2012 DeLorme'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tWorldTopoMap: {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tvariant: 'World_Topo_Map',\n\t\t\t\t\t\tattribution:\n\t\t\t\t\t\t\t'{attribution.Esri} &mdash; ' +\n\t\t\t\t\t\t\t'Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tWorldImagery: {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tvariant: 'World_Imagery',\n\t\t\t\t\t\tattribution:\n\t\t\t\t\t\t\t'{attribution.Esri} &mdash; ' +\n\t\t\t\t\t\t\t'Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tWorldTerrain: {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tvariant: 'World_Terrain_Base',\n\t\t\t\t\t\tmaxZoom: 13,\n\t\t\t\t\t\tattribution:\n\t\t\t\t\t\t\t'{attribution.Esri} &mdash; ' +\n\t\t\t\t\t\t\t'Source: USGS, Esri, TANA, DeLorme, and NPS'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tWorldShadedRelief: {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tvariant: 'World_Shaded_Relief',\n\t\t\t\t\t\tmaxZoom: 13,\n\t\t\t\t\t\tattribution: '{attribution.Esri} &mdash; Source: Esri'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tWorldPhysical: {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tvariant: 'World_Physical_Map',\n\t\t\t\t\t\tmaxZoom: 8,\n\t\t\t\t\t\tattribution: '{attribution.Esri} &mdash; Source: US National Park Service'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tOceanBasemap: {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tvariant: 'Ocean_Basemap',\n\t\t\t\t\t\tmaxZoom: 13,\n\t\t\t\t\t\tattribution: '{attribution.Esri} &mdash; Sources: GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tNatGeoWorldMap: {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tvariant: 'NatGeo_World_Map',\n\t\t\t\t\t\tmaxZoom: 16,\n\t\t\t\t\t\tattribution: '{attribution.Esri} &mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tWorldGrayCanvas: {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tvariant: 'Canvas/World_Light_Gray_Base',\n\t\t\t\t\t\tmaxZoom: 16,\n\t\t\t\t\t\tattribution: '{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tOpenWeatherMap: {\n\t\t\turl: 'http://{s}.tile.openweathermap.org/map/{variant}/{z}/{x}/{y}.png',\n\t\t\toptions: {\n\t\t\t\tmaxZoom: 19,\n\t\t\t\tattribution: 'Map data &copy; <a href=\"http://openweathermap.org\">OpenWeatherMap</a>',\n\t\t\t\topacity: 0.5\n\t\t\t},\n\t\t\tvariants: {\n\t\t\t\tClouds: 'clouds',\n\t\t\t\tCloudsClassic: 'clouds_cls',\n\t\t\t\tPrecipitation: 'precipitation',\n\t\t\t\tPrecipitationClassic: 'precipitation_cls',\n\t\t\t\tRain: 'rain',\n\t\t\t\tRainClassic: 'rain_cls',\n\t\t\t\tPressure: 'pressure',\n\t\t\t\tPressureContour: 'pressure_cntr',\n\t\t\t\tWind: 'wind',\n\t\t\t\tTemperature: 'temp',\n\t\t\t\tSnow: 'snow'\n\t\t\t}\n\t\t},\n\t\tHERE: {\n\t\t\t/*\n\t\t\t * HERE maps, formerly Nokia maps.\n\t\t\t * These basemaps are free, but you need an API key. Please sign up at\n\t\t\t * http://developer.here.com/getting-started\n\t\t\t *\n\t\t\t * Note that the base urls contain '.cit' whichs is HERE's\n\t\t\t * 'Customer Integration Testing' environment. Please remove for production\n\t\t\t * envirionments.\n\t\t\t */\n\t\t\turl:\n\t\t\t\t'//{s}.{base}.maps.cit.api.here.com/maptile/2.1/' +\n\t\t\t\t'{type}/{mapID}/{variant}/{z}/{x}/{y}/{size}/{format}?' +\n\t\t\t\t'app_id={app_id}&app_code={app_code}&lg={language}',\n\t\t\toptions: {\n\t\t\t\tattribution:\n\t\t\t\t\t'Map &copy; 1987-2014 <a href=\"http://developer.here.com\">HERE</a>',\n\t\t\t\tsubdomains: '1234',\n\t\t\t\tmapID: 'newest',\n\t\t\t\t'app_id': '<insert your app_id here>',\n\t\t\t\t'app_code': '<insert your app_code here>',\n\t\t\t\tbase: 'base',\n\t\t\t\tvariant: 'normal.day',\n\t\t\t\tmaxZoom: 20,\n\t\t\t\ttype: 'maptile',\n\t\t\t\tlanguage: 'eng',\n\t\t\t\tformat: 'png8',\n\t\t\t\tsize: '256'\n\t\t\t},\n\t\t\tvariants: {\n\t\t\t\tnormalDay: 'normal.day',\n\t\t\t\tnormalDayCustom: 'normal.day.custom',\n\t\t\t\tnormalDayGrey: 'normal.day.grey',\n\t\t\t\tnormalDayMobile: 'normal.day.mobile',\n\t\t\t\tnormalDayGreyMobile: 'normal.day.grey.mobile',\n\t\t\t\tnormalDayTransit: 'normal.day.transit',\n\t\t\t\tnormalDayTransitMobile: 'normal.day.transit.mobile',\n\t\t\t\tnormalNight: 'normal.night',\n\t\t\t\tnormalNightMobile: 'normal.night.mobile',\n\t\t\t\tnormalNightGrey: 'normal.night.grey',\n\t\t\t\tnormalNightGreyMobile: 'normal.night.grey.mobile',\n\n\t\t\t\tbasicMap: {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\ttype: 'basetile'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tmapLabels: {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\ttype: 'labeltile',\n\t\t\t\t\t\tformat: 'png'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ttrafficFlow: {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tbase: 'traffic',\n\t\t\t\t\t\ttype: 'flowtile'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcarnavDayGrey: 'carnav.day.grey',\n\t\t\t\thybridDay: {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tbase: 'aerial',\n\t\t\t\t\t\tvariant: 'hybrid.day'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\thybridDayMobile: {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tbase: 'aerial',\n\t\t\t\t\t\tvariant: 'hybrid.day.mobile'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tpedestrianDay: 'pedestrian.day',\n\t\t\t\tpedestrianNight: 'pedestrian.night',\n\t\t\t\tsatelliteDay: {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tbase: 'aerial',\n\t\t\t\t\t\tvariant: 'satellite.day'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tterrainDay: {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tbase: 'aerial',\n\t\t\t\t\t\tvariant: 'terrain.day'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tterrainDayMobile: {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tbase: 'aerial',\n\t\t\t\t\t\tvariant: 'terrain.day.mobile'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tFreeMapSK: {\n\t\t\turl: 'http://t{s}.freemap.sk/T/{z}/{x}/{y}.jpeg',\n\t\t\toptions: {\n\t\t\t\tminZoom: 8,\n\t\t\t\tmaxZoom: 16,\n\t\t\t\tsubdomains: '1234',\n\t\t\t\tbounds: [[47.204642, 15.996093], [49.830896, 22.576904]],\n\t\t\t\tattribution:\n\t\t\t\t\t'{attribution.OpenStreetMap}, vizualization CC-By-SA 2.0 <a href=\"http://freemap.sk\">Freemap.sk</a>'\n\t\t\t}\n\t\t},\n\t\tMtbMap: {\n\t\t\turl: 'http://tile.mtbmap.cz/mtbmap_tiles/{z}/{x}/{y}.png',\n\t\t\toptions: {\n\t\t\t\tattribution:\n\t\t\t\t\t'{attribution.OpenStreetMap} &amp; USGS'\n\t\t\t}\n\t\t},\n\t\tCartoDB: {\n\t\t\turl: 'http://{s}.basemaps.cartocdn.com/{variant}/{z}/{x}/{y}.png',\n\t\t\toptions: {\n\t\t\t\tattribution: '{attribution.OpenStreetMap} &copy; <a href=\"http://cartodb.com/attributions\">CartoDB</a>',\n\t\t\t\tsubdomains: 'abcd',\n\t\t\t\tmaxZoom: 19,\n\t\t\t\tvariant: 'light_all'\n\t\t\t},\n\t\t\tvariants: {\n\t\t\t\tPositron: 'light_all',\n\t\t\t\tPositronNoLabels: 'light_nolabels',\n\t\t\t\tPositronOnlyLabels: 'light_only_labels',\n\t\t\t\tDarkMatter: 'dark_all',\n\t\t\t\tDarkMatterNoLabels: 'dark_nolabels',\n\t\t\t\tDarkMatterOnlyLabels: 'dark_only_labels'\n\t\t\t}\n\t\t},\n\t\tHikeBike: {\n\t\t\turl: 'http://{s}.tiles.wmflabs.org/{variant}/{z}/{x}/{y}.png',\n\t\t\toptions: {\n\t\t\t\tmaxZoom: 19,\n\t\t\t\tattribution: '{attribution.OpenStreetMap}',\n\t\t\t\tvariant: 'hikebike'\n\t\t\t},\n\t\t\tvariants: {\n\t\t\t\tHikeBike: {},\n\t\t\t\tHillShading: {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tmaxZoom: 15,\n\t\t\t\t\t\tvariant: 'hillshading'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tBasemapAT: {\n\t\t\turl: '//maps{s}.wien.gv.at/basemap/{variant}/normal/google3857/{z}/{y}/{x}.{format}',\n\t\t\toptions: {\n\t\t\t\tmaxZoom: 19,\n\t\t\t\tattribution: 'Datenquelle: <a href=\"www.basemap.at\">basemap.at</a>',\n\t\t\t\tsubdomains: ['', '1', '2', '3', '4'],\n\t\t\t\tformat: 'png',\n\t\t\t\tbounds: [[46.358770, 8.782379], [49.037872, 17.189532]],\n\t\t\t\tvariant: 'geolandbasemap'\n\t\t\t},\n\t\t\tvariants: {\n\t\t\t\tbasemap: 'geolandbasemap',\n\t\t\t\tgrau: 'bmapgrau',\n\t\t\t\toverlay: 'bmapoverlay',\n\t\t\t\thighdpi: {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tvariant: 'bmaphidpi',\n\t\t\t\t\t\tformat: 'jpeg'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\torthofoto: {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tvariant: 'bmaporthofoto30cm',\n\t\t\t\t\t\tformat: 'jpeg'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tNASAGIBS: {\n\t\t\turl: '//map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}{maxZoom}/{z}/{y}/{x}.{format}',\n\t\t\toptions: {\n\t\t\t\tattribution:\n\t\t\t\t\t'Imagery provided by services from the Global Imagery Browse Services (GIBS), operated by the NASA/GSFC/Earth Science Data and Information System ' +\n\t\t\t\t\t'(<a href=\"https://earthdata.nasa.gov\">ESDIS</a>) with funding provided by NASA/HQ.',\n\t\t\t\tbounds: [[-85.0511287776, -179.999999975], [85.0511287776, 179.999999975]],\n\t\t\t\tminZoom: 1,\n\t\t\t\tmaxZoom: 9,\n\t\t\t\tformat: 'jpg',\n\t\t\t\ttime: '',\n\t\t\t\ttilematrixset: 'GoogleMapsCompatible_Level'\n\t\t\t},\n\t\t\tvariants: {\n\t\t\t\tModisTerraTrueColorCR: 'MODIS_Terra_CorrectedReflectance_TrueColor',\n\t\t\t\tModisTerraBands367CR: 'MODIS_Terra_CorrectedReflectance_Bands367',\n\t\t\t\tViirsEarthAtNight2012: {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tvariant: 'VIIRS_CityLights_2012',\n\t\t\t\t\t\tmaxZoom: 8\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tModisTerraLSTDay: {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tvariant: 'MODIS_Terra_Land_Surface_Temp_Day',\n\t\t\t\t\t\tformat: 'png',\n\t\t\t\t\t\tmaxZoom: 7,\n\t\t\t\t\t\topacity: 0.75\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tModisTerraSnowCover: {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tvariant: 'MODIS_Terra_Snow_Cover',\n\t\t\t\t\t\tformat: 'png',\n\t\t\t\t\t\tmaxZoom: 8,\n\t\t\t\t\t\topacity: 0.75\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tModisTerraAOD: {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tvariant: 'MODIS_Terra_Aerosol',\n\t\t\t\t\t\tformat: 'png',\n\t\t\t\t\t\tmaxZoom: 6,\n\t\t\t\t\t\topacity: 0.75\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tModisTerraChlorophyll: {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tvariant: 'MODIS_Terra_Chlorophyll_A',\n\t\t\t\t\t\tformat: 'png',\n\t\t\t\t\t\tmaxZoom: 7,\n\t\t\t\t\t\topacity: 0.75\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tNLS: {\n\t\t\t// NLS maps are copyright National library of Scotland.\n\t\t\t// http://maps.nls.uk/projects/api/index.html\n\t\t\t// Please contact NLS for anything other than non-commercial low volume usage\n\t\t\t//\n\t\t\t// Map sources: Ordnance Survey 1:1m to 1:63K, 1920s-1940s\n\t\t\t//   z0-9  - 1:1m\n\t\t\t//  z10-11 - quarter inch (1:253440)\n\t\t\t//  z12-18 - one inch (1:63360)\n\t\t\turl: '//nls-{s}.tileserver.com/nls/{z}/{x}/{y}.jpg',\n\t\t\toptions: {\n\t\t\t\tattribution: '<a href=\"http://geo.nls.uk/maps/\">National Library of Scotland Historic Maps</a>',\n\t\t\t\tbounds: [[49.6, -12], [61.7, 3]],\n\t\t\t\tminZoom: 1,\n\t\t\t\tmaxZoom: 18,\n\t\t\t\tsubdomains: '0123',\n\t\t\t}\n\t\t}\n\t};\n\n\tL.tileLayer.provider = function (provider, options) {\n\t\treturn new L.TileLayer.Provider(provider, options);\n\t};\n\n\treturn L;\n}));\n","/**\n * Copyright (c) 2011-2014 Felix Gnass\n * Licensed under the MIT license\n * http://spin.js.org/\n *\n * Example:\n    var opts = {\n      lines: 12             // The number of lines to draw\n    , length: 7             // The length of each line\n    , width: 5              // The line thickness\n    , radius: 10            // The radius of the inner circle\n    , scale: 1.0            // Scales overall size of the spinner\n    , corners: 1            // Roundness (0..1)\n    , color: '#000'         // #rgb or #rrggbb\n    , opacity: 1/4          // Opacity of the lines\n    , rotate: 0             // Rotation offset\n    , direction: 1          // 1: clockwise, -1: counterclockwise\n    , speed: 1              // Rounds per second\n    , trail: 100            // Afterglow percentage\n    , fps: 20               // Frames per second when using setTimeout()\n    , zIndex: 2e9           // Use a high z-index by default\n    , className: 'spinner'  // CSS class to assign to the element\n    , top: '50%'            // center vertically\n    , left: '50%'           // center horizontally\n    , shadow: false         // Whether to render a shadow\n    , hwaccel: false        // Whether to use hardware acceleration (might be buggy)\n    , position: 'absolute'  // Element positioning\n    }\n    var target = document.getElementById('foo')\n    var spinner = new Spinner(opts).spin(target)\n */\n;(function (root, factory) {\n\n  /* CommonJS */\n  if (typeof module == 'object' && module.exports) module.exports = factory()\n\n  /* AMD module */\n  else if (typeof define == 'function' && define.amd) define(factory)\n\n  /* Browser global */\n  else root.Spinner = factory()\n}(this, function () {\n  \"use strict\"\n\n  var prefixes = ['webkit', 'Moz', 'ms', 'O'] /* Vendor prefixes */\n    , animations = {} /* Animation rules keyed by their name */\n    , useCssAnimations /* Whether to use CSS animations or setTimeout */\n    , sheet /* A stylesheet to hold the @keyframe or VML rules. */\n\n  /**\n   * Utility function to create elements. If no tag name is given,\n   * a DIV is created. Optionally properties can be passed.\n   */\n  function createEl (tag, prop) {\n    var el = document.createElement(tag || 'div')\n      , n\n\n    for (n in prop) el[n] = prop[n]\n    return el\n  }\n\n  /**\n   * Appends children and returns the parent.\n   */\n  function ins (parent /* child1, child2, ...*/) {\n    for (var i = 1, n = arguments.length; i < n; i++) {\n      parent.appendChild(arguments[i])\n    }\n\n    return parent\n  }\n\n  /**\n   * Creates an opacity keyframe animation rule and returns its name.\n   * Since most mobile Webkits have timing issues with animation-delay,\n   * we create separate rules for each line/segment.\n   */\n  function addAnimation (alpha, trail, i, lines) {\n    var name = ['opacity', trail, ~~(alpha * 100), i, lines].join('-')\n      , start = 0.01 + i/lines * 100\n      , z = Math.max(1 - (1-alpha) / trail * (100-start), alpha)\n      , prefix = useCssAnimations.substring(0, useCssAnimations.indexOf('Animation')).toLowerCase()\n      , pre = prefix && '-' + prefix + '-' || ''\n\n    if (!animations[name]) {\n      sheet.insertRule(\n        '@' + pre + 'keyframes ' + name + '{' +\n        '0%{opacity:' + z + '}' +\n        start + '%{opacity:' + alpha + '}' +\n        (start+0.01) + '%{opacity:1}' +\n        (start+trail) % 100 + '%{opacity:' + alpha + '}' +\n        '100%{opacity:' + z + '}' +\n        '}', sheet.cssRules.length)\n\n      animations[name] = 1\n    }\n\n    return name\n  }\n\n  /**\n   * Tries various vendor prefixes and returns the first supported property.\n   */\n  function vendor (el, prop) {\n    var s = el.style\n      , pp\n      , i\n\n    prop = prop.charAt(0).toUpperCase() + prop.slice(1)\n    if (s[prop] !== undefined) return prop\n    for (i = 0; i < prefixes.length; i++) {\n      pp = prefixes[i]+prop\n      if (s[pp] !== undefined) return pp\n    }\n  }\n\n  /**\n   * Sets multiple style properties at once.\n   */\n  function css (el, prop) {\n    for (var n in prop) {\n      el.style[vendor(el, n) || n] = prop[n]\n    }\n\n    return el\n  }\n\n  /**\n   * Fills in default values.\n   */\n  function merge (obj) {\n    for (var i = 1; i < arguments.length; i++) {\n      var def = arguments[i]\n      for (var n in def) {\n        if (obj[n] === undefined) obj[n] = def[n]\n      }\n    }\n    return obj\n  }\n\n  /**\n   * Returns the line color from the given string or array.\n   */\n  function getColor (color, idx) {\n    return typeof color == 'string' ? color : color[idx % color.length]\n  }\n\n  // Built-in defaults\n\n  var defaults = {\n    lines: 12             // The number of lines to draw\n  , length: 7             // The length of each line\n  , width: 5              // The line thickness\n  , radius: 10            // The radius of the inner circle\n  , scale: 1.0            // Scales overall size of the spinner\n  , corners: 1            // Roundness (0..1)\n  , color: '#000'         // #rgb or #rrggbb\n  , opacity: 1/4          // Opacity of the lines\n  , rotate: 0             // Rotation offset\n  , direction: 1          // 1: clockwise, -1: counterclockwise\n  , speed: 1              // Rounds per second\n  , trail: 100            // Afterglow percentage\n  , fps: 20               // Frames per second when using setTimeout()\n  , zIndex: 2e9           // Use a high z-index by default\n  , className: 'spinner'  // CSS class to assign to the element\n  , top: '50%'            // center vertically\n  , left: '50%'           // center horizontally\n  , shadow: false         // Whether to render a shadow\n  , hwaccel: false        // Whether to use hardware acceleration (might be buggy)\n  , position: 'absolute'  // Element positioning\n  }\n\n  /** The constructor */\n  function Spinner (o) {\n    this.opts = merge(o || {}, Spinner.defaults, defaults)\n  }\n\n  // Global defaults that override the built-ins:\n  Spinner.defaults = {}\n\n  merge(Spinner.prototype, {\n    /**\n     * Adds the spinner to the given target element. If this instance is already\n     * spinning, it is automatically removed from its previous target b calling\n     * stop() internally.\n     */\n    spin: function (target) {\n      this.stop()\n\n      var self = this\n        , o = self.opts\n        , el = self.el = createEl(null, {className: o.className})\n\n      css(el, {\n        position: o.position\n      , width: 0\n      , zIndex: o.zIndex\n      , left: o.left\n      , top: o.top\n      })\n\n      if (target) {\n        target.insertBefore(el, target.firstChild || null)\n      }\n\n      el.setAttribute('role', 'progressbar')\n      self.lines(el, self.opts)\n\n      if (!useCssAnimations) {\n        // No CSS animation support, use setTimeout() instead\n        var i = 0\n          , start = (o.lines - 1) * (1 - o.direction) / 2\n          , alpha\n          , fps = o.fps\n          , f = fps / o.speed\n          , ostep = (1 - o.opacity) / (f * o.trail / 100)\n          , astep = f / o.lines\n\n        ;(function anim () {\n          i++\n          for (var j = 0; j < o.lines; j++) {\n            alpha = Math.max(1 - (i + (o.lines - j) * astep) % f * ostep, o.opacity)\n\n            self.opacity(el, j * o.direction + start, alpha, o)\n          }\n          self.timeout = self.el && setTimeout(anim, ~~(1000 / fps))\n        })()\n      }\n      return self\n    }\n\n    /**\n     * Stops and removes the Spinner.\n     */\n  , stop: function () {\n      var el = this.el\n      if (el) {\n        clearTimeout(this.timeout)\n        if (el.parentNode) el.parentNode.removeChild(el)\n        this.el = undefined\n      }\n      return this\n    }\n\n    /**\n     * Internal method that draws the individual lines. Will be overwritten\n     * in VML fallback mode below.\n     */\n  , lines: function (el, o) {\n      var i = 0\n        , start = (o.lines - 1) * (1 - o.direction) / 2\n        , seg\n\n      function fill (color, shadow) {\n        return css(createEl(), {\n          position: 'absolute'\n        , width: o.scale * (o.length + o.width) + 'px'\n        , height: o.scale * o.width + 'px'\n        , background: color\n        , boxShadow: shadow\n        , transformOrigin: 'left'\n        , transform: 'rotate(' + ~~(360/o.lines*i + o.rotate) + 'deg) translate(' + o.scale*o.radius + 'px' + ',0)'\n        , borderRadius: (o.corners * o.scale * o.width >> 1) + 'px'\n        })\n      }\n\n      for (; i < o.lines; i++) {\n        seg = css(createEl(), {\n          position: 'absolute'\n        , top: 1 + ~(o.scale * o.width / 2) + 'px'\n        , transform: o.hwaccel ? 'translate3d(0,0,0)' : ''\n        , opacity: o.opacity\n        , animation: useCssAnimations && addAnimation(o.opacity, o.trail, start + i * o.direction, o.lines) + ' ' + 1 / o.speed + 's linear infinite'\n        })\n\n        if (o.shadow) ins(seg, css(fill('#000', '0 0 4px #000'), {top: '2px'}))\n        ins(el, ins(seg, fill(getColor(o.color, i), '0 0 1px rgba(0,0,0,.1)')))\n      }\n      return el\n    }\n\n    /**\n     * Internal method that adjusts the opacity of a single line.\n     * Will be overwritten in VML fallback mode below.\n     */\n  , opacity: function (el, i, val) {\n      if (i < el.childNodes.length) el.childNodes[i].style.opacity = val\n    }\n\n  })\n\n\n  function initVML () {\n\n    /* Utility function to create a VML tag */\n    function vml (tag, attr) {\n      return createEl('<' + tag + ' xmlns=\"urn:schemas-microsoft.com:vml\" class=\"spin-vml\">', attr)\n    }\n\n    // No CSS transforms but VML support, add a CSS rule for VML elements:\n    sheet.addRule('.spin-vml', 'behavior:url(#default#VML)')\n\n    Spinner.prototype.lines = function (el, o) {\n      var r = o.scale * (o.length + o.width)\n        , s = o.scale * 2 * r\n\n      function grp () {\n        return css(\n          vml('group', {\n            coordsize: s + ' ' + s\n          , coordorigin: -r + ' ' + -r\n          })\n        , { width: s, height: s }\n        )\n      }\n\n      var margin = -(o.width + o.length) * o.scale * 2 + 'px'\n        , g = css(grp(), {position: 'absolute', top: margin, left: margin})\n        , i\n\n      function seg (i, dx, filter) {\n        ins(\n          g\n        , ins(\n            css(grp(), {rotation: 360 / o.lines * i + 'deg', left: ~~dx})\n          , ins(\n              css(\n                vml('roundrect', {arcsize: o.corners})\n              , { width: r\n                , height: o.scale * o.width\n                , left: o.scale * o.radius\n                , top: -o.scale * o.width >> 1\n                , filter: filter\n                }\n              )\n            , vml('fill', {color: getColor(o.color, i), opacity: o.opacity})\n            , vml('stroke', {opacity: 0}) // transparent stroke to fix color bleeding upon opacity change\n            )\n          )\n        )\n      }\n\n      if (o.shadow)\n        for (i = 1; i <= o.lines; i++) {\n          seg(i, -2, 'progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)')\n        }\n\n      for (i = 1; i <= o.lines; i++) seg(i)\n      return ins(el, g)\n    }\n\n    Spinner.prototype.opacity = function (el, i, val, o) {\n      var c = el.firstChild\n      o = o.shadow && o.lines || 0\n      if (c && i + o < c.childNodes.length) {\n        c = c.childNodes[i + o]; c = c && c.firstChild; c = c && c.firstChild\n        if (c) c.opacity = val\n      }\n    }\n  }\n\n  if (typeof document !== 'undefined') {\n    sheet = (function () {\n      var el = createEl('style', {type : 'text/css'})\n      ins(document.getElementsByTagName('head')[0], el)\n      return el.sheet || el.styleSheet\n    }())\n\n    var probe = css(createEl('group'), {behavior: 'url(#default#VML)'})\n\n    if (!vendor(probe, 'transform') && probe.adj) initVML()\n    else useCssAnimations = vendor(probe, 'animation')\n  }\n\n  return Spinner\n\n}));\n","L.SpinMapMixin = {\n    spin: function (state, options) {\n        if (!!state) {\n            // start spinning !\n            if (!this._spinner) {\n                this._spinner = new Spinner(options).spin(this._container);\n                this._spinning = 0;\n            }\n            this._spinning++;\n        }\n        else {\n            this._spinning--;\n            if (this._spinning <= 0) {\n                // end spinning !\n                if (this._spinner) {\n                    this._spinner.stop();\n                    this._spinner = null;\n                }\n            }\n        }\n    }\n};\n\nL.Map.include(L.SpinMapMixin);\n\nL.Map.addInitHook(function () {\n    this.on('layeradd', function (e) {\n        // If added layer is currently loading, spin !\n        if (e.layer.loading) this.spin(true);\n        if (typeof e.layer.on != 'function') return;\n        e.layer.on('data:loading', function () { this.spin(true); }, this);\n        e.layer.on('data:loaded',  function () { this.spin(false); }, this);\n    }, this);\n    this.on('layerremove', function (e) {\n        // Clean-up\n        if (e.layer.loading) this.spin(false);\n        if (typeof e.layer.on != 'function') return;\n        e.layer.off('data:loaded');\n        e.layer.off('data:loading');\n    }, this);\n});\n"]}}]